!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{bBuA:function(t,i,a){"use strict";a.r(i),a.d(i,"HttpLoaderFactory",function(){return Qe}),a.d(i,"ReportModule",function(){return He});var r=a("ofXK"),l=a("3Pt+"),o=a("JqCM"),c=a("ZOsW"),u=a("jcQU"),s=a("1kSV"),d=a("uF4Q"),g=a("0jTc"),h=a("SRvG"),b=a("ed8r"),p=a("QYJQ"),f=a("tk/3"),m=a("sYmb"),v=a("mqiu"),y=a("Pk9d"),S=a("cZdB"),D=a("GJ+o"),w=a("4SUy"),C=a("hXFv"),k=a("QUNt"),x=a("z+xu"),I=a("ZwAT"),B=a("0hV+"),R=a("tyNb"),M=a("mrSG"),A=a("fXoL"),N=a("0go6"),T=a("h9f+"),U=["grid"];function O(e,t){if(1&e&&A.Kc(0),2&e){var n=t.$implicit,i=A.gc();A.Mc(" ",i.NO(n.index)," ")}}function E(e,t){1&e&&A.Kc(0),2&e&&A.Mc("",t.$implicit.qty," kg")}var L,F=((L=function(){function t(n,i){e(this,t),this.makeGlueService=n,this.buildingUserService=i,this.pageSettings={pageCount:20,pageSizes:!0,pageSize:10}}return n(t,[{key:"ngOnInit",value:function(){this.filterSettings={type:"Excel"},this.toolbarOptions=["Excel Export","Search"],this.loadData()}},{key:"toolbarClick",value:function(e){switch(e.item.text){case"Excel Export":this.grid.excelExport()}}},{key:"getUsers",value:function(){var e=this;return new Promise(function(t,n){e.buildingUserService.getAllUsers(1,1e3).subscribe(function(n){var i=n.result.map(function(e){return{ID:e.ID,EmployeeID:e.EmployeeID,Email:e.Email}});e.users=i,t(!0)},function(e){n(!1)})})}},{key:"username",value:function(e){var t;return(null===(t=this.users.find(function(t){return t.ID===e}))||void 0===t?void 0:t.EmployeeID)||"#N/A"}},{key:"loadData",value:function(){return Object(M.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getUsers();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.deliveredHistory();case 6:e.next=10;break;case 8:e.prev=8,e.t1=e.catch(0);case 10:case"end":return e.stop()}},e,this,[[0,8]])}))}},{key:"deliveredHistory",value:function(){var e=this;this.makeGlueService.deliveredHistory().subscribe(function(t){e.data=t.map(function(t){return{glueName:t.glueName,buildingName:t.buildingName,qty:t.qty,deliveredBy:e.username(t.createdBy),createdDate:new Date(t.createdDate)}})})}},{key:"NO",value:function(e){return(this.grid.pageSettings.currentPage-1)*this.grid.pageSettings.pageSize+Number(e)+1}}]),t}()).\u0275fac=function(e){return new(e||L)(A.Mb(N.a),A.Mb(T.a))},L.\u0275cmp=A.Gb({type:L,selectors:[["app-delivered-history"]],viewQuery:function(e,t){var n;1&e&&A.Qc(U,!0),2&e&&A.xc(n=A.dc())&&(t.grid=n.first)},features:[A.yb([D.g])],decls:15,vars:6,consts:[[1,"card"],[1,"card-body"],["gridLines","Both","allowFiltering","true","allowPaging","true","allowResizing","true","showColumnMenu","true",3,"dataSource","allowSorting","allowExcelExport","filterSettings","pageSettings","toolbar","toolbarClick"],["grid",""],["field","#","textAlign","Center","headerText","#","width","40"],["template",""],["field","glueName","textAlign","Center","headerText","Glue","width","100"],["field","buildingName","textAlign","Center","headerText","Line","width","130"],["field","qty","textAlign","Center","headerText","Qty","width","100"],["field","deliveredBy","textAlign","Center","headerText","Delivered By","width","150"],["field","createdDate","textAlign","Center","type","dateTime","format","d MMM, yyyy HH:mm","headerText","Delivered Date","width","150"]],template:function(e,t){1&e&&(A.Sb(0,"div",0),A.Sb(1,"div",1),A.Sb(2,"ejs-grid",2,3),A.cc("toolbarClick",function(e){return t.toolbarClick(e)}),A.Sb(4,"e-columns"),A.Sb(5,"e-column",4),A.Ic(6,O,1,1,"ng-template",null,5,A.Jc),A.Rb(),A.Nb(8,"e-column",6),A.Nb(9,"e-column",7),A.Sb(10,"e-column",8),A.Ic(11,E,1,1,"ng-template",null,5,A.Jc),A.Rb(),A.Nb(13,"e-column",9),A.Nb(14,"e-column",10),A.Rb(),A.Rb(),A.Rb(),A.Rb()),2&e&&(A.zb(2),A.mc("dataSource",t.data)("allowSorting",!0)("allowExcelExport",!0)("filterSettings",t.filterSettings)("pageSettings",t.pageSettings)("toolbar",t.toolbarOptions))},directives:[D.j,g.d,k.d,k.b,D.e,D.b,g.c,k.c,k.a,D.d,D.a],styles:[""]}),L),P=a("H552"),j=a("XNiG"),J=a("HJFG"),z=a("vrRs"),G=a("wsp1"),K=["ingredientinforeportGrid"];function Q(e,t){if(1&e){var n=A.Tb();A.Sb(0,"div",5),A.Sb(1,"ejs-dropdownlist",23,24),A.cc("ngModelChange",function(e){return A.Bc(n),A.gc().buildingID=e})("filtering",function(e){return A.Bc(n),A.gc().onFilteringBuilding(e)})("change",function(e){return A.Bc(n),A.gc().onChangeBuilding(e)}),A.Rb(),A.Rb()}if(2&e){var i=A.gc();A.zb(1),A.mc("dataSource",i.buildings)("fields",i.fieldsBuildings)("allowFiltering",!0)("ngModel",i.buildingID)}}function _(e,t){1&e&&(A.Kc(0),A.hc(1,"translate")),2&e&&A.Mc(" ",A.ic(1,1,"TIME_LABEL")," ")}function q(e,t){1&e&&(A.Kc(0),A.hc(1,"date")),2&e&&A.Mc(" ",A.jc(1,1,t.$implicit.createdTime,"dd MMM, yyyy , HH:mm")," ")}function H(e,t){1&e&&(A.Kc(0),A.hc(1,"translate")),2&e&&A.Mc(" ",A.ic(1,1,"SUPPLIER")," ")}function W(e,t){1&e&&(A.Kc(0),A.hc(1,"translate")),2&e&&A.Mc(" ",A.ic(1,1,"INGREDIENT_LABEL")," ")}function $(e,t){1&e&&(A.Kc(0),A.hc(1,"translate")),2&e&&A.Mc(" ",A.ic(1,1,"PRODUCTION_DATE_LABEL")," ")}function V(e,t){1&e&&(A.Kc(0),A.hc(1,"date")),2&e&&A.Mc(" ",A.jc(1,1,t.$implicit.manufacturingDate,"dd MMM, yyyy")," ")}function Y(e,t){1&e&&(A.Kc(0),A.hc(1,"translate")),2&e&&A.Mc(" ",A.ic(1,1,"BATCH_LABEL")," ")}function X(e,t){1&e&&(A.Kc(0),A.hc(1,"translate")),2&e&&A.Mc(" ",A.ic(1,1,"EXPIRED_DATE_LABEL")," ")}function Z(e,t){1&e&&(A.Kc(0),A.hc(1,"date")),2&e&&A.Mc(" ",A.jc(1,1,t.$implicit.expiredTime,"dd MMM, yyyy")," ")}function ee(e,t){1&e&&(A.Kc(0),A.hc(1,"translate")),2&e&&A.Mc(" ",A.ic(1,1,"QTY_LABEL")," ")}function te(e,t){1&e&&A.Kc(0),2&e&&A.Mc(" ",t.$implicit.qty," Kg ")}function ne(e,t){1&e&&(A.Kc(0),A.hc(1,"translate")),2&e&&A.Mc(" ",A.ic(1,1,"CONSUMPTION_LABEL")," ")}function ie(e,t){1&e&&A.Kc(0),2&e&&A.Mc(" ",t.$implicit.consumption," Kg ")}var ae,re=((ae=function(){function t(n,i,a,r,l,o){var c=this;e(this,t),this.modalService=n,this.alertify=i,this.datePipe=a,this.ingredientService=r,this.buildingService=l,this.startDate=new Date,this.endDate=new Date,this.role=JSON.parse(localStorage.getItem("level")),this.building=JSON.parse(localStorage.getItem("building")),this.toolbarOptions=["Search","ExcelExport"],this.pageSettings={pageCount:20,pageSizes:!0,pageSize:20},this.filterSettings={type:"Excel"},this.fieldsBuildings={text:"name",value:"id"},this.data=[],this.ingredients=[],this.IsAdmin=!1,this.subject=new j.a,this.subscription=[],this.onFilteringBuilding=function(e){var t=new P.h;t=""!==e.text?t.where("name","contains",e.text,!0):t,e.updateData(c.buildings,t)}}return n(t,[{key:"ngOnInit",value:function(){[1,2].includes(this.role.id)?(this.IsAdmin=!0,this.getBuilding()):this.buildingName=this.building.name}},{key:"onChangeBuilding",value:function(e){this.buildingID=e.itemData.id,this.buildingName=e.itemData.name,localStorage.setItem("buildingID",e.itemData.id),this.searchWithBuilding(this.startDate,this.endDate)}},{key:"getBuilding",value:function(){var e=this;this.buildingService.getBuildings().subscribe(function(t){return Object(M.a)(e,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.buildings=t.filter(function(e){return 2===e.level});case 1:case"end":return e.stop()}},e,this)}))})}},{key:"resetSearch",value:function(){this.searchText=null}},{key:"toolbarClick",value:function(e){switch(e.item.text){case"Excel Export":this.ingredientinforeportGrid.excelExport()}}},{key:"getIngredientInfoReport",value:function(){var e=this;this.ingredientService.getAllIngredientInfo().subscribe(function(t){e.data=t})}},{key:"getIngredientInfoReportByBuilding",value:function(){var e=this;this.ingredientService.getAllIngredientInfoReportByBuildingName(this.buildingName).subscribe(function(t){e.data=t})}},{key:"startDateOnchange",value:function(e){this.startDate=e.value,this.searchWithBuilding(this.startDate,this.endDate)}},{key:"endDateOnchange",value:function(e){this.endDate=e.value,this.searchWithBuilding(this.startDate,this.endDate)}},{key:"onClickDefault",value:function(){this.startDate=new Date,this.endDate=new Date,this.searchWithBuilding(this.startDate,this.endDate)}},{key:"searchWithBuilding",value:function(e,t){var n=this;this.ingredientService.searchInventoryByBuildingName(e.toDateString(),t.toDateString(),this.buildingName).subscribe(function(e){n.data=e})}}]),t}()).\u0275fac=function(e){return new(e||ae)(A.Mb(s.b),A.Mb(J.a),A.Mb(r.d),A.Mb(z.a),A.Mb(G.a),A.Mb(r.e))},ae.\u0275cmp=A.Gb({type:ae,selectors:[["app-inventory"]],viewQuery:function(e,t){var n;1&e&&A.Qc(K,!0),2&e&&A.xc(n=A.dc())&&(t.ingredientinforeportGrid=n.first)},features:[A.yb([r.d,r.e])],decls:55,vars:14,consts:[[1,"card"],[1,"card-body"],[1,"row"],[1,"col-md-1"],[1,"font-weight-bold"],[1,"col-md-2"],[3,"value","ngModel","change","ngModelChange"],["class","col-md-2",4,"ngIf"],[1,"btn","btn-sm","btn-default",3,"click"],[1,"fa","fa-times"],[1,"col-md-12"],["allowFiltering","true","showColumnMenu","true","allowPaging","true","gridLines","Both",3,"dataSource","allowExcelExport","allowSorting","filterSettings","toolbar","pageSettings","toolbarClick"],["ingredientinforeportGrid",""],["field","createdTime","textAlign","Center","headerText","Time","width","150"],["headerTemplate",""],["template",""],["field","supplierName","textAlign","Center","headerText","Supplier","width","100"],["field","name","textAlign","Center","headerText","Ingredient","width","100"],["field","manufacturingDate","textAlign","Center","headerText","Production date","width","130"],["field","batch","textAlign","Center","headerText","Batch","width","100"],["field","expiredTime","textAlign","Center","headerText","Expired Date","width","130"],["field","qty","textAlign","Center","headerText","Recieve Qty (Kg)","width","130"],["field","consumption","textAlign","Center","headerText","Consumption","width","100"],["placeholder","Select a building",3,"dataSource","fields","allowFiltering","ngModel","ngModelChange","filtering","change"],["modelNameDropdownlist",""]],template:function(e,t){1&e&&(A.Sb(0,"div",0),A.Sb(1,"div",1),A.Sb(2,"div",2),A.Sb(3,"div",3),A.Sb(4,"div",4),A.Kc(5),A.hc(6,"translate"),A.Rb(),A.Rb(),A.Sb(7,"div",5),A.Sb(8,"ejs-datepicker",6),A.cc("change",function(e){return t.startDateOnchange(e)})("ngModelChange",function(e){return t.startDate=e}),A.Rb(),A.Rb(),A.Sb(9,"div",5),A.Sb(10,"ejs-datepicker",6),A.cc("change",function(e){return t.endDateOnchange(e)})("ngModelChange",function(e){return t.endDate=e}),A.Rb(),A.Rb(),A.Ic(11,Q,3,4,"div",7),A.Sb(12,"div",5),A.Sb(13,"button",8),A.cc("click",function(){return t.onClickDefault()}),A.Nb(14,"i",9),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Sb(15,"div",1),A.Sb(16,"div",2),A.Sb(17,"div",10),A.Sb(18,"ejs-grid",11,12),A.cc("toolbarClick",function(e){return t.toolbarClick(e)}),A.Sb(20,"e-columns"),A.Sb(21,"e-column",13),A.Ic(22,_,2,3,"ng-template",null,14,A.Jc),A.Ic(24,q,2,4,"ng-template",null,15,A.Jc),A.Rb(),A.Sb(26,"e-column",16),A.Ic(27,H,2,3,"ng-template",null,14,A.Jc),A.Rb(),A.Sb(29,"e-column",17),A.Ic(30,W,2,3,"ng-template",null,14,A.Jc),A.Rb(),A.Sb(32,"e-column",18),A.Ic(33,$,2,3,"ng-template",null,14,A.Jc),A.Ic(35,V,2,4,"ng-template",null,15,A.Jc),A.Rb(),A.Sb(37,"e-column",19),A.Ic(38,Y,2,3,"ng-template",null,14,A.Jc),A.Rb(),A.Sb(40,"e-column",20),A.Ic(41,X,2,3,"ng-template",null,14,A.Jc),A.Ic(43,Z,2,4,"ng-template",null,15,A.Jc),A.Rb(),A.Sb(45,"e-column",21),A.Ic(46,ee,2,3,"ng-template",null,14,A.Jc),A.Ic(48,te,1,1,"ng-template",null,15,A.Jc),A.Rb(),A.Sb(50,"e-column",22),A.Ic(51,ne,2,3,"ng-template",null,14,A.Jc),A.Ic(53,ie,1,1,"ng-template",null,15,A.Jc),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Rb()),2&e&&(A.zb(5),A.Mc("",A.ic(6,12,"FILTER_LABEL"),":"),A.zb(3),A.mc("value",t.startDate)("ngModel",t.startDate),A.zb(2),A.mc("value",t.endDate)("ngModel",t.endDate),A.zb(1),A.mc("ngIf",t.IsAdmin),A.zb(7),A.mc("dataSource",t.data)("allowExcelExport",!0)("allowSorting",!0)("filterSettings",t.filterSettings)("toolbar",t.toolbarOptions)("pageSettings",t.pageSettings))},directives:[b.a,l.g,l.j,r.n,D.j,g.d,k.d,k.b,D.e,D.b,g.c,k.c,k.a,D.d,D.a,u.c],pipes:[m.c,r.d],styles:[".search-hero[_ngcontent-%COMP%]{max-width:500px;padding-bottom:50px;margin:auto}.form-control[_ngcontent-%COMP%]{box-shadow:0 10px 40px 0 #b0c1d9}.form-control[_ngcontent-%COMP%]::-moz-placeholder{font-family:FontAwesome}.form-control[_ngcontent-%COMP%]::placeholder{font-family:FontAwesome}"]}),ae),le=a("0WEV"),oe=["cloneModal"],ce=["planForm"],ue=["grid"];function se(e,t){if(1&e&&(A.Kc(0),A.hc(1,"date")),2&e){var n=t.$implicit;A.Mc(" ","0001-01-01T00:00:00"===n.mixingDate?"N/A":A.jc(1,1,n.mixingDate,"dd/MM/yyyy")," ")}}function de(e,t){1&e&&A.Kc(0),2&e&&A.Mc("",t.$implicit.percentage," %")}var ge,he=JSON.parse(localStorage.getItem("level")),be=((ge=function(){function t(n,i,a,r,l,o,c){var u=this;e(this,t),this.route=n,this.alertify=i,this.modalService=a,this.planService=r,this.datePipe=l,this.spinner=o,this.buildingService=c,this.searchSettings={hierarchyMode:"Parent"},this.fieldsBuildings={text:"name",value:"id"},this.sortSettings={columns:[{field:"percentage",direction:"Descending"}]},this.queryCellInfoEvent=function(e){e.data.percentage>0&&(e.cell.style.backgroundColor="#FFFF66")},this.onFilteringBuilding=function(e){var t=new P.h;t=""!==e.text?t.where("name","contains",e.text,!0):t,e.updateData(u.buildings,t)},this.buildingID=+localStorage.getItem("buildingID")}return n(t,[{key:"dataBound",value:function(){this.grid.autoFitColumns()}},{key:"ngOnInit",value:function(){var e=this;this.startDate=new Date,this.endDate=new Date,this.role=he,this.level=JSON.parse(localStorage.getItem("level")).level,this.pageSettings={pageCount:20,pageSizes:["All",100],pageSize:100},this.toolbarOptions=["ExcelExport","Search"],this.getBuilding(0===this.buildingID?function(){e.alertify.message("Please select a building!",!0)}:function(){e.consumptionByLineCase1()})}},{key:"headerCellInfo",value:function(e){"totalConsumption"===e.cell.column.field&&new y.a({content:"Total Consumption (kg)"}).appendTo(e.node),"realConsumption"===e.cell.column.field&&new y.a({content:"Real Consumption (g) pr."}).appendTo(e.node),"mixingDate"===e.cell.column.field&&new y.a({content:"Mixing Date Of Glue"}).appendTo(e.node)}},{key:"onChangeBuilding",value:function(e){this.buildingID=e.itemData.id,localStorage.setItem("buildingID",e.itemData.id),this.consumptionByLineCase1()}},{key:"onSelectBuilding",value:function(e){this.buildingID=e.itemData.id,localStorage.setItem("buildingID",e.itemData.id),this.consumptionByLineCase1()}},{key:"getBuilding",value:function(e){var t=this;this.buildingService.getBuildings().subscribe(function(n){return Object(M.a)(t,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.buildings=n.filter(function(e){return 2===e.level}),e();case 1:case"end":return t.stop()}},t,this)}))})}},{key:"consumptionByLineCase1",value:function(){var e=this;this.planService.consumptionByLineCase1(this.buildingID,this.startDate,this.endDate).subscribe(function(t){e.data=t})}},{key:"startDateOnchange",value:function(e){e.isInteracted&&(this.startDate=e.value,this.consumptionByLineCase1())}},{key:"endDateOnchange",value:function(e){e.isInteracted&&(this.endDate=e.value,this.consumptionByLineCase1())}},{key:"onClickDefault",value:function(){this.startDate=new Date,this.endDate=new Date,this.consumptionByLineCase1()}},{key:"toolbarClick",value:function(e){-1!==e.item.id.indexOf("excelexport")&&this.reportConsumptionCase1()}},{key:"tooltip",value:function(e){return e?e.join("<br>"):""}},{key:"reportConsumptionCase1",value:function(){var e=this;Math.floor((this.endDate.getTime()-this.startDate.getTime())/864e5)>31?this.alertify.error("Ch\u1ec9 \u0111\u01b0\u1ee3c xu\u1ea5t d\u1eef li\u1ec7u b\xe1o c\xe1o trong 30 ng\xe0y!!!<br>The report data can only be exported for 30 days!!!",!0):(this.spinner.show(),this.planService.reportConsumptionCase1(this.buildingID,this.startDate,this.endDate).subscribe(function(t){new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});var n=window.URL.createObjectURL(t),i=document.createElement("a");i.href=n;var a=new Date;i.download="".concat(a.getFullYear()).concat(a.getMonth()).concat(a.getDay(),"_Consumption1.xlsx"),i.click(),e.spinner.hide()}))}}]),t}()).\u0275fac=function(e){return new(e||ge)(A.Mb(R.a),A.Mb(J.a),A.Mb(s.b),A.Mb(le.a),A.Mb(r.d),A.Mb(o.c),A.Mb(G.a))},ge.\u0275cmp=A.Gb({type:ge,selectors:[["app-consumption-1"]],viewQuery:function(e,t){var n;1&e&&(A.Qc(oe,!0),A.Qc(ce,!0),A.Qc(ue,!0)),2&e&&(A.xc(n=A.dc())&&(t.cloneModal=n.first),A.xc(n=A.dc())&&(t.orderForm=n.first),A.xc(n=A.dc())&&(t.grid=n.first))},decls:44,vars:21,consts:[["type","square-jelly-box","size","medium",3,"fullScreen"],[1,"loading"],[1,"row","pt-2"],[1,"col-md-12"],[1,"card"],[1,"card-body","p-0"],[1,"row","my-3"],[1,"row"],[1,"col-md-1"],[1,"font-weight-bold"],[1,"col-md-3"],[3,"value","ngModel","change","ngModelChange"],[1,"col-md-2"],["placeholder","Select a building",3,"dataSource","fields","allowFiltering","value","filtering","change"],["modelNameDropdownlist",""],[1,"btn","btn-sm","btn-default",3,"click"],[1,"fa","fa-times"],["gridLines","Both",3,"dataSource","searchSettings","showColumnMenu","allowPaging","allowSorting","allowResizing","toolbar","sortSettings","pageSettings","dataBound","queryCellInfo","headerCellInfo","toolbarClick"],["grid",""],["field","modelName","headerText","Model Name","width","100","textAlign","Center"],["field","modelNo","headerText","Model No.","width","100","textAlign","Center"],["field","articleNo","headerText","Article No.","width","100","textAlign","Center"],["field","process","headerText","Process","width","100","textAlign","Center"],["field","glue","headerText","Glue","width","100","textAlign","Center"],["field","std","headerText","Std.(g)","width","100","textAlign","Center"],["field","mixingDate","headerText","Mixing Date","type","date","format","dd/MM/yyyy","width","100","textAlign","Center"],["template",""],["field","line","headerText","Line","width","100","textAlign","Center"],["field","qty","headerText","Qty","width","100","textAlign","Center"],["field","totalConsumption","headerText","\u2211 Con. (kg)","width","100","textAlign","Center"],["field","realConsumption","headerText","Real Con. (g) pr.","width","100","textAlign","Center"],["field","diff","headerText","Diff.","width","100","textAlign","Center"],["field","percentage","headerText","%","width","100","textAlign","Center"]],template:function(e,t){1&e&&(A.Sb(0,"ngx-spinner",0),A.Sb(1,"p",1),A.Kc(2,"Loading data..."),A.Rb(),A.Rb(),A.Sb(3,"div",2),A.Sb(4,"div",3),A.Sb(5,"div",4),A.Sb(6,"div",5),A.Sb(7,"div",6),A.Sb(8,"div",3),A.Sb(9,"div",7),A.Sb(10,"div",8),A.Sb(11,"div",9),A.Kc(12),A.hc(13,"translate"),A.Rb(),A.Rb(),A.Sb(14,"div",10),A.Sb(15,"ejs-datepicker",11),A.cc("change",function(e){return t.startDateOnchange(e)})("ngModelChange",function(e){return t.startDate=e}),A.Rb(),A.Rb(),A.Sb(16,"div",10),A.Sb(17,"ejs-datepicker",11),A.cc("change",function(e){return t.endDateOnchange(e)})("ngModelChange",function(e){return t.endDate=e}),A.Rb(),A.Rb(),A.Sb(18,"div",12),A.Sb(19,"ejs-dropdownlist",13,14),A.cc("filtering",function(e){return t.onFilteringBuilding(e)})("change",function(e){return t.onChangeBuilding(e)}),A.Rb(),A.Rb(),A.Sb(21,"div",12),A.Sb(22,"button",15),A.cc("click",function(){return t.onClickDefault()}),A.Nb(23,"i",16),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Sb(24,"ejs-grid",17,18),A.cc("dataBound",function(){return t.dataBound()})("queryCellInfo",function(e){return t.queryCellInfoEvent(e)})("headerCellInfo",function(e){return t.headerCellInfo(e)})("toolbarClick",function(e){return t.toolbarClick(e)}),A.Sb(26,"e-columns"),A.Nb(27,"e-column",19),A.Nb(28,"e-column",20),A.Nb(29,"e-column",21),A.Nb(30,"e-column",22),A.Nb(31,"e-column",23),A.Nb(32,"e-column",24),A.Sb(33,"e-column",25),A.Ic(34,se,2,4,"ng-template",null,26,A.Jc),A.Rb(),A.Nb(36,"e-column",27),A.Nb(37,"e-column",28),A.Nb(38,"e-column",29),A.Nb(39,"e-column",30),A.Nb(40,"e-column",31),A.Sb(41,"e-column",32),A.Ic(42,de,1,1,"ng-template",null,26,A.Jc),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Rb()),2&e&&(A.mc("fullScreen",!1),A.zb(12),A.Mc("",A.ic(13,19,"FILTER_LABEL"),":"),A.zb(3),A.mc("value",t.startDate)("ngModel",t.startDate),A.zb(2),A.mc("value",t.endDate)("ngModel",t.endDate),A.zb(2),A.mc("dataSource",t.buildings)("fields",t.fieldsBuildings)("allowFiltering",!0)("value",t.buildingID),A.zb(5),A.mc("dataSource",t.data)("searchSettings",t.searchSettings)("showColumnMenu",!0)("allowPaging",!0)("allowSorting",!0)("allowResizing",!0)("toolbar",t.toolbarOptions)("sortSettings",t.sortSettings)("pageSettings",t.pageSettings))},directives:[o.a,b.a,l.g,l.j,u.c,D.j,g.d,k.d,k.b,D.e,D.b,g.c,k.c,k.a,D.d,D.a],pipes:[m.c,r.d],styles:[".bgcolor[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#ff6!important}"]}),ge),pe=["cloneModal"],fe=["planForm"],me=["grid"];function ve(e,t){if(1&e&&(A.Kc(0),A.hc(1,"date")),2&e){var n=t.$implicit;A.Mc(" ","0001-01-01T00:00:00"===n.mixingDate?"N/A":A.jc(1,1,n.mixingDate,"dd/MM/yyyy")," ")}}function ye(e,t){1&e&&A.Kc(0),2&e&&A.Mc("",t.$implicit.percentage," %")}var Se,De=JSON.parse(localStorage.getItem("level")),we=((Se=function(){function t(n,i,a,r,l,o,c){var u=this;e(this,t),this.route=n,this.alertify=i,this.modalService=a,this.planService=r,this.datePipe=l,this.spinner=o,this.buildingService=c,this.searchSettings={hierarchyMode:"Parent"},this.fieldsBuildings={text:"name",value:"id"},this.queryCellInfoEvent=function(e){var t=e.data,n=["modelName","modelNo","articleNo","process","qty","line"];n.includes(e.column.field)&&(e.rowSpan=u.data.filter(function(e){return e.id===t.id&&e.modelName===t.modelName&&e.modelNo===t.modelNo&&e.articleNo===t.articleNo&&e.process===t.process&&e.line===t.line&&e.dueDate===t.dueDate&&e.qty===t.qty}).length),n.includes(e.column.field)||t.percentage>0&&(e.cell.style.backgroundColor="#FFFF66")},this.onFilteringBuilding=function(e){var t=new P.h;t=""!==e.text?t.where("name","contains",e.text,!0):t,e.updateData(u.buildings,t)},this.buildingID=+localStorage.getItem("buildingID")}return n(t,[{key:"dataBound",value:function(){}},{key:"ngOnInit",value:function(){var e=this;this.role=De,this.startDate=new Date,this.endDate=new Date,this.level=JSON.parse(localStorage.getItem("level")).level,this.gridConfig(),this.getBuilding(0===this.buildingID?function(){e.alertify.message("Please select a building!",!0)}:function(){e.consumptionByLineCase2()})}},{key:"gridConfig",value:function(){this.pageSettings={pageCount:20,pageSizes:["All",100],pageSize:100},this.toolbarOptions=["ExcelExport","Search"]}},{key:"onChangeBuilding",value:function(e){this.buildingID=e.itemData.id,localStorage.setItem("buildingID",e.itemData.id),this.consumptionByLineCase2()}},{key:"getBuilding",value:function(e){var t=this;this.buildingService.getBuildings().subscribe(function(n){return Object(M.a)(t,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.buildings=n.filter(function(e){return 2===e.level}),e();case 1:case"end":return t.stop()}},t,this)}))})}},{key:"consumptionByLineCase2",value:function(){var e=this;this.planService.consumptionByLineCase2(this.buildingID,this.startDate,this.endDate).subscribe(function(t){e.data=t})}},{key:"startDateOnchange",value:function(e){e.isInteracted&&(this.startDate=e.value,this.consumptionByLineCase2())}},{key:"endDateOnchange",value:function(e){e.isInteracted&&(this.endDate=e.value,this.consumptionByLineCase2())}},{key:"onClickDefault",value:function(){this.startDate=new Date,this.endDate=new Date,this.consumptionByLineCase2()}},{key:"toolbarClick",value:function(e){-1!==e.item.id.indexOf("excelexport")&&this.reportConsumptionCase2()}},{key:"tooltip",value:function(e){return e?e.join("<br>"):""}},{key:"reportConsumptionCase2",value:function(){var e=this;Math.floor((this.endDate.getTime()-this.startDate.getTime())/864e5)>31?this.alertify.error("Ch\u1ec9 \u0111\u01b0\u1ee3c xu\u1ea5t d\u1eef li\u1ec7u b\xe1o c\xe1o trong 30 ng\xe0y!!!<br>The report data can only be exported for 30 days!!!",!0):(this.spinner.show(),this.planService.reportConsumptionCase2(this.buildingID,this.startDate,this.endDate).subscribe(function(t){new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});var n=window.URL.createObjectURL(t),i=document.createElement("a");i.href=n;var a=new Date;i.download="".concat(a.getFullYear()).concat(a.getMonth()).concat(a.getDay(),"_Consumption2.xlsx"),i.click(),e.spinner.hide()}))}}]),t}()).\u0275fac=function(e){return new(e||Se)(A.Mb(R.a),A.Mb(J.a),A.Mb(s.b),A.Mb(le.a),A.Mb(r.d),A.Mb(o.c),A.Mb(G.a))},Se.\u0275cmp=A.Gb({type:Se,selectors:[["app-consumption-2"]],viewQuery:function(e,t){var n;1&e&&(A.Qc(pe,!0),A.Qc(fe,!0),A.Qc(me,!0)),2&e&&(A.xc(n=A.dc())&&(t.cloneModal=n.first),A.xc(n=A.dc())&&(t.orderForm=n.first),A.xc(n=A.dc())&&(t.grid=n.first))},decls:43,vars:16,consts:[["type","square-jelly-box","size","medium",3,"fullScreen"],[1,"loading"],[1,"row","pt-2"],[1,"col-md-12"],[1,"card"],[1,"card-body","p-0"],[1,"row","my-3"],[1,"row"],[1,"col-md-1"],[1,"font-weight-bold"],[1,"col-md-3"],[3,"value","ngModel","change","ngModelChange"],[1,"col-md-2"],["placeholder","Select a building",3,"dataSource","fields","allowFiltering","value","filtering","change"],["modelNameDropdownlist",""],[1,"btn","btn-sm","btn-default",3,"click"],[1,"fa","fa-times"],["showColumnMenu","true","allowPaging","true","allowResizing","true","gridLines","Both",3,"dataSource","searchSettings","toolbar","pageSettings","dataBound","queryCellInfo","toolbarClick"],["grid",""],["field","line","headerText","Line","width","80","textAlign","Center"],["field","modelName","headerText","ModelName","width","120","textAlign","Center"],["field","modelNo","headerText","ModelNo","width","100","textAlign","Center"],["field","articleNo","headerText","ArticleNo","width","100","textAlign","Center"],["field","process","headerText","Process","width","100","textAlign","Center"],["field","qty","headerText","Qty","width","100","textAlign","Center"],["field","glue","headerText","Glue","width","150","textAlign","Center"],["field","std","headerText","Std.(g)","width","100","textAlign","Center"],["field","mixingDate","headerText","Mixing Date","type","date","format","dd/MM/yyyy","width","100","textAlign","Center"],["template",""],["field","realConsumption","headerText","Real Consumption (g) pr.","width","100","textAlign","Center"],["field","diff","headerText","Diff","width","100","textAlign","Center"],["field","percentage","headerText","%","width","100","textAlign","Center"]],template:function(e,t){1&e&&(A.Sb(0,"ngx-spinner",0),A.Sb(1,"p",1),A.Kc(2,"Loading data..."),A.Rb(),A.Rb(),A.Sb(3,"div",2),A.Sb(4,"div",3),A.Sb(5,"div",4),A.Sb(6,"div",5),A.Sb(7,"div",6),A.Sb(8,"div",3),A.Sb(9,"div",7),A.Sb(10,"div",8),A.Sb(11,"div",9),A.Kc(12),A.hc(13,"translate"),A.Rb(),A.Rb(),A.Sb(14,"div",10),A.Sb(15,"ejs-datepicker",11),A.cc("change",function(e){return t.startDateOnchange(e)})("ngModelChange",function(e){return t.startDate=e}),A.Rb(),A.Rb(),A.Sb(16,"div",10),A.Sb(17,"ejs-datepicker",11),A.cc("change",function(e){return t.endDateOnchange(e)})("ngModelChange",function(e){return t.endDate=e}),A.Rb(),A.Rb(),A.Sb(18,"div",12),A.Sb(19,"ejs-dropdownlist",13,14),A.cc("filtering",function(e){return t.onFilteringBuilding(e)})("change",function(e){return t.onChangeBuilding(e)}),A.Rb(),A.Rb(),A.Sb(21,"div",12),A.Sb(22,"button",15),A.cc("click",function(){return t.onClickDefault()}),A.Nb(23,"i",16),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Sb(24,"ejs-grid",17,18),A.cc("dataBound",function(){return t.dataBound()})("queryCellInfo",function(e){return t.queryCellInfoEvent(e)})("toolbarClick",function(e){return t.toolbarClick(e)}),A.Sb(26,"e-columns"),A.Nb(27,"e-column",19),A.Nb(28,"e-column",20),A.Nb(29,"e-column",21),A.Nb(30,"e-column",22),A.Nb(31,"e-column",23),A.Nb(32,"e-column",24),A.Nb(33,"e-column",25),A.Nb(34,"e-column",26),A.Sb(35,"e-column",27),A.Ic(36,ve,2,4,"ng-template",null,28,A.Jc),A.Rb(),A.Nb(38,"e-column",29),A.Nb(39,"e-column",30),A.Sb(40,"e-column",31),A.Ic(41,ye,1,1,"ng-template",null,28,A.Jc),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Rb()),2&e&&(A.mc("fullScreen",!1),A.zb(12),A.Mc("",A.ic(13,14,"FILTER_LABEL"),":"),A.zb(3),A.mc("value",t.startDate)("ngModel",t.startDate),A.zb(2),A.mc("value",t.endDate)("ngModel",t.endDate),A.zb(2),A.mc("dataSource",t.buildings)("fields",t.fieldsBuildings)("allowFiltering",!0)("value",t.buildingID),A.zb(5),A.mc("dataSource",t.data)("searchSettings",t.searchSettings)("toolbar",t.toolbarOptions)("pageSettings",t.pageSettings))},directives:[o.a,b.a,l.g,l.j,u.c,D.j,g.d,k.d,k.b,D.e,D.b,g.c,k.c,k.a,D.d,D.a],pipes:[m.c,r.d],styles:[".bgcolor[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#ff6!important}"]}),Se),Ce=a("t0UR"),ke=["cloneModal"],xe=["planForm"],Ie=["grid"];function Be(e,t){if(1&e){var n=A.Tb();A.Sb(0,"div",18),A.Sb(1,"div",3),A.Sb(2,"div",19),A.Sb(3,"div",20),A.Sb(4,"div",21),A.Sb(5,"div",22),A.Kc(6),A.hc(7,"translate"),A.Rb(),A.Rb(),A.Sb(8,"div",23),A.Sb(9,"ejs-datepicker",24),A.cc("change",function(e){return A.Bc(n),A.gc().startDateOnchange(e)})("ngModelChange",function(e){return A.Bc(n),A.gc().startDate=e}),A.Rb(),A.Rb(),A.Sb(10,"div",23),A.Sb(11,"ejs-datepicker",24),A.cc("change",function(e){return A.Bc(n),A.gc().endDateOnchange(e)})("ngModelChange",function(e){return A.Bc(n),A.gc().endDate=e}),A.Rb(),A.Rb(),A.Sb(12,"div",25),A.Sb(13,"ejs-dropdownlist",26,27),A.cc("ngModelChange",function(e){return A.Bc(n),A.gc().buildingID=e})("filtering",function(e){return A.Bc(n),A.gc().onFilteringBuilding(e)})("select",function(e){return A.Bc(n),A.gc().onSelectBuilding(e)}),A.Rb(),A.Rb(),A.Sb(15,"div",25),A.Sb(16,"button",28),A.cc("click",function(){return A.Bc(n),A.gc().onClickDefault()}),A.Nb(17,"i",29),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Rb()}if(2&e){var i=A.gc();A.zb(6),A.Mc("",A.ic(7,9,"FILTER_LABEL"),":"),A.zb(3),A.mc("value",i.startDate)("ngModel",i.startDate),A.zb(2),A.mc("value",i.endDate)("ngModel",i.endDate),A.zb(2),A.mc("dataSource",i.buildings)("fields",i.fieldsBuildings)("allowFiltering",!0)("ngModel",i.buildingID)}}function Re(e,t){1&e&&(A.Kc(0),A.hc(1,"translate")),2&e&&A.Mc(" ",A.ic(1,1,"LINE_LABEL")," ")}function Me(e,t){1&e&&A.Kc(0),2&e&&A.Mc(" ",t.$implicit.buildingName," ")}function Ae(e,t){1&e&&(A.Kc(0),A.hc(1,"translate")),2&e&&A.Mc(" ",A.ic(1,1,"BPFC_NAME_LABEL")," ")}function Ne(e,t){1&e&&A.Kc(0),2&e&&A.Mc(" ",t.$implicit.bpfcName," ")}function Te(e,t){if(1&e&&(A.Sb(0,"ejs-tooltip",30),A.Kc(1),A.Rb()),2&e){var n=t.$implicit,i=A.gc();A.mc("content",i.tooltip(n.glues)),A.zb(1),A.Mc(" ",n.bpfcName||"#N/A"," ")}}function Ue(e,t){1&e&&(A.Kc(0),A.hc(1,"translate")),2&e&&A.Mc(" ",A.ic(1,1,"OUTPUT_QUANTITY")," ")}function Oe(e,t){1&e&&(A.Kc(0),A.hc(1,"translate")),2&e&&A.Mc(" ",A.ic(1,1,"DUE_DATE_LABEL")," ")}function Ee(e,t){1&e&&(A.Kc(0),A.hc(1,"date")),2&e&&A.Mc(" ",A.jc(1,1,t.$implicit.dueDate,"dd MMM, yyyy")," ")}function Le(e,t){1&e&&(A.Kc(0),A.hc(1,"translate")),2&e&&A.Mc(" ",A.ic(1,1,"CREATED_DATE_LABEL")," ")}function Fe(e,t){1&e&&(A.Kc(0),A.hc(1,"date")),2&e&&A.Mc(" ",A.jc(1,1,t.$implicit.createdDate,"dd MMM, yyyy HH:mm")," ")}function Pe(e,t){if(1&e){var n=A.Tb();A.Sb(0,"div",31),A.Sb(1,"h4",32),A.Nb(2,"i",33),A.Kc(3," Clone Work Plan "),A.Rb(),A.Sb(4,"button",34),A.cc("click",function(){return t.$implicit.dismiss("Cross click")}),A.Sb(5,"span",35),A.Kc(6,"\xd7"),A.Rb(),A.Rb(),A.Rb(),A.Sb(7,"div",36),A.Sb(8,"div",20),A.Sb(9,"div",3),A.Sb(10,"div",37),A.Sb(11,"label",38),A.Kc(12,"DueDate"),A.Rb(),A.Sb(13,"span",39),A.Kc(14,"(*)"),A.Rb(),A.Sb(15,"ejs-datepicker",40),A.cc("change",function(e){return A.Bc(n),A.gc().onChangeDueDateClone(e)}),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Sb(16,"div",41),A.Sb(17,"button",42),A.cc("click",function(){return t.$implicit.close("Close click")}),A.Kc(18,"Close"),A.Rb(),A.Sb(19,"button",43),A.cc("click",function(){return A.Bc(n),A.gc().onClickClone()}),A.Kc(20,"Clone"),A.Rb(),A.Rb()}if(2&e){var i=A.gc();A.zb(15),A.mc("value",i.date)}}var je,Je,ze,Ge=[{path:"",data:{title:"Report",breadcrumb:"Report"},children:[{path:"consumption",component:(je=function(){function t(n,i,a,r,l,o,c,u){var s=this;e(this,t),this.route=n,this.alertify=i,this.modalService=a,this.planService=r,this.bPFCEstablishService=l,this.datePipe=o,this.buildingService=c,this.spinner=u,this.startDate=new Date,this.endDate=new Date,this.sortSettings={columns:[{field:"dueDate",direction:"Ascending"}]},this.date=new Date,this.role=JSON.parse(localStorage.getItem("level")),this.building=JSON.parse(localStorage.getItem("building")),this.searchSettings={hierarchyMode:"Parent"},this.modalPlan={id:0,buildingID:0,BPFCEstablishID:0,BPFCName:"",hourlyOutput:0,workingHour:0,dueDate:new Date,startWorkingTime:new Date,finishWorkingTime:new Date,startTime:{hour:7,minute:0},endTime:{hour:16,minute:30}},this.textLine="Select a line name",this.fieldsGlue={text:"name",value:"name"},this.fieldsLine={text:"name",value:"name"},this.fieldsBPFC={text:"name",value:"name"},this.fieldsBuildings={text:"name",value:"id"},this.buildingID=0,this.onFilteringBuilding=function(e){var t=new P.h;t=""!==e.text?t.where("name","contains",e.text,!0):t,e.updateData(s.buildings,t)}}return n(t,[{key:"ngOnInit",value:function(){new Date,this.endDate=new Date,this.level=JSON.parse(localStorage.getItem("level")).level,this.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},this.editparams={params:{popupHeight:"300px"}},this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!1,allowAdding:!1,allowDeleting:!1,mode:"Normal"},this.toolbarOptions=[{text:"Report",tooltipText:"Report",prefixIcon:"e-excelexport",id:"report"},{text:"Report(new)",tooltipText:"Report(new)",prefixIcon:"e-excelexport",id:"newReport"},"Search"],this.getAll(this.startDate,this.endDate),this.getAllBPFC();var e=JSON.parse(localStorage.getItem("level")).id;this.getAllLine(e),this.getBuilding(),this.ClearForm()}},{key:"onSelectBuilding",value:function(e){this.buildingID=e.itemData.id,localStorage.setItem("buildingID",e.itemData.id),this.getAll(this.startDate,this.endDate)}},{key:"getBuilding",value:function(){var e=this;this.buildingService.getBuildings().subscribe(function(t){return Object(M.a)(e,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.buildings=t.filter(function(e){return 2===e.level});case 1:case"end":return e.stop()}},e,this)}))})}},{key:"count",value:function(e){return Number(e)+1}},{key:"getAllLine",value:function(e){var t=this;this.planService.getLines(e).subscribe(function(e){t.buildingName=e})}},{key:"getReport",value:function(e){var t=this;Math.floor((e.endDate.getTime()-e.startDate.getTime())/864e5)>31?this.alertify.error("Ch\u1ec9 \u0111\u01b0\u1ee3c xu\u1ea5t d\u1eef li\u1ec7u b\xe1o c\xe1o trong 30 ng\xe0y!!!<br>The report data can only be exported for 30 days!!!",!0):(this.spinner.show(),this.planService.getReport(e).subscribe(function(e){new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});var n=window.URL.createObjectURL(e),i=document.createElement("a");i.href=n;var a=new Date;i.download="".concat(a.getFullYear()).concat(a.getMonth()).concat(a.getDay(),"_Cost.xlsx"),i.click(),t.spinner.hide()}))}},{key:"getReportByBuilding",value:function(){var e=this,t={startDate:this.startDate,endDate:this.endDate,buildingID:this.buildingID};Math.floor((t.endDate.getTime()-t.startDate.getTime())/864e5)>31?this.alertify.error("Ch\u1ec9 \u0111\u01b0\u1ee3c xu\u1ea5t d\u1eef li\u1ec7u b\xe1o c\xe1o trong 30 ng\xe0y!!!<br>The report data can only be exported for 30 days!!!",!0):(this.spinner.show(),this.planService.getReportByBuilding(t).subscribe(function(t){new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});var n=window.URL.createObjectURL(t),i=document.createElement("a");i.href=n;var a=new Date;i.download="".concat(a.getFullYear()).concat(a.getMonth()).concat(a.getDay(),"_Cost.xlsx"),i.click(),e.spinner.hide()}))}},{key:"downLoadFile",value:function(e,t){var n=new Blob([e],{type:t}),i=window.URL.createObjectURL(n),a=window.open(i);a&&!a.closed&&void 0!==a.closed||this.alertify.error("Please disable your Pop-up blocker and try again."),this.spinner.hide()}},{key:"onChangeBuildingNameEdit",value:function(e){this.buildingNameEdit=e.itemData.id}},{key:"onChangeDueDateEdit",value:function(e){this.dueDate=e.value.toDateString()}},{key:"onChangeDueDateClone",value:function(e){this.date=e.value}},{key:"onChangeBPFCEdit",value:function(e){this.bpfcEdit=e.itemData.id}},{key:"actionComplete",value:function(e){"beginEdit"===e.requestType&&e.form.elements.namedItem(this.setFocus.field).focus()}},{key:"onDoubleClick",value:function(e){this.setFocus=e.column}},{key:"actionBegin",value:function(e){var t=this;"cancel"===e.requestType&&this.ClearForm(),"save"===e.requestType&&"edit"===e.action&&this.planService.editQuantity(e.data.id||0,e.data.quantity).subscribe(function(e){t.alertify.success("Updated succeeded!"),t.ClearForm(),t.getAll(t.startDate,t.endDate)})}},{key:"ClearForm",value:function(){this.bpfcEdit=0,this.hourlyOutput=0,this.workHour=0,this.dueDate=new Date}},{key:"validForm",value:function(){return[this.bpfcEdit].every(function(e){return e>0})}},{key:"onChangeWorkingHour",value:function(e){this.workHour=e}},{key:"onChangeHourlyOutput",value:function(e){this.hourlyOutput=e}},{key:"rowSelected",value:function(e){}},{key:"openaddModalPlan",value:function(e){this.modalReference=this.modalService.open(e)}},{key:"getAllBPFC",value:function(){var e=this;this.bPFCEstablishService.filterByApprovedStatus().subscribe(function(t){e.BPFCs=t.map(function(e){return{id:e.id,name:"".concat(e.modelName," - ").concat(e.modelNo," - ").concat(e.articleNo," - ").concat(e.artProcess)}})})}},{key:"getAll",value:function(e,t){var n=this;this.planService.search(this.buildingID,e.toDateString(),t.toDateString()).subscribe(function(e){n.data=e.map(function(e){return{id:e.id,bpfcName:"".concat(e.modelName," - ").concat(e.modelNoName," - ").concat(e.articleName," - ").concat(e.processName),dueDate:e.dueDate,createdDate:e.createdDate,workingHour:e.workingHour,hourlyOutput:e.hourlyOutput,buildingName:e.buildingName,buildingID:e.buildingID,quantity:e.quantity,bpfcEstablishID:e.bpfcEstablishID,glues:e.glues||[]}})})}},{key:"deleteRange",value:function(e){var t=this;this.alertify.confirm("Delete Plan","Are you sure you want to delete this Plans ?",function(){t.planService.deleteRange(e).subscribe(function(){t.getAll(t.startDate,t.endDate),t.alertify.success("Plans has been deleted")},function(e){t.alertify.error("Failed to delete the Modal Name")})})}},{key:"openModal",value:function(e){var t=this.grid.getSelectedRecords();0!==t.length?(this.plansSelected=t.map(function(e){return{id:0,bpfcEstablishID:e.bpfcEstablishID,workingHour:e.workingHour,hourlyOutput:e.hourlyOutput,dueDate:e.dueDate,buildingID:e.buildingID}}),this.modalReference=this.modalService.open(e)):this.alertify.warning("Please select the plan")}},{key:"toolbarClick",value:function(e){switch(-1!==e.item.id.indexOf("excelexport")&&this.getReport({startDate:this.startDate,endDate:this.endDate}),e.item.id){case"Clone":this.openModal(this.cloneModal);break;case"Delete Range":if(0===this.grid.getSelectedRecords().length)this.alertify.warning("Please select the plans!!");else{var t=this.grid.getSelectedRecords().map(function(e){return e.id});this.deleteRange(t)}break;case"report":this.getReportByBuilding();break;case"newReport":this.getNewReportByBuilding()}}},{key:"getNewReportByBuilding",value:function(){var e=this,t={startDate:this.startDate,endDate:this.endDate,buildingID:this.buildingID};Math.floor((t.endDate.getTime()-t.startDate.getTime())/864e5)>31?this.alertify.error("Ch\u1ec9 \u0111\u01b0\u1ee3c xu\u1ea5t d\u1eef li\u1ec7u b\xe1o c\xe1o trong 30 ng\xe0y!!!<br>The report data can only be exported for 30 days!!!",!0):(this.spinner.show(),this.planService.getNewReportByBuilding(t).subscribe(function(t){new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});var n=window.URL.createObjectURL(t),i=document.createElement("a");i.href=n;var a=new Date;i.download="".concat(a.getFullYear()).concat(a.getMonth()).concat(a.getDay(),"_Cost(new).xlsx"),i.click(),e.spinner.hide()}))}},{key:"onClickClone",value:function(){var e=this;this.plansSelected.map(function(t){t.dueDate=e.date}),this.planService.clonePlan(this.plansSelected).subscribe(function(t){t?(e.alertify.success("Successfully!"),e.startDate=e.date,e.endDate=e.date,e.getAll(e.date,e.date),e.modalService.dismissAll()):(e.alertify.warning("the plans have already existed!"),e.modalService.dismissAll())})}},{key:"search",value:function(e,t){var n=this;this.planService.search(this.building.id,e.toDateString(),t.toDateString()).subscribe(function(e){n.data=e.map(function(e){return{id:e.id,bpfcName:"".concat(e.modelName," - ").concat(e.modelNoName," - ").concat(e.articleName," - ").concat(e.processName),dueDate:e.dueDate,createdDate:e.createdDate,workingHour:e.workingHour,hourlyOutput:e.hourlyOutput,buildingName:e.buildingName,buildingID:e.buildingID,bpfcEstablishID:e.bpfcEstablishID,quantity:e.quantity,glues:e.glues||[]}})})}},{key:"onClickDefault",value:function(){this.startDate=new Date,this.endDate=new Date,this.getAll(this.startDate,this.endDate)}},{key:"startDateOnchange",value:function(e){this.startDate=e.value,this.getAll(this.startDate,this.endDate)}},{key:"endDateOnchange",value:function(e){this.endDate=e.value,this.getAll(this.startDate,this.endDate)}},{key:"tooltip",value:function(e){return e?e.join("<br>"):""}},{key:"editQuantity",value:function(e,t){this.planService.editQuantity(e,t)}},{key:"onClickFilter",value:function(){this.getAll(this.startDate,this.endDate)}}]),t}(),je.\u0275fac=function(e){return new(e||je)(A.Mb(R.a),A.Mb(J.a),A.Mb(s.b),A.Mb(le.a),A.Mb(Ce.a),A.Mb(r.d),A.Mb(G.a),A.Mb(o.c))},je.\u0275cmp=A.Gb({type:je,selectors:[["app-consumption"]],viewQuery:function(e,t){var n;1&e&&(A.Qc(ke,!0),A.Qc(xe,!0),A.Qc(Ie,!0)),2&e&&(A.xc(n=A.dc())&&(t.cloneModal=n.first),A.xc(n=A.dc())&&(t.orderForm=n.first),A.xc(n=A.dc())&&(t.grid=n.first))},decls:38,vars:9,consts:[["type","square-jelly-box","size","medium",3,"fullScreen"],[1,"loading"],[1,"row","pt-2"],[1,"col-md-12"],[1,"card"],[1,"card-body","table-responsive","p-0"],["class","row my-3",4,"ngIf"],["showColumnMenu","true","allowPaging","true","allowSorting","true","allowResizing","true","gridLines","Both",3,"dataSource","searchSettings","allowExcelExport","sortSettings","toolbar","pageSettings","editSettings","actionBegin","actionComplete","recordDoubleClick","rowSelected","toolbarClick"],["grid",""],["field","buildingName","headerText","Line","width","100","textAlign","Center"],["headerTemplate",""],["editTemplate",""],["field","bpfcName","headerText","BPFC Name","width","290","textAlign","Center"],["template",""],["field","quantity","headerText","Quantity","width","170","textAlign","Center"],["field","dueDate","type","date","format","dd MMM, yyyy","headerText","Due Date","width","160","textAlign","Center"],["field","createdDate","isPrimaryKey","true","type","date","format","dd MMM, yyyy HH:mm","headerText","Created Date","width","200","textAlign","Center"],["cloneModal",""],[1,"row","my-3"],[1,"col-md-8"],[1,"row"],[1,"col-md-1"],[1,"font-weight-bold"],[1,"col-md-3"],[3,"value","ngModel","change","ngModelChange"],[1,"col-md-2"],["placeholder","Select a building",3,"dataSource","fields","allowFiltering","ngModel","ngModelChange","filtering","select"],["modelNameDropdownlist",""],[1,"btn","btn-sm","btn-default",3,"click"],[1,"fa","fa-times"],[3,"content"],[1,"modal-header"],[1,"modal-title"],[1,"fas","fa-plus"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group"],["for","Name"],[2,"color","red"],["format","dd MMM, yyyy",3,"value","change"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["type","submit",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(A.Sb(0,"ngx-spinner",0),A.Sb(1,"p",1),A.Kc(2,"Loading data..."),A.Rb(),A.Rb(),A.Sb(3,"div",2),A.Sb(4,"div",3),A.Sb(5,"div",4),A.Sb(6,"div",5),A.Ic(7,Be,18,11,"div",6),A.Sb(8,"ejs-grid",7,8),A.cc("actionBegin",function(e){return t.actionBegin(e)})("actionComplete",function(e){return t.actionComplete(e)})("recordDoubleClick",function(e){return t.onDoubleClick(e)})("rowSelected",function(e){return t.rowSelected(e)})("toolbarClick",function(e){return t.toolbarClick(e)}),A.Sb(10,"e-columns"),A.Sb(11,"e-column",9),A.Ic(12,Re,2,3,"ng-template",null,10,A.Jc),A.Ic(14,Me,1,1,"ng-template",null,11,A.Jc),A.Rb(),A.Sb(16,"e-column",12),A.Ic(17,Ae,2,3,"ng-template",null,10,A.Jc),A.Ic(19,Ne,1,1,"ng-template",null,11,A.Jc),A.Ic(21,Te,2,2,"ng-template",null,13,A.Jc),A.Rb(),A.Sb(23,"e-column",14),A.Ic(24,Ue,2,3,"ng-template",null,10,A.Jc),A.Rb(),A.Sb(26,"e-column",15),A.Ic(27,Oe,2,3,"ng-template",null,10,A.Jc),A.Ic(29,Ee,2,4,"ng-template",null,11,A.Jc),A.Rb(),A.Sb(31,"e-column",16),A.Ic(32,Le,2,3,"ng-template",null,10,A.Jc),A.Ic(34,Fe,2,4,"ng-template",null,11,A.Jc),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Ic(36,Pe,21,1,"ng-template",null,17,A.Jc)),2&e&&(A.mc("fullScreen",!1),A.zb(7),A.mc("ngIf",!t.hasWorker),A.zb(1),A.mc("dataSource",t.data)("searchSettings",t.searchSettings)("allowExcelExport",!0)("sortSettings",t.sortSettings)("toolbar",t.toolbarOptions)("pageSettings",t.pageSettings)("editSettings",t.editSettings))},directives:[o.a,r.n,D.j,g.d,k.d,k.b,D.e,D.b,g.c,k.c,k.a,D.d,D.a,b.a,l.g,l.j,u.c,y.b],pipes:[m.c,r.d],styles:[""]}),je),data:{title:"Cost",breadcrumb:"Cost"}},{path:"consumption-1",component:be,data:{title:"Consumption 1",breadcrumb:"Consumption 1"}},{path:"consumption-2",component:we,data:{title:"Consumption 2",breadcrumb:"Consumption 2"}},{path:"delivered-history",component:F,data:{title:"Delivered History",breadcrumb:"Delivered History"}},{path:"inventory",component:re,data:{title:"Inventory",breadcrumb:"Inventory"}}]}],Ke=((ze=function t(){e(this,t)}).\u0275mod=A.Kb({type:ze}),ze.\u0275inj=A.Jb({factory:function(e){return new(e||ze)},imports:[[R.f.forChild(Ge)],R.f]}),ze);function Qe(e){return new v.a(e,"./assets/i18n/",".json")}var _e=localStorage.getItem("lang");Object(w.bb)(a("2PVe"),a("GFvd"),a("GFWS"),a("0zpJ"),a("LRxf")),Object(w.bb)(a("2PVe"),a("oP7I"),a("Joj5"),a("3JeS"),a("LRxf")),Je="vi"===_e?_e:"en";var qe,He=((qe=function t(){e(this,t),"vi"===_e?(Je="vi",setTimeout(function(){w.p.load(a("+7Wi")),Object(w.nb)("vi")})):(Je="en",setTimeout(function(){w.p.load(a("oyrQ")),Object(w.nb)("en")}))}).\u0275mod=A.Kb({type:qe}),qe.\u0275inj=A.Jb({factory:function(e){return new(e||qe)},providers:[r.d],imports:[[B.b,h.c,r.b,l.c,l.m,o.b,Ke,c.a,u.d,s.c,g.b,g.a,g.e,d.a,d.d,d.c,h.j,p.a,b.b,k.h,D.i,h.h,y.c,I.b,S.a,b.d,x.a,C.d,h.f,u.f,m.b.forChild({loader:{provide:m.a,useFactory:Qe,deps:[f.b]},defaultLanguage:Je})]]}),qe)},"h9f+":function(t,i,a){"use strict";a.d(i,"a",function(){return d});var r=a("2Vo4"),l=a("lJxs"),o=a("tk/3"),c=a("AytR"),u=a("2zK7"),s=a("fXoL");new o.e({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")});var d=function(){var t=function(){function t(n){e(this,t),this.http=n,this.baseUrl=c.a.apiUrlEC,this.authUrl=c.a.apiUrl,this.messageSource=new r.a(0),this.currentMessage=this.messageSource.asObservable()}return n(t,[{key:"changeMessage",value:function(e){this.messageSource.next(e)}},{key:"getBuildingsAsTreeView",value:function(){return this.http.get(this.baseUrl+"Building/GetAllAsTreeView")}},{key:"mappingUserWithBuilding",value:function(e){return this.http.post(this.baseUrl+"BuildingUser/MappingUserWithBuilding",e)}},{key:"removeBuildingUser",value:function(e){return this.http.post(this.baseUrl+"BuildingUser/RemoveBuildingUser",e)}},{key:"getAllUsers",value:function(e,t){var n=new u.a;return this.http.get("".concat(this.authUrl,"Users/GetAllUsers/").concat(c.a.systemCode,"/").concat(e,"/").concat(t),{observe:"response"}).pipe(Object(l.a)(function(e){return n.result=e.body,null!=e.headers.get("Pagination")&&(n.pagination=JSON.parse(e.headers.get("Pagination"))),n}))}},{key:"deleteUser",value:function(e){return this.http.delete("".concat(this.authUrl,"Users/Delete/").concat(e))}},{key:"updateUser",value:function(e){return this.http.post(this.authUrl+"Users/Update",e)}},{key:"createUser",value:function(e){return this.http.post(this.authUrl+"Users/Create",e)}},{key:"getAllBuildingUsers",value:function(){return this.http.get(this.baseUrl+"BuildingUser/getAllBuildingUsers")}},{key:"getBuildingUserByBuildingID",value:function(e){return this.http.get("".concat(this.baseUrl,"BuildingUser/GetBuildingUserByBuildingID/").concat(e))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s.Zb(o.b))},t.\u0275prov=s.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},mrSG:function(e,t,n){"use strict";function i(e,t,n,i){return new(n||(n=Promise))(function(a,r){function l(e){try{c(i.next(e))}catch(t){r(t)}}function o(e){try{c(i.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(l,o)}c((i=i.apply(e,t||[])).next())})}n.d(t,"a",function(){return i})},vrRs:function(t,i,a){"use strict";a.d(i,"a",function(){return d});var r=a("tk/3"),l=a("2Vo4"),o=a("lJxs"),c=a("AytR"),u=a("2zK7"),s=a("fXoL");new r.e({"Content-Type":"application/json"});var d=function(){var t=function(){function t(n){e(this,t),this.http=n,this.baseUrl=c.a.apiUrlEC,this.ingredientSource=new l.a(0),this.currentIngredient=this.ingredientSource.asObservable()}return n(t,[{key:"getIngredients",value:function(e,t){var n=new u.a,i=new r.f;return null!=e&&null!=t&&(i=(i=i.append("pageNumber",e)).append("pageSize",t)),this.http.get(this.baseUrl+"ingredient/getingredients",{observe:"response",params:i}).pipe(Object(o.a)(function(e){return n.result=e.body,null!=e.headers.get("Pagination")&&(n.pagination=JSON.parse(e.headers.get("Pagination"))),n}))}},{key:"search",value:function(e,t,n){var i=new u.a,a=new r.f;return null!=e&&null!=t&&(a=(a=a.append("pageNumber",e)).append("pageSize",t)),this.http.get(this.baseUrl+"ingredient/Search/"+n,{observe:"response",params:a}).pipe(Object(o.a)(function(e){return i.result=e.body,null!=e.headers.get("Pagination")&&(i.pagination=JSON.parse(e.headers.get("Pagination"))),i}))}},{key:"getAllIngredient",value:function(){return this.http.get(this.baseUrl+"ingredient/GetAll",{})}},{key:"getAllGlueType",value:function(){return this.http.get(this.baseUrl+"ingredient/GetAllGlueType",{})}},{key:"getByID",value:function(e){return this.http.get(this.baseUrl+"ingredient/GetbyID/"+e,{})}},{key:"scanQRCode",value:function(e){return this.http.get(this.baseUrl+"ingredient/ScanQRCode/"+e,{})}},{key:"scanQRCodeFromChemicalWareHouse",value:function(e,t,n){return this.http.get("".concat(this.baseUrl,"ingredient/ScanQRCodeFromChemialWareHouse/").concat(e,"/").concat(t,"/").concat(n),{})}},{key:"scanQRCodeOutput",value:function(e,t,n){return this.http.get("".concat(this.baseUrl,"ingredient/ScanQRCodeOutput/").concat(e,"/").concat(t,"/").concat(n),{})}},{key:"getAllSupplier",value:function(){return this.http.get(this.baseUrl+"Suppier/GetAll",{})}},{key:"getAllIngredientInfo",value:function(){return this.http.get(this.baseUrl+"ingredient/GetAllIngredientInfo",{})}},{key:"getAllIngredientInfoOutput",value:function(){return this.http.get(this.baseUrl+"ingredient/GetAllIngredientInfoOutPut",{})}},{key:"getAllIngredientInfoByBuildingName",value:function(e){return this.http.get(this.baseUrl+"ingredient/GetAllIngredientInfoByBuildingName/"+e,{})}},{key:"getAllIngredientInfoReport",value:function(){return this.http.get(this.baseUrl+"ingredient/GetAllIngredientInfoReport",{})}},{key:"getAllIngredientInfoReportByBuildingName",value:function(e){return this.http.get(this.baseUrl+"ingredient/GetAllIngredientInfoReportByBuildingName/"+e,{})}},{key:"searchInventory",value:function(e,t){return this.http.get("".concat(this.baseUrl,"ingredient/Search/").concat(e,"/").concat(t),{})}},{key:"searchInventoryByBuildingName",value:function(e,t,n){return this.http.get("".concat(this.baseUrl,"ingredient/SearchWithBuildingName/").concat(e,"/").concat(t,"/").concat(n),{})}},{key:"deleteIngredientInfo",value:function(e,t,n,i){return this.http.delete(this.baseUrl+"ingredient/DeleteIngredientInfo/".concat(e,"/").concat(t,"/").concat(n,"/").concat(i))}},{key:"UpdateConsumption",value:function(e,t,n){return this.http.post(this.baseUrl+"ingredient/UpdateConsumptionIngredientReport/".concat(e,"/").concat(t,"/").concat(n),{})}},{key:"UpdateConsumptionOfBuilding",value:function(e){return this.http.post(this.baseUrl+"ingredient/UpdateConsumptionOfBuildingIngredientReport",e)}},{key:"createSub",value:function(e){return this.http.post(this.baseUrl+"suppier/create",e)}},{key:"updateSub",value:function(e){return this.http.put(this.baseUrl+"suppier/update",e)}},{key:"deleteSub",value:function(e){return this.http.delete(this.baseUrl+"suppier/delete/"+e)}},{key:"sortBySup",value:function(e,t){return this.http.get(this.baseUrl+"GlueIngredient/GetIngredientsByGlueID/".concat(e,"/").concat(t))}},{key:"getIngredientsByGlueID",value:function(e){return this.http.get(this.baseUrl+"GlueIngredient/GetIngredientsByGlueID/"+e)}},{key:"create",value:function(e){return this.http.post(this.baseUrl+"ingredient/create1",e)}},{key:"update",value:function(e){return this.http.put(this.baseUrl+"ingredient/update",e)}},{key:"delete",value:function(e){return this.http.delete(this.baseUrl+"ingredient/delete/"+e)}},{key:"changeIngredient",value:function(e){this.ingredientSource.next(e)}},{key:"import",value:function(e,t){var n=new FormData;return n.append("UploadedFile",e),n.append("CreatedBy",t),this.http.post(this.baseUrl+"ingredient/Import",n)}},{key:"downloadFile",value:function(){return this.http.post(this.baseUrl+"ingredient/ExcelExport",{})}},{key:"GetQrcodeByid",value:function(e){return this.http.get(this.baseUrl+"ingredient/GetbyID/"+e)}},{key:"UpdatePrint",value:function(e){return this.http.put(this.baseUrl+"ingredient/UpdatePrint",e)}},{key:"checkIncoming",value:function(e,t,n){return this.http.get("".concat(this.baseUrl,"ingredient/CheckIncoming/").concat(e,"/").concat(t,"/").concat(n),{})}},{key:"getAllIngredientInfoByBuilding",value:function(e){return this.http.get(this.baseUrl+"ingredient/GetAllIngredientInfoByBuilding/"+e,{})}},{key:"getAllIngredientInfoOutputByBuilding",value:function(e){return this.http.get(this.baseUrl+"ingredient/GetAllIngredientInfoOutputByBuilding/"+e,{})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s.Zb(r.b))},t.\u0275prov=s.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},wsp1:function(t,i,a){"use strict";a.d(i,"a",function(){return u});var r=a("2Vo4"),l=a("tk/3"),o=a("AytR"),c=a("fXoL");new l.e({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")});var u=function(){var t=function(){function t(n){e(this,t),this.http=n,this.baseUrl=o.a.apiUrlEC,this.messageSource=new r.a(0),this.currentMessage=this.messageSource.asObservable()}return n(t,[{key:"changeMessage",value:function(e){this.messageSource.next(e)}},{key:"delete",value:function(e){return this.http.delete("".concat(this.baseUrl,"Building/Delete/").concat(e))}},{key:"rename",value:function(e){return this.http.put(this.baseUrl+"Building/Update",e)}},{key:"getBuildingsAsTreeView",value:function(){return this.http.get(this.baseUrl+"Building/GetAllAsTreeView")}},{key:"getBuildings",value:function(){return this.http.get(this.baseUrl+"Building/GetBuildings")}},{key:"getAllBuildingType",value:function(){return this.http.get(this.baseUrl+"Building/getAllBuildingType")}},{key:"getBuildingsForSetting",value:function(){return this.http.get(this.baseUrl+"Building/GetBuildingsForSetting")}},{key:"addOrUpdateLunchTime",value:function(e){return this.http.post(this.baseUrl+"Building/AddOrUpdateLunchTime",e)}},{key:"createMainBuilding",value:function(e){return this.http.post(this.baseUrl+"Building/CreateMainBuilding",e)}},{key:"createSubBuilding",value:function(e){return this.http.post(this.baseUrl+"Building/CreateSubBuilding",e)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c.Zb(l.b))},t.\u0275prov=c.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()}}])}();