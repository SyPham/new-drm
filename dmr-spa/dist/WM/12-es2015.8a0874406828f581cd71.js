(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{F7Yq:function(e,t,i){"use strict";i.r(t),i.d(t,"HttpLoaderFactory",function(){return tn}),i.d(t,"EstablishModule",function(){return sn});var n=i("ofXK"),s=i("3Pt+"),l=i("JqCM"),a=i("ZOsW"),o=i("jcQU"),r=i("1kSV"),c=i("uF4Q"),d=i("0jTc"),h=i("SRvG"),u=i("ed8r"),g=i("QYJQ"),m=i("tk/3"),b=i("sYmb"),p=i("mqiu"),f=i("Pk9d"),I=i("cZdB"),S=i("GJ+o"),D=i("4SUy"),N=i("hXFv"),C=i("QUNt"),v=i("z+xu"),y=i("ZwAT"),B=i("0hV+"),w=i("tyNb"),P=i("AytR"),x=i("fXoL"),R=i("qLS9"),A=i("HJFG"),M=i("h9f+"),k=i("t0UR"),F=i("KCoQ"),T=i("H552"),G=i("WAEy"),E=i("2Vo4"),O=i("lJxs"),K=i("2zK7");new m.e({Authorization:"Bearer "+localStorage.getItem("token")});let U=(()=>{class e{constructor(e){this.http=e,this.baseUrl=P.a.apiUrlEC,this.gueIngredientSource=new E.a({}),this.currentGlueIngredient=this.gueIngredientSource.asObservable(),this.flagSource=new E.a("0"),this.currentFlag=this.flagSource.asObservable()}getIngredients(e,t,i){const n=new K.a;return this.http.get(`${this.baseUrl}GlueIngredient/GetIngredientsByGlueID/${e}`,{observe:"response"}).pipe(Object(O.a)(e=>(n.result=e.body,null!=e.headers.get("Pagination")&&(n.pagination=JSON.parse(e.headers.get("Pagination"))),n)))}getGlues(e,t){const i=new K.a;return this.http.get(`${this.baseUrl}GlueIngredient/getAllGlues/${e}/${t}`,{observe:"response"}).pipe(Object(O.a)(e=>(i.result=e.body,null!=e.headers.get("Pagination")&&(i.pagination=JSON.parse(e.headers.get("Pagination"))),i)))}mappGlueIngredient(e){return this.http.post(this.baseUrl+"GlueIngredient/MapGlueIngredient",e)}mapGlueIngredientByGlueID(e){return this.http.post(this.baseUrl+"GlueIngredient/MapGlueIngredientByGlueID",e)}mapGlueIngredient(e){return this.http.post(this.baseUrl+"GlueIngredient/MapGlueIngredients",e)}delete(e,t){return this.http.get(`${this.baseUrl}GlueIngredient/${e}/${t}/delete`)}editPercentage(e){return this.http.put(this.baseUrl+"GlueIngredient/editPercentage",e)}editAllow(e){return this.http.put(this.baseUrl+"GlueIngredient/editAllow",e)}getDetail(e){return this.http.get(this.baseUrl+`GlueIngredient/${e}/detail`)}}return e.\u0275fac=function(t){return new(t||e)(x.Zb(m.b))},e.\u0275prov=x.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var L=i("xiVD"),z=i("j7qE");let J=(()=>{class e{constructor(e){this.http=e,this.baseUrl=P.a.apiUrlEC}getAll(){return this.http.get(this.baseUrl+"ModelNo/GetAll",{})}getModelNoByModelNameID(e){return this.http.get(this.baseUrl+"ModelNo/getModelNoByModelNameID/"+e,{})}}return e.\u0275fac=function(t){return new(t||e)(x.Zb(m.b))},e.\u0275prov=x.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),j=(()=>{class e{constructor(e){this.http=e,this.baseUrl=P.a.apiUrlEC}getArticleNos(e,t){const i=new K.a;let n=new m.f;return null!=e&&null!=t&&(n=n.append("pageNumber",e),n=n.append("pageSize",t)),this.http.get(this.baseUrl+"ArticleNo/getArticleNos",{observe:"response",params:n}).pipe(Object(O.a)(e=>(i.result=e.body,null!=e.headers.get("Pagination")&&(i.pagination=JSON.parse(e.headers.get("Pagination"))),i)))}getAlls(){return this.http.get(this.baseUrl+"ArticleNo/GetAll",{})}getArticleNoByModelNameID(e){return this.http.get(this.baseUrl+"ArticleNo/getArticleNoByModelNameID/"+e,{})}getArticleNoByModelNoID(e){return this.http.get(this.baseUrl+"ArticleNo/getArticleNoByModelNoID/"+e,{})}create(e){return this.http.post(this.baseUrl+"ArticleNo/create",e)}update(e){return this.http.put(this.baseUrl+"ArticleNo/update",e)}delete(e){return this.http.delete(this.baseUrl+"ArticleNo/delete/"+e)}}return e.\u0275fac=function(t){return new(t||e)(x.Zb(m.b))},e.\u0275prov=x.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var H=i("CC+3"),_=i("MBJp"),q=i("6U7I");let Q=(()=>{class e{constructor(e){this.http=e,this.baseUrl=P.a.apiUrlEC}getAll(){return this.http.get(this.baseUrl+"ArtProcess/GetAll",{})}getArtProcessByArticleNoID(e){return this.http.get(this.baseUrl+"ArtProcess/getArtProcessByArticleNoID/"+e,{})}GetAllProcess(){return this.http.get(this.baseUrl+"Process/GetAll",{})}}return e.\u0275fac=function(t){return new(t||e)(x.Zb(m.b))},e.\u0275prov=x.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var V=i("vrRs");const Y=["switch"],X=["grid"],W=["gridglue"],Z=["grid2"],ee=["modelNameDropdownlist"],te=["modelNoDropdownlist"],ie=["chemicalDropdownlist"],ne=["positionDropdownlist"];function se(e,t){if(1&e){const e=x.Tb();x.Sb(0,"div",11),x.Sb(1,"button",26),x.cc("click",function(){x.Bc(e);const t=x.gc(),i=x.yc(49);return t.openModal(i)}),x.Nb(2,"i",27),x.Rb(),x.Rb()}}function le(e,t){if(1&e){const e=x.Tb();x.Qb(0),x.Sb(1,"ejs-radiobutton",28),x.cc("click",function(t){return x.Bc(e),x.gc().onClickProcess(t)}),x.Rb(),x.Pb()}if(2&e){const e=t.$implicit;x.zb(1),x.mc("label",e.name)("value",e.id)}}function ae(e,t){if(1&e&&x.Nb(0,"ejs-barcodegenerator",30,31),2&e){const e=x.gc(2);x.mc("value",e.glue.code)}}function oe(e,t){if(1&e&&(x.Sb(0,"div"),x.Ic(1,ae,2,1,"ejs-barcodegenerator",29),x.Rb()),2&e){const e=x.gc();x.zb(1),x.mc("ngIf",e.showBarCode)}}function re(e,t){1&e&&(x.Kc(0),x.hc(1,"translate")),2&e&&x.Mc(" ",x.ic(1,1,"GLUE")," ")}function ce(e,t){if(1&e&&(x.Sb(0,"div",44),x.Kc(1),x.Rb()),2&e){const e=t.$implicit;x.nc("title",e.name),x.zb(1),x.Mc(" ",e.name," ")}}function de(e,t){1&e&&(x.Kc(0),x.hc(1,"translate")),2&e&&x.Mc(" ",x.ic(1,1,"CONSUMPTION")," ")}function he(e,t){if(1&e&&(x.Sb(0,"span"),x.Kc(1),x.Rb()),2&e){const e=t.$implicit,i=x.gc(2);x.Bb(i.changeConsumptionColor(e)),x.zb(1),x.Lc(""===e.consumption?"0":e.consumption)}}function ue(e,t){1&e&&(x.Kc(0),x.hc(1,"translate")),2&e&&x.Mc(" ",x.ic(1,1,"EXPIRED_TIME")," ")}function ge(e,t){1&e&&(x.Kc(0),x.hc(1,"translate")),2&e&&x.Mc(" ",x.ic(1,1,"KIND")," ")}function me(e,t){if(1&e){const e=x.Tb();x.Sb(0,"ejs-dropdownlist",45,46),x.cc("ngModelChange",function(e){return t.$implicit.kindName=e})("select",function(t){return x.Bc(e),x.gc(2).onChangeKindEdit(t)}),x.Rb()}if(2&e){const e=t.$implicit,i=x.gc(2);x.mc("dataSource",i.kinds)("ngModel",e.kindName)("fields",i.fieldsKindEdit)("allowFiltering",!0)}}function be(e,t){1&e&&(x.Kc(0),x.hc(1,"translate")),2&e&&x.Mc(" ",x.ic(1,1,"PART")," ")}function pe(e,t){if(1&e){const e=x.Tb();x.Sb(0,"ejs-dropdownlist",47,48),x.cc("ngModelChange",function(e){return t.$implicit.partName=e})("select",function(t){return x.Bc(e),x.gc(2).onChangePartEdit(t)}),x.Rb()}if(2&e){const e=t.$implicit,i=x.gc(2);x.mc("dataSource",i.parts)("ngModel",e.partName)("fields",i.fieldsPartEdit)("allowFiltering",!0)}}function fe(e,t){1&e&&(x.Kc(0),x.hc(1,"translate")),2&e&&x.Mc(" ",x.ic(1,1,"MATERIAL")," ")}function Ie(e,t){if(1&e){const e=x.Tb();x.Sb(0,"ejs-dropdownlist",47,48),x.cc("ngModelChange",function(e){return t.$implicit.materialName=e})("select",function(t){return x.Bc(e),x.gc(2).onChangeMaterialEdit(t)}),x.Rb()}if(2&e){const e=t.$implicit,i=x.gc(2);x.mc("dataSource",i.materials)("ngModel",e.materialName)("fields",i.fieldsMaterialEdit)("allowFiltering",!0)}}function Se(e,t){if(1&e){const e=x.Tb();x.Sb(0,"div",32),x.Sb(1,"ejs-grid",33,34),x.cc("rowDeselected",function(t){return x.Bc(e),x.gc().rowDeselected(t)})("actionBegin",function(t){return x.Bc(e),x.gc().actionBeginGlue(t)})("rowSelected",function(t){return x.Bc(e),x.gc().rowSelected(t)})("created",function(){return x.Bc(e),x.gc().onCreatedGridGlue()})("toolbarClick",function(t){return x.Bc(e),x.gc().toolbarClick(t)})("dataBound",function(){return x.Bc(e),x.gc().dataBoundGlue()}),x.Sb(3,"e-columns"),x.Sb(4,"e-column",35),x.Ic(5,re,2,3,"ng-template",null,36,x.Jc),x.Ic(7,ce,2,2,"ng-template",null,37,x.Jc),x.Rb(),x.Sb(9,"e-column",38),x.Ic(10,de,2,3,"ng-template",null,36,x.Jc),x.Ic(12,he,2,3,"ng-template",null,37,x.Jc),x.Rb(),x.Sb(14,"e-column",39),x.Ic(15,ue,2,3,"ng-template",null,36,x.Jc),x.Rb(),x.Sb(17,"e-column",40),x.Ic(18,ge,2,3,"ng-template",null,36,x.Jc),x.Ic(20,me,2,4,"ng-template",null,41,x.Jc),x.Rb(),x.Sb(22,"e-column",42),x.Ic(23,be,2,3,"ng-template",null,36,x.Jc),x.Ic(25,pe,2,4,"ng-template",null,41,x.Jc),x.Rb(),x.Sb(27,"e-column",43),x.Ic(28,fe,2,3,"ng-template",null,36,x.Jc),x.Ic(30,Ie,2,4,"ng-template",null,41,x.Jc),x.Rb(),x.Rb(),x.Rb(),x.Rb()}if(2&e){const e=x.gc();x.zb(1),x.mc("dataSource",e.glues)("editSettings",e.editSettings)("toolbar",e.toolbar)("allowSorting",!0)("selectedRowIndex",e.rowIndex)}}function De(e,t){if(1&e){const e=x.Tb();x.Sb(0,"ejs-switch",55,56),x.cc("click",function(){return x.Bc(e),x.gc(2).done()})("ngModelChange",function(t){return x.Bc(e),x.gc(2).createdStatus=t}),x.hc(2,"translate"),x.hc(3,"translate"),x.Rb()}if(2&e){const e=x.gc(2);x.nc("onLabel",x.ic(2,5,"DONE")),x.nc("offLabel",x.ic(3,7,"UNDONE")),x.mc("disabled",e.approvalStatus)("ngModel",e.createdStatus)("checked",e.createdStatus)}}function Ne(e,t){if(1&e){const e=x.Tb();x.Sb(0,"ejs-switch",58),x.cc("click",function(){return x.Bc(e),x.gc(3).approval()})("ngModelChange",function(t){return x.Bc(e),x.gc(3).approvalStatus=t}),x.hc(1,"translate"),x.Rb()}if(2&e){const e=x.gc(3);x.nc("offLabel",x.ic(1,3,"NOT_APPROVED")),x.mc("ngModel",e.approvalStatus)("checked",e.approvalStatus)}}function Ce(e,t){if(1&e&&(x.Qb(0),x.Ic(1,Ne,2,5,"ejs-switch",57),x.Pb()),2&e){const e=x.gc(2);x.zb(1),x.mc("ngIf",e.modelNameID>0)}}function ve(e,t){if(1&e){const e=x.Tb();x.Sb(0,"button",59),x.cc("click",function(){return x.Bc(e),x.gc(2).finished()}),x.Nb(1,"i",60),x.Kc(2),x.hc(3,"translate"),x.Rb()}2&e&&(x.zb(2),x.Mc(" ",x.ic(3,1,"FINISHED")," "))}function ye(e,t){if(1&e){const e=x.Tb();x.Sb(0,"button",61),x.cc("click",function(){x.Bc(e);const t=x.gc(2),i=x.yc(51);return t.openModalHistory(i)}),x.Nb(1,"i",62),x.Kc(2," History"),x.Rb()}}function Be(e,t){if(1&e&&(x.Sb(0,"div",49),x.Sb(1,"button",50),x.Nb(2,"i",51),x.Kc(3," Reset "),x.Rb(),x.Ic(4,De,4,9,"ejs-switch",52),x.Ic(5,Ce,2,1,"ng-container",15),x.Ic(6,ve,4,3,"button",53),x.Ic(7,ye,3,0,"button",54),x.Rb()),2&e){const e=x.gc();x.zb(4),x.mc("ngIf",e.modelNameID>0),x.zb(1),x.mc("ngIf",3!==e.level&&4!==e.level),x.zb(1),x.mc("ngIf",e.modelNameID>0),x.zb(1),x.mc("ngIf",e.modelNameID>0)}}function we(e,t){if(1&e&&(x.Sb(0,"li",79),x.Sb(1,"a"),x.Kc(2),x.Sb(3,"span",80),x.Kc(4),x.Rb(),x.Rb(),x.Rb()),2&e){const e=t.$implicit;x.zb(2),x.Nc(" ",e.position,". ",e.ingredientName," "),x.zb(2),x.Mc("(",e.percentage,"%)")}}function Pe(e,t){if(1&e&&(x.Sb(0,"ul"),x.Sb(1,"span",76),x.Kc(2),x.Rb(),x.Sb(3,"li",77),x.Kc(4),x.Sb(5,"ul"),x.Ic(6,we,5,3,"li",78),x.Rb(),x.Rb(),x.Rb()),2&e){const e=x.gc(2);x.zb(2),x.Lc(e.formulaTamp()),x.zb(2),x.Mc(" ",e.formula()," "),x.zb(2),x.mc("ngForOf",e.renderchemical())}}function xe(e,t){if(1&e){const e=x.Tb();x.Sb(0,"button",81),x.cc("click",function(){x.Bc(e);const i=t.$implicit;return x.gc(2).sortBySup(i.id)}),x.Nb(1,"i",82),x.Kc(2),x.Rb()}if(2&e){const e=t.$implicit;x.zb(2),x.Mc(" ",e.name," ")}}function Re(e,t){1&e&&(x.Kc(0),x.hc(1,"translate")),2&e&&x.Mc(" ",x.ic(1,1,"ITEM")," ")}function Ae(e,t){if(1&e){const e=x.Tb();x.Sb(0,"ejs-dropdownlist",83,84),x.cc("change",function(i){x.Bc(e);const n=t.$implicit;return x.gc(2).onChangePosition(i,n,n.index)}),x.Rb()}if(2&e){const e=t.$implicit,i=x.gc(2);x.mc("dataSource",i.dataPosition)("value",e.position)("fields",i.fieldsPosition)("allowFiltering",!0)}}function Me(e,t){if(1&e){const e=x.Tb();x.Sb(0,"ejs-dropdownlist",83,84),x.cc("change",function(i){x.Bc(e);const n=t.$implicit;return x.gc(2).onChangePosition(i,n,n.index)}),x.Rb()}if(2&e){const e=t.$implicit,i=x.gc(2);x.mc("dataSource",i.dataPosition)("value",e.position)("fields",i.fieldsPosition)("allowFiltering",!0)}}function ke(e,t){1&e&&(x.Kc(0),x.hc(1,"translate")),2&e&&x.Mc(" ",x.ic(1,1,"INGREDIENT_NAME")," ")}function Fe(e,t){1&e&&x.Kc(0),2&e&&x.Mc(" ",t.$implicit.name," ")}function Te(e,t){1&e&&x.Kc(0),2&e&&x.Mc(" ",t.$implicit.name," ")}function $e(e,t){if(1&e&&(x.Sb(0,"div"),x.Kc(1),x.Rb()),2&e){const e=t.$implicit,i=x.gc(2);x.Bb(i.changePercentageColor(e)),x.zb(1),x.Lc(e.percentage)}}function Ge(e,t){1&e&&(x.Sb(0,"div"),x.Nb(1,"i",85),x.Rb())}function Ee(e,t){if(1&e&&(x.Sb(0,"div"),x.Kc(1),x.Rb()),2&e){const e=t.$implicit,i=x.gc(2);x.Bb(i.changeAllowColor(e)),x.zb(1),x.Mc("\xb1 ",e.allow,"")}}function Oe(e,t){1&e&&(x.Kc(0),x.hc(1,"translate")),2&e&&x.Mc(" ",x.ic(1,1,"ITEM")," ")}function Ke(e,t){if(1&e){const e=x.Tb();x.Sb(0,"ejs-dropdownlist",83,84),x.cc("change",function(i){x.Bc(e);const n=t.$implicit;return x.gc(2).onChangePosition(i,n,n.index)}),x.Rb()}if(2&e){const e=t.$implicit,i=x.gc(2);x.mc("dataSource",i.dataPosition)("value",e.position)("fields",i.fieldsPosition)("allowFiltering",!0)}}function Ue(e,t){if(1&e){const e=x.Tb();x.Sb(0,"ejs-dropdownlist",83,84),x.cc("change",function(i){x.Bc(e);const n=t.$implicit;return x.gc(2).onChangePosition(i,n,n.index)}),x.Rb()}if(2&e){const e=t.$implicit,i=x.gc(2);x.mc("dataSource",i.dataPosition)("value",e.position)("fields",i.fieldsPosition)("allowFiltering",!0)}}function Le(e,t){1&e&&(x.Kc(0),x.hc(1,"translate")),2&e&&x.Mc(" ",x.ic(1,1,"INGREDIENT_NAME")," ")}function ze(e,t){1&e&&x.Kc(0),2&e&&x.Mc(" ",t.$implicit.name," ")}function Je(e,t){1&e&&x.Kc(0),2&e&&x.Mc(" ",t.$implicit.name," ")}function je(e,t){1&e&&(x.Sb(0,"div"),x.Nb(1,"i",85),x.Rb())}function He(e,t){if(1&e&&(x.Sb(0,"div"),x.Kc(1),x.Rb()),2&e){const e=t.$implicit,i=x.gc(2);x.Bb(i.changeAllowColor(e)),x.zb(1),x.Mc("\xb1 ",e.allow,"")}}function _e(e,t){if(1&e){const e=x.Tb();x.Sb(0,"div",63),x.Ic(1,Pe,7,3,"ul",15),x.Sb(2,"div",0),x.Sb(3,"div",64),x.Sb(4,"button",65),x.cc("click",function(){return x.Bc(e),x.gc().sortBySup(0)}),x.Kc(5),x.hc(6,"translate"),x.Rb(),x.Ic(7,xe,3,1,"button",66),x.Rb(),x.Rb(),x.Sb(8,"div",0),x.Sb(9,"div",67),x.Sb(10,"div",16),x.Sb(11,"div",32),x.Sb(12,"ejs-grid",68,69),x.cc("actionComplete",function(t){return x.Bc(e),x.gc().actionCompleteIngredient(t)})("recordDoubleClick",function(t){return x.Bc(e),x.gc().onDoubleClickIngredient(t)})("actionBegin",function(t){return x.Bc(e),x.gc().actionBeginIngredient(t)})("toolbarClick",function(t){return x.Bc(e),x.gc().toolbarClickIngredient(t)})("rowSelected",function(t){return x.Bc(e),x.gc().rowSelectedIngredient(t)}),x.Sb(14,"e-columns"),x.Sb(15,"e-column",70),x.Ic(16,Re,2,3,"ng-template",null,36,x.Jc),x.Ic(18,Ae,2,4,"ng-template",null,37,x.Jc),x.Ic(20,Me,2,4,"ng-template",null,41,x.Jc),x.Rb(),x.Sb(22,"e-column",71),x.Ic(23,ke,2,3,"ng-template",null,36,x.Jc),x.Ic(25,Fe,1,1,"ng-template",null,41,x.Jc),x.Ic(27,Te,1,1,"ng-template",null,37,x.Jc),x.Rb(),x.Sb(29,"e-column",72),x.Ic(30,$e,2,3,"ng-template",null,37,x.Jc),x.Rb(),x.Sb(32,"e-column",73),x.Ic(33,Ge,2,0,"ng-template",null,36,x.Jc),x.Ic(35,Ee,2,3,"ng-template",null,37,x.Jc),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Sb(37,"div",67),x.Sb(38,"div",16),x.Sb(39,"div",32),x.Sb(40,"ejs-grid",74,75),x.cc("actionComplete",function(t){return x.Bc(e),x.gc().actionCompleteIngredient(t)})("recordDoubleClick",function(t){return x.Bc(e),x.gc().onDoubleClickIngredient(t)})("actionBegin",function(t){return x.Bc(e),x.gc().actionBeginIngredient(t)})("toolbarClick",function(t){return x.Bc(e),x.gc().toolbarClickIngredient(t)})("rowSelected",function(t){return x.Bc(e),x.gc().rowSelectedIngredient(t)}),x.Sb(42,"e-columns"),x.Sb(43,"e-column",70),x.Ic(44,Oe,2,3,"ng-template",null,36,x.Jc),x.Ic(46,Ke,2,4,"ng-template",null,37,x.Jc),x.Ic(48,Ue,2,4,"ng-template",null,41,x.Jc),x.Rb(),x.Sb(50,"e-column",71),x.Ic(51,Le,2,3,"ng-template",null,36,x.Jc),x.Ic(53,ze,1,1,"ng-template",null,41,x.Jc),x.Ic(55,Je,1,1,"ng-template",null,37,x.Jc),x.Rb(),x.Nb(57,"e-column",72),x.Sb(58,"e-column",73),x.Ic(59,je,2,0,"ng-template",null,36,x.Jc),x.Ic(61,He,2,3,"ng-template",null,37,x.Jc),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb()}if(2&e){const e=x.gc();x.zb(1),x.mc("ngIf",e.renderchemical().length>0),x.zb(4),x.Mc(" ",x.ic(6,12,"DEFAULT")," "),x.zb(2),x.mc("ngForOf",e.supplier),x.zb(5),x.mc("dataSource",e.ingredients1)("allowSorting",!0)("allowSorting",!0)("editSettings",e.editSettings)("toolbar",e.toolbarOptions2),x.zb(28),x.mc("dataSource",e.ingredients2)("allowSorting",!0)("editSettings",e.editSettings)("toolbar",e.toolbarOptions2)}}function qe(e,t){if(1&e){const e=x.Tb();x.Sb(0,"div",86),x.Sb(1,"h4",87),x.Nb(2,"i",88),x.Kc(3," Clone Article "),x.Rb(),x.Sb(4,"button",89),x.cc("click",function(){return t.$implicit.dismiss("Cross click")}),x.Sb(5,"span",90),x.Kc(6,"\xd7"),x.Rb(),x.Rb(),x.Rb(),x.Sb(7,"div",91),x.Sb(8,"div",0),x.Sb(9,"div",92),x.Sb(10,"div",93),x.Sb(11,"label",94),x.Kc(12,"Article Name"),x.Rb(),x.Sb(13,"span",95),x.Kc(14,"(*)"),x.Rb(),x.Sb(15,"input",96),x.cc("ngModelChange",function(t){return x.Bc(e),x.gc().articleName=t}),x.Rb(),x.Rb(),x.Rb(),x.Sb(16,"div",92),x.Sb(17,"div",93),x.Sb(18,"label",94),x.Kc(19,"Process"),x.Rb(),x.Sb(20,"ejs-dropdownlist",97,98),x.cc("change",function(t){return x.Bc(e),x.gc().onChangeProcessCloneModal(t)}),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Sb(22,"div",99),x.Sb(23,"button",100),x.cc("click",function(){return t.$implicit.close("Close click")}),x.Kc(24,"Close"),x.Rb(),x.Sb(25,"button",101),x.cc("click",function(){return x.Bc(e),x.gc().cloneArticleModelname()}),x.Kc(26,"Clone"),x.Rb(),x.Rb()}if(2&e){const e=x.gc();x.zb(15),x.mc("ngModel",e.articleName),x.zb(5),x.mc("value",e.valueProcess)("dataSource",e.processData)("allowFiltering",!0)("fields",e.processfields)}}function Qe(e,t){if(1&e){const e=x.Tb();x.Qb(0),x.Sb(1,"ejs-radiobutton",105),x.cc("ngModelChange",function(t){return x.Bc(e),x.gc(2).artProcessIDClone=t}),x.Rb(),x.Pb()}if(2&e){const e=t.$implicit,i=x.gc(2);x.zb(1),x.mc("label",e.name)("value",e.id)("ngModel",i.artProcessIDClone)}}function Ve(e,t){if(1&e){const e=x.Tb();x.Sb(0,"div",86),x.Sb(1,"h4",87),x.Nb(2,"i",88),x.Kc(3," Clone BPFC "),x.Rb(),x.Sb(4,"button",89),x.cc("click",function(){return t.$implicit.dismiss("Cross click")}),x.Sb(5,"span",90),x.Kc(6,"\xd7"),x.Rb(),x.Rb(),x.Rb(),x.Sb(7,"div",91),x.Sb(8,"div",0),x.Sb(9,"div",92),x.Sb(10,"div",93),x.Sb(11,"label",94),x.Kc(12,"Model Name"),x.Rb(),x.Sb(13,"span",95),x.Kc(14,"(*)"),x.Rb(),x.Sb(15,"ejs-dropdownlist",102,7),x.cc("open",function(){return x.Bc(e),x.gc().openPopupDropdownlist()})("filtering",function(t){return x.Bc(e),x.gc().onFilteringModelNameClone(t)})("select",function(t){return x.Bc(e),x.gc().onChangeModelNameClone(t)}),x.Rb(),x.Kc(17),x.Rb(),x.Rb(),x.Sb(18,"div",92),x.Sb(19,"div",93),x.Sb(20,"label",94),x.Kc(21,"Model NO"),x.Rb(),x.Sb(22,"span",95),x.Kc(23,"(*)"),x.Rb(),x.Sb(24,"ejs-dropdownlist",103,10),x.cc("dataBound",function(t){return x.Bc(e),x.gc().OndataBound(t)})("filtering",function(t){return x.Bc(e),x.gc().onFilteringModelNOClone(t)})("select",function(t){return x.Bc(e),x.gc().onChangeModelNoClone(t)}),x.Rb(),x.Kc(26),x.Rb(),x.Rb(),x.Sb(27,"div",92),x.Sb(28,"div",93),x.Sb(29,"label",94),x.Kc(30,"Article NO"),x.Rb(),x.Sb(31,"span",95),x.Kc(32,"(*)"),x.Rb(),x.Sb(33,"ejs-dropdownlist",104,7),x.cc("filtering",function(t){return x.Bc(e),x.gc().onFilteringArticleNOClone(t)})("ngModelChange",function(t){return x.Bc(e),x.gc().articleNOIDClone=t})("select",function(t){return x.Bc(e),x.gc().onChangeArticleNoClone(t)}),x.Rb(),x.Kc(35),x.Rb(),x.Rb(),x.Sb(36,"div",92),x.Sb(37,"div",93),x.Sb(38,"label",94),x.Kc(39,"Process"),x.Rb(),x.Sb(40,"span",95),x.Kc(41,"(*)"),x.Rb(),x.Sb(42,"div",13),x.Ic(43,Qe,2,3,"ng-container",14),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Sb(44,"div",99),x.Sb(45,"button",100),x.cc("click",function(){return t.$implicit.close("Close click")}),x.Kc(46,"Close"),x.Rb(),x.Sb(47,"button",101),x.cc("click",function(){return x.Bc(e),x.gc().onClickClone()}),x.Kc(48,"Clone"),x.Rb(),x.Rb()}if(2&e){const e=x.gc();x.zb(15),x.mc("dataSource",e.modelNameDataClone)("fields",e.fieldsBPFCs)("allowFiltering",!0)("value",e.value),x.zb(2),x.Mc(" ",e.modelNameIDClone," "),x.zb(7),x.mc("dataSource",e.modelNOsDataClone)("fields",e.fieldsBPFCs)("allowFiltering",!0)("value",e.valuemodelNo),x.zb(2),x.Mc(" ",e.modelNOIDClone," "),x.zb(7),x.mc("dataSource",e.articleNosDataClone)("fields",e.fieldsBPFCs)("allowFiltering",!0)("ngModel",e.articleNOIDClone),x.zb(2),x.Mc(" ",e.articleNOIDClone," "),x.zb(8),x.mc("ngForOf",e.artProcessDataClone2)}}function Ye(e,t){1&e&&(x.Kc(0),x.hc(1,"date")),2&e&&x.Mc(" ",x.jc(1,1,t.$implicit.createdTime,"yyyy-MM-dd , hh:mm:ss a")," ")}function Xe(e,t){if(1&e&&(x.Qb(0),x.Nb(1,"input",118),x.Pb()),2&e){const e=x.gc().$implicit;x.zb(1),x.mc("value",e.remark)}}function We(e,t){if(1&e&&x.Nb(0,"input",119),2&e){const e=x.gc().$implicit;x.mc("value",e.remark)}}function Ze(e,t){if(1&e&&(x.Sb(0,"span",115),x.Ic(1,Xe,2,1,"ng-container",116),x.Ic(2,We,1,1,"ng-template",null,117,x.Jc),x.Rb()),2&e){const e=t.$implicit,i=x.yc(3);x.mc("ngClass","Improve"==e.action?"e-input-group e-control-wrapper e-valid-input":"e-input-group e-control-wrapper e-valid-input e-disabled"),x.zb(1),x.mc("ngIf","Improve"==e.action)("ngIfElse",i)}}function et(e,t){if(1&e){const e=x.Tb();x.Sb(0,"div",86),x.Sb(1,"h4",87),x.Nb(2,"i",88),x.Kc(3," BPFC History "),x.Rb(),x.Sb(4,"button",89),x.cc("click",function(){return t.$implicit.dismiss("Cross click")}),x.Sb(5,"span",90),x.Kc(6,"\xd7"),x.Rb(),x.Rb(),x.Rb(),x.Sb(7,"div",91),x.Sb(8,"ejs-grid",106,107),x.cc("actionBegin",function(t){return x.Bc(e),x.gc().actionBeginHistory(t)}),x.Sb(10,"e-columns"),x.Sb(11,"e-column",108),x.Ic(12,Ye,2,4,"ng-template",null,37,x.Jc),x.Rb(),x.Nb(14,"e-column",109),x.Nb(15,"e-column",110),x.Nb(16,"e-column",111),x.Sb(17,"e-column",112),x.Ic(18,Ze,4,3,"ng-template",null,41,x.Jc),x.Rb(),x.Nb(20,"e-column",113),x.Rb(),x.Rb(),x.Rb(),x.Sb(21,"div",99),x.Sb(22,"button",114),x.cc("click",function(){return t.$implicit.close("Close click")}),x.Kc(23,"Close"),x.Rb(),x.Rb()}if(2&e){const e=x.gc();x.zb(8),x.mc("dataSource",e.historyData)("allowSorting",!0)("allowSorting",!0)("editSettings",e.editSettingsHis)("toolbar",e.toolbarOptionsHistory),x.zb(9),x.mc("edit",e.editparamsHis)}}let tt=(()=>{class e{constructor(e,t,i,n,s,l,a,o,r,c,d,h,u,g,m,b){this.glueIngredientService=e,this.modalNameService=t,this.glueService=i,this.alertify=n,this.modalService=s,this.route=l,this.authService=a,this.bPFCEstablishService=o,this.modelNoService=r,this.articleNoService=c,this.kindService=d,this.partService=h,this.materialService=u,this.buildingUserService=g,this.artProcessService=m,this.ingredientService=b,this.positions=["B","C","D","E"],this.approvalStatus=!1,this.createdStatus=!1,this.role=JSON.parse(localStorage.getItem("user")).User.Role,this.isShow=!1,this.selectedRow=[],this.LANG=localStorage.getItem("lang")||"vi",this.glue={},this.ingredient={},this.editPercentage={glueID:0,ingredientID:0,percentage:0},this.editAllow={glueID:0,ingredientID:0,allow:0},this.page=1,this.supplier=[],this.toolbarOptions=["Search","Delete"],this.toolbarOptions2=["Search","Add","Delete","Cancel"],this.toolbarOptionsHistory=["Search"],this.selectionOptions={type:"Multiple",mode:"Both"},this.editSettingsHis={allowEditing:!0,mode:"Normal",allowEditOnDblClick:!0},this.detailIngredient=[],this.totalPercentage=0,this.fieldsBPFCs={text:"name",value:"id"},this.fieldsBPFCss={text:"name",value:"id"},this.fieldsGlueChemical={text:"name",value:"name"},this.textGlue="Select Model Name",this.textModelName="Select Model Name - Model #",this.textGlueMaterial="Select ",this.fieldsGlue2={text:"name",value:"id"},this.articleNofields={text:"name",value:"id"},this.processfields={text:"name",value:"id"},this.processData=[{id:1,name:"ASY"},{id:2,name:"STF"}],this.valueProcess=1,this.textGlue2="Select Model No",this.existGlue=!1,this.editparamsHis={params:{format:"n"}},this.dataPosition=[{id:"0",name:""},{id:"1",name:"A"},{id:"2",name:"B"},{id:"3",name:"C"},{id:"4",name:"D"},{id:"5",name:"E"}],this.fieldsKindEdit={text:"name",value:"name"},this.fieldsPartEdit={text:"name",value:"name"},this.fieldsMaterialEdit={text:"name",value:"name"},this.fieldsGlueEdit={text:"name",value:"name"},this.fieldsChemical={text:"name",value:"name"},this.fieldsPosition={text:"name",value:"name"},this.rowIndex="",this.glueIngredient2={ingredientID:0,percentage:0,glueID:0,position:""},this.history={Action:"Created",BPFCEstablishID:0,GlueID:0,Before:"",BeforeAllow:"",After:"",AfterAllow:"",UserID:0,Remark:""},this.valuess="Badminton",this.modelNameSelect=!1,this.modelNoSelect=!1,this.modelArtSelect=!1,this.modelProcessSelect=!1,this.userData=[],this.onFiltering=e=>{let t=new T.h;t=""!==e.text?t.where("name","contains",e.text,!0):t,e.updateData(this.modelNameData,t)},this.onFilteringModelName=e=>{let t=new T.h;t=""!==e.text?t.where("name","contains",e.text,!0):t,e.updateData(this.modelNameData,t)},this.onFilteringModelNO=e=>{let t=new T.h;t=""!==e.text?t.where("name","contains",e.text,!0):t,e.updateData(this.modelNoData,t)},this.onFilteringArticleNO=e=>{let t=new T.h;t=""!==e.text?t.where("name","contains",e.text,!0):t,e.updateData(this.articleNoData,t)},this.onFilteringModelNameClone=e=>{let t=new T.h;t=""!==e.text?t.where("name","contains",e.text,!0):t,e.updateData(this.modelNameData,t)},this.onFilteringModelNOClone=e=>{let t=new T.h;t=""!==e.text?t.where("name","contains",e.text,!0):t,e.updateData(this.modelNoData,t)},this.onFilteringArticleNOClone=e=>{let t=new T.h;t=""!==e.text?t.where("name","contains",e.text,!0):t,e.updateData(this.articleNoData,t)},this.onFilteringArtProcessClone=e=>{let t=new T.h;t=""!==e.text?t.where("name","contains",e.text,!0):t,e.updateData(this.artProcessDataClone,t)}}ngOnInit(){this.getModelNames(),this.getAllUsers(),this.modelNameID=0,this.subID=0,this.selIndex=[],this.isAdd=!1,this.existGlue=!1,this.oldDetail=[],this.glueIngredientDetail=[],this.removeLocalStore("details"),this.glueid=0,this.onService(),this.getAllSupllier(),this.sortOptions={columns:[{field:"item",direction:"Decending"}]},this.editParams={params:{value:""}},0===this.glue.id?(this.showBarCode=!1,this.genaratorGlueCode()):this.showBarCode=!0,this.ingredientService.currentIngredient.subscribe(e=>{200===e&&this.getIngredients()}),this.pageSettings={pageSize:12},this.paginationI={currentPage:1,itemsPerPage:10,totalItems:0,totalPages:0},this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"},this.toolbar=[{text:"Add New",tooltipText:"Add new row",prefixIcon:"e-add",id:"AddNew"},"Edit","Delete","Update","Cancel","Search"],this.orderidrules={required:!0,number:!0},this.customeridrules={required:!0},this.freightrules={required:!0},this.editparams={paramss:{popupHeight:"300px"}}}onChangeProcessCloneModal(e){e.itemData&&(this.processID=e.itemData.id)}resetLifeCycleBPFC(){this.selIndex=[],this.oldDetail=[],this.glueIngredientDetail=[],this.removeLocalStore("details"),this.removeLocalStore("detailsTamp"),this.ingredients1=[],this.ingredients2=[],this.glues=[],this.BPFCID=0}onCreatedGridGlue(){}ngAfterViewInit(){$('[data-toggle="tooltip"]').tooltip();const e=JSON.parse(localStorage.getItem("level"));this.level=e.id,this.getBuilding()}onChangeKindEdit(e){this.kindEdit=e.value,this.kindID=e.itemData.id}onChangePartEdit(e){this.partEdit=e.value,this.partID=e.itemData.id}onChangeMaterialEdit(e){this.kindEdit=e.value,this.materialID=e.itemData.id}dataBoundGlue(){$('[data-toggle="tooltip"]').tooltip(),this.selectedRow.length?(this.gridglue.selectRows(this.selectedRow),this.selectedRow=[]):this.gridglue.selectRows(this.selIndex)}actionBeginGlue(e){"beginEdit"===e.requestType&&(this.chemicalNameEdit=e.rowData.name,this.pathNameEdit=e.rowData.pathName,this.modelNoEdit=e.rowData.modelNo,this.materialNameEdit=e.rowData.materialName,this.glue.consumption=e.rowData.consumption,this.glue.kindID=e.rowData.kindID||null,this.glue.partID=e.rowData.partID||null,this.glue.materialID=e.rowData.materialID||null,this.glue.BPFCEstablishID=e.rowData.bpfcEstablishID,this.glue.name=e.rowData.name,this.glue.expiredTime=this.expiredTime,this.history.Before=""===e.rowData.consumption?"0":"Consumption "+e.rowData.consumption,this.detailGlue=!0),"save"===e.requestType&&(this.glue.id=e.rowData.id||0,this.glue.code=e.data.code||"",this.glue.consumption=e.data.consumption,this.glue.glueNameID=e.data.glueNameID,this.glue.kindID=this.kindID||null,this.glue.partID=this.partID||null,this.glue.materialID=this.materialID||null,this.glue.BPFCEstablishID=this.BPFCID,this.glue.name=this.chemicalNameEdit,this.glue.expiredTime=this.expiredTime,this.history.Action="Consumption",this.history.BPFCEstablishID=this.BPFCID,this.history.GlueID=this.glueid,this.history.After="Consumption "+e.data.consumption,this.history.UserID=JSON.parse(localStorage.getItem("user")).User.ID,this.glue.createdBy=JSON.parse(localStorage.getItem("user")).User.ID,this.bPFCEstablishService.AddHistoryBPFC(this.history).subscribe(()=>{this.getBPFCID({modelNameID:this.modelNameID,modelNoID:this.modelNoID,articleNoID:this.articleNoID,artProcessID:this.artProcessID})}),this.saveGlue()),"delete"===e.requestType&&0!==e.data[0].id&&(this.glueid=e.data[0].id,this.history.Action="Delete",this.history.Before=e.data[0].name,this.history.BPFCEstablishID=this.BPFCID,this.history.GlueID=e.data[0].id,this.history.UserID=JSON.parse(localStorage.getItem("user")).User.ID,this.bPFCEstablishService.AddHistoryBPFC(this.history).subscribe(()=>{this.glueService.delete(e.data[0].id).subscribe(()=>{this.getAllGluesByBPFCID(this.BPFCID),this.detailGlue=!1,this.removeLocalStore("details"),this.glueIngredientDetail=[],this.oldDetail=[],this.grid.refresh(),this.grid2.refresh(),this.alertify.success("Glue has been deleted")},e=>{this.alertify.error("Failed to delete the Glue")})}))}rowDeselected(e){const t=e.rowIndex,i=this.getLocalStore("details").sort(this.dynamicSort("position"));!1===this.compareArray(this.oldDetail,i)&&!0===e.isInteracted&&this.alertify.valid("C\u1ea3nh b\xe1o!","B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n b\u1ecf qua s\u1ef1 thay \u0111\u1ed5i n\xe0y kh\xf4ng?").then(e=>{if(this.modified=!0,this.gridglue.getSelectedRowIndexes().length){const e=this.gridglue.dataSource[t];e.name=e.chemical.name,this.gridglue.refresh()}}).catch(e=>{this.gridglue.selectRows([t])})}rowSelected(e){e.data[0]&&(this.GlueNameDefault=e.data[0].name);const t=e.data[0]||e.data;this.selIndex=[e.rowIndex],!e.isInteracted&&e.previousRowIndex&&(this.selIndex=[e.previousRowIndex]),e.isInteracted&&void 0!==e.data.name&&this.modified&&this.loadPreview(Number(e.data.id)),!1!==e.isInteracted&&null===e.target||void 0!==t.name&&this.modified&&this.loadPreview(Number(t.id))}onChangePosition(e,t,i){this.modified=!1,this.history.BeforeAllow=this.glueNewName;const n=e.value;let s=this.getLocalStore("details");if(""===e.value);else{if(0!==s.length){let t="";switch(s[s.length-1].position){case"A":t="B";break;case"B":t="C";break;case"C":t="D";break;case"D":t="E"}if(n!==t)return this.alertify.warning("H\xe3y ch\u1ecdn ch\u1ea5t ti\u1ebfp theo l\xe0 "+t,!0),this.grid.refresh(),this.grid2.refresh(),void(e.cancel=!0)}if(0===s.filter(t=>t.position===e.value).length&&null!==e.value)if(s=this.getLocalStore("details"),this.percentage=0,this.position=e.value,0!==s.filter(e=>e.ingredientName===t.name&&e.position===t.position).length){const i=s.findIndex(e=>e.ingredientName===t.name);s[i].position=e.value,this.setLocalStore("details",s),this.glueIngredientDetail=this.getLocalStore("details"),this.makeFormula(),this.updateChemicalList(),this.grid.refresh()}else{s=this.getLocalStore("details");const i={id:0,glueID:this.glueid,ingredientID:t.id,glueName:"",ingredientName:t.name,percentage:this.percentage,position:e.value,createdDate:new Date,allow:0,expiredTime:t.expiredTime};"A"===e.value&&(i.percentage=100,i.expiredTime=t.expiredTime),s.push(i),this.setLocalStore("details",s),this.glueIngredientDetail=this.getLocalStore("details"),this.makeFormula(),this.updateChemicalList(),"A"===e.value&&this.grid.refresh()}}}recordDoubleClick(e){this.modifiedGlue=!0}toolbarClickIngredient(e){switch(e.item.text){case"Add":e.cancel=!0,this.openIngredientModalComponent()}}onDoubleClickIngredient(e){this.setFocus=e.column}rowSelectedIngredient(e){this.ingridientID=e.data.id}genaratorGlueCode(){this.glue.code=this.makeid(8)}makeid(e){let t="";const i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",n=i.length;for(let s=0;s<e;s++)t+=i.charAt(Math.floor(Math.random()*n));return t}compareArray(e,t){return JSON.stringify(e)===JSON.stringify(t)}setLocalStore(e,t){localStorage.removeItem(e);const i=JSON.stringify(t);localStorage.setItem(e,i)}getLocalStore(e){return(JSON.parse(localStorage.getItem(e))||[]).sort(this.dynamicSort("position"))}removeLocalStore(e){localStorage.removeItem(e)}dynamicSort(e){let t=1;return"-"===e[0]&&(t=-1,e=e.substr(1)),(i,n)=>-1===t?n[e].localeCompare(i[e]):i[e].localeCompare(n[e])}checkColorCode(e){return!0===e.approvalStatus&&!0===e.finishedStatus}checkDone(e){return!0===e.approvalStatus&&!0===e.finishedStatus?"Done":"Undone"}checkStatus(e,t){return!0===e&&!0===t?"Done":"Undone"}renderchemical(){return this.glueIngredientDetail=this.glueIngredientDetail||[],this.glueIngredientDetail.sort(this.dynamicSort("position"))}makeFormula(){var e,t;const i=this.getLocalStore("details").filter(e=>"A"===e.position)||[];this.nameGlue=(null===(e=i[0])||void 0===e?void 0:e.ingredientName)||"",this.nameGlues=(null===(t=i[0])||void 0===t?void 0:t.ingredientName)+"^"+this.glueIngredientDetail[0].allow+"%"||!1,this.A=i[0].ingredientName,this.glueIngredientDetail=this.renderchemical(),void 0===this.glueIngredientDetail[1]?this.B="":(this.B=this.glueIngredientDetail[1].percentage+"%"+this.glueIngredientDetail[1].ingredientName,this.BB=this.glueIngredientDetail[1].percentage+"%"+this.glueIngredientDetail[1].ingredientName+"^"+this.glueIngredientDetail[1].allow+"%"),void 0===this.glueIngredientDetail[2]?this.C="":(this.C=this.glueIngredientDetail[2].percentage+"%"+this.glueIngredientDetail[2].ingredientName,this.CC=this.glueIngredientDetail[2].percentage+"%"+this.glueIngredientDetail[2].ingredientName+"^"+this.glueIngredientDetail[2].allow+"%"),void 0===this.glueIngredientDetail[3]?this.D="":(this.D=this.glueIngredientDetail[3].percentage+"%"+this.glueIngredientDetail[3].ingredientName,this.DD=this.glueIngredientDetail[3].percentage+"%"+this.glueIngredientDetail[3].ingredientName+"^"+this.glueIngredientDetail[3].allow+"%"),void 0===this.glueIngredientDetail[4]?this.E="":(this.E=this.glueIngredientDetail[4].percentage+"%"+this.glueIngredientDetail[4].ingredientName,this.EE=this.glueIngredientDetail[4].percentage+"%"+this.glueIngredientDetail[4].ingredientName+"^"+this.glueIngredientDetail[4].allow+"%"),this.glueIngredientDetail.length>0?(this.percentageCount=this.glueIngredientDetail.map(e=>e.percentage),this.percentageCountEdit=this.glueIngredientDetail.map(e=>e),this.totalPercentage=this.percentageCount.reduce((e,t)=>e+t,0)):(this.percentageCount=[],this.percentageCountEdit=[],this.totalPercentage=0);const n=this.gridglue.getSelectedRowIndexes()[0];this.gridglue.getSelectedRowIndexes().length&&(this.gridglue.getSelectedRecords(),this.gridglue.dataSource[n].name=this.formula(),this.gridglue.refresh())}formula(){return this.B&&this.C&&this.D&&this.E?`{[ (${this.nameGlue}+ ${this.B}) + ${this.C} ] + ${this.D}}+ ${this.E}`:this.B&&this.C&&this.D?`[(${this.nameGlue} + ${this.B}) + ${this.C}] + ${this.D}`:this.B&&this.C?`(${this.nameGlue} + ${this.B}) + ${this.C}`:this.B?`${this.nameGlue} + ${this.B}`:""+this.nameGlue}formulaTamp(){return this.BB&&this.CC&&this.DD&&this.EE?(this.glueNewName=`{[ (${this.nameGlues}+ ${this.BB}) + ${this.CC} ] + ${this.DD}}+ ${this.EE}`,`{[ (${this.nameGlues}+ ${this.BB}) + ${this.CC} ] + ${this.DD}}+ ${this.EE}`):this.BB&&this.CC&&this.DD?(this.glueNewName=`[(${this.nameGlues} + ${this.BB}) + ${this.CC}] + ${this.DD}`,`[(${this.nameGlues} + ${this.BB}) + ${this.CC}] + ${this.DD}`):this.BB&&this.CC?(this.glueNewName=`(${this.nameGlues} + ${this.BB}) + ${this.CC}`,`(${this.nameGlues} + ${this.BB}) + ${this.CC}`):this.BB?(this.glueNewName=`${this.nameGlues} + ${this.BB}`,`${this.nameGlues} + ${this.BB}`):""+this.nameGlues}getDetail(e){this.glueIngredientService.getDetail(e).subscribe(e=>{var t,i,n,s;this.glueIngredientDetail=e.glueIngredients,this.setLocalStore("details",this.glueIngredientDetail),this.setLocalStore("detailsTamp",this.glueIngredientDetail),this.glueIngredientDetail=this.renderchemical(),this.oldDetail=this.renderchemical();const l=this.glueIngredientDetail.filter(e=>"A"===e.position)||[];this.nameGlue=(null===(t=l[0])||void 0===t?void 0:t.ingredientName)||"",this.nameGlues=(null===(i=l[0])||void 0===i?void 0:i.ingredientName)+"^"+(null===(n=this.glueIngredientDetail[0])||void 0===n?void 0:n.allow)+"%"||!1,this.A=(null===(s=l[0])||void 0===s?void 0:s.ingredientName)||"",void 0===this.glueIngredientDetail[1]?this.B="":(this.B=this.glueIngredientDetail[1].percentage+"%"+this.glueIngredientDetail[1].ingredientName,this.BB=this.glueIngredientDetail[1].percentage+"%"+this.glueIngredientDetail[1].ingredientName+"^"+this.glueIngredientDetail[1].allow+"%"),void 0===this.glueIngredientDetail[2]?this.C="":(this.C=this.glueIngredientDetail[2].percentage+"%"+this.glueIngredientDetail[2].ingredientName,this.CC=this.glueIngredientDetail[2].percentage+"%"+this.glueIngredientDetail[2].ingredientName+"^"+this.glueIngredientDetail[2].allow+"%"),void 0===this.glueIngredientDetail[3]?this.D="":(this.D=this.glueIngredientDetail[3].percentage+"%"+this.glueIngredientDetail[3].ingredientName,this.DD=this.glueIngredientDetail[3].percentage+"%"+this.glueIngredientDetail[3].ingredientName+"^"+this.glueIngredientDetail[3].allow+"%"),void 0===this.glueIngredientDetail[4]?this.E="":(this.E=this.glueIngredientDetail[4].percentage+"%"+this.glueIngredientDetail[4].ingredientName,this.EE=this.glueIngredientDetail[4].percentage+"%"+this.glueIngredientDetail[4].ingredientName+"^"+this.glueIngredientDetail[4].allow+"%"),this.glueIngredientDetail.length>0?(this.percentageCount=this.glueIngredientDetail.map(e=>e.percentage),this.percentageCount.join("+"),this.percentageCountEdit=this.glueIngredientDetail.map(e=>e),this.totalPercentage=this.percentageCount.reduce((e,t)=>e+t,0)):(this.percentageCount=[],this.percentageCountEdit=[],this.totalPercentage=0)})}updateChemicalList(){const e=this.getLocalStore("details");for(const t of e){const e=this.ingredients1.findIndex(e=>e.name===t.ingredientName&&e.id===t.ingredientID);-1!==e&&(this.ingredients1[e].position=t.position,this.ingredients1[e].percentage=t.percentage,this.ingredients1[e].allow=t.allow)}for(const t of e){const e=this.ingredients2.findIndex(e=>e.name===t.ingredientName&&e.id===t.ingredientID);-1!==e&&(this.ingredients2[e].position=t.position,this.ingredients2[e].percentage=t.percentage,this.ingredients2[e].allow=t.allow)}}actionBeginIngredient(e){if("beginEdit"===e.requestType){if(null===e.rowData.position)return this.alertify.warning("H\xe3y ch\u1ecdn t\xean tr\u01b0\u1edbc khi ch\u1ec9nh s\u1eeda!",!0),void(e.cancel=!0);if("A"===e.rowData.position)return this.alertify.warning("Kh\xf4ng \u0111\u01b0\u1ee3c ch\u1ec9nh s\u1eeda ch\u1ea5t A!",!0),void(e.cancel=!0);this.editPercentage.glueID=this.glueid,this.editPercentage.ingredientID=e.rowData.id,this.percentageDefault=e.rowData.percentage,this.editAllow.glueID=this.glueid,this.history.BeforeAllow="",this.history.AfterAllow="",this.editAllow.ingredientID=e.rowData.id,this.allowDefault=e.rowData.allow||0}if("save"===e.requestType){this.percentageEdit={percentage:Number(e.data.percentage),id:Number(e.rowData.id)},this.allowEdit={allow:Number(e.data.allow),id:Number(e.rowData.id)},"edit"===e.action&&(this.allowChange=e.data.allow||0,this.percentageChange=e.data.percentage),this.editPercentage.percentage=e.data.percentage,this.editAllow.allow=e.data.allow;const t=Number(this.percentageDefault)!==Number(this.percentageChange),i=Number(this.allowDefault)!==Number(this.allowChange);if(t){this.modified=!1;const t=this.getLocalStore("details"),i=t.findIndex(t=>t.ingredientName===e.data.name&&t.ingredientID===e.data.id);t[i].percentage=e.data.percentage,this.setLocalStore("details",t),this.updateChemicals()}if(i){const t=this.getLocalStore("details"),i=t.findIndex(t=>t.ingredientName===e.data.name&&t.ingredientID===e.data.id);t[i].allow=e.data.allow,this.setLocalStore("details",t),this.modified=!1,this.history.BeforeAllow=this.glueNewName,this.updateChemicals()}}"delete"===e.requestType&&this.deleteIngredient()}updateGlueIngredient(){}loadPreview(e){this.glueid=Number(e),this.getIngredients(),this.getDetail(this.glueid),this.detailGlue=!0}resolver(){this.route.data.subscribe(e=>{this.glues=e.glues.result,this.paginationG=e.glues.pagination})}onService(){this.ingredientService.currentIngredient.subscribe(e=>{300===e&&(this.getIngredients(),this.updateChemicalList(),this.ingredientService.changeIngredient(0))})}mapGlue(e){1==!e.status?(this.percentage=0,this.mapGlueIngredient({ingredientID:e.id,percentage:this.percentage,glueID:this.glueid})):this.delete(this.glueid,e.id)}getIngredients(){this.glueIngredientService.getIngredients(this.glueid).subscribe(e=>{this.ingredients1=e.result.list1,this.ingredients2=e.result.list2},e=>{this.alertify.error(e)})}getGlues(){this.glueService.getAllGlue().subscribe(e=>{this.glues=e},e=>{this.alertify.error(e)})}mapGlueIngredients(e){this.glueIngredientService.mapGlueIngredient(e).subscribe(e=>{void 0===this.subID?(this.sortBySup(0),this.getDetail(this.glueid)):(this.sortBySup(this.subID),this.getDetail(this.glueid))})}mapGlueIngredient(e){this.glueIngredientService.mappGlueIngredient(e).subscribe(e=>{void 0===this.subID?(this.getAllGluesByBPFCID(this.BPFCID),this.sortBySup(0),this.getDetail(this.glueid)):(this.sortBySup(this.subID),this.getDetail(this.glueid),this.getAllGluesByBPFCID(this.BPFCID))})}mapGlueIngredientByGlueID(e){this.glueIngredientService.mapGlueIngredientByGlueID(e).subscribe(e=>{this.alertify.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng!"),this.getAllGluesByBPFCID(this.BPFCID),this.detailGlue=!0,this.modified=!0,this.modified=!0,void 0===this.subID?(this.sortBySup(0),this.getDetail(this.glueid)):(this.sortBySup(this.subID),this.getDetail(this.glueid))})}openIngredientModalComponent(){const e=this.modalService.open(G.a,{size:"md"});e.componentInstance.ingredient=this.ingredient,e.componentInstance.title="Add Ingredient",e.result.then(e=>{},e=>{})}actionCompleteIngredient(e){"beginEdit"===e.requestType&&"Item"!==this.setFocus.field&&(e.form.elements.namedItem(this.setFocus.field).focus(),e.form.elements.namedItem(this.setFocus.field).value="")}openPopupDropdownlist(){$('[data-toggle="tooltip"]').tooltip()}toolbarClick(e){switch(e.item.text){case"Add New":const t=this.getLocalStore("details").sort(this.dynamicSort("position"));!1===this.compareArray(this.oldDetail,t)&&t.length>0&&this.oldDetail.length>0?this.alertify.valid("C\u1ea3nh b\xe1o!","B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n b\u1ecf qua nh\u1eefng thay \u0111\u1ed5i n\xe0y?").then(e=>{this.glue.id=0,this.glue.name="1",this.glue.BPFCEstablishID=this.BPFCID,this.glue.createdBy=JSON.parse(localStorage.getItem("user")).User.ID,this.saveGlue()}).catch(t=>{e.cancel=!0}):(this.glue.id=0,this.glue.name="1",this.glue.BPFCEstablishID=this.BPFCID,this.glue.createdBy=JSON.parse(localStorage.getItem("user")).User.ID,this.saveGlue())}}openModal(e){this.getModelNamesClone(),this.getAllProcess(),this.modalReference=this.modalService.open(e)}openModalHistory(e){this.modalReference=this.modalService.open(e,{size:"xxl"}),this.LoadHistoryBPFC()}LoadHistoryBPFC(){this.bPFCEstablishService.LoadHistoryBPFC(this.BPFCID).subscribe(e=>{this.historyData=e.map(e=>({id:e.id,glueID:e.glueID,createdTime:e.createdTime,bpfcEstablishID:e.bpfcEstablishID,before:e.before,after:e.after,action:e.action,remark:e.remark,userID:e.userID,createdBy:this.createdBy(e.userID)}))})}actionBeginHistory(e){"save"===e.requestType&&this.bPFCEstablishService.UpdateHistoryBPFC({ID:e.data.id,Remark:e.data.remark}).subscribe(e=>{e&&this.alertify.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng!")})}getAllUsers(){this.buildingUserService.getAllUsers(1,1e3).subscribe(e=>{this.userData=e.result})}createdBy(e){if(0===e)return"#N/A";const t=this.userData.filter(t=>t.ID===e)[0];return void 0!==t?t.Username:"#N/A"}cloneModelname(){this.alertify.confirm("Sao ch\xe9p model name!","B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n sao ch\xe9p model name kh\xf4ng?",()=>{this.modalNameService.cloneModelname(this.modelNameID,this.modelNameClone,this.modelNoClone,this.valueProcess).subscribe(e=>{this.alertify.success("the model name has been cloned"),this.modalReference.close(),this.modelNameDropdownlist.hidePopup()})})}cloneArticleModelname(){this.alertify.confirm("Sao ch\xe9p article!","B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n sao ch\xe9p article kh\xf4ng?",()=>{this.modalNameService.cloneArticleModelname(this.modelNameID,this.modelNameClone,this.modelNoClone,this.articleName,this.processID).subscribe(e=>{this.alertify.success("Sao ch\xe9p th\xe0nh c\xf4ng!"),this.modalReference.close(),this.modelNameDropdownlist.hidePopup()})})}delete(e,t){this.glueIngredientService.delete(e,t).subscribe(t=>{this.alertify.success("\u0110\xe3 x\xf3a th\xe0nh c\xf4ng!"),this.getIngredients(),this.getDetail(e)})}deleteGlue(e){this.alertify.confirm("X\xf3a keo",'B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a keo n\xe0y kh\xf4ng "'+e.id+'" ?',()=>{this.glueService.delete(e.id).subscribe(()=>{this.getGlues(),this.alertify.success("\u0110\xe3 x\xf3a th\xe0nh c\xf4ng!")},e=>{this.alertify.error("X\xf3a th\u1ea5t b\u1ea1i r\u1ed3i!")})})}deleteIngridient(e){this.alertify.confirm("X\xf3a ingredient",'B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a ingredient n\xe0y kh\xf4ng "'+e.id+'" ?',()=>{this.ingredientService.delete(e.id).subscribe(()=>{this.getIngredients(),this.alertify.success("\u0110\xe3 x\xf3a th\xe0nh c\xf4ng!")},e=>{this.alertify.error("X\xf3a th\u1ea5t b\u1ea1i r\u1ed3i!")})})}getAllGluesByBPFCID(e){this.glueService.getAllGluesByBPFCID(e).subscribe(e=>{this.glues=e})}getAllGluesByBPFCID2(e){this.glueService.getAllGluesByBPFCID(e).subscribe(e=>{void 0===this.ingredientID?(this.glues=e,e.length>0&&(this.detailGlue=!0)):(this.glueid=e[0].id,this.glueIngredient2.ingredientID=this.ingredientID,this.glueIngredient2.percentage=100,this.glueIngredient2.glueID=this.glueid,this.glueIngredient2.position="A",this.mapGlueIngredient(this.glueIngredient2))})}updateChemicals(){this.ingredientService.sortBySup(this.glueid,this.subID).subscribe(e=>{this.ingredients1=e.list1,this.ingredients2=e.list2;const t=this.getLocalStore("details");for(const i of t){const e=this.ingredients1.findIndex(e=>e.name===i.ingredientName&&e.id===i.ingredientID);-1!==e&&(this.ingredients1[e].position=i.position,this.ingredients1[e].percentage=i.percentage,this.ingredients1[e].allow=i.allow)}for(const i of t){const e=this.ingredients2.findIndex(e=>e.name===i.ingredientName&&e.id===i.ingredientID);-1!==e&&(this.ingredients2[e].position=i.position,this.ingredients2[e].percentage=i.percentage,this.ingredients2[e].allow=i.allow)}this.glueIngredientDetail=t,this.makeFormula()})}sortBySup(e){0===this.gridglue.getSelectedRowIndexes().length?this.alertify.warning("Please select a glue!",!0):(this.subID=e,this.ingredientService.sortBySup(this.glueid,e).subscribe(t=>{if(this.ingredients1=t.list1,this.ingredients2=t.list2,0===e){const e=this.getLocalStore("details");this.ingredients1=e.map(e=>({id:e.ingredientID,name:e.ingredientName,code:"",percentage:e.percentage,createdDate:e.createdDate,supplierID:0,allow:e.allow,position:e.position,expiredTime:e.expiredTime,daysToExpiration:e.daysToExpiration,voc:e.voc,materialNO:e.materialNO,unit:e.unit,real:e.real,glueTypeID:0,cbd:e.cbd,replacementFrequency:0,prepareTime:0,standardCycle:0})),this.glueIngredientDetail=e}else this.updateChemicalList()}))}saveGlue(){0===this.glue.id||void 0===this.glue.id?(""===this.glue.code&&this.genaratorGlueCode(),this.createGlue()):this.onChangeChemical?this.updateChemical():this.update(),this.oldDetail=[],localStorage.removeItem("details"),this.glueIngredientDetail=[],this.gridglue.refresh(),this.selectedRow=[0],this.selIndex=[0],this.modified=!0}getBuilding(){JSON.parse(localStorage.getItem("user"))}getAllIngredient(){this.ingredientService.getAllIngredient().subscribe(e=>{this.ingrediented=e})}createGlue(){this.glueService.create(this.glue).subscribe(()=>{this.alertify.success("\u0110\xe3 t\u1ea1o th\xe0nh c\xf4ng!"),this.getAllGluesByBPFCID(this.BPFCID),this.clearGlueForm(),this.genaratorGlueCode(),this.expiredTime=0},e=>{this.alertify.error(e),this.genaratorGlueCode()})}finished(){const e=JSON.parse(localStorage.getItem("user")).User.ID;if(0===this.gridglue.getSelectedRowIndexes().length)this.alertify.warning("H\xe3y ch\u1ecdn v\xe0o 1 glue v\xe0 t\u1ea1o c\xf4ng th\u1ee9c sau \u0111\xf3 m\u1edbi b\u1ea5m ho\xe0n th\xe0nh!",!0);else{this.history.BPFCEstablishID=this.BPFCID,this.history.GlueID=this.glueid,this.history.After=this.GlueNameDefault,this.history.AfterAllow=this.glueNewName,this.history.UserID=e,this.bPFCEstablishService.AddHistoryBPFC(this.history).subscribe(()=>{});const t=this.getLocalStore("details"),i=this.gridglue.getSelectedRecords()[0];i.expiredTime=t.filter(e=>"A"===e.position)[0].expiredTime,i.kindID=0===i.kindID?null:i.kindID,i.partID=0===i.partID?null:i.partID,i.materialID=0===i.materialID?null:i.materialID,this.selectedRow=this.gridglue.getSelectedRowIndexes(),t.length>0&&this.mapGlueIngredientByGlueID({glueName:i.name,glueID:i.id,glueIngredientForMapDto:t})}}clearGlueForm(){this.glue.gluename="",this.glue.kindID=null,this.glue.partID=null,this.glue.materialID=null,this.glue.consumption="",this.showBarCode=!1}update(){this.glueService.update(this.glue).subscribe(e=>{this.alertify.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng!"),this.getAllGluesByBPFCID(this.BPFCID),this.detailGlue=!1,this.history.Action="Created",this.expiredTime=0})}updateChemical(){this.glueService.updateChemical(this.glue).subscribe(e=>{this.alertify.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng!"),this.getAllGluesByBPFCID(this.BPFCID),this.detailGlue=!1,this.onChangeChemical=!1,this.history.Action="Created"})}deleteIngredient(){this.ingredientService.delete(this.ingridientID).subscribe(()=>{const e=this.getLocalStore("details").filter(e=>e.ingredientID!==this.ingridientID);this.setLocalStore("details",e),this.glueIngredientDetail=e,this.getIngredients(),this.makeFormula(),this.alertify.success("\u0110\xe3 x\xf3a th\xe0nh c\xf4ng!")},e=>{this.alertify.error("X\xf3a th\u1ea5t b\u1ea1i r\u1ed3i!")})}approval(){const e=this.gridglue.dataSource;let t=!1,i=!1,n=!1;if(e){for(const l of e){if(l.glueIngredients.length>0){const e=l.glueIngredients.filter(e=>"A"!==e.position);for(const n of e){if(n.allow<=0&&"A"!==n.position)return t=!1,this.approvalStatus=!this.approvalStatus,void this.alertify.warning(`The allowance of checmical name ${n.ingredient.name} must be greater than 0 <br>\n              M\u1ee9c cho ph\xe9p c\u1ee7a h\xf3a ch\u1ea5t ${n.ingredient.name} ph\u1ea3i l\u1edbn h\u01a1n 0!<br>\n               <label>Glue Name: </label> ${l.name} <br>\n              `,!0);if(n.percentage<=0&&"A"!==n.position)return i=!1,this.approvalStatus=!this.approvalStatus,void this.alertify.warning(`The percentage of checmical name ${n.ingredient.name} must be greater than 0 <br>\n              Ph\u1ea7n tr\u0103m c\u1ee7a h\xf3a ch\u1ea5t ${n.ingredient.name} ph\u1ea3i l\u1edbn h\u01a1n 0!<br>\n               <label>Glue Name: </label> ${l.name} <br>\n              `,!0);t=!0,i=!0}}if(+l.consumption<=0)return n=!1,this.approvalStatus=!this.approvalStatus,void this.alertify.warning(`The consumption of glue name ${l.name} must be greater than 0 <br>\n          M\u1ee9c ti\xeau th\u1ee5 c\u1ee7a keo ${l.name} ph\u1ea3i l\u1edbn h\u01a1n 0! <br>\n          <label>Glue Name: </label> ${l.name} <br>\n          `,!0);n=!0}const s=JSON.parse(localStorage.getItem("user")).User.ID;this.bPFCEstablishService.approval(this.BPFCID,s).subscribe(e=>{this.alertify.success("The BPFC has been approved!"),this.createdStatus=this.approvalStatus;const t=this.modelNameDropdownlist.getDataByValue(this.modelNameDropdownlist.value);this.modelNameDropdownlist.valueTemplate=`(${this.checkStatus(this.approvalStatus,this.createdStatus)}) ${t.name}`})}}done(){const e=this.gridglue.dataSource;let t=!1,i=!1,n=!1;if(e){for(const s of e){if(s.glueIngredients.length>0){const e=s.glueIngredients.filter(e=>"A"!==e.position);for(const n of e){if(n.allow<=0)return t=!1,this.createdStatus=!this.createdStatus,void this.alertify.warning(`The allow of checmical name ${n.ingredient.name} is greater than 0 <br>\n              M\u1ee9c cho ph\xe9p c\u1ee7a h\xf3a ch\u1ea5t ${n.ingredient.name} ph\u1ea3i l\u1edbn h\u01a1n 0!<br>\n               <label>Glue Name: </label> ${s.name} <br>\n              `,!0);if(n.percentage<=0)return i=!1,this.createdStatus=!this.createdStatus,void this.alertify.warning(`The percentage of checmical name ${n.ingredient.name} is greater than 0 <br>\n              Ph\u1ea7n tr\u0103m c\u1ee7a h\xf3a ch\u1ea5t ${n.ingredient.name} ph\u1ea3i l\u1edbn h\u01a1n 0!<br>\n               <label>Glue Name: </label> ${s.name} <br>\n              `,!0);t=!0,i=!0}0===e.length&&(t=!0,i=!0)}if(s.consumption<=0)return n=!1,this.createdStatus=!this.createdStatus,void this.alertify.warning(`The consumption of glue name ${s.name} is greater than 0 <br>\n          M\u1ee9c ti\xeau th\u1ee5 c\u1ee7a keo ${s.name} ph\u1ea3i l\u1edbn h\u01a1n 0! <br>\n          <label>Glue Name: </label> ${s.name} <br>\n          `,!0);n=!0}if(t&&i&&n){const e=JSON.parse(localStorage.getItem("user")).User.ID;this.bPFCEstablishService.done(this.BPFCID,e).subscribe(e=>{!0===e.status?(this.alertify.success(e.message),this.createdStatus=this.createdStatus):this.alertify.success(e.message)})}}}getModelNames(){this.modalNameService.getAllModalName().subscribe(e=>{this.modelNameData=e.map(e=>({id:e.id,name:e.name}))})}getArticleNoByModelNameID(e){this.articleNoService.getArticleNoByModelNoID(e).subscribe(e=>{this.articleNoData=e})}getModelNoByModelNameID(e){this.modelNoService.getModelNoByModelNameID(e).subscribe(e=>{this.modelNoData=e})}getArtProcessByArticleNoID(e){this.artProcessService.getArtProcessByArticleNoID(e).subscribe(e=>{this.artProcessData=e.map(e=>({id:e.id,name:1===e.processID?"ASY":"STF"}))})}getAllProcess(){this.artProcessService.GetAllProcess().subscribe(e=>{this.artProcessDataClone2=e})}getAllKind(){this.kindService.getAllKind().subscribe(e=>{this.kinds=e})}getAllPart(){this.partService.getAllPart().subscribe(e=>{this.parts=e})}getAllMaterial(){this.materialService.getAllMaterial().subscribe(e=>{this.materials=e})}getIngredientsByGlueID(){this.ingredientService.getIngredientsByGlueID(this.glueid).subscribe(e=>{this.ingredients1=e.list1,this.ingredients2=e.list2})}getAllSupllier(){this.ingredientService.getAllSupplier().subscribe(e=>{this.supplier=e})}getArticleNoByModelNoID(e){this.articleNoService.getArticleNoByModelNoID(e).subscribe(e=>{this.articleNosData=e})}getBPFCID(e){this.bPFCEstablishService.getBPFCID(e).subscribe(e=>{this.resetLifeCycleBPFC(),this.BPFCID=null==e?void 0:e.id,this.approvalStatus=e.approvalStatus,this.createdStatus=e.finishedStatus,this.glue.BPFCEstablishID=this.BPFCID,this.getAllGluesByBPFCID(this.BPFCID),this.getAllPart(),this.getAllKind(),this.getAllMaterial(),this.getAllIngredient(),this.existGlue=!0,this.modified=!0})}OndataBound(e){this.modelNoDropdownlist.value=this.value}getModelNamesClone(){this.modalNameService.getAllModalName().subscribe(e=>{this.modelNameDataClone=e.map(e=>({id:e.id,name:e.name})),this.getModelNoByModelNameIDClone(this.modelNameIDClone),this.articleNosDataClone=[],this.artProcessDataClone=[]})}getArticleNoByModelNameIDClone(e){this.articleNoService.getArticleNoByModelNoID(e).subscribe(e=>{this.articleNosDataClone=e})}getModelNoByModelNameIDClone(e){this.modelNoService.getModelNoByModelNameID(e).subscribe(e=>{this.modelNOsDataClone=e}),this.getArticleNoByModelNameIDClone(this.valuemodelNo)}getArtProcessByArticleNoIDClone(e){this.artProcessService.getArtProcessByArticleNoID(e).subscribe(e=>{this.artProcessDataClone=e.map(e=>({id:e.id,name:1===e.ProcessID?"ASY":"STF"}))})}clone(e){this.modalNameService.clone(e).subscribe(e=>{!0===e.status?(this.alertify.success("\u0110\xe3 sao ch\xe9p th\xe0nh c\xf4ng!"),this.modalService.dismissAll(),this.getArtProcessByArticleNoID(this.articleNoID),this.clearFormClone()):this.alertify.error("The BPFC exists!")})}onChangeModelName(e){this.resetLifeCycleBPFC(),this.modelNameID=e.itemData.id,this.getModelNoByModelNameID(this.modelNameID),this.existGlue=!1,this.modelNameIDClone=e.value,this.value=e.value,this.valuemodelNo=0,this.modified=!1,this.modelNoData=[],this.articleNosData=[],this.artProcessData=[],this.modelNameSelect=!0,this.modelNoSelect=!1,this.modelArtSelect=!1,this.modelProcessSelect=!1}onChangeModelNo(e){e.isInteracted&&(this.modelNoID=e.itemData.id,this.valuemodelNo=e.itemData.id,this.getArticleNoByModelNoID(this.modelNoID),this.existGlue=!1,this.modified=!1,this.articleNosData=[],this.artProcessData=[],this.modelNoSelect=!0)}onChangeArticleNo(e){e.isInteracted&&(this.articleNoID=e.itemData.id,this.getArtProcessByArticleNoID(this.articleNoID),this.existGlue=!1,this.modified=!1,this.modelArtSelect=!0,this.artProcessData=[])}onClickProcess(e){this.modelProcessSelect=!0,e.target.defaultValue&&(this.artProcessID=Number(e.target.defaultValue),this.getBPFCID({modelNameID:this.modelNameID,modelNoID:this.modelNoID,articleNoID:this.articleNoID,artProcessID:this.artProcessID}))}ClickProcessData(e){}clearFormClone(){this.modelNameIDClone=this.value,this.modelNOIDClone=this.valuemodelNo,this.articleNOIDClone=0,this.artProcessIDClone=0,this.articleNosDataClone=[],this.artProcessDataClone=[],this.artProcessDataClone2=[]}onClickClone(){const e={modelNameID:this.modelNameIDClone,modelNOID:this.modelNOIDClone,articleNOID:this.articleNOIDClone,artProcessID:Number(this.artProcessIDClone),bpfcID:this.BPFCID,cloneBy:JSON.parse(localStorage.getItem("user")).User.ID};this.clone(e)}onChangeModelNameClone(e){this.value!==e.itemData.id&&(this.modelNOsDataClone=[],this.modelNameIDClone=e.itemData.id,this.getModelNoByModelNameIDClone(this.modelNameIDClone)),this.modelNameIDClone=e.itemData.id,this.getModelNoByModelNameIDClone(this.modelNameIDClone)}onChangeModelNoClone(e){this.modelNOIDClone=e.itemData.id,null!==this.modelNOIDClone&&this.getArticleNoByModelNameIDClone(this.modelNOIDClone),this.articleNosDataClone=[],this.artProcessDataClone=[]}onChangeArticleNoClone(e){e.isInteracted&&(this.articleNOIDClone=e.itemData.id,this.getArtProcessByArticleNoIDClone(this.articleNOIDClone))}onChangeProcessClone(e){e.isInteracted&&(this.artProcessIDClone=e.itemData.id)}changeAllowColor(e){return null===e.position?"":this.positions.includes(e.position)&&0===e.allow||this.positions.includes(e.position)&&null===e.allow?"font-weight-bold text-white p-2 rounded-circle warning-text":void 0}changePercentageColor(e){return null===e.percentage?"":this.positions.includes(e.position)&&0===e.percentage?"font-weight-bold text-white p-2 rounded-circle warning-text":void 0}changeConsumptionColor(e){return 0===e.glueIngredients.length?"":""===e.consumption?"font-weight-bold text-white p-2 rounded-circle warning-text":void 0}}return e.\u0275fac=function(t){return new(t||e)(x.Mb(U),x.Mb(R.a),x.Mb(L.a),x.Mb(A.a),x.Mb(r.b),x.Mb(w.a),x.Mb(z.a),x.Mb(k.a),x.Mb(J),x.Mb(j),x.Mb(H.a),x.Mb(_.a),x.Mb(q.a),x.Mb(M.a),x.Mb(Q),x.Mb(V.a))},e.\u0275cmp=x.Gb({type:e,selectors:[["app-glue-ingredient"]],viewQuery:function(e,t){if(1&e&&(x.Qc(Y,!0),x.Qc(X,!0),x.Qc(W,!0),x.Qc(Z,!0),x.Qc(ee,!0),x.Qc(te,!0),x.Qc(ie,!0),x.Qc(ne,!0)),2&e){let e;x.xc(e=x.dc())&&(t.switch=e.first),x.xc(e=x.dc())&&(t.grid=e.first),x.xc(e=x.dc())&&(t.gridglue=e.first),x.xc(e=x.dc())&&(t.grid2=e.first),x.xc(e=x.dc())&&(t.modelNameDropdownlist=e.first),x.xc(e=x.dc())&&(t.modelNoDropdownlist=e.first),x.xc(e=x.dc())&&(t.chemicalDropdownlist=e.first),x.xc(e=x.dc())&&(t.positionDropdownlist=e)}},features:[x.yb([S.n,S.f,S.k])],decls:52,vars:21,consts:[[1,"row"],[1,"col-md-5"],[1,"card"],[1,"col-md-12","card-body","table-responsive"],[1,"col-md-3","mt-2"],[1,"col-md-8","mt-2"],["placeholder","Select a Model Name",1,"w-100","float-left",3,"dataSource","fields","allowFiltering","ngModel","open","ngModelChange","filtering","select"],["modelNameDropdownlist",""],["class","col-md-1 mt-2",4,"ngIf"],["placeholder","Select a Model NO",1,"w-100","float-left",3,"dataSource","fields","allowFiltering","ngModel","open","ngModelChange","filtering","select"],["modelNoDropdownlist",""],[1,"col-md-1","mt-2"],["placeholder","Select article NO   ",1,"w-100","float-left",3,"dataSource","fields","allowFiltering","ngModel","open","ngModelChange","filtering","select"],[1,"col-md-9","mt-2"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"card-body","table-responsive","p-0"],["class","control-section",4,"ngIf"],[1,"col-md-7"],[1,"card-header"],[1,"card-title"],["class","card-tools",4,"ngIf"],["class","card-body",4,"ngIf"],["cloneArticleModal",""],["cloneModal",""],["HistoryModal",""],["ejs-button","","cssClass","e-info",1,"float-right","ml-1",3,"click"],[1,"fa","fa-clone"],["name","process",3,"label","value","click"],["style","display: block;","id","barcode","width","300px","height","100px","mode","SVG","type","Code32",3,"value",4,"ngIf"],["id","barcode","width","300px","height","100px","mode","SVG","type","Code32",2,"display","block",3,"value"],["barcode",""],[1,"control-section"],["height","250px","showColumnMenu","true","allowSorting","true","allowResizing","true","gridLines","Both",3,"dataSource","editSettings","toolbar","allowSorting","selectedRowIndex","rowDeselected","actionBegin","rowSelected","created","toolbarClick","dataBound"],["gridglue",""],["field","name","isPrimaryKey","true","headerText","Chemical","textAlign","Center","width","150"],["headerTemplate",""],["template",""],["field","consumption","headerText","Std. Con.(g)","textAlign","Center","width","150"],["field","expiredTime","headerText","Expired Time","isPrimaryKey","true","textAlign","Center","width","150"],["field","kindName","headerText","Kind","textAlign","Center","width","150"],["editTemplate",""],["field","partName","headerText","Part","textAlign","Center","width","150"],["field","materialName","headerText","Material","textAlign","Center","width","150"],["data-toggle","tooltip","data-placement","top",3,"title"],[3,"dataSource","ngModel","fields","allowFiltering","ngModelChange","select"],["kindDropdownlist",""],["popupHeight","200px","popupWidth","250px",3,"dataSource","ngModel","fields","allowFiltering","ngModelChange","select"],["glueDropdownlist",""],[1,"card-tools"],["type","button",1,"btn","btn-danger","btn-sm","mr-2","d-none"],[1,"fas","fa-undo"],["style","width: 100px; margin-right: 10px;",3,"onLabel","offLabel","disabled","ngModel","checked","click","ngModelChange",4,"ngIf"],["type","button","ejs-button","","cssClass","e-small e-success ml-2",3,"click",4,"ngIf"],["type","button","ejs-button","","cssClass","e-small e-default ml-2",3,"click",4,"ngIf"],[2,"width","100px","margin-right","10px",3,"onLabel","offLabel","disabled","ngModel","checked","click","ngModelChange"],["switch",""],["onLabel","Approved","style","width: 120px;",3,"offLabel","ngModel","checked","click","ngModelChange",4,"ngIf"],["onLabel","Approved",2,"width","120px",3,"offLabel","ngModel","checked","click","ngModelChange"],["type","button","ejs-button","","cssClass","e-small e-success ml-2",3,"click"],[1,"fas","fa-save"],["type","button","ejs-button","","cssClass","e-small e-default ml-2",3,"click"],[1,"fas","fa-history"],[1,"card-body"],[1,"col-lg-12","col-xs-12","col-12",2,"text-align","center"],["type","button",1,"btn","bg-gradient-secondary","btn-sm","rounded-pill",3,"click"],["type","button","style","margin: 3px","class","btn btn-info btn-sm rounded-pill",3,"click",4,"ngFor","ngForOf"],[1,"col-md-6"],["height","675px","gridLines","Both","showColumnMenu","true","allowSorting","true","allowResizing","true",3,"dataSource","allowSorting","editSettings","toolbar","actionComplete","recordDoubleClick","actionBegin","toolbarClick","rowSelected"],["grid",""],["field","Item","isPrimaryKey","true","headerText","Item","width","80","textAlign","Center"],["field","name","isPrimaryKey","true","headerText","Name","width","140","textAlign","Center"],["field","percentage","headerText","%","textAlign","Center","width","60"],["field","allow","headerText","Allow (%)","textAlign","Center","width","60"],["height","675px","showColumnMenu","true","allowSorting","true","allowResizing","true","gridLines","Both",3,"dataSource","allowSorting","editSettings","toolbar","actionComplete","recordDoubleClick","actionBegin","toolbarClick","rowSelected"],["grid2",""],[2,"visibility","hidden"],[2,"list-style-type","square","font-weight","bold"],["style","list-style: none;",4,"ngFor","ngForOf"],[2,"list-style","none"],[1,"font-weight-bold","text-danger"],["type","button",1,"btn","btn-info","btn-sm","rounded-pill",2,"margin","3px",3,"click"],[1,"fas","fa-cannabis"],[3,"dataSource","value","fields","allowFiltering","change"],["positionDropdownlist",""],[1,"fas","fa-exclamation-circle"],[1,"modal-header"],[1,"modal-title"],[1,"fas","fa-plus"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-md-12"],[1,"form-group"],["for","Name"],[2,"color","red"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["placeholder","Select a process",1,"w-100",3,"value","dataSource","allowFiltering","fields","change"],["processDropdownlist",""],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["type","submit",1,"btn","btn-primary",3,"click"],["placeholder","Select a Model Name",1,"w-100","float-left",3,"dataSource","fields","allowFiltering","value","open","filtering","select"],["placeholder","Select a Model NO",1,"w-100","float-left",3,"dataSource","fields","allowFiltering","value","dataBound","filtering","select"],["placeholder","Select article NO   ",1,"w-100","float-left",3,"dataSource","fields","allowFiltering","ngModel","filtering","ngModelChange","select"],["name","process2",3,"label","value","ngModel","ngModelChange"],["height","675px","gridLines","Both","showColumnMenu","true","allowSorting","true","allowResizing","true",3,"dataSource","allowSorting","editSettings","toolbar","actionBegin"],["gridHistory",""],["field","createdTime","isPrimaryKey","true","headerText","Time","textAlign","Center"],["field","action","isPrimaryKey","true","headerText","Status","width","150","textAlign","Center"],["field","before","headerText","Before","width","450","isPrimaryKey","true","textAlign","Left"],["field","after","headerText","After","width","450","isPrimaryKey","true","textAlign","Left"],["field","remark","headerText","Remark","textAlign","Center",3,"edit"],["field","createdBy","headerText","Created By","isPrimaryKey","true","textAlign","Center"],["type","button",1,"btn","btn-primary",3,"click"],[3,"ngClass"],[4,"ngIf","ngIfElse"],["elseTemplate",""],["type","text","name","remark",1,"e-field","e-input","e-defaultcell",2,"text-align","Center",3,"value"],["disabled","disabled","type","text","name","remark",1,"e-field","e-input","e-defaultcell",2,"text-align","Center",3,"value"]],template:function(e,t){1&e&&(x.Sb(0,"div",0),x.Sb(1,"div",1),x.Sb(2,"div",2),x.Sb(3,"div",3),x.Sb(4,"div",0),x.Sb(5,"div",4),x.Sb(6,"label"),x.Kc(7,"Model Name: "),x.Rb(),x.Rb(),x.Sb(8,"div",5),x.Sb(9,"ejs-dropdownlist",6,7),x.cc("open",function(){return t.openPopupDropdownlist()})("ngModelChange",function(e){return t.modelNameID=e})("filtering",function(e){return t.onFilteringModelName(e)})("select",function(e){return t.onChangeModelName(e)}),x.Rb(),x.Rb(),x.Ic(11,se,3,0,"div",8),x.Rb(),x.Sb(12,"div",0),x.Sb(13,"div",4),x.Sb(14,"label"),x.Kc(15,"Model NO: "),x.Rb(),x.Rb(),x.Sb(16,"div",5),x.Sb(17,"ejs-dropdownlist",9,10),x.cc("open",function(){return t.openPopupDropdownlist()})("ngModelChange",function(e){return t.modelNoID=e})("filtering",function(e){return t.onFilteringModelNO(e)})("select",function(e){return t.onChangeModelNo(e)}),x.Rb(),x.Rb(),x.Nb(19,"div",11),x.Rb(),x.Sb(20,"div",0),x.Sb(21,"div",4),x.Sb(22,"label"),x.Kc(23,"Article NO: "),x.Rb(),x.Rb(),x.Sb(24,"div",5),x.Sb(25,"ejs-dropdownlist",12,7),x.cc("open",function(){return t.openPopupDropdownlist()})("ngModelChange",function(e){return t.articleNoID=e})("filtering",function(e){return t.onFilteringArticleNO(e)})("select",function(e){return t.onChangeArticleNo(e)}),x.Rb(),x.Rb(),x.Nb(27,"div",11),x.Rb(),x.Sb(28,"div",0),x.Sb(29,"div",4),x.Sb(30,"label"),x.Kc(31,"Process: "),x.Rb(),x.Rb(),x.Sb(32,"div",13),x.Ic(33,le,2,2,"ng-container",14),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Sb(34,"div",2),x.Ic(35,oe,2,1,"div",15),x.Sb(36,"div",16),x.Ic(37,Se,32,5,"div",17),x.Rb(),x.Rb(),x.Rb(),x.Sb(38,"div",18),x.Sb(39,"div",2),x.Sb(40,"div",19),x.Sb(41,"h3",20),x.Kc(42),x.hc(43,"translate"),x.Rb(),x.Ic(44,Be,8,4,"div",21),x.Rb(),x.Ic(45,_e,63,14,"div",22),x.Rb(),x.Rb(),x.Ic(46,qe,27,5,"ng-template",null,23,x.Jc),x.Ic(48,Ve,49,16,"ng-template",null,24,x.Jc),x.Ic(50,et,24,6,"ng-template",null,25,x.Jc),x.Rb()),2&e&&(x.zb(9),x.mc("dataSource",t.modelNameData)("fields",t.fieldsBPFCs)("allowFiltering",!0)("ngModel",t.modelNameID),x.zb(2),x.mc("ngIf",t.modelNameSelect&&t.modelNoSelect&&t.modelArtSelect&&t.modelProcessSelect),x.zb(6),x.mc("dataSource",t.modelNoData)("fields",t.fieldsBPFCs)("allowFiltering",!0)("ngModel",t.modelNoID),x.zb(8),x.mc("dataSource",t.articleNosData)("fields",t.fieldsBPFCs)("allowFiltering",!0)("ngModel",t.articleNoID),x.zb(8),x.mc("ngForOf",t.artProcessData),x.zb(2),x.mc("ngIf",t.existGlue),x.zb(2),x.mc("ngIf",t.existGlue),x.zb(5),x.Mc("",x.ic(43,19,"PREVIEW")," "),x.zb(2),x.mc("ngIf",t.existGlue),x.zb(1),x.mc("ngIf",t.existGlue))},directives:[o.c,s.g,s.j,n.n,n.m,h.b,h.g,c.b,S.j,d.d,C.d,C.b,S.e,S.b,d.c,C.c,C.a,S.d,S.a,h.i,s.b,n.l],pipes:[b.c,n.d],styles:[".e-grid[_ngcontent-%COMP%]   td.e-active[_ngcontent-%COMP%]{background:#6597ce!important;color:#000}.radiobutton-control[_ngcontent-%COMP%]{margin:5% 0 5% 40%}@media only screen and (max-width:500px){.radiobutton-control[_ngcontent-%COMP%]{margin-left:21%;margin-top:20%;margin-bottom:27%}}@media only screen and (max-width:700px){.checkbox-control[_ngcontent-%COMP%]{margin-left:35%;margin-top:8%}.control-section[_ngcontent-%COMP%]{min-height:200px}}.control-section[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin:20px 0}.radiobutton-control[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px}.e-bigger[_ngcontent-%COMP%]   .radiobutton-control[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:20px}.warning-text[_ngcontent-%COMP%]{-webkit-animation:warning-frames .5s infinite;animation:warning-frames .5s infinite;color:#000}@-webkit-keyframes warning-frames{0%{background-color:#d40a0a}to{background-color:#ff6565}}@keyframes warning-frames{0%{background-color:#d40a0a}to{background-color:#ff6565}}"]}),e})();const it=["switch"],nt=["grid"],st=["gridglue"],lt=["grid2"],at=["modelNameDropdownlist"],ot=["modelNoDropdownlist"],rt=["chemicalDropdownlist"],ct=["positionDropdownlist"];function dt(e,t){if(1&e&&x.Nb(0,"ejs-barcodegenerator",21,22),2&e){const e=x.gc(2);x.mc("value",e.glue.code)}}function ht(e,t){if(1&e&&(x.Sb(0,"div"),x.Ic(1,dt,2,1,"ejs-barcodegenerator",20),x.Rb()),2&e){const e=x.gc();x.zb(1),x.mc("ngIf",e.showBarCode)}}function ut(e,t){1&e&&(x.Kc(0),x.hc(1,"translate")),2&e&&x.Mc(" ",x.ic(1,1,"GLUE")," ")}function gt(e,t){if(1&e&&(x.Sb(0,"div",35),x.Kc(1),x.Rb()),2&e){const e=t.$implicit;x.nc("title",e.name),x.zb(1),x.Mc(" ",e.name," ")}}function mt(e,t){1&e&&(x.Kc(0),x.hc(1,"translate")),2&e&&x.Mc(" ",x.ic(1,1,"CONSUMPTION")," ")}function bt(e,t){if(1&e&&(x.Sb(0,"span"),x.Kc(1),x.Rb()),2&e){const e=t.$implicit,i=x.gc(2);x.Bb(i.changeConsumptionColor(e)),x.zb(1),x.Lc(""===e.consumption?"0":e.consumption)}}function pt(e,t){1&e&&(x.Kc(0),x.hc(1,"translate")),2&e&&x.Mc(" ",x.ic(1,1,"EXPIRED_TIME")," ")}function ft(e,t){1&e&&(x.Kc(0),x.hc(1,"translate")),2&e&&x.Mc(" ",x.ic(1,1,"KIND")," ")}function It(e,t){if(1&e){const e=x.Tb();x.Sb(0,"ejs-dropdownlist",36,37),x.cc("ngModelChange",function(e){return t.$implicit.kindName=e})("select",function(t){return x.Bc(e),x.gc(2).onChangeKindEdit(t)}),x.Rb()}if(2&e){const e=t.$implicit,i=x.gc(2);x.mc("dataSource",i.kinds)("ngModel",e.kindName)("fields",i.fieldsKindEdit)("allowFiltering",!0)}}function St(e,t){1&e&&(x.Kc(0),x.hc(1,"translate")),2&e&&x.Mc(" ",x.ic(1,1,"PART")," ")}function Dt(e,t){if(1&e){const e=x.Tb();x.Sb(0,"ejs-dropdownlist",38,37),x.cc("ngModelChange",function(e){return t.$implicit.partName=e})("select",function(t){return x.Bc(e),x.gc(2).onChangePartEdit(t)}),x.Rb()}if(2&e){const e=t.$implicit,i=x.gc(2);x.mc("dataSource",i.parts)("ngModel",e.partName)("fields",i.fieldsPartEdit)("allowFiltering",!0)}}function Nt(e,t){1&e&&(x.Kc(0),x.hc(1,"translate")),2&e&&x.Mc(" ",x.ic(1,1,"MATERIAL")," ")}function Ct(e,t){if(1&e){const e=x.Tb();x.Sb(0,"ejs-dropdownlist",38,37),x.cc("ngModelChange",function(e){return t.$implicit.materialName=e})("select",function(t){return x.Bc(e),x.gc(2).onChangeMaterialEdit(t)}),x.Rb()}if(2&e){const e=t.$implicit,i=x.gc(2);x.mc("dataSource",i.materials)("ngModel",e.materialName)("fields",i.fieldsMaterialEdit)("allowFiltering",!0)}}function vt(e,t){if(1&e){const e=x.Tb();x.Sb(0,"div",23),x.Sb(1,"ejs-grid",24,25),x.cc("rowDeselected",function(t){return x.Bc(e),x.gc().rowDeselected(t)})("actionBegin",function(t){return x.Bc(e),x.gc().actionBeginGlue(t)})("rowSelected",function(t){return x.Bc(e),x.gc().rowSelected(t)})("created",function(){return x.Bc(e),x.gc().onCreatedGridGlue()})("toolbarClick",function(t){return x.Bc(e),x.gc().toolbarClick(t)})("dataBound",function(){return x.Bc(e),x.gc().dataBoundGlue()}),x.Sb(3,"e-columns"),x.Sb(4,"e-column",26),x.Ic(5,ut,2,3,"ng-template",null,27,x.Jc),x.Ic(7,gt,2,2,"ng-template",null,28,x.Jc),x.Rb(),x.Sb(9,"e-column",29),x.Ic(10,mt,2,3,"ng-template",null,27,x.Jc),x.Ic(12,bt,2,3,"ng-template",null,28,x.Jc),x.Rb(),x.Sb(14,"e-column",30),x.Ic(15,pt,2,3,"ng-template",null,27,x.Jc),x.Rb(),x.Sb(17,"e-column",31),x.Ic(18,ft,2,3,"ng-template",null,27,x.Jc),x.Ic(20,It,2,4,"ng-template",null,32,x.Jc),x.Rb(),x.Sb(22,"e-column",33),x.Ic(23,St,2,3,"ng-template",null,27,x.Jc),x.Ic(25,Dt,2,4,"ng-template",null,32,x.Jc),x.Rb(),x.Sb(27,"e-column",34),x.Ic(28,Nt,2,3,"ng-template",null,27,x.Jc),x.Ic(30,Ct,2,4,"ng-template",null,32,x.Jc),x.Rb(),x.Rb(),x.Rb(),x.Rb()}if(2&e){const e=x.gc();x.zb(1),x.mc("dataSource",e.glues)("editSettings",e.editSettings)("toolbar",e.toolbar)("allowSorting",!0)("selectedRowIndex",e.rowIndex)}}function yt(e,t){if(1&e){const e=x.Tb();x.Sb(0,"ejs-switch",45,46),x.cc("click",function(){return x.Bc(e),x.gc(2).done()})("ngModelChange",function(t){return x.Bc(e),x.gc(2).createdStatus=t}),x.hc(2,"translate"),x.hc(3,"translate"),x.Rb()}if(2&e){const e=x.gc(2);x.nc("onLabel",x.ic(2,5,"DONE")),x.nc("offLabel",x.ic(3,7,"UNDONE")),x.mc("disabled",e.approvalStatus)("ngModel",e.createdStatus)("checked",e.createdStatus)}}function Bt(e,t){if(1&e){const e=x.Tb();x.Sb(0,"ejs-switch",48),x.cc("click",function(){return x.Bc(e),x.gc(3).approval()})("ngModelChange",function(t){return x.Bc(e),x.gc(3).approvalStatus=t}),x.hc(1,"translate"),x.Rb()}if(2&e){const e=x.gc(3);x.nc("offLabel",x.ic(1,3,"NOT_APPROVED")),x.mc("ngModel",e.approvalStatus)("checked",e.approvalStatus)}}function wt(e,t){if(1&e&&(x.Qb(0),x.Ic(1,Bt,2,5,"ejs-switch",47),x.Pb()),2&e){const e=x.gc(2);x.zb(1),x.mc("ngIf",e.modelNameID>0)}}function Pt(e,t){if(1&e){const e=x.Tb();x.Sb(0,"button",49),x.cc("click",function(){return x.Bc(e),x.gc(2).finished()}),x.Nb(1,"i",50),x.Kc(2),x.hc(3,"translate"),x.Rb()}2&e&&(x.zb(2),x.Mc(" ",x.ic(3,1,"FINISHED")," "))}function xt(e,t){if(1&e){const e=x.Tb();x.Sb(0,"button",51),x.cc("click",function(){x.Bc(e);const t=x.gc(2),i=x.yc(46);return t.openModalHistory(i)}),x.Nb(1,"i",52),x.Kc(2," History"),x.Rb()}}function Rt(e,t){if(1&e&&(x.Sb(0,"div",39),x.Sb(1,"button",40),x.Nb(2,"i",41),x.Kc(3," Reset "),x.Rb(),x.Ic(4,yt,4,9,"ejs-switch",42),x.Ic(5,wt,2,1,"ng-container",9),x.Ic(6,Pt,4,3,"button",43),x.Ic(7,xt,3,0,"button",44),x.Rb()),2&e){const e=x.gc();x.zb(4),x.mc("ngIf",e.modelNameID>0),x.zb(1),x.mc("ngIf",3!==e.level&&4!==e.level),x.zb(1),x.mc("ngIf",e.modelNameID>0),x.zb(1),x.mc("ngIf",e.modelNameID>0)}}function At(e,t){if(1&e&&(x.Sb(0,"li",69),x.Sb(1,"a"),x.Kc(2),x.Sb(3,"span",70),x.Kc(4),x.Rb(),x.Rb(),x.Rb()),2&e){const e=t.$implicit;x.zb(2),x.Nc(" ",e.position,". ",e.ingredientName," "),x.zb(2),x.Mc("(",e.percentage,"%)")}}function Mt(e,t){if(1&e&&(x.Sb(0,"ul"),x.Sb(1,"span",66),x.Kc(2),x.Rb(),x.Sb(3,"li",67),x.Kc(4),x.Sb(5,"ul"),x.Ic(6,At,5,3,"li",68),x.Rb(),x.Rb(),x.Rb()),2&e){const e=x.gc(2);x.zb(2),x.Lc(e.formulaTamp()),x.zb(2),x.Mc(" ",e.formula()," "),x.zb(2),x.mc("ngForOf",e.renderchemical())}}function kt(e,t){if(1&e){const e=x.Tb();x.Sb(0,"button",71),x.cc("click",function(){x.Bc(e);const i=t.$implicit;return x.gc(2).sortBySup(i.id)}),x.Nb(1,"i",72),x.Kc(2),x.Rb()}if(2&e){const e=t.$implicit;x.zb(2),x.Mc(" ",e.name," ")}}function Ft(e,t){1&e&&(x.Kc(0),x.hc(1,"translate")),2&e&&x.Mc(" ",x.ic(1,1,"ITEM")," ")}function Tt(e,t){if(1&e){const e=x.Tb();x.Sb(0,"ejs-dropdownlist",73,74),x.cc("change",function(i){x.Bc(e);const n=t.$implicit;return x.gc(2).onChangePosition(i,n,n.index)}),x.Rb()}if(2&e){const e=t.$implicit,i=x.gc(2);x.mc("dataSource",i.dataPosition)("value",e.position)("fields",i.fieldsPosition)("allowFiltering",!0)}}function $t(e,t){if(1&e){const e=x.Tb();x.Sb(0,"ejs-dropdownlist",73,74),x.cc("change",function(i){x.Bc(e);const n=t.$implicit;return x.gc(2).onChangePosition(i,n,n.index)}),x.Rb()}if(2&e){const e=t.$implicit,i=x.gc(2);x.mc("dataSource",i.dataPosition)("value",e.position)("fields",i.fieldsPosition)("allowFiltering",!0)}}function Gt(e,t){1&e&&(x.Kc(0),x.hc(1,"translate")),2&e&&x.Mc(" ",x.ic(1,1,"INGREDIENT_NAME")," ")}function Et(e,t){1&e&&x.Kc(0),2&e&&x.Mc(" ",t.$implicit.name," ")}function Ot(e,t){1&e&&x.Kc(0),2&e&&x.Mc(" ",t.$implicit.name," ")}function Kt(e,t){if(1&e&&(x.Sb(0,"div"),x.Kc(1),x.Rb()),2&e){const e=t.$implicit,i=x.gc(2);x.Bb(i.changePercentageColor(e)),x.zb(1),x.Lc(e.percentage)}}function Ut(e,t){1&e&&(x.Sb(0,"div"),x.Nb(1,"i",75),x.Rb())}function Lt(e,t){if(1&e&&(x.Sb(0,"div"),x.Kc(1),x.Rb()),2&e){const e=t.$implicit,i=x.gc(2);x.Bb(i.changeAllowColor(e)),x.zb(1),x.Mc("\xb1 ",e.allow,"")}}function zt(e,t){1&e&&(x.Kc(0),x.hc(1,"translate")),2&e&&x.Mc(" ",x.ic(1,1,"ITEM")," ")}function Jt(e,t){if(1&e){const e=x.Tb();x.Sb(0,"ejs-dropdownlist",73,74),x.cc("change",function(i){x.Bc(e);const n=t.$implicit;return x.gc(2).onChangePosition(i,n,n.index)}),x.Rb()}if(2&e){const e=t.$implicit,i=x.gc(2);x.mc("dataSource",i.dataPosition)("value",e.position)("fields",i.fieldsPosition)("allowFiltering",!0)}}function jt(e,t){if(1&e){const e=x.Tb();x.Sb(0,"ejs-dropdownlist",73,74),x.cc("change",function(i){x.Bc(e);const n=t.$implicit;return x.gc(2).onChangePosition(i,n,n.index)}),x.Rb()}if(2&e){const e=t.$implicit,i=x.gc(2);x.mc("dataSource",i.dataPosition)("value",e.position)("fields",i.fieldsPosition)("allowFiltering",!0)}}function Ht(e,t){1&e&&(x.Kc(0),x.hc(1,"translate")),2&e&&x.Mc(" ",x.ic(1,1,"INGREDIENT_NAME")," ")}function _t(e,t){1&e&&x.Kc(0),2&e&&x.Mc(" ",t.$implicit.name," ")}function qt(e,t){1&e&&x.Kc(0),2&e&&x.Mc(" ",t.$implicit.name," ")}function Qt(e,t){1&e&&(x.Sb(0,"div"),x.Nb(1,"i",75),x.Rb())}function Vt(e,t){if(1&e&&(x.Sb(0,"div"),x.Kc(1),x.Rb()),2&e){const e=t.$implicit,i=x.gc(2);x.Bb(i.changeAllowColor(e)),x.zb(1),x.Mc("\xb1 ",e.allow,"")}}function Yt(e,t){if(1&e){const e=x.Tb();x.Sb(0,"div",53),x.Ic(1,Mt,7,3,"ul",9),x.Sb(2,"div",0),x.Sb(3,"div",54),x.Sb(4,"button",55),x.cc("click",function(){return x.Bc(e),x.gc().sortBySup(0)}),x.Kc(5),x.hc(6,"translate"),x.Rb(),x.Ic(7,kt,3,1,"button",56),x.Rb(),x.Rb(),x.Sb(8,"div",0),x.Sb(9,"div",57),x.Sb(10,"div",10),x.Sb(11,"div",23),x.Sb(12,"ejs-grid",58,59),x.cc("actionComplete",function(t){return x.Bc(e),x.gc().actionCompleteIngredient(t)})("recordDoubleClick",function(t){return x.Bc(e),x.gc().onDoubleClickIngredient(t)})("actionBegin",function(t){return x.Bc(e),x.gc().actionBeginIngredient(t)})("toolbarClick",function(t){return x.Bc(e),x.gc().toolbarClickIngredient(t)})("rowSelected",function(t){return x.Bc(e),x.gc().rowSelectedIngredient(t)}),x.Sb(14,"e-columns"),x.Sb(15,"e-column",60),x.Ic(16,Ft,2,3,"ng-template",null,27,x.Jc),x.Ic(18,Tt,2,4,"ng-template",null,28,x.Jc),x.Ic(20,$t,2,4,"ng-template",null,32,x.Jc),x.Rb(),x.Sb(22,"e-column",61),x.Ic(23,Gt,2,3,"ng-template",null,27,x.Jc),x.Ic(25,Et,1,1,"ng-template",null,32,x.Jc),x.Ic(27,Ot,1,1,"ng-template",null,28,x.Jc),x.Rb(),x.Sb(29,"e-column",62),x.Ic(30,Kt,2,3,"ng-template",null,28,x.Jc),x.Rb(),x.Sb(32,"e-column",63),x.Ic(33,Ut,2,0,"ng-template",null,27,x.Jc),x.Ic(35,Lt,2,3,"ng-template",null,28,x.Jc),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Sb(37,"div",57),x.Sb(38,"div",10),x.Sb(39,"div",23),x.Sb(40,"ejs-grid",64,65),x.cc("actionComplete",function(t){return x.Bc(e),x.gc().actionCompleteIngredient(t)})("recordDoubleClick",function(t){return x.Bc(e),x.gc().onDoubleClickIngredient(t)})("actionBegin",function(t){return x.Bc(e),x.gc().actionBeginIngredient(t)})("toolbarClick",function(t){return x.Bc(e),x.gc().toolbarClickIngredient(t)})("rowSelected",function(t){return x.Bc(e),x.gc().rowSelectedIngredient(t)}),x.Sb(42,"e-columns"),x.Sb(43,"e-column",60),x.Ic(44,zt,2,3,"ng-template",null,27,x.Jc),x.Ic(46,Jt,2,4,"ng-template",null,28,x.Jc),x.Ic(48,jt,2,4,"ng-template",null,32,x.Jc),x.Rb(),x.Sb(50,"e-column",61),x.Ic(51,Ht,2,3,"ng-template",null,27,x.Jc),x.Ic(53,_t,1,1,"ng-template",null,32,x.Jc),x.Ic(55,qt,1,1,"ng-template",null,28,x.Jc),x.Rb(),x.Nb(57,"e-column",62),x.Sb(58,"e-column",63),x.Ic(59,Qt,2,0,"ng-template",null,27,x.Jc),x.Ic(61,Vt,2,3,"ng-template",null,28,x.Jc),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb()}if(2&e){const e=x.gc();x.zb(1),x.mc("ngIf",e.renderchemical().length>0),x.zb(4),x.Mc(" ",x.ic(6,12,"DEFAULT")," "),x.zb(2),x.mc("ngForOf",e.supplier),x.zb(5),x.mc("dataSource",e.ingredients1)("allowSorting",!0)("allowSorting",!0)("editSettings",e.editSettings)("toolbar",e.toolbarOptions2),x.zb(28),x.mc("dataSource",e.ingredients2)("allowSorting",!0)("editSettings",e.editSettings)("toolbar",e.toolbarOptions2)}}function Xt(e,t){if(1&e){const e=x.Tb();x.Sb(0,"div",76),x.Sb(1,"h4",77),x.Nb(2,"i",78),x.Kc(3," Clone Article "),x.Rb(),x.Sb(4,"button",79),x.cc("click",function(){return t.$implicit.dismiss("Cross click")}),x.Sb(5,"span",80),x.Kc(6,"\xd7"),x.Rb(),x.Rb(),x.Rb(),x.Sb(7,"div",81),x.Sb(8,"div",0),x.Sb(9,"div",82),x.Sb(10,"div",83),x.Sb(11,"label",84),x.Kc(12,"Article Name"),x.Rb(),x.Sb(13,"span",85),x.Kc(14,"(*)"),x.Rb(),x.Sb(15,"input",86),x.cc("ngModelChange",function(t){return x.Bc(e),x.gc().articleName=t}),x.Rb(),x.Rb(),x.Rb(),x.Sb(16,"div",82),x.Sb(17,"div",83),x.Sb(18,"label",84),x.Kc(19,"Process"),x.Rb(),x.Sb(20,"ejs-dropdownlist",87,88),x.cc("change",function(t){return x.Bc(e),x.gc().onChangeProcessCloneModal(t)}),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Sb(22,"div",89),x.Sb(23,"button",90),x.cc("click",function(){return t.$implicit.close("Close click")}),x.Kc(24,"Close"),x.Rb(),x.Sb(25,"button",91),x.cc("click",function(){return x.Bc(e),x.gc().cloneArticleModelname()}),x.Kc(26,"Clone"),x.Rb(),x.Rb()}if(2&e){const e=x.gc();x.zb(15),x.mc("ngModel",e.articleName),x.zb(5),x.mc("value",e.valueProcess)("dataSource",e.processData)("allowFiltering",!0)("fields",e.processfields)}}function Wt(e,t){1&e&&(x.Kc(0),x.hc(1,"date")),2&e&&x.Mc(" ",x.jc(1,1,t.$implicit.createdTime,"yyyy-MM-dd , hh:mm:ss a")," ")}function Zt(e,t){if(1&e&&(x.Qb(0),x.Nb(1,"input",104),x.Pb()),2&e){const e=x.gc().$implicit;x.zb(1),x.mc("value",e.remark)}}function ei(e,t){if(1&e&&x.Nb(0,"input",105),2&e){const e=x.gc().$implicit;x.mc("value",e.remark)}}function ti(e,t){if(1&e&&(x.Sb(0,"span",101),x.Ic(1,Zt,2,1,"ng-container",102),x.Ic(2,ei,1,1,"ng-template",null,103,x.Jc),x.Rb()),2&e){const e=t.$implicit,i=x.yc(3);x.mc("ngClass","Improve"==e.action?"e-input-group e-control-wrapper e-valid-input":"e-input-group e-control-wrapper e-valid-input e-disabled"),x.zb(1),x.mc("ngIf","Improve"==e.action)("ngIfElse",i)}}function ii(e,t){if(1&e){const e=x.Tb();x.Sb(0,"div",76),x.Sb(1,"h4",77),x.Nb(2,"i",78),x.Kc(3," BPFC History "),x.Rb(),x.Sb(4,"button",79),x.cc("click",function(){return t.$implicit.dismiss("Cross click")}),x.Sb(5,"span",80),x.Kc(6,"\xd7"),x.Rb(),x.Rb(),x.Rb(),x.Sb(7,"div",81),x.Sb(8,"ejs-grid",92,93),x.cc("actionBegin",function(t){return x.Bc(e),x.gc().actionBeginHistory(t)}),x.Sb(10,"e-columns"),x.Sb(11,"e-column",94),x.Ic(12,Wt,2,4,"ng-template",null,28,x.Jc),x.Rb(),x.Nb(14,"e-column",95),x.Nb(15,"e-column",96),x.Nb(16,"e-column",97),x.Sb(17,"e-column",98),x.Ic(18,ti,4,3,"ng-template",null,32,x.Jc),x.Rb(),x.Nb(20,"e-column",99),x.Rb(),x.Rb(),x.Rb(),x.Sb(21,"div",89),x.Sb(22,"button",100),x.cc("click",function(){return t.$implicit.close("Close click")}),x.Kc(23,"Close"),x.Rb(),x.Rb()}if(2&e){const e=x.gc();x.zb(8),x.mc("dataSource",e.historyData)("allowSorting",!0)("allowSorting",!0)("editSettings",e.editSettingsHis)("toolbar",e.toolbarOptionsHistory),x.zb(9),x.mc("edit",e.editparamsHis)}}function ni(e,t){if(1&e){const e=x.Tb();x.Sb(0,"div",76),x.Sb(1,"h4",77),x.Nb(2,"i",78),x.Kc(3," Clone BPFC "),x.Rb(),x.Sb(4,"button",79),x.cc("click",function(){return t.$implicit.dismiss("Cross click")}),x.Sb(5,"span",80),x.Kc(6,"\xd7"),x.Rb(),x.Rb(),x.Rb(),x.Sb(7,"div",81),x.Sb(8,"div",0),x.Sb(9,"div",82),x.Sb(10,"div",83),x.Sb(11,"label",84),x.Kc(12,"Model Name"),x.Rb(),x.Sb(13,"span",85),x.Kc(14,"(*)"),x.Rb(),x.Nb(15,"input",6),x.Rb(),x.Rb(),x.Sb(16,"div",82),x.Sb(17,"div",83),x.Sb(18,"label",84),x.Kc(19,"Model NO"),x.Rb(),x.Sb(20,"span",85),x.Kc(21,"(*)"),x.Rb(),x.Nb(22,"input",6),x.Rb(),x.Rb(),x.Sb(23,"div",82),x.Sb(24,"div",83),x.Sb(25,"label",84),x.Kc(26,"Article NO"),x.Rb(),x.Sb(27,"span",85),x.Kc(28,"(*)"),x.Rb(),x.Sb(29,"input",106),x.cc("ngModelChange",function(t){return x.Bc(e),x.gc().articleNoNewLeo=t}),x.Rb(),x.Rb(),x.Rb(),x.Sb(30,"div",82),x.Sb(31,"div",83),x.Sb(32,"label",84),x.Kc(33,"Process"),x.Rb(),x.Sb(34,"span",85),x.Kc(35,"(*)"),x.Rb(),x.Nb(36,"input",6),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Sb(37,"div",89),x.Sb(38,"button",90),x.cc("click",function(){return t.$implicit.close("Close click")}),x.Kc(39,"Close"),x.Rb(),x.Sb(40,"button",91),x.cc("click",function(){return x.Bc(e),x.gc().onClickClone()}),x.Kc(41,"Clone"),x.Rb(),x.Rb()}if(2&e){const e=x.gc();x.zb(15),x.mc("value",e.modelNameLeo),x.zb(7),x.mc("value",e.modelNoLeo),x.zb(7),x.mc("ngModel",e.articleNoNewLeo)("value",e.articleNoLeo),x.zb(7),x.mc("value",e.artProcessLeo)}}let si=(()=>{class e{constructor(e,t,i,n,s,l,a,o,r,c,d,h,u,g,m,b,p){this.glueIngredientService=e,this.modalNameService=t,this.glueService=i,this.alertify=n,this.modalService=s,this.route=l,this.authService=a,this.bPFCEstablishService=o,this.modelNoService=r,this.articleNoService=c,this.kindService=d,this.partService=h,this.materialService=u,this.buildingUserService=g,this.artProcessService=m,this.ingredientService=b,this.dataService=p,this.positions=["B","C","D","E"],this.approvalStatus=!1,this.createdStatus=!1,this.role=JSON.parse(localStorage.getItem("user")).User.Role,this.isShow=!1,this.selectedRow=[],this.LANG=localStorage.getItem("lang")||"vi",this.glue={id:0,name:"",gluename:"",code:"",createdDate:"",partID:0,kindID:0,materialID:0,BPFCEstablishID:0,consumption:"",expiredTime:0,createdBy:0,glueNameID:0,glueIngredients:[]},this.ingredient={id:0,name:"",code:"",percentage:0,createdDate:new Date,supplierID:0,position:0,allow:0,voc:0,expiredTime:0,daysToExpiration:0,materialNO:"",unit:0,real:0,cbd:0},this.editPercentage={glueID:0,ingredientID:0,percentage:0},this.editAllow={glueID:0,ingredientID:0,allow:0},this.page=1,this.supplier=[],this.toolbarOptions=["Search","Delete"],this.toolbarOptions2=["Search","Add","Delete","Cancel"],this.toolbarOptionsHistory=["Search"],this.selectionOptions={type:"Multiple",mode:"Both"},this.editSettingsHis={allowEditing:!0,mode:"Normal",allowEditOnDblClick:!0},this.detailIngredient=[],this.totalPercentage=0,this.fieldsBPFCs={text:"name",value:"id"},this.fieldsBPFCss={text:"name",value:"id"},this.fieldsGlueChemical={text:"name",value:"name"},this.textGlue="Select Model Name",this.textModelName="Select Model Name - Model #",this.textGlueMaterial="Select ",this.fieldsGlue2={text:"name",value:"id"},this.articleNofields={text:"name",value:"id"},this.processfields={text:"name",value:"id"},this.processData=[{id:1,name:"ASY"},{id:2,name:"STF"}],this.valueProcess=1,this.textGlue2="Select Model No",this.existGlue=!1,this.editparamsHis={params:{format:"n"}},this.dataPosition=[{id:"0",name:""},{id:"1",name:"A"},{id:"2",name:"B"},{id:"3",name:"C"},{id:"4",name:"D"},{id:"5",name:"E"}],this.fieldsKindEdit={text:"name",value:"name"},this.fieldsPartEdit={text:"name",value:"name"},this.fieldsMaterialEdit={text:"name",value:"name"},this.fieldsGlueEdit={text:"name",value:"name"},this.fieldsChemical={text:"name",value:"name"},this.fieldsPosition={text:"name",value:"name"},this.rowIndex="",this.glueIngredient2={ingredientID:0,percentage:0,glueID:0,position:""},this.history={Action:"Created",BPFCEstablishID:0,GlueID:0,Before:"",BeforeAllow:"",After:"",AfterAllow:"",UserID:0,Remark:""},this.valuess="Badminton",this.modelNameSelect=!1,this.modelNoSelect=!1,this.modelArtSelect=!1,this.modelProcessSelect=!1,this.userData=[],this.modelNameLeo=null,this.modelNoLeo=null,this.articleNoLeo=null,this.articleNoNewLeo=null,this.artProcessLeo=null,this.modelNameIDLeo=0,this.modelNoIDLeo=0,this.articleNoIDLeo=0,this.artProcessIDLeo=0,this.BPFCIDLeo=0,this.textSearch=null,this.onFiltering=e=>{let t=new T.h;t=""!==e.text?t.where("name","contains",e.text,!0):t,e.updateData(this.modelNameData,t)},this.onFilteringModelName=e=>{let t=new T.h;t=""!==e.text?t.where("name","contains",e.text,!0):t,e.updateData(this.modelNameData,t)},this.onFilteringModelNO=e=>{let t=new T.h;t=""!==e.text?t.where("name","contains",e.text,!0):t,e.updateData(this.modelNoData,t)},this.onFilteringArticleNO=e=>{let t=new T.h;t=""!==e.text?t.where("name","contains",e.text,!0):t,e.updateData(this.articleNoData,t)},this.onFilteringModelNameClone=e=>{let t=new T.h;t=""!==e.text?t.where("name","contains",e.text,!0):t,e.updateData(this.modelNameData,t)},this.onFilteringModelNOClone=e=>{let t=new T.h;t=""!==e.text?t.where("name","contains",e.text,!0):t,e.updateData(this.modelNoData,t)},this.onFilteringArticleNOClone=e=>{let t=new T.h;t=""!==e.text?t.where("name","contains",e.text,!0):t,e.updateData(this.articleNoData,t)},this.onFilteringArtProcessClone=e=>{let t=new T.h;t=""!==e.text?t.where("name","contains",e.text,!0):t,e.updateData(this.artProcessDataClone,t)},this.dataSearch=this.dataService.currentMessage.subscribe(e=>{this.textSearch=e})}ngOnInit(){this.getModelNames(),this.getAllUsers(),this.modelNameID=0,this.subID=0,this.selIndex=[],this.isAdd=!1,this.existGlue=!1,this.oldDetail=[],this.glueIngredientDetail=[],this.removeLocalStore("details"),this.glueid=0,this.onService(),this.getAllSupllier(),this.GetDetailBPFC(),this.sortOptions={columns:[{field:"item",direction:"Decending"}]},this.editParams={params:{value:""}},0===this.glue.id?(this.showBarCode=!1,this.genaratorGlueCode()):this.showBarCode=!0,this.ingredientService.currentIngredient.subscribe(e=>{200===e&&this.getIngredients()}),this.pageSettings={pageSize:12},this.paginationI={currentPage:1,itemsPerPage:10,totalItems:0,totalPages:0},this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"},this.toolbar=[{text:"Add New",tooltipText:"Add new row",prefixIcon:"e-add",id:"AddNew"},"Edit","Delete","Update","Cancel","Search"],this.orderidrules={required:!0,number:!0},this.customeridrules={required:!0},this.freightrules={required:!0},this.editparams={paramss:{popupHeight:"300px"}}}ngOnDestroy(){this.dataService.changeMessages(this.textSearch),this.dataSearch.unsubscribe()}GetDetailBPFC(){this.BPFCID=this.route.snapshot.params.id,this.bPFCEstablishService.getDetailBPFC(this.BPFCID).subscribe(e=>{var t;const i=e[0];this.BPFCIDLeo=i.id,this.modelNameLeo=i.modelName,this.modelNoLeo=i.modelNo,this.articleNoLeo=i.articleNo,this.artProcessLeo=i.artProcess,this.articleNoNewLeo=i.articleNo,this.modelNameID=i.modelNameID,this.modelNoID=i.modelNoID,this.articleNoID=i.articleNoID,this.artProcessIDLeo="ASY"===i.artProcess?1:2,this.modelNameDetail=e[0].modelName,this.modelNameID=e[0].modelNameID,this.modelNoDetail=e[0].modelNo,this.articleNoDetail=e[0].articleNo,this.artProcessDetail=e[0].artProcess,this.modelNameIDClone=e[0].modelNameID,this.value=e[0].modelNameID,this.valuemodelNo=e[0].modelNoID,this.articleNoID=e[0].articleNoID,this.resetLifeCycleBPFC(),this.BPFCID=null===(t=e[0])||void 0===t?void 0:t.id,this.approvalStatus=e[0].approvalStatus,this.createdStatus=e[0].finishedStatus,localStorage.removeItem("details"),this.glue.BPFCEstablishID=this.BPFCID,this.getAllGluesByBPFCID(this.BPFCID),this.getAllPart(),this.getAllKind(),this.getAllMaterial(),this.getAllIngredient(),this.existGlue=!0,this.modified=!0})}onChangeProcessCloneModal(e){e.itemData&&(this.processID=e.itemData.id)}resetLifeCycleBPFC(){this.selIndex=[],this.oldDetail=[],this.glueIngredientDetail=[],this.removeLocalStore("details"),this.removeLocalStore("detailsTamp"),this.ingredients1=[],this.ingredients2=[],this.glues=[],this.BPFCID=0}onCreatedGridGlue(){}ngAfterViewInit(){$('[data-toggle="tooltip"]').tooltip();const e=JSON.parse(localStorage.getItem("level"));this.level=e.id,this.getBuilding()}onChangeKindEdit(e){this.kindEdit=e.value,this.kindID=e.itemData.id}onChangePartEdit(e){this.partEdit=e.value,this.partID=e.itemData.id}onChangeMaterialEdit(e){this.kindEdit=e.value,this.materialID=e.itemData.id}dataBoundGlue(){this.gridglue.selectRows(this.selectedRow.length?this.selectedRow:this.selIndex)}actionBeginGlue(e){"beginEdit"===e.requestType&&(this.chemicalNameEdit=e.rowData.name,this.pathNameEdit=e.rowData.pathName,this.modelNoEdit=e.rowData.modelNo,this.materialNameEdit=e.rowData.materialName,this.glue.consumption=e.rowData.consumption,this.glue.kindID=e.rowData.kindID||null,this.glue.partID=e.rowData.partID||null,this.glue.materialID=e.rowData.materialID||null,this.glue.BPFCEstablishID=e.rowData.bpfcEstablishID,this.glue.name=e.rowData.name,this.glue.expiredTime=this.expiredTime,this.history.Before=""===e.rowData.consumption?"0":"Consumption "+e.rowData.consumption,this.detailGlue=!0),"save"===e.requestType&&(this.glue.id=e.rowData.id||0,this.glue.code=e.data.code||"",this.glue.consumption=e.data.consumption,this.glue.glueNameID=e.data.glueNameID,this.glue.kindID=this.kindID||null,this.glue.partID=this.partID||null,this.glue.materialID=this.materialID||null,this.glue.BPFCEstablishID=this.BPFCID,this.glue.name=this.chemicalNameEdit,this.glue.expiredTime=this.expiredTime,this.history.Action="Consumption",this.history.BPFCEstablishID=this.BPFCID,this.history.GlueID=this.glueid,this.history.After="Consumption "+e.data.consumption,this.history.UserID=JSON.parse(localStorage.getItem("user")).User.ID,this.glue.createdBy=JSON.parse(localStorage.getItem("user")).User.ID,this.bPFCEstablishService.AddHistoryBPFC(this.history).subscribe(()=>{}),this.saveGlue()),"delete"===e.requestType&&0!==e.data[0].id&&(this.glueid=e.data[0].id,this.history.Action="Delete",this.history.Before=e.data[0].name,this.history.BPFCEstablishID=this.BPFCID,this.history.GlueID=e.data[0].id,this.history.UserID=JSON.parse(localStorage.getItem("user")).User.ID,this.bPFCEstablishService.AddHistoryBPFC(this.history).subscribe(()=>{this.glueService.delete(e.data[0].id).subscribe(()=>{this.getAllGluesByBPFCID(this.BPFCID),this.detailGlue=!1,this.removeLocalStore("details"),this.glueIngredientDetail=[],this.oldDetail=[],this.alertify.success("Glue has been deleted")},e=>{this.alertify.error("Failed to delete the Glue")})}))}rowDeselected(e){const t=e.rowIndex,i=this.getLocalStore("details").sort(this.dynamicSort("position"));!1===this.compareArray(this.oldDetail,i)&&!0===e.isInteracted&&this.alertify.valid("C\u1ea3nh b\xe1o!","B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n b\u1ecf qua s\u1ef1 thay \u0111\u1ed5i n\xe0y kh\xf4ng?").then(e=>{if(this.modified=!0,this.gridglue.getSelectedRowIndexes().length){const e=this.gridglue.dataSource[t];e.name=e.chemical.name,this.gridglue.refresh()}}).catch(e=>{this.gridglue.selectRows([t])})}rowSelected(e){e.data[0]&&(this.GlueNameDefault=e.data[0].name);const t=e.data[0]||e.data;this.selIndex=[e.rowIndex],!e.isInteracted&&e.previousRowIndex&&(this.selIndex=[e.previousRowIndex]),e.isInteracted&&void 0!==e.data.name&&this.modified&&this.loadPreview(Number(e.data.id)),!1!==e.isInteracted&&null===e.target||void 0!==t.name&&this.modified&&this.loadPreview(Number(t.id))}onChangePosition(e,t,i){this.modified=!1,this.history.BeforeAllow=this.glueNewName;const n=e.value;let s=this.getLocalStore("details");if(""===e.value);else{if(0!==s.length){let t="";switch(s[s.length-1].position){case"A":t="B";break;case"B":t="C";break;case"C":t="D";break;case"D":t="E"}if(n!==t)return this.alertify.warning("H\xe3y ch\u1ecdn ch\u1ea5t ti\u1ebfp theo l\xe0 "+t,!0),this.grid.refresh(),this.grid2.refresh(),void(e.cancel=!0)}if(0===s.filter(t=>t.position===e.value).length&&null!==e.value)if(s=this.getLocalStore("details"),this.percentage=0,this.position=e.value,0!==s.filter(e=>e.ingredientName===t.name&&e.position===t.position).length){const i=s.findIndex(e=>e.ingredientName===t.name);s[i].position=e.value,this.setLocalStore("details",s),this.glueIngredientDetail=this.getLocalStore("details"),this.makeFormula(),this.updateChemicalList(),this.grid.refresh()}else{s=this.getLocalStore("details");const i={id:0,glueID:this.glueid,ingredientID:t.id,glueName:"",ingredientName:t.name,percentage:this.percentage,position:e.value,createdDate:new Date,allow:0,expiredTime:t.expiredTime};"A"===e.value&&(i.percentage=100,i.expiredTime=t.expiredTime),s.push(i),this.setLocalStore("details",s),this.glueIngredientDetail=this.getLocalStore("details"),this.makeFormula(),this.updateChemicalList(),"A"===e.value&&this.grid.refresh()}}}recordDoubleClick(e){this.modifiedGlue=!0}toolbarClickIngredient(e){switch(e.item.text){case"Add":e.cancel=!0,this.openIngredientModalComponent()}}onDoubleClickIngredient(e){this.setFocus=e.column}rowSelectedIngredient(e){this.ingridientID=e.data.id}genaratorGlueCode(){this.glue.code=this.makeid(8)}makeid(e){let t="";const i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",n=i.length;for(let s=0;s<e;s++)t+=i.charAt(Math.floor(Math.random()*n));return t}compareArray(e,t){return JSON.stringify(e)===JSON.stringify(t)}setLocalStore(e,t){localStorage.removeItem(e);const i=JSON.stringify(t);localStorage.setItem(e,i)}getLocalStore(e){return(JSON.parse(localStorage.getItem(e))||[]).sort(this.dynamicSort("position"))}removeLocalStore(e){localStorage.removeItem(e)}dynamicSort(e){let t=1;return"-"===e[0]&&(t=-1,e=e.substr(1)),(i,n)=>-1===t?n[e].localeCompare(i[e]):i[e].localeCompare(n[e])}checkColorCode(e){return!0===e.approvalStatus&&!0===e.finishedStatus}checkDone(e){return!0===e.approvalStatus&&!0===e.finishedStatus?"Done":"Undone"}checkStatus(e,t){return!0===e&&!0===t?"Done":"Undone"}renderchemical(){return this.glueIngredientDetail=this.glueIngredientDetail||[],this.glueIngredientDetail.sort(this.dynamicSort("position"))}makeFormula(){var e,t;const i=this.getLocalStore("details").filter(e=>"A"===e.position)||[];this.nameGlue=(null===(e=i[0])||void 0===e?void 0:e.ingredientName)||"",this.nameGlues=(null===(t=i[0])||void 0===t?void 0:t.ingredientName)+"^"+this.glueIngredientDetail[0].allow+"%"||!1,this.A=i[0].ingredientName,this.glueIngredientDetail=this.renderchemical(),void 0===this.glueIngredientDetail[1]?this.B="":(this.B=this.glueIngredientDetail[1].percentage+"%"+this.glueIngredientDetail[1].ingredientName,this.BB=this.glueIngredientDetail[1].percentage+"%"+this.glueIngredientDetail[1].ingredientName+"^"+this.glueIngredientDetail[1].allow+"%"),void 0===this.glueIngredientDetail[2]?this.C="":(this.C=this.glueIngredientDetail[2].percentage+"%"+this.glueIngredientDetail[2].ingredientName,this.CC=this.glueIngredientDetail[2].percentage+"%"+this.glueIngredientDetail[2].ingredientName+"^"+this.glueIngredientDetail[2].allow+"%"),void 0===this.glueIngredientDetail[3]?this.D="":(this.D=this.glueIngredientDetail[3].percentage+"%"+this.glueIngredientDetail[3].ingredientName,this.DD=this.glueIngredientDetail[3].percentage+"%"+this.glueIngredientDetail[3].ingredientName+"^"+this.glueIngredientDetail[3].allow+"%"),void 0===this.glueIngredientDetail[4]?this.E="":(this.E=this.glueIngredientDetail[4].percentage+"%"+this.glueIngredientDetail[4].ingredientName,this.EE=this.glueIngredientDetail[4].percentage+"%"+this.glueIngredientDetail[4].ingredientName+"^"+this.glueIngredientDetail[4].allow+"%"),this.glueIngredientDetail.length>0?(this.percentageCount=this.glueIngredientDetail.map(e=>e.percentage),this.percentageCountEdit=this.glueIngredientDetail.map(e=>e),this.totalPercentage=this.percentageCount.reduce((e,t)=>e+t,0)):(this.percentageCount=[],this.percentageCountEdit=[],this.totalPercentage=0);const n=this.gridglue.getSelectedRowIndexes()[0];this.gridglue.getSelectedRowIndexes().length&&(this.gridglue.getSelectedRecords(),this.gridglue.dataSource[n].name=this.formula(),this.gridglue.refresh())}formula(){return this.B&&this.C&&this.D&&this.E?`{[ (${this.nameGlue}+ ${this.B}) + ${this.C} ] + ${this.D}}+ ${this.E}`:this.B&&this.C&&this.D?`[(${this.nameGlue} + ${this.B}) + ${this.C}] + ${this.D}`:this.B&&this.C?`(${this.nameGlue} + ${this.B}) + ${this.C}`:this.B?`${this.nameGlue} + ${this.B}`:""+this.nameGlue}formulaTamp(){return this.BB&&this.CC&&this.DD&&this.EE?(this.glueNewName=`{[ (${this.nameGlues}+ ${this.BB}) + ${this.CC} ] + ${this.DD}}+ ${this.EE}`,`{[ (${this.nameGlues}+ ${this.BB}) + ${this.CC} ] + ${this.DD}}+ ${this.EE}`):this.BB&&this.CC&&this.DD?(this.glueNewName=`[(${this.nameGlues} + ${this.BB}) + ${this.CC}] + ${this.DD}`,`[(${this.nameGlues} + ${this.BB}) + ${this.CC}] + ${this.DD}`):this.BB&&this.CC?(this.glueNewName=`(${this.nameGlues} + ${this.BB}) + ${this.CC}`,`(${this.nameGlues} + ${this.BB}) + ${this.CC}`):this.BB?(this.glueNewName=`${this.nameGlues} + ${this.BB}`,`${this.nameGlues} + ${this.BB}`):""+this.nameGlues}getDetail(e){this.glueIngredientService.getDetail(e).subscribe(e=>{var t,i,n,s;this.glueIngredientDetail=e.glueIngredients,this.setLocalStore("details",this.glueIngredientDetail),this.setLocalStore("detailsTamp",this.glueIngredientDetail),this.glueIngredientDetail=this.renderchemical(),this.oldDetail=this.renderchemical();const l=this.glueIngredientDetail.filter(e=>"A"===e.position)||[];this.nameGlue=(null===(t=l[0])||void 0===t?void 0:t.ingredientName)||"",this.nameGlues=(null===(i=l[0])||void 0===i?void 0:i.ingredientName)+"^"+(null===(n=this.glueIngredientDetail[0])||void 0===n?void 0:n.allow)+"%"||!1,this.A=(null===(s=l[0])||void 0===s?void 0:s.ingredientName)||"",void 0===this.glueIngredientDetail[1]?this.B="":(this.B=this.glueIngredientDetail[1].percentage+"%"+this.glueIngredientDetail[1].ingredientName,this.BB=this.glueIngredientDetail[1].percentage+"%"+this.glueIngredientDetail[1].ingredientName+"^"+this.glueIngredientDetail[1].allow+"%"),void 0===this.glueIngredientDetail[2]?this.C="":(this.C=this.glueIngredientDetail[2].percentage+"%"+this.glueIngredientDetail[2].ingredientName,this.CC=this.glueIngredientDetail[2].percentage+"%"+this.glueIngredientDetail[2].ingredientName+"^"+this.glueIngredientDetail[2].allow+"%"),void 0===this.glueIngredientDetail[3]?this.D="":(this.D=this.glueIngredientDetail[3].percentage+"%"+this.glueIngredientDetail[3].ingredientName,this.DD=this.glueIngredientDetail[3].percentage+"%"+this.glueIngredientDetail[3].ingredientName+"^"+this.glueIngredientDetail[3].allow+"%"),void 0===this.glueIngredientDetail[4]?this.E="":(this.E=this.glueIngredientDetail[4].percentage+"%"+this.glueIngredientDetail[4].ingredientName,this.EE=this.glueIngredientDetail[4].percentage+"%"+this.glueIngredientDetail[4].ingredientName+"^"+this.glueIngredientDetail[4].allow+"%"),this.glueIngredientDetail.length>0?(this.percentageCount=this.glueIngredientDetail.map(e=>e.percentage),this.percentageCount.join("+"),this.percentageCountEdit=this.glueIngredientDetail.map(e=>e),this.totalPercentage=this.percentageCount.reduce((e,t)=>e+t,0)):(this.percentageCount=[],this.percentageCountEdit=[],this.totalPercentage=0)})}updateChemicalList(){const e=this.getLocalStore("details");for(const t of e){const e=this.ingredients1.findIndex(e=>e.name===t.ingredientName&&e.id===t.ingredientID);-1!==e&&(this.ingredients1[e].position=t.position,this.ingredients1[e].percentage=t.percentage,this.ingredients1[e].allow=t.allow)}for(const t of e){const e=this.ingredients2.findIndex(e=>e.name===t.ingredientName&&e.id===t.ingredientID);-1!==e&&(this.ingredients2[e].position=t.position,this.ingredients2[e].percentage=t.percentage,this.ingredients2[e].allow=t.allow)}}actionBeginIngredient(e){if("beginEdit"===e.requestType){if(null===e.rowData.position)return this.alertify.warning("H\xe3y ch\u1ecdn t\xean tr\u01b0\u1edbc khi ch\u1ec9nh s\u1eeda!",!0),void(e.cancel=!0);if("A"===e.rowData.position)return this.alertify.warning("Kh\xf4ng \u0111\u01b0\u1ee3c ch\u1ec9nh s\u1eeda ch\u1ea5t A!",!0),void(e.cancel=!0);this.editPercentage.glueID=this.glueid,this.editPercentage.ingredientID=e.rowData.id,this.percentageDefault=e.rowData.percentage,this.editAllow.glueID=this.glueid,this.history.BeforeAllow="",this.history.AfterAllow="",this.editAllow.ingredientID=e.rowData.id,this.allowDefault=e.rowData.allow||0}if("save"===e.requestType){this.percentageEdit={percentage:Number(e.data.percentage),id:Number(e.rowData.id)},this.allowEdit={allow:Number(e.data.allow),id:Number(e.rowData.id)},"edit"===e.action&&(this.allowChange=e.data.allow||0,this.percentageChange=e.data.percentage),this.editPercentage.percentage=e.data.percentage,this.editAllow.allow=e.data.allow;const t=Number(this.percentageDefault)!==Number(this.percentageChange),i=Number(this.allowDefault)!==Number(this.allowChange);if(t){this.modified=!1;const t=this.getLocalStore("details"),i=t.findIndex(t=>t.ingredientName===e.data.name&&t.ingredientID===e.data.id);t[i].percentage=e.data.percentage,this.setLocalStore("details",t),this.updateChemicals()}if(i){const t=this.getLocalStore("details"),i=t.findIndex(t=>t.ingredientName===e.data.name&&t.ingredientID===e.data.id);t[i].allow=e.data.allow,this.setLocalStore("details",t),this.modified=!1,this.history.BeforeAllow=this.glueNewName,this.updateChemicals()}}"delete"===e.requestType&&this.deleteIngredient()}updateGlueIngredient(){}loadPreview(e){this.glueid=Number(e),this.getIngredients(),this.getDetail(this.glueid),this.detailGlue=!0}resolver(){this.route.data.subscribe(e=>{this.glues=e.glues.result,this.paginationG=e.glues.pagination})}onService(){this.ingredientService.currentIngredient.subscribe(e=>{300===e&&(this.getIngredients(),this.updateChemicalList(),this.ingredientService.changeIngredient(0))})}mapGlue(e){1==!e.status?(this.percentage=0,this.mapGlueIngredient({ingredientID:e.id,percentage:this.percentage,glueID:this.glueid})):this.delete(this.glueid,e.id)}getIngredients(){this.glueIngredientService.getIngredients(this.glueid).subscribe(e=>{this.ingredients1=e.result.list1,this.ingredients2=e.result.list2},e=>{this.alertify.error(e)})}getGlues(){this.glueService.getAllGlue().subscribe(e=>{this.glues=e},e=>{this.alertify.error(e)})}mapGlueIngredients(e){this.glueIngredientService.mapGlueIngredient(e).subscribe(e=>{void 0===this.subID?(this.sortBySup(0),this.getDetail(this.glueid)):(this.sortBySup(this.subID),this.getDetail(this.glueid))})}mapGlueIngredient(e){this.glueIngredientService.mappGlueIngredient(e).subscribe(e=>{void 0===this.subID?(this.getAllGluesByBPFCID(this.BPFCID),this.sortBySup(0),this.getDetail(this.glueid)):(this.sortBySup(this.subID),this.getDetail(this.glueid),this.getAllGluesByBPFCID(this.BPFCID))})}openIngredientModalComponent(){const e=this.modalService.open(G.a,{size:"md"});e.componentInstance.ingredient=this.ingredient,e.componentInstance.title="Add Ingredient",e.result.then(e=>{},e=>{})}actionCompleteIngredient(e){"beginEdit"===e.requestType&&"Item"!==this.setFocus.field&&(e.form.elements.namedItem(this.setFocus.field).focus(),e.form.elements.namedItem(this.setFocus.field).value="")}openPopupDropdownlist(){$('[data-toggle="tooltip"]').tooltip()}toolbarClick(e){switch(e.item.text){case"Add New":const t=this.getLocalStore("details").sort(this.dynamicSort("position"));if(!1===this.compareArray(this.oldDetail,t)&&t.length>0&&this.oldDetail.length>0)this.alertify.valid("C\u1ea3nh b\xe1o!","B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n b\u1ecf qua nh\u1eefng thay \u0111\u1ed5i n\xe0y?").then(e=>{const t={id:0,name:"1",code:"",gluename:"",createdDate:"",BPFCEstablishID:this.BPFCID,kindID:null,partID:null,materialID:null,consumption:"",expiredTime:0,createdBy:JSON.parse(localStorage.getItem("user")).User.ID,glueNameID:0,glueIngredients:[]};this.glue=t,this.saveGlue()}).catch(t=>{e.cancel=!0});else{const e={id:0,name:"1",code:"",gluename:"",createdDate:"",BPFCEstablishID:this.BPFCID,kindID:null,partID:null,materialID:null,consumption:"",expiredTime:0,createdBy:JSON.parse(localStorage.getItem("user")).User.ID,glueNameID:0,glueIngredients:[]};this.glue=e,this.saveGlue()}}}openModal(e){this.modalReference=this.modalService.open(e)}openModalHistory(e){this.modalReference=this.modalService.open(e,{size:"xxl"}),this.LoadHistoryBPFC()}LoadHistoryBPFC(){this.bPFCEstablishService.LoadHistoryBPFC(this.BPFCID).subscribe(e=>{this.historyData=e.map(e=>({id:e.id,glueID:e.glueID,createdTime:e.createdTime,bpfcEstablishID:e.bpfcEstablishID,before:e.before,after:e.after,action:e.action,remark:e.remark,userID:e.userID,createdBy:this.createdBy(e.userID)}))})}actionBeginHistory(e){"save"===e.requestType&&this.bPFCEstablishService.UpdateHistoryBPFC({ID:e.data.id,Remark:e.data.remark}).subscribe(e=>{e&&this.alertify.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng!")})}getAllUsers(){this.buildingUserService.getAllUsers(1,1e3).subscribe(e=>{this.userData=e.result})}createdBy(e){if(0===e)return"#N/A";const t=this.userData.filter(t=>t.ID===e)[0];return void 0!==t?t.Username:"#N/A"}cloneModelname(){this.alertify.confirm("Sao ch\xe9p model name!","B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n sao ch\xe9p model name kh\xf4ng?",()=>{this.modalNameService.cloneModelname(this.modelNameID,this.modelNameClone,this.modelNoClone,this.valueProcess).subscribe(e=>{this.alertify.success("the model name has been cloned"),this.modalReference.close(),this.modelNameDropdownlist.hidePopup()})})}cloneArticleModelname(){this.alertify.confirm("Sao ch\xe9p article!","B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n sao ch\xe9p article kh\xf4ng?",()=>{this.modalNameService.cloneArticleModelname(this.modelNameID,this.modelNameClone,this.modelNoClone,this.articleName,this.processID).subscribe(e=>{this.alertify.success("Sao ch\xe9p th\xe0nh c\xf4ng!"),this.modalReference.close(),this.modelNameDropdownlist.hidePopup()})})}delete(e,t){this.glueIngredientService.delete(e,t).subscribe(t=>{this.alertify.success("\u0110\xe3 x\xf3a th\xe0nh c\xf4ng!"),this.getIngredients(),this.getDetail(e)})}deleteGlue(e){this.alertify.confirm("X\xf3a keo",'B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a keo n\xe0y kh\xf4ng "'+e.id+'" ?',()=>{this.glueService.delete(e.id).subscribe(()=>{this.getGlues(),this.alertify.success("\u0110\xe3 x\xf3a th\xe0nh c\xf4ng!")},e=>{this.alertify.error("X\xf3a th\u1ea5t b\u1ea1i r\u1ed3i!")})})}deleteIngridient(e){this.alertify.confirm("X\xf3a ingredient",'B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a ingredient n\xe0y kh\xf4ng "'+e.id+'" ?',()=>{this.ingredientService.delete(e.id).subscribe(()=>{this.getIngredients(),this.alertify.success("\u0110\xe3 x\xf3a th\xe0nh c\xf4ng!")},e=>{this.alertify.error("X\xf3a th\u1ea5t b\u1ea1i r\u1ed3i!")})})}getAllGluesByBPFCID(e){this.glueService.getAllGluesByBPFCID(e).subscribe(e=>{this.glues=e})}getAllGluesByBPFCID2(e){this.glueService.getAllGluesByBPFCID(e).subscribe(e=>{void 0===this.ingredientID?(this.glues=e,e.length>0&&(this.detailGlue=!0)):(this.glueid=e[0].id,this.glueIngredient2.ingredientID=this.ingredientID,this.glueIngredient2.percentage=100,this.glueIngredient2.glueID=this.glueid,this.glueIngredient2.position="A",this.mapGlueIngredient(this.glueIngredient2))})}updateChemicals(){this.ingredientService.sortBySup(this.glueid,this.subID).subscribe(e=>{this.ingredients1=e.list1,this.ingredients2=e.list2;const t=this.getLocalStore("details");for(const i of t){const e=this.ingredients1.findIndex(e=>e.name===i.ingredientName&&e.id===i.ingredientID);-1!==e&&(this.ingredients1[e].position=i.position,this.ingredients1[e].percentage=i.percentage,this.ingredients1[e].allow=i.allow)}for(const i of t){const e=this.ingredients2.findIndex(e=>e.name===i.ingredientName&&e.id===i.ingredientID);-1!==e&&(this.ingredients2[e].position=i.position,this.ingredients2[e].percentage=i.percentage,this.ingredients2[e].allow=i.allow)}this.glueIngredientDetail=t,this.makeFormula()})}sortBySup(e){0===this.gridglue.getSelectedRowIndexes().length?this.alertify.warning("Please select a glue!",!0):(this.subID=e,this.ingredientService.sortBySup(this.glueid,e).subscribe(t=>{if(this.ingredients1=t.list1,this.ingredients2=t.list2,0===e){const e=this.getLocalStore("details");this.ingredients1=e.map(e=>({id:e.ingredientID,name:e.ingredientName,code:"",percentage:e.percentage,createdDate:e.createdDate,supplierID:0,allow:e.allow,position:e.position,expiredTime:e.expiredTime,daysToExpiration:e.daysToExpiration,voc:e.voc,materialNO:e.materialNO,unit:e.unit,real:e.real,cbd:e.cbd})),this.glueIngredientDetail=e}else this.updateChemicalList()}))}saveGlue(){0===this.glue.id||void 0===this.glue.id?(""===this.glue.code&&this.genaratorGlueCode(),this.createGlue()):this.onChangeChemical?this.updateChemical():this.update(),this.oldDetail=[],localStorage.removeItem("details"),this.glueIngredientDetail=[],this.gridglue.refresh(),this.selectedRow=[0],this.selIndex=[0],this.modified=!0}getBuilding(){JSON.parse(localStorage.getItem("user"))}getAllIngredient(){this.ingredientService.getAllIngredient().subscribe(e=>{this.ingrediented=e})}createGlue(){this.glueService.create(this.glue).subscribe(()=>{this.alertify.success("\u0110\xe3 t\u1ea1o th\xe0nh c\xf4ng!"),this.getAllGluesByBPFCID(this.BPFCID),this.clearGlueForm(),this.genaratorGlueCode(),this.expiredTime=0},e=>{this.alertify.error(e),this.genaratorGlueCode()})}finished(){const e=JSON.parse(localStorage.getItem("user")).User.ID;if(0===this.gridglue.getSelectedRowIndexes().length)this.alertify.warning("H\xe3y ch\u1ecdn v\xe0o 1 glue v\xe0 t\u1ea1o c\xf4ng th\u1ee9c sau \u0111\xf3 m\u1edbi b\u1ea5m ho\xe0n th\xe0nh!",!0);else{this.history.BPFCEstablishID=this.BPFCID,this.history.GlueID=this.glueid,this.history.After=this.GlueNameDefault,this.history.AfterAllow=this.glueNewName,this.history.UserID=e,this.bPFCEstablishService.AddHistoryBPFC(this.history).subscribe(()=>{});const t=this.getLocalStore("details"),i=this.gridglue.getSelectedRecords()[0];i.expiredTime=t.filter(e=>"A"===e.position)[0].expiredTime,i.kindID=0===i.kindID?null:i.kindID,i.partID=0===i.partID?null:i.partID,i.materialID=0===i.materialID?null:i.materialID,this.selectedRow=this.gridglue.getSelectedRowIndexes(),this.glueService.update(i).subscribe(e=>{this.alertify.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng!"),this.getAllGluesByBPFCID(this.BPFCID),this.detailGlue=!0,this.modified=!0}),t.length>0&&(this.mapGlueIngredients(t),this.modified=!0)}}clearGlueForm(){this.glue.gluename="",this.glue.kindID=null,this.glue.partID=null,this.glue.materialID=null,this.glue.consumption="",this.showBarCode=!1}update(){this.glueService.update(this.glue).subscribe(e=>{this.alertify.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng!"),this.getAllGluesByBPFCID(this.BPFCID),this.detailGlue=!1,this.history.Action="Created",this.expiredTime=0})}updateChemical(){this.glueService.updateChemical(this.glue).subscribe(e=>{this.alertify.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng!"),this.getAllGluesByBPFCID(this.BPFCID),this.detailGlue=!1,this.onChangeChemical=!1,this.history.Action="Created"})}deleteIngredient(){this.ingredientService.delete(this.ingridientID).subscribe(()=>{const e=this.getLocalStore("details").filter(e=>e.ingredientID!==this.ingridientID);this.setLocalStore("details",e),this.glueIngredientDetail=e,this.getIngredients(),this.makeFormula(),this.alertify.success("\u0110\xe3 x\xf3a th\xe0nh c\xf4ng!")},e=>{this.alertify.error("X\xf3a th\u1ea5t b\u1ea1i r\u1ed3i!")})}approval(){const e=this.gridglue.dataSource;let t=!1,i=!1,n=!1;if(e){for(const l of e){if(l.glueIngredients.length>0){const e=l.glueIngredients.filter(e=>"A"!==e.position);for(const n of e){if(n.allow<=0&&"A"!==n.position)return t=!1,this.approvalStatus=!this.approvalStatus,void this.alertify.warning(`The allowance of checmical name ${n.ingredient.name} must be greater than 0 <br>\n              M\u1ee9c cho ph\xe9p c\u1ee7a h\xf3a ch\u1ea5t ${n.ingredient.name} ph\u1ea3i l\u1edbn h\u01a1n 0!<br>\n               <label>Glue Name: </label> ${l.name} <br>\n              `,!0);if(n.percentage<=0&&"A"!==n.position)return i=!1,this.approvalStatus=!this.approvalStatus,void this.alertify.warning(`The percentage of checmical name ${n.ingredient.name} must be greater than 0 <br>\n              Ph\u1ea7n tr\u0103m c\u1ee7a h\xf3a ch\u1ea5t ${n.ingredient.name} ph\u1ea3i l\u1edbn h\u01a1n 0!<br>\n               <label>Glue Name: </label> ${l.name} <br>\n              `,!0);t=!0,i=!0}}if(+l.consumption<=0)return n=!1,this.approvalStatus=!this.approvalStatus,void this.alertify.warning(`The consumption of glue name ${l.name} must be greater than 0 <br>\n          M\u1ee9c ti\xeau th\u1ee5 c\u1ee7a keo ${l.name} ph\u1ea3i l\u1edbn h\u01a1n 0! <br>\n          <label>Glue Name: </label> ${l.name} <br>\n          `,!0);n=!0}const s=JSON.parse(localStorage.getItem("user")).User.ID;this.bPFCEstablishService.approval(this.BPFCID,s).subscribe(e=>{this.alertify.success("The BPFC has been approved!"),this.createdStatus=this.approvalStatus;const t=this.modelNameDropdownlist.getDataByValue(this.modelNameDropdownlist.value);this.modelNameDropdownlist.valueTemplate=`(${this.checkStatus(this.approvalStatus,this.createdStatus)}) ${t.name}`})}}done(){const e=this.gridglue.dataSource;let t=!1,i=!1,n=!1;if(e){for(const s of e){if(s.glueIngredients.length>0){const e=s.glueIngredients.filter(e=>"A"!==e.position);for(const n of e){if(n.allow<=0)return t=!1,this.createdStatus=!this.createdStatus,void this.alertify.warning(`The allow of checmical name ${n.ingredient.name} is greater than 0 <br>\n              M\u1ee9c cho ph\xe9p c\u1ee7a h\xf3a ch\u1ea5t ${n.ingredient.name} ph\u1ea3i l\u1edbn h\u01a1n 0!<br>\n               <label>Glue Name: </label> ${s.name} <br>\n              `,!0);if(n.percentage<=0)return i=!1,this.createdStatus=!this.createdStatus,void this.alertify.warning(`The percentage of checmical name ${n.ingredient.name} is greater than 0 <br>\n              Ph\u1ea7n tr\u0103m c\u1ee7a h\xf3a ch\u1ea5t ${n.ingredient.name} ph\u1ea3i l\u1edbn h\u01a1n 0!<br>\n               <label>Glue Name: </label> ${s.name} <br>\n              `,!0);t=!0,i=!0}0===e.length&&(t=!0,i=!0)}if(+s.consumption<=0)return n=!1,this.createdStatus=!this.createdStatus,void this.alertify.warning(`The consumption of glue name ${s.name} is greater than 0 <br>\n          M\u1ee9c ti\xeau th\u1ee5 c\u1ee7a keo ${s.name} ph\u1ea3i l\u1edbn h\u01a1n 0! <br>\n          <label>Glue Name: </label> ${s.name} <br>\n          `,!0);n=!0}if(t&&i&&n){const e=JSON.parse(localStorage.getItem("user")).User.ID;this.bPFCEstablishService.done(this.BPFCID,e).subscribe(e=>{!0===e.status?(this.alertify.success(e.message),this.createdStatus=this.createdStatus):this.alertify.success(e.message)})}}}getModelNames(){this.modalNameService.getAllModalName().subscribe(e=>{this.modelNameData=e.map(e=>({id:e.id,name:e.name}))})}getArticleNoByModelNameID(e){this.articleNoService.getArticleNoByModelNoID(e).subscribe(e=>{this.articleNoData=e})}getModelNoByModelNameID(e){this.modelNoService.getModelNoByModelNameID(e).subscribe(e=>{this.modelNoData=e})}getArtProcessByArticleNoID(e){this.artProcessService.getArtProcessByArticleNoID(e).subscribe(e=>{this.artProcessData=e.map(e=>({id:e.id,name:1===e.processID?"ASY":"STF"}))})}getAllProcess(){this.artProcessService.GetAllProcess().subscribe(e=>{this.artProcessDataClone2=e})}getAllKind(){this.kindService.getAllKind().subscribe(e=>{this.kinds=e})}getAllPart(){this.partService.getAllPart().subscribe(e=>{this.parts=e})}getAllMaterial(){this.materialService.getAllMaterial().subscribe(e=>{this.materials=e})}getIngredientsByGlueID(){this.ingredientService.getIngredientsByGlueID(this.glueid).subscribe(e=>{this.ingredients1=e.list1,this.ingredients2=e.list2})}getAllSupllier(){this.ingredientService.getAllSupplier().subscribe(e=>{this.supplier=e})}getArticleNoByModelNoID(e){this.articleNoService.getArticleNoByModelNoID(e).subscribe(e=>{this.articleNosData=e})}getBPFCID(e){this.bPFCEstablishService.getBPFCID(e).subscribe(e=>{this.resetLifeCycleBPFC(),this.BPFCID=null==e?void 0:e.id,this.approvalStatus=e.approvalStatus,this.createdStatus=e.finishedStatus,this.glue.BPFCEstablishID=this.BPFCID,this.getAllGluesByBPFCID(this.BPFCID),this.getAllPart(),this.getAllKind(),this.getAllMaterial(),this.getAllIngredient(),this.existGlue=!0,this.modified=!0})}OndataBound(e){}getModelNamesClone(){this.modalNameService.getAllModalName().subscribe(e=>{this.modelNameDataClone=e.map(e=>({id:e.id,name:e.name})),this.getModelNoByModelNameIDClone(this.modelNameIDClone),this.articleNosDataClone=[],this.artProcessDataClone=[]})}getArticleNoByModelNameIDClone(e){this.articleNoService.getArticleNoByModelNoID(e).subscribe(e=>{this.articleNosDataClone=e})}getModelNoByModelNameIDClone(e){this.modelNoService.getModelNoByModelNameID(e).subscribe(e=>{this.modelNOsDataClone=e}),this.getArticleNoByModelNameIDClone(this.valuemodelNo)}getArtProcessByArticleNoIDClone(e){this.artProcessService.getArtProcessByArticleNoID(e).subscribe(e=>{this.artProcessDataClone=e.map(e=>({id:e.id,name:1===e.ProcessID?"ASY":"STF"}))})}onChangeModelName(e){this.resetLifeCycleBPFC(),this.modelNameID=e.value,this.getModelNoByModelNameID(this.modelNameID),this.existGlue=!1,this.modelNameIDClone=e.value,this.value=e.value,this.valuemodelNo=0,this.modified=!1,this.modelNoData=[],this.articleNosData=[],this.artProcessData=[],this.modelNameSelect=!0,this.modelNoSelect=!1,this.modelArtSelect=!1,this.modelProcessSelect=!1}onChangeModelNo(e){e.isInteracted&&(this.modelNoID=e.value,this.valuemodelNo=e.value,this.getArticleNoByModelNoID(this.modelNoID),this.existGlue=!1,this.modified=!1,this.articleNosData=[],this.artProcessData=[],this.modelNoSelect=!0)}onChangeArticleNo(e){e.isInteracted&&(this.articleNoID=e.value,this.getArtProcessByArticleNoID(this.articleNoID),this.existGlue=!1,this.modified=!1,this.modelArtSelect=!0,this.artProcessData=[])}onClickProcess(e){this.modelProcessSelect=!0,e.target.defaultValue&&(this.artProcessID=Number(e.target.defaultValue))}ClickProcessData(e){}clearFormClone(){this.modelNameIDClone=this.value,this.modelNOIDClone=this.valuemodelNo,this.articleNOIDClone=0,this.artProcessIDClone=0,this.articleNosDataClone=[],this.artProcessDataClone=[],this.artProcessDataClone2=[]}onClickClone(){const e={modelNameID:this.modelNameIDLeo,modelNOID:this.modelNoIDLeo,articleNOID:this.articleNoIDLeo,artProcessID:Number(this.artProcessIDLeo),bpfcID:this.BPFCIDLeo,name:this.articleNoNewLeo,cloneBy:JSON.parse(localStorage.getItem("user")).User.ID};this.clone(e)}clone(e){this.articleNoNewLeo!==this.articleNoLeo?this.modalNameService.cloneBPFC(e).subscribe(e=>{!0===e.status?(this.alertify.success("\u0110\xe3 sao ch\xe9p th\xe0nh c\xf4ng!"),this.modalService.dismissAll(),this.getAllUsers()):this.alertify.error("The BPFC exists!")}):this.alertify.error("The BPFC exists!")}onChangeModelNameClone(e){this.value!==e.value&&(this.modelNOsDataClone=[],this.modelNameIDClone=e.value,this.getModelNoByModelNameIDClone(this.modelNameIDClone)),this.modelNameIDClone=e.value,this.getModelNoByModelNameIDClone(this.modelNameIDClone)}onChangeModelNoClone(e){this.modelNOIDClone=e.value,null!==this.modelNOIDClone&&this.getArticleNoByModelNameIDClone(this.modelNOIDClone),this.articleNosDataClone=[],this.artProcessDataClone=[]}onChangeArticleNoClone(e){e.isInteracted&&(this.articleNOIDClone=e.value,this.getArtProcessByArticleNoIDClone(this.articleNOIDClone))}onChangeProcessClone(e){e.isInteracted&&(this.artProcessIDClone=e.value)}changeAllowColor(e){return null===e.position?"":this.positions.includes(e.position)&&0===e.allow||this.positions.includes(e.position)&&null===e.allow?"font-weight-bold text-white p-2 rounded-circle warning-text":void 0}changePercentageColor(e){return null===e.percentage?"":this.positions.includes(e.position)&&0===e.percentage?"font-weight-bold text-white p-2 rounded-circle warning-text":void 0}changeConsumptionColor(e){return 0===e.glueIngredients.length?"":""===e.consumption?"font-weight-bold text-white p-2 rounded-circle warning-text":void 0}}return e.\u0275fac=function(t){return new(t||e)(x.Mb(U),x.Mb(R.a),x.Mb(L.a),x.Mb(A.a),x.Mb(r.b),x.Mb(w.a),x.Mb(z.a),x.Mb(k.a),x.Mb(J),x.Mb(j),x.Mb(H.a),x.Mb(_.a),x.Mb(q.a),x.Mb(M.a),x.Mb(Q),x.Mb(V.a),x.Mb(F.a))},e.\u0275cmp=x.Gb({type:e,selectors:[["app-bpfc-detail"]],viewQuery:function(e,t){if(1&e&&(x.Qc(it,!0),x.Qc(nt,!0),x.Qc(st,!0),x.Qc(lt,!0),x.Qc(at,!0),x.Qc(ot,!0),x.Qc(rt,!0),x.Qc(ct,!0)),2&e){let e;x.xc(e=x.dc())&&(t.switch=e.first),x.xc(e=x.dc())&&(t.grid=e.first),x.xc(e=x.dc())&&(t.gridglue=e.first),x.xc(e=x.dc())&&(t.grid2=e.first),x.xc(e=x.dc())&&(t.modelNameDropdownlist=e.first),x.xc(e=x.dc())&&(t.modelNoDropdownlist=e.first),x.xc(e=x.dc())&&(t.chemicalDropdownlist=e.first),x.xc(e=x.dc())&&(t.positionDropdownlist=e)}},features:[x.yb([S.n,S.f,S.k])],decls:49,vars:11,consts:[[1,"row"],[1,"col-md-5"],[1,"card"],[1,"col-md-12","card-body","table-responsive"],[1,"col-md-3","mt-2"],[1,"col-md-8","mt-2"],["type","text","name","","disabled","","title","",1,"form-control",3,"value"],[1,"col-md-1","mt-2"],["type","button",1,"btn","btn-danger","rounded-pill"],[4,"ngIf"],[1,"card-body","table-responsive","p-0"],["class","control-section",4,"ngIf"],[1,"col-md-7"],[1,"card-header"],[1,"card-title"],["class","card-tools",4,"ngIf"],["class","card-body",4,"ngIf"],["cloneArticleModal",""],["HistoryModal",""],["cloneModal",""],["style","display: block;","id","barcode","width","300px","height","100px","mode","SVG","type","Code32",3,"value",4,"ngIf"],["id","barcode","width","300px","height","100px","mode","SVG","type","Code32",2,"display","block",3,"value"],["barcode",""],[1,"control-section"],["height","250px","showColumnMenu","true","allowSorting","true","allowResizing","true","gridLines","Both",3,"dataSource","editSettings","toolbar","allowSorting","selectedRowIndex","rowDeselected","actionBegin","rowSelected","created","toolbarClick","dataBound"],["gridglue",""],["field","name","isPrimaryKey","true","headerText","Chemical","textAlign","Center","width","150"],["headerTemplate",""],["template",""],["field","consumption","headerText","Std. Con.(g)","textAlign","Center","width","150"],["field","expiredTime","headerText","Expired Time","isPrimaryKey","true","textAlign","Center","width","150"],["field","kindName","headerText","Kind","textAlign","Center","width","150"],["editTemplate",""],["field","partName","headerText","Part","textAlign","Center","width","150"],["field","materialName","headerText","Material","textAlign","Center","width","150"],["data-toggle","tooltip","data-placement","top",3,"title"],[3,"dataSource","ngModel","fields","allowFiltering","ngModelChange","select"],["glueDropdownlist",""],["popupHeight","200px","popupWidth","250px",3,"dataSource","ngModel","fields","allowFiltering","ngModelChange","select"],[1,"card-tools"],["type","button",1,"btn","btn-danger","btn-sm","mr-2","d-none"],[1,"fas","fa-undo"],["style","width: 100px; margin-right: 10px;",3,"onLabel","offLabel","disabled","ngModel","checked","click","ngModelChange",4,"ngIf"],["type","button","ejs-button","","cssClass","e-small e-success ml-2",3,"click",4,"ngIf"],["type","button","ejs-button","","cssClass","e-small e-default ml-2",3,"click",4,"ngIf"],[2,"width","100px","margin-right","10px",3,"onLabel","offLabel","disabled","ngModel","checked","click","ngModelChange"],["switch",""],["onLabel","Approved","style","width: 120px;",3,"offLabel","ngModel","checked","click","ngModelChange",4,"ngIf"],["onLabel","Approved",2,"width","120px",3,"offLabel","ngModel","checked","click","ngModelChange"],["type","button","ejs-button","","cssClass","e-small e-success ml-2",3,"click"],[1,"fas","fa-save"],["type","button","ejs-button","","cssClass","e-small e-default ml-2",3,"click"],[1,"fas","fa-history"],[1,"card-body"],[1,"col-lg-12","col-xs-12","col-12",2,"text-align","center"],["type","button",1,"btn","bg-gradient-secondary","btn-sm","rounded-pill",3,"click"],["type","button","style","margin: 3px","class","btn btn-info btn-sm rounded-pill",3,"click",4,"ngFor","ngForOf"],[1,"col-md-6"],["height","675px","gridLines","Both","showColumnMenu","true","allowSorting","true","allowResizing","true",3,"dataSource","allowSorting","editSettings","toolbar","actionComplete","recordDoubleClick","actionBegin","toolbarClick","rowSelected"],["grid",""],["field","Item","isPrimaryKey","true","headerText","Item","width","80","textAlign","Center"],["field","name","isPrimaryKey","true","headerText","Name","width","140","textAlign","Center"],["field","percentage","headerText","%","textAlign","Center","width","60"],["field","allow","headerText","Allow (%)","textAlign","Center","width","60"],["height","675px","showColumnMenu","true","allowSorting","true","allowResizing","true","gridLines","Both",3,"dataSource","allowSorting","editSettings","toolbar","actionComplete","recordDoubleClick","actionBegin","toolbarClick","rowSelected"],["grid2",""],[2,"visibility","hidden"],[2,"list-style-type","square","font-weight","bold"],["style","list-style: none;",4,"ngFor","ngForOf"],[2,"list-style","none"],[1,"font-weight-bold","text-danger"],["type","button",1,"btn","btn-info","btn-sm","rounded-pill",2,"margin","3px",3,"click"],[1,"fas","fa-cannabis"],[3,"dataSource","value","fields","allowFiltering","change"],["positionDropdownlist",""],[1,"fas","fa-exclamation-circle"],[1,"modal-header"],[1,"modal-title"],[1,"fas","fa-plus"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-md-12"],[1,"form-group"],["for","Name"],[2,"color","red"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["placeholder","Select a process",1,"w-100",3,"value","dataSource","allowFiltering","fields","change"],["processDropdownlist",""],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["type","submit",1,"btn","btn-primary",3,"click"],["height","675px","gridLines","Both","showColumnMenu","true","allowSorting","true","allowResizing","true",3,"dataSource","allowSorting","editSettings","toolbar","actionBegin"],["gridHistory",""],["field","createdTime","isPrimaryKey","true","headerText","Time","textAlign","Center"],["field","action","isPrimaryKey","true","headerText","Status","width","150","textAlign","Center"],["field","before","headerText","Before","width","450","isPrimaryKey","true","textAlign","Left"],["field","after","headerText","After","width","450","isPrimaryKey","true","textAlign","Left"],["field","remark","headerText","Remark","textAlign","Center",3,"edit"],["field","createdBy","headerText","Created By","isPrimaryKey","true","textAlign","Center"],["type","button",1,"btn","btn-primary",3,"click"],[3,"ngClass"],[4,"ngIf","ngIfElse"],["elseTemplate",""],["type","text","name","remark",1,"e-field","e-input","e-defaultcell",2,"text-align","Center",3,"value"],["disabled","disabled","type","text","name","remark",1,"e-field","e-input","e-defaultcell",2,"text-align","Center",3,"value"],["type","text","name","","title","",1,"form-control",3,"ngModel","value","ngModelChange"]],template:function(e,t){1&e&&(x.Sb(0,"div",0),x.Sb(1,"div",1),x.Sb(2,"div",2),x.Sb(3,"div",3),x.Sb(4,"div",0),x.Sb(5,"div",4),x.Sb(6,"label"),x.Kc(7,"Model Name: "),x.Rb(),x.Rb(),x.Sb(8,"div",5),x.Nb(9,"input",6),x.Rb(),x.Rb(),x.Sb(10,"div",0),x.Sb(11,"div",4),x.Sb(12,"label"),x.Kc(13,"Model NO: "),x.Rb(),x.Rb(),x.Sb(14,"div",5),x.Nb(15,"input",6),x.Rb(),x.Rb(),x.Sb(16,"div",0),x.Sb(17,"div",4),x.Sb(18,"label"),x.Kc(19,"Article NO: "),x.Rb(),x.Rb(),x.Sb(20,"div",5),x.Nb(21,"input",6),x.Rb(),x.Nb(22,"div",7),x.Rb(),x.Sb(23,"div",0),x.Sb(24,"div",4),x.Sb(25,"label"),x.Kc(26,"Process: "),x.Rb(),x.Rb(),x.Sb(27,"div",5),x.Sb(28,"button",8),x.Kc(29),x.Rb(),x.Rb(),x.Nb(30,"div",7),x.Rb(),x.Rb(),x.Rb(),x.Sb(31,"div",2),x.Ic(32,ht,2,1,"div",9),x.Sb(33,"div",10),x.Ic(34,vt,32,5,"div",11),x.Rb(),x.Rb(),x.Rb(),x.Sb(35,"div",12),x.Sb(36,"div",2),x.Sb(37,"div",13),x.Sb(38,"h3",14),x.Kc(39),x.hc(40,"translate"),x.Rb(),x.Ic(41,Rt,8,4,"div",15),x.Rb(),x.Ic(42,Yt,63,14,"div",16),x.Rb(),x.Rb(),x.Ic(43,Xt,27,5,"ng-template",null,17,x.Jc),x.Ic(45,ii,24,6,"ng-template",null,18,x.Jc),x.Rb(),x.Ic(47,ni,42,5,"ng-template",null,19,x.Jc)),2&e&&(x.zb(9),x.mc("value",t.modelNameDetail),x.zb(6),x.mc("value",t.modelNoDetail),x.zb(6),x.mc("value",t.articleNoDetail),x.zb(8),x.Lc(t.artProcessDetail),x.zb(3),x.mc("ngIf",t.existGlue),x.zb(2),x.mc("ngIf",t.existGlue),x.zb(5),x.Mc("",x.ic(40,9,"PREVIEW")," "),x.zb(2),x.mc("ngIf",t.existGlue),x.zb(1),x.mc("ngIf",t.existGlue))},directives:[n.n,c.b,S.j,d.d,C.d,C.b,S.e,S.b,d.c,C.c,C.a,S.d,S.a,o.c,s.g,s.j,h.i,h.b,n.m,s.b,n.l],pipes:[b.c,n.d],styles:[".e-grid[_ngcontent-%COMP%]   td.e-active[_ngcontent-%COMP%]{background:#6597ce!important;color:#000}.radiobutton-control[_ngcontent-%COMP%]{margin:5% 0 5% 40%}@media only screen and (max-width:500px){.radiobutton-control[_ngcontent-%COMP%]{margin-left:21%;margin-top:20%;margin-bottom:27%}}@media only screen and (max-width:700px){.checkbox-control[_ngcontent-%COMP%]{margin-left:35%;margin-top:8%}.control-section[_ngcontent-%COMP%]{min-height:200px}}.control-section[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin:20px 0}.radiobutton-control[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px}.e-bigger[_ngcontent-%COMP%]   .radiobutton-control[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:20px}.warning-text[_ngcontent-%COMP%]{-webkit-animation:warning-frames .5s infinite;animation:warning-frames .5s infinite;color:#000}@-webkit-keyframes warning-frames{0%{background-color:#d40a0a}to{background-color:#ff6565}}@keyframes warning-frames{0%{background-color:#d40a0a}to{background-color:#ff6565}}"]}),e})();var li=i("quSY"),ai=i("MAxt");const oi=["grid"],ri=["importModal"],ci=["tooltip"];function di(e,t){if(1&e&&x.Kc(0),2&e){const e=t.$implicit,i=x.gc();x.Lc(i.NO(e.index))}}function hi(e,t){if(1&e){const e=x.Tb();x.Sb(0,"ejs-tooltip",24,25),x.cc("beforeRender",function(i){x.Bc(e);const n=t.$implicit;return x.gc().onBeforeRender(i,n,n.index)}),x.Kc(2),x.Rb()}if(2&e){const e=t.$implicit;x.zb(2),x.Mc(" ",e.modelName," ")}}function ui(e,t){if(1&e&&(x.Kc(0),x.hc(1,"date")),2&e){const e=t.$implicit;x.Mc(" ","ASY"===e.artProcess?"N/A":x.jc(1,1,e.dueDate,"d MMM, yyyy")," ")}}function gi(e,t){if(1&e){const e=x.Tb();x.Sb(0,"div"),x.Sb(1,"ejs-datepicker",28),x.cc("change",function(t){return x.Bc(e),x.gc(2).onChangeDueDate(t)}),x.Rb(),x.Rb()}if(2&e){const e=x.gc().$implicit;x.zb(1),x.mc("value",e.dueDate)}}function mi(e,t){if(1&e&&(x.Kc(0),x.hc(1,"date")),2&e){const e=x.gc().$implicit;x.Mc(" ","ASY"===e.artProcess?"N/A":x.jc(1,1,e.dueDate,"d MMM, yyyy")," ")}}function bi(e,t){if(1&e&&(x.Ic(0,gi,2,1,"div",26),x.Ic(1,mi,2,4,"ng-template",null,27,x.Jc)),2&e){const e=t.$implicit,i=x.yc(2);x.mc("ngIf","STF"===e.artProcess)("ngIfElse",i)}}function pi(e,t){1&e&&(x.Sb(0,"span",35),x.Kc(1," | "),x.Rb())}function fi(e,t){if(1&e){const e=x.Tb();x.Sb(0,"button",36),x.cc("click",function(){x.Bc(e);const t=x.gc().$implicit,i=x.gc(),n=x.yc(34);return i.openModal(n,t)}),x.Nb(1,"i",37),x.Rb()}}function Ii(e,t){1&e&&(x.Sb(0,"span",35),x.Kc(1," | "),x.Rb())}function Si(e,t){if(1&e){const e=x.Tb();x.Sb(0,"button",38),x.cc("click",function(){x.Bc(e);const t=x.gc().$implicit,i=x.gc(),n=x.yc(36);return i.openModalClone(n,t)}),x.Nb(1,"i",39),x.Rb()}}function Di(e,t){1&e&&(x.Sb(0,"span",35),x.Kc(1," | "),x.Rb())}function Ni(e,t){if(1&e){const e=x.Tb();x.Sb(0,"button",40),x.cc("click",function(){x.Bc(e);const t=x.gc().$implicit;return x.gc().delete(t.id)}),x.Nb(1,"i",41),x.Rb()}}function Ci(e,t){if(1&e){const e=x.Tb();x.Sb(0,"button",29),x.cc("click",function(){x.Bc(e);const i=t.$implicit;return x.gc().detail(i)}),x.Nb(1,"i",30),x.Rb(),x.Ic(2,pi,2,0,"span",31),x.Ic(3,fi,2,0,"button",32),x.Ic(4,Ii,2,0,"span",31),x.Ic(5,Si,2,0,"button",33),x.Ic(6,Di,2,0,"span",31),x.Ic(7,Ni,2,0,"button",34)}if(2&e){const e=t.$implicit,i=x.gc();x.zb(2),x.mc("ngIf",!0===e.finishedStatus),x.zb(1),x.mc("ngIf",!0===e.finishedStatus),x.zb(1),x.mc("ngIf",!1===e.finishedStatus),x.zb(1),x.mc("ngIf",!1===e.finishedStatus),x.zb(1),x.mc("ngIf",1===i.role.id),x.zb(1),x.mc("ngIf",1===i.role.id)}}function vi(e,t){if(1&e){const e=x.Tb();x.Sb(0,"div",42),x.Sb(1,"h4",43),x.Nb(2,"i",44),x.Kc(3," Import Excel "),x.Rb(),x.Sb(4,"button",45),x.cc("click",function(){return t.$implicit.dismiss("Cross click")}),x.Sb(5,"span",46),x.Kc(6,"\xd7"),x.Rb(),x.Rb(),x.Rb(),x.Sb(7,"div",47),x.Sb(8,"div",4),x.Sb(9,"div",48),x.Sb(10,"div",49),x.Sb(11,"label",50),x.Kc(12,"Select File (*Notice: Excel file must be followed a system template. If you do not have a template, please "),x.Sb(13,"a",51),x.Kc(14,"click here"),x.Rb(),x.Kc(15," to download. Thank you!)"),x.Rb(),x.Sb(16,"input",52),x.cc("change",function(t){return x.Bc(e),x.gc().fileProgress(t)}),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Sb(17,"div",53),x.Sb(18,"button",54),x.cc("click",function(){return x.Bc(e),x.gc().uploadFile()}),x.Kc(19,"Upload File"),x.Rb(),x.Sb(20,"button",55),x.cc("click",function(){return t.$implicit.close("Close click")}),x.Kc(21,"Close"),x.Rb(),x.Rb()}if(2&e){const e=x.gc();x.zb(13),x.mc("href",e.excelDownloadUrl,x.Dc)}}function yi(e,t){if(1&e){const e=x.Tb();x.Sb(0,"div",42),x.Sb(1,"h4",43),x.Nb(2,"i",44),x.Kc(3," New Version BPFC "),x.Rb(),x.Sb(4,"button",45),x.cc("click",function(){return t.$implicit.dismiss("Cross click")}),x.Sb(5,"span",46),x.Kc(6,"\xd7"),x.Rb(),x.Rb(),x.Rb(),x.Sb(7,"div",47),x.Sb(8,"div",4),x.Sb(9,"div",5),x.Sb(10,"div",49),x.Sb(11,"label",50),x.Kc(12,"Model Name"),x.Rb(),x.Nb(13,"input",56),x.Rb(),x.Rb(),x.Sb(14,"div",5),x.Sb(15,"div",49),x.Sb(16,"label",50),x.Kc(17,"Model NO"),x.Rb(),x.Nb(18,"input",56),x.Rb(),x.Rb(),x.Sb(19,"div",5),x.Sb(20,"div",49),x.Sb(21,"label",50),x.Kc(22,"Article NO"),x.Rb(),x.Sb(23,"span",57),x.Kc(24,"(*)"),x.Rb(),x.Sb(25,"div",58),x.Sb(26,"div",59),x.Sb(27,"span",60),x.Kc(28),x.Rb(),x.Rb(),x.Sb(29,"input",61),x.cc("ngModelChange",function(t){return x.Bc(e),x.gc().value=t}),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Sb(30,"div",5),x.Sb(31,"div",49),x.Sb(32,"label",50),x.Kc(33,"Process"),x.Rb(),x.Nb(34,"input",56),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Sb(35,"div",53),x.Sb(36,"button",62),x.cc("click",function(){return t.$implicit.close("Close click")}),x.Kc(37,"Close"),x.Rb(),x.Sb(38,"button",63),x.cc("click",function(){return x.Bc(e),x.gc().onClickCloneNewVersion()}),x.Kc(39,"Copy"),x.Rb(),x.Rb()}if(2&e){const e=x.gc();x.zb(13),x.mc("value",e.modelName),x.zb(5),x.mc("value",e.modelNo),x.zb(10),x.Lc(e.articleNoDefault),x.zb(1),x.mc("ngModel",e.value),x.zb(5),x.mc("value",e.artProcess)}}function Bi(e,t){if(1&e){const e=x.Tb();x.Sb(0,"div",42),x.Sb(1,"h4",43),x.Nb(2,"i",44),x.Kc(3," Clone BPFC "),x.Rb(),x.Sb(4,"button",45),x.cc("click",function(){return t.$implicit.dismiss("Cross click")}),x.Sb(5,"span",46),x.Kc(6,"\xd7"),x.Rb(),x.Rb(),x.Rb(),x.Sb(7,"div",47),x.Sb(8,"div",4),x.Sb(9,"div",5),x.Sb(10,"div",49),x.Sb(11,"label",50),x.Kc(12,"Model Name"),x.Rb(),x.Nb(13,"input",56),x.Rb(),x.Rb(),x.Sb(14,"div",5),x.Sb(15,"div",49),x.Sb(16,"label",50),x.Kc(17,"Model NO"),x.Rb(),x.Nb(18,"input",56),x.Rb(),x.Rb(),x.Sb(19,"div",5),x.Sb(20,"div",49),x.Sb(21,"label",50),x.Kc(22,"Article NO"),x.Rb(),x.Sb(23,"span",57),x.Kc(24,"(*)"),x.Rb(),x.Sb(25,"ejs-dropdownlist",64,65),x.cc("open",function(){return x.Bc(e),x.gc().openPopupDropdownlist()})("ngModelChange",function(t){return x.Bc(e),x.gc().articleNoID=t})("filtering",function(t){return x.Bc(e),x.gc().onFilteringArticleNO(t)})("select",function(t){return x.Bc(e),x.gc().onChangeArticleNo(t)}),x.Rb(),x.Rb(),x.Rb(),x.Sb(27,"div",5),x.Sb(28,"div",49),x.Sb(29,"label",50),x.Kc(30,"Process"),x.Rb(),x.Nb(31,"input",56),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Sb(32,"div",53),x.Sb(33,"button",62),x.cc("click",function(){return t.$implicit.close("Close click")}),x.Kc(34,"Close"),x.Rb(),x.Sb(35,"button",63),x.cc("click",function(){return x.Bc(e),x.gc().onClickClone()}),x.Kc(36,"Copy"),x.Rb(),x.Rb()}if(2&e){const e=x.gc();x.zb(13),x.mc("value",e.modelName),x.zb(5),x.mc("value",e.modelNo),x.zb(7),x.mc("dataSource",e.articleNosData)("fields",e.fieldsBPFCs)("allowFiltering",!0)("ngModel",e.articleNoID),x.zb(6),x.mc("value",e.artProcess)}}new m.e({Accept:"application/json"});let wi=(()=>{class e{constructor(e,t,i,n,s,l,a,o,r,c,d){this.modalNameService=e,this.alertify=t,this.userService=i,this.bPFCEstablishService=n,this.modalService=s,this.router=l,this.datePipe=a,this.spinner=o,this.articleNoService=r,this.dataService=c,this.http=d,this.pageSettings={pageCount:20,pageSizes:[50,100,150,200,"All"],pageSize:50},this.modelName=null,this.modelNo=null,this.articleNo=null,this.articleNoNew=null,this.articleNoDefault=null,this.artProcess=null,this.value=null,this.modelNameID=0,this.modelNoID=0,this.articleNoID=0,this.artProcessID=0,this.BPFCID=0,this.baseUrl=P.a.apiUrlEC,this.textSearch=null,this.textSearchs=null,this.fieldsBPFCs={text:"name",value:"id"},this.sortSettings={columns:[{field:"articleNo",direction:"Ascending"}]},this.subscriptions=new li.a,this.checkCode=!1,this.styleBtn={background:"#6c757d",boxShadow:"0 0 0 3px rgba(130, 138, 145, 0.5)",border:"1px solid #6c757d",margin:"0",borderColor:"#6c757d",borderRadius:"4px",color:"#fff"},this.onFilteringArticleNO=e=>{let t=new T.h;t=""!==e.text?t.where("name","contains",e.text,!0):t,e.updateData(this.articleNosData,t)},this.onFilteringModelNOClone=e=>{let t=new T.h;t=""!==e.text?t.where("name","contains",e.text,!0):t,e.updateData(this.modelNOsDataClone,t)}}ngOnInit(){const e=JSON.parse(localStorage.getItem("level"));this.role=e,this.excelDownloadUrl=P.a.apiUrlEC+"ModelName/ExcelExport",this.toolbar=["Excel Import","ExcelExport","Search",{text:"Undone",tooltipText:"Undone",prefixIcon:"fa fa-remove",id:"Undone"},{text:"Done",tooltipText:"Done",prefixIcon:"fa fa-check",id:"Done"},{text:"All",tooltipText:"All",prefixIcon:"fa fa-list",id:"All"},{text:"% of done",tooltipText:"% of done",prefixIcon:"",id:"percentageOfDone"}],this.filterSettings={type:"Excel"},this.editSettings={allowEditing:!0,allowAdding:!0,allowDeleting:!0,newRowPosition:"Normal"},this.dataText=this.dataService.currentMessages.subscribe(e=>{this.textSearch=e,0!==e&&(this.searchOptions={fields:["modelName","modelNo","articleNo","approvedBy","artProcess"],operator:"contains",key:e||"",ignoreCase:!0})})}ngOnDestroy(){this.dataText.unsubscribe()}detail(e){return this.dataService.changeMessage(this.textSearch),this.router.navigate(["/ec/establish/bpfc-schedule/detail/"+e.id])}onChangeArticleNo(e){e.isInteracted&&(this.articleNoID=e.itemData.id)}onChangeDueDate(e){this.dueDate=e.value}createdSearch(e){this.getAllUsers();const t=this.gridObj.element,i=document.createElement("span");i.className="e-clear-icon",i.id=t.id+"clear",i.onclick=this.cancelBtnClick.bind(this),t.querySelector(".e-toolbar-item .e-input-group").appendChild(i),this.percentageOfDone=new h.a({cssClass:"e-tbar-btn e-tbtn-txt e-control e-lib",iconCss:""}),this.percentageOfDone.appendTo("#percentageOfDone")}cancelBtnClick(e){this.gridObj.searchSettings.key="",this.gridObj.element.querySelector(".e-input-group.e-search .e-input").value=""}getSearchText(){}getArticleNoByModelNoID(e,t){this.articleNoService.getArticleNoByModelNoID(e).subscribe(e=>{this.articleNosData=e.filter(e=>e.name!==t)})}openPopupDropdownlist(){}onBeforeRender(e,t,i){const n=this.tooltip.filter((e,t)=>t===+i)[0];n.content="Loading...",n.dataBind(),this.bPFCEstablishService.getGlueByBPFCID(t.id).subscribe(e=>{n.content=e.join("<br>"),n.dataBind()})}onClickCloneNewVersion(){null!==this.value&&(this.articleNoNew=this.articleNoDefault+this.value);const e={modelNameID:this.modelNameID,modelNOID:this.modelNoID,articleNOID:this.articleNoID,artProcessID:Number(this.artProcessID),bpfcID:this.BPFCID,name:this.articleNoNew,cloneBy:JSON.parse(localStorage.getItem("user")).User.ID};this.cloneNewVersion(e)}cloneNewVersion(e){this.findArticleNo(this.articleNoNew),null!==this.value?this.checkCode?this.modalNameService.cloneBPFC(e).subscribe(e=>{!0===e.status?(this.alertify.success("\u0110\xe3 sao ch\xe9p th\xe0nh c\xf4ng! <br> Copy succeeded!"),this.modalService.dismissAll(),this.getUndone(),this.gridObj.search(this.articleNoNew),this.value=null):(this.alertify.error("The BPFC exists!"),this.value=null)}):(this.alertify.error("The BPFC exists!"),this.value=null):(this.alertify.error("Version can not be Empty!"),this.value=null)}findArticleNo(e){for(const t of this.data){if(t.articleNo===e){this.checkCode=!1;break}this.checkCode=!0}}onClickClone(){const e={modelNameID:this.modelNameID,modelNOID:this.modelNoID,articleNOID:this.articleNoID,artProcessID:Number(this.artProcessID),bpfcID:this.BPFCID,cloneBy:JSON.parse(localStorage.getItem("user")).User.ID};this.clone(e)}clone(e){this.modalNameService.clone(e).subscribe(e=>{!0===e.status?(this.alertify.success("\u0110\xe3 sao ch\xe9p th\xe0nh c\xf4ng! <br> Copy succeeded!"),this.getUndone(),this.gridObj.search(this.articleNoNew),this.modalService.dismissAll()):this.alertify.error("The BPFC exists!")})}openModal(e,t){this.modalReference=this.modalService.open(e,{size:"md",backdrop:"static",keyboard:!1}),this.BPFCID=t.id,this.modelName=t.modelName,this.modelNo=t.modelNo,this.articleNo=t.articleNo,this.artProcess=t.artProcess,this.articleNoNew=t.articleNo.split("-")[0]+"-T",this.articleNoDefault=t.articleNo.split("-")[0]+"-T",this.modelNameID=t.modelNameID,this.modelNoID=t.modelNoID,this.articleNoID=0,this.artProcessID="ASY"===t.artProcess?1:2}openModalClone(e,t){this.modalReference=this.modalService.open(e,{size:"md",backdrop:"static",keyboard:!1}),this.BPFCID=t.id,this.modelName=t.modelName,this.modelNo=t.modelNo,this.artProcess=t.artProcess,this.articleNo=t.articleNo,this.modelNameID=t.modelNameID,this.modelNoID=t.modelNoID,this.articleNoID=0,this.getArticleNoByModelNoID(this.modelNoID,t.articleNo),this.artProcessID="ASY"===t.artProcess?1:2}actionBegin(e){if("searching"===e.requestType&&(this.textSearch=e.searchString),"save"===e.requestType){const t={id:e.data.id,season:e.data.season},i=e.previousData.season;(null!==i||""!==i&&i!==e.data.season)&&this.bPFCEstablishService.updateSeason(t).subscribe(()=>{this.alertify.success("Update season successfully"),this.getAllUsers()});const n={id:e.data.id,dueDate:this.dueDate},s=e.previousData.dueDate;"STF"===e.data.artProcess&&this.dueDate.toDateString()!==s&&null!=s&&this.bPFCEstablishService.updateDueDate(n).subscribe(()=>{this.getAllUsers(),this.alertify.success("Update due date successfully")})}}dataBound(e){console.log("databound",e)}toolbarClick(e){switch(e.item.text){case"Excel Import":this.showModal(this.importModal);break;case"Done":this.gridObj.searchSettings.key="",this.getDone();break;case"Undone":this.gridObj.searchSettings.key="",this.getUndone();break;case"All":this.gridObj.searchSettings.key="",this.getAll();break;case"Excel Export":const e=this.data.map(e=>({approvedBy:e.approvedBy,approvalStatus:e.approvalStatus,createdBy:e.createdBy,articleNo:e.articleNo,createdDate:this.datePipe.transform(e.createdDate,"d MMM, yyyy HH:mm"),artProcess:e.artProcess,finishedStatus:!0===e.finishedStatus?"Yes":"No",modelName:e.modelName,modelNo:e.modelNo,season:e.season}));this.gridObj.excelExport({dataSource:e})}}fileProgress(e){this.file=e.target.files[0]}uploadFile(){const e=JSON.parse(localStorage.getItem("user")).User.ID;this.bPFCEstablishService.import(this.file,e).subscribe(e=>{this.getAll(),this.modalReference.close(),this.alertify.success("The excel has been imported into system!")})}getAllUsers(){this.userService.getAllUserInfo().subscribe(e=>{this.users=e,this.getUndone()})}delete(e){this.alertify.confirm("Delete BPFC",'Are you sure you want to delete this BPFC "'+e+'" ?',()=>{this.bPFCEstablishService.delete(e).subscribe(e=>{this.alertify.success("Success"),this.getUndone()},e=>{this.alertify.warning(e)})})}rowDB(e){e.data.dueDateStatus&&e.row.classList.add("bgcolor")}editTextOfBtn(){this.undoneBtn=new h.a({cssClass:"e-tbar-btn e-tbtn-txt e-control e-btn e-lib",iconCss:"fa fa-remove",content:this.undoneText}),this.allBtn=new h.a({cssClass:"e-tbar-btn e-tbtn-txt e-control e-btn e-lib",iconCss:"fa fa-list",content:"All"}),this.doneBtn=new h.a({cssClass:"e-tbar-btn e-tbtn-txt e-control e-btn e-lib",iconCss:"fa fa-check",content:this.doneText}),this.doneBtn.appendTo("#Done"),this.allBtn.appendTo("#All"),this.undoneBtn.appendTo("#Undone"),!0===this.isDone?(this.setAttrBtn(this.doneBtn),this.resetAttrBtn(this.undoneBtn),this.resetAttrBtn(this.allBtn)):!1===this.isDone?(this.setAttrBtn(this.undoneBtn),this.resetAttrBtn(this.doneBtn),this.resetAttrBtn(this.allBtn)):(this.setAttrBtn(this.allBtn),this.resetAttrBtn(this.doneBtn),this.resetAttrBtn(this.undoneBtn))}getAll(){this.spinner.show(),this.bPFCEstablishService.getAll().subscribe(e=>{this.data=e.map(e=>{var t;return{id:e.id,modelNameID:e.modelNameID,modelNoID:e.modelNoID,articleNoID:e.articleNoID,artProcessID:e.artProcessID,modelName:e.modelName,modelNo:e.modelNo,createdDate:new Date(e.createdDate),articleNo:e.articleNo,approvalStatus:e.approvalStatus,finishedStatus:e.finishedStatus,dueDate:e.dueDate,dueDateStatus:e.dueDateStatus,approvedBy:null===(t=this.users.filter(t=>t.id===e.approvalBy)[0])||void 0===t?void 0:t.username,createdBy:e.createdBy,artProcess:e.artProcess,season:e.season}}),this.spinner.hide(),this.isDone=null,this.editTextOfBtn()})}getDone(){this.spinner.show(),this.bPFCEstablishService.getDoneBPFC().subscribe(e=>{this.data=e.data.map(e=>{var t;return{id:e.id,modelNameID:e.modelNameID,modelNoID:e.modelNoID,articleNoID:e.articleNoID,artProcessID:e.artProcessID,modelName:e.modelName,modelNo:e.modelNo,createdDate:new Date(e.createdDate),articleNo:e.articleNo,dueDate:e.dueDate,dueDateStatus:e.dueDateStatus,approvalStatus:e.approvalStatus,finishedStatus:e.finishedStatus,approvedBy:null===(t=this.users.filter(t=>t.id===e.approvalBy)[0])||void 0===t?void 0:t.username,createdBy:e.createdBy,artProcess:e.artProcess,season:e.season}}),this.percentageOfDoneData=e.percentageOfDone,this.percentageOfDone.element.innerHTML=this.percentageOfDoneData,this.doneText=`Done (${e.doneTotal})`,this.undoneText=`Undone (${e.undoneTotal})`,this.isDone=!0,this.editTextOfBtn(),this.spinner.hide()})}getUndone(){this.spinner.show(),this.bPFCEstablishService.getUndoneBPFC().subscribe(e=>{this.data=e.data.map(e=>{var t;return{id:e.id,modelNameID:e.modelNameID,modelNoID:e.modelNoID,articleNoID:e.articleNoID,artProcessID:e.artProcessID,modelName:e.modelName,modelNo:e.modelNo,createdDate:new Date(e.createdDate),articleNo:e.articleNo,dueDate:e.dueDate,dueDateStatus:e.dueDateStatus,approvalStatus:e.approvalStatus,finishedStatus:e.finishedStatus,approvedBy:null===(t=this.users.filter(t=>t.id===e.approvalBy)[0])||void 0===t?void 0:t.username,createdBy:e.createdBy,artProcess:e.artProcess,season:e.season}}),this.percentageOfDoneData=e.percentageOfDone,this.percentageOfDone.element.innerHTML=this.percentageOfDoneData,this.doneText=`Done (${e.doneTotal})`,this.undoneText=`Undone (${e.undoneTotal})`,this.isDone=!1,this.editTextOfBtn(),this.spinner.hide()})}showModal(e){this.modalReference=this.modalService.open(e,{size:"xl"})}NO(e){return(this.gridObj.pageSettings.currentPage-1)*this.gridObj.pageSettings.pageSize+Number(e)+1}setAttrBtn(e,t={background:"#6c757d",boxShadow:"0 0 0 3px rgba(130, 138, 145, 0.5)",border:"1px solid #6c757d",margin:"0",borderColor:"#6c757d",borderRadius:"4px",color:"#fff"}){e.element.style.background=t.background,e.element.style.boxShadow=t.boxShadow,e.element.style.border=t.border,e.element.style.margin=t.margin,e.element.style.borderColor=t.borderColor,e.element.style.borderRadius=t.borderRadius,e.element.style.color=t.color}resetAttrBtn(e,t={background:"#f8f9fa",boxShadow:"none",border:"none",margin:"0",borderColor:"#f8f9fa",borderRadius:"none",color:"#495057"}){e.element.style.background=t.background,e.element.style.boxShadow=t.boxShadow,e.element.style.border=t.border,e.element.style.margin=t.margin,e.element.style.borderColor=t.borderColor,e.element.style.borderRadius=t.borderRadius,e.element.style.color=t.color}}return e.\u0275fac=function(t){return new(t||e)(x.Mb(R.a),x.Mb(A.a),x.Mb(ai.a),x.Mb(k.a),x.Mb(r.b),x.Mb(w.c),x.Mb(n.d),x.Mb(l.c),x.Mb(j),x.Mb(F.a),x.Mb(m.b))},e.\u0275cmp=x.Gb({type:e,selectors:[["app-BPFCSchedule"]],viewQuery:function(e,t){if(1&e&&(x.Qc(oi,!0),x.Gc(ri,!0),x.Qc(ci,!0)),2&e){let e;x.xc(e=x.dc())&&(t.gridObj=e.first),x.xc(e=x.dc())&&(t.importModal=e.first),x.xc(e=x.dc())&&(t.tooltip=e)}},features:[x.yb([n.d])],decls:37,vars:10,consts:[["type","square-jelly-box","size","medium",3,"fullScreen"],[1,"loading"],[1,"card"],[1,"card-body","p-0"],[1,"row"],[1,"col-md-12"],["allowSorting","true","allowResizing","true","allowPaging","true","allowFiltering","true","allowResizing","true","gridLines","Both","showColumnMenu","true",3,"dataSource","pageSettings","filterSettings","sortSettings","editSettings","toolbar","allowExcelExport","searchSettings","rowDataBound","created","dataBound","toolbarClick","actionBegin"],["grid",""],["field","#","isPrimaryKey","true","textAlign","Center","headerText","#","width","40"],["template",""],["field","modelName","isPrimaryKey","true","textAlign","Left","headerText","Model Name"],["field","modelNo","isPrimaryKey","true","textAlign","Center","width","100","headerText","Model NO"],["field","articleNo","isPrimaryKey","true","textAlign","Center","width","150","headerText","Article NO"],["field","artProcess","isPrimaryKey","true","textAlign","Center","width","100","headerText","Process"],["field","dueDate","textAlign","Center","editType","datepickeredit","type","date","format","d MMM, yyyy","width","150","headerText","STF Date"],["editTemplate",""],["field","createdDate","isPrimaryKey","true","type","date","format","d MMM, yyyy HH:mm","headerText","Update Time","textAlign","Center"],["field","approvedBy","isPrimaryKey","true","textAlign","Center","width","150","headerText","Approval By Supervisor"],["field","season","textAlign","Center","width","100","headerText","Season"],["field","","isPrimaryKey","true","textAlign","Center","headerText","-- Option --","width","170",3,"visible"],[1,"card-footer"],["importModal",""],["newVersionModal",""],["cloneModal",""],["position","RightCenter","content","loading...",1,"fix-css",3,"beforeRender"],["tooltip",""],[4,"ngIf","ngIfElse"],["stf",""],["placeholder","Enter date",3,"value","change"],["ejs-button","","cssClass","e-info",3,"click"],[1,"far","fa-edit"],["style","color: transparent;",4,"ngIf"],["ejs-button","","cssClass","e-primary",3,"click",4,"ngIf"],["ejs-button","","cssClass","e-success",3,"click",4,"ngIf"],["ejs-button","","cssClass","e-danger",3,"click",4,"ngIf"],[2,"color","transparent"],["ejs-button","","cssClass","e-primary",3,"click"],[1,"fa","fa-plus"],["ejs-button","","cssClass","e-success",3,"click"],[1,"fa","fa-clone"],["ejs-button","","cssClass","e-danger",3,"click"],[1,"fa","fa-trash"],[1,"modal-header"],[1,"modal-title"],[1,"fas","fa-plus"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-md-6"],[1,"form-group"],["for","Name"],[3,"href"],["name","file","type","file",1,"form-control",3,"change"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],["type","text","name","","disabled","","required","required","title","",1,"form-control",3,"value"],[2,"color","red"],[1,"input-group","mb-3"],[1,"input-group-prepend"],["id","basic-addon3",1,"input-group-text"],["type","text","id","basic-url","placeholder","Enter Version Ex: 1","aria-describedby","basic-addon3",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-light",3,"click"],["type","submit",1,"btn","btn-primary",3,"click"],["placeholder","Select article NO   ",1,"w-100","float-left",3,"dataSource","fields","allowFiltering","ngModel","open","ngModelChange","filtering","select"],["modelNameDropdownlist",""]],template:function(e,t){1&e&&(x.Sb(0,"ngx-spinner",0),x.Sb(1,"p",1),x.Kc(2,"Loading data..."),x.Rb(),x.Rb(),x.Sb(3,"div",2),x.Sb(4,"div",3),x.Sb(5,"div",4),x.Sb(6,"div",5),x.Sb(7,"ejs-grid",6,7),x.cc("rowDataBound",function(e){return t.rowDB(e)})("created",function(e){return t.createdSearch(e)})("dataBound",function(e){return t.dataBound(e)})("toolbarClick",function(e){return t.toolbarClick(e)})("actionBegin",function(e){return t.actionBegin(e)}),x.Sb(9,"e-columns"),x.Sb(10,"e-column",8),x.Ic(11,di,1,1,"ng-template",null,9,x.Jc),x.Rb(),x.Sb(13,"e-column",10),x.Ic(14,hi,3,1,"ng-template",null,9,x.Jc),x.Rb(),x.Nb(16,"e-column",11),x.Nb(17,"e-column",12),x.Nb(18,"e-column",13),x.Sb(19,"e-column",14),x.Ic(20,ui,2,4,"ng-template",null,9,x.Jc),x.Ic(22,bi,3,2,"ng-template",null,15,x.Jc),x.Rb(),x.Nb(24,"e-column",16),x.Nb(25,"e-column",17),x.Nb(26,"e-column",18),x.Sb(27,"e-column",19),x.Ic(28,Ci,8,6,"ng-template",null,9,x.Jc),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Nb(30,"div",20),x.Rb(),x.Ic(31,vi,22,1,"ng-template",null,21,x.Jc),x.Ic(33,yi,40,5,"ng-template",null,22,x.Jc),x.Ic(35,Bi,37,7,"ng-template",null,23,x.Jc)),2&e&&(x.mc("fullScreen",!0),x.zb(7),x.mc("dataSource",t.data)("pageSettings",t.pageSettings)("filterSettings",t.filterSettings)("sortSettings",t.sortSettings)("editSettings",t.editSettings)("toolbar",t.toolbar)("allowExcelExport",!0)("searchSettings",t.searchOptions),x.zb(20),x.mc("visible",!0))},directives:[l.a,S.j,d.d,C.d,C.b,S.e,S.b,d.c,C.c,C.a,S.d,S.a,f.b,n.n,u.a,h.b,s.b,s.g,s.j,o.c],pipes:[n.d],styles:[".active-btn[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.45098039215686275)!important;color:#fff!important}.bgcolor[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#fa7c7c}"]}),e})();new m.e({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")});let Pi=(()=>{class e{constructor(e){this.http=e,this.baseUrl=P.a.apiUrlEC,this.messageSource=new E.a(0),this.currentMessage=this.messageSource.asObservable()}changeMessage(e){this.messageSource.next(e)}getAllComments(){return this.http.get(this.baseUrl+"Comment/GetAll",{})}getAllCommentByBPFCEstablishID(e){return this.http.get(`${this.baseUrl}Comment/GetAllCommentByBPFCEstablishID/${e}`,{})}create(e){return this.http.post(this.baseUrl+"Comment/Create",e)}update(e){return this.http.put(this.baseUrl+"Comment/Update",e)}delete(e){return this.http.delete(this.baseUrl+"Comment/Delete/"+e)}}return e.\u0275fac=function(t){return new(t||e)(x.Zb(m.b))},e.\u0275prov=x.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var xi=i("7FIR");const Ri=["gridModel"];function Ai(e,t){if(1&e&&x.Kc(0),2&e){const e=t.$implicit,i=x.gc();x.Mc(" ",i.no(e)," ")}}function Mi(e,t){1&e&&(x.Kc(0),x.hc(1,"translate")),2&e&&x.Mc(" ",x.ic(1,1,"CREATED_DATETIME_LABEL")," ")}function ki(e,t){1&e&&(x.Kc(0),x.hc(1,"translate")),2&e&&x.Mc(" ",x.ic(1,1,"PIC_LABEL")," ")}function Fi(e,t){1&e&&(x.Kc(0),x.hc(1,"translate")),2&e&&x.Mc(" ",x.ic(1,1,"FINISH_LABEL")," ")}function Ti(e,t){1&e&&(x.Sb(0,"span",21),x.Kc(1,"YES"),x.Rb())}function $i(e,t){1&e&&(x.Sb(0,"span",22),x.Kc(1,"No"),x.Rb())}function Gi(e,t){if(1&e&&(x.Ic(0,Ti,2,0,"span",19),x.Ic(1,$i,2,0,"span",20)),2&e){const e=t.$implicit;x.mc("ngIf",1==e.finishedStatus),x.zb(1),x.mc("ngIf",0==e.finishedStatus)}}function Ei(e,t){1&e&&(x.Kc(0),x.hc(1,"translate")),2&e&&x.Mc(" ",x.ic(1,1,"APPROVAL_STATUS_LABEL")," ")}function Oi(e,t){1&e&&(x.Sb(0,"span",22),x.Kc(1,"YET"),x.Rb())}function Ki(e,t){1&e&&(x.Sb(0,"span",24),x.Kc(1,"NG"),x.Rb())}function Ui(e,t){1&e&&(x.Sb(0,"span",21),x.Kc(1,"OK"),x.Rb())}function Li(e,t){if(1&e&&(x.Ic(0,Oi,2,0,"span",20),x.Ic(1,Ki,2,0,"span",23),x.Ic(2,Ui,2,0,"span",19)),2&e){const e=t.$implicit;x.mc("ngIf",0==e.approvalStatus&&"#N/A"===e.approvalBy),x.zb(1),x.mc("ngIf",0==e.finishedStatus&&0==e.approvalStatus&&"#N/A"!==e.approvalBy),x.zb(1),x.mc("ngIf",1==e.approvalStatus&&"#N/A"!==e.approvalBy)}}function zi(e,t){1&e&&(x.Kc(0),x.hc(1,"translate")),2&e&&x.Mc(" ",x.ic(1,1,"APPROVAL_BY_LABEL")," ")}function Ji(e,t){1&e&&(x.Kc(0),x.hc(1,"translate")),2&e&&x.Mc(" ",x.ic(1,1,"DETAIL_LABEL")," ")}function ji(e,t){if(1&e){const e=x.Tb();x.Sb(0,"button",25),x.cc("click",function(){x.Bc(e);const i=t.$implicit,n=x.gc(),s=x.yc(38);return n.openModalDetail(s,i.id)}),x.Nb(1,"i",26),x.Rb()}}function Hi(e,t){if(1&e&&(x.Sb(0,"div",63),x.Kc(1),x.Rb()),2&e){const e=t.$implicit;x.nc("title",e.name),x.zb(1),x.Mc(" ",e.name," ")}}function _i(e,t){1&e&&(x.Sb(0,"div"),x.Nb(1,"i",64),x.Rb())}function qi(e,t){if(1&e&&(x.Sb(0,"span"),x.Kc(1),x.Rb()),2&e){const e=t.$implicit;x.zb(1),x.Mc("\xb1 ",e.allow,"")}}function Qi(e,t){if(1&e){const e=x.Tb();x.Sb(0,"button",65),x.cc("click",function(){return x.Bc(e),x.gc(2).release()}),x.Kc(1,"Release"),x.Rb()}}function Vi(e,t){if(1&e){const e=x.Tb();x.Sb(0,"button",66),x.cc("click",function(){return x.Bc(e),x.gc(2).reject()}),x.Kc(1,"Reject"),x.Rb()}}function Yi(e,t){if(1&e&&(x.Sb(0,"li",67),x.Sb(1,"a",68),x.Nb(2,"img",69),x.Rb(),x.Sb(3,"div",70),x.Sb(4,"span",71),x.Sb(5,"small",72),x.Kc(6),x.Rb(),x.Rb(),x.Sb(7,"strong",73),x.Kc(8),x.Rb(),x.Sb(9,"p"),x.Kc(10),x.Rb(),x.Rb(),x.Rb()),2&e){const e=t.$implicit,i=x.gc(2);x.zb(6),x.Mc(" ",i.datetime(e.createdDate),""),x.zb(2),x.Mc(" ",i.username(e.createdBy),""),x.zb(2),x.Mc(" ",e.content," ")}}function Xi(e,t){if(1&e){const e=x.Tb();x.Sb(0,"div",27),x.Sb(1,"h4",28),x.Nb(2,"i",29),x.Kc(3," BPFC Detail "),x.Rb(),x.Sb(4,"button",30),x.cc("click",function(){return t.$implicit.dismiss("Cross click")}),x.Sb(5,"span",31),x.Kc(6,"\xd7"),x.Rb(),x.Rb(),x.Rb(),x.Sb(7,"div",32),x.Sb(8,"div",0),x.Sb(9,"div",33),x.Sb(10,"ejs-grid",34,35),x.cc("rowSelected",function(t){return x.Bc(e),x.gc().rowSelected(t)}),x.Sb(12,"e-columns"),x.Sb(13,"e-column",36),x.Ic(14,Hi,2,2,"ng-template",null,6,x.Jc),x.Rb(),x.Nb(16,"e-column",37),x.Nb(17,"e-column",38),x.Nb(18,"e-column",39),x.Nb(19,"e-column",40),x.Nb(20,"e-column",41),x.Nb(21,"e-column",42),x.Rb(),x.Rb(),x.Rb(),x.Sb(22,"div",33),x.Sb(23,"ejs-grid",43,44),x.Sb(25,"e-columns"),x.Nb(26,"e-column",45),x.Nb(27,"e-column",46),x.Nb(28,"e-column",47),x.Sb(29,"e-column",48),x.Ic(30,_i,2,0,"ng-template",null,12,x.Jc),x.Ic(32,qi,2,1,"ng-template",null,6,x.Jc),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Sb(34,"div",49),x.Ic(35,Qi,2,0,"button",50),x.Ic(36,Vi,2,0,"button",51),x.Sb(37,"button",52),x.cc("click",function(){return t.$implicit.close("Close click")}),x.Kc(38,"Close"),x.Rb(),x.Rb(),x.Sb(39,"div",32),x.Sb(40,"div",0),x.Sb(41,"div",1),x.Sb(42,"div",53),x.Sb(43,"div",54),x.Sb(44,"div",55),x.Sb(45,"div",56),x.Sb(46,"div",57),x.Sb(47,"textarea",58),x.cc("ngModelChange",function(t){return x.Bc(e),x.gc().content=t}),x.Rb(),x.Nb(48,"br"),x.Sb(49,"button",59),x.cc("click",function(){return x.Bc(e),x.gc().createComment()}),x.Kc(50,"Post"),x.Rb(),x.Nb(51,"div",60),x.Nb(52,"hr"),x.Sb(53,"ul",61),x.Ic(54,Yi,11,3,"li",62),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb()}if(2&e){const e=x.gc();x.zb(10),x.mc("dataSource",e.glues)("selectedRowIndex",0),x.zb(13),x.mc("dataSource",e.ingredients)("allowSorting",!0),x.zb(12),x.mc("ngIf",3!==e.level&&4!==e.level),x.zb(1),x.mc("ngIf",3!==e.level&&4!==e.level),x.zb(11),x.mc("ngModel",e.content),x.zb(7),x.mc("ngForOf",e.comments)}}const Wi=[{path:"",children:[{path:"bpfc-schedule",data:{title:"bpfc-schedule",breadcrumb:"BPFC Schedule"},children:[{path:"",component:wi},{path:"detail",data:{title:"Detail",breadcrumb:"Detail"},children:[{path:"",component:si},{path:":id",component:si}]}]},{path:"bpfc-status",component:(()=>{class e{constructor(e,t,i,n,s,l,a,o,r,c,d){this.modalNameService=e,this.bPFCEstablishService=t,this.modalService=i,this.route=n,this.alertify=s,this.ingredientService=l,this.glueService=a,this.commentService=o,this.calendarsService=r,this.userService=c,this.authService=d,this.users=[],this.searchSettings={hierarchyMode:"Parent"},this.modalname={id:0,name:"",modelNo:"",createdBy:JSON.parse(localStorage.getItem("user")).User.ID}}ngOnInit(){this.pageSettings={pageSizes:!0,currentPage:1,pageSize:10,pageCount:20},this.editparams={params:{popupHeight:"300px"}},this.editSettings={showDeleteConfirmDialog:!0,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"},this.toolbar=["Default",{text:"Rejected",tooltipText:"Rejected",prefixIcon:"fa fa-times",id:"Rejected"},{text:"Approved",tooltipText:"Approved",prefixIcon:"fa fa-check",id:"Approved"},"All","ExcelExport","Search"],this.getAllUsers()}ngAfterViewInit(){const e=JSON.parse(localStorage.getItem("level"));this.level=e.id,this.getBuilding()}getBuilding(){JSON.parse(localStorage.getItem("user"))}dataBound(){this.gridModel.autoFitColumns()}no(e){return(this.pageSettings.currentPage-1)*this.pageSettings.pageSize+Number(e.index)+1}actionBegin(e){"save"===e.requestType&&(this.modalname.id=e.data.id||0,this.modalname.name=e.data.name,this.modalname.modelNo=e.data.modelNo,e.data.id>0?this.update(this.modalname):this.add(this.modalname)),"delete"===e.requestType&&this.delete(e.data[0].id)}actionComplete(e){"add"===e.requestType&&(e.form.elements.namedItem("name").focus(),e.form.elements.namedItem("id").disabled=!0,e.form.elements.namedItem("tool").disabled=!0)}onDoubleClick(e){this.setFocus=e.column}openaddModalName(e){this.modalReference=this.modalService.open(e)}getAllBPFCStatus(){this.bPFCEstablishService.getAllBPFCStatus().subscribe(e=>{this.data=e.map(e=>({id:e.id,modelNameID:e.modelNameID,modelNoID:e.modelNoID,articleNoID:e.articleNoID,artProcessID:e.artProcessID,modelName:e.modelName,modelNo:e.modelNo,articleNo:e.articleNo,artProcess:e.artProcess,approvalStatus:e.approvalStatus,finishedStatus:e.finishedStatus,approvalBy:this.createdBy(e.approvalBy),createdBy:this.createdBy(e.createdBy),season:e.season,createdDate:e.createdDate,modifiedDate:e.modifiedDate,updateTime:e.updateTime,bpfcName:`${e.modelName} - ${e.modelNo} - ${e.articleNo} - ${e.artProcess}`}))})}filterRejected(){this.bPFCEstablishService.rejectedFilter().subscribe(e=>{this.data=e.map(e=>({id:e.id,modelNameID:e.modelNameID,modelNoID:e.modelNoID,articleNoID:e.articleNoID,artProcessID:e.artProcessID,modelName:e.modelName,modelNo:e.modelNo,articleNo:e.articleNo,artProcess:e.artProcess,approvalStatus:e.approvalStatus,finishedStatus:e.finishedStatus,approvalBy:this.createdBy(e.approvalBy),createdBy:this.createdBy(e.createdBy),season:e.season,createdDate:e.createdDate,modifiedDate:e.modifiedDate,updateTime:e.updateTime,bpfcName:`${e.modelName} - ${e.modelNo} - ${e.articleNo} - ${e.artProcess}`}))})}filterByApprovedStatus(){this.bPFCEstablishService.filterByApprovedStatus().subscribe(e=>{this.data=e.map(e=>({id:e.id,modelNameID:e.modelNameID,modelNoID:e.modelNoID,articleNoID:e.articleNoID,artProcessID:e.artProcessID,modelName:e.modelName,modelNo:e.modelNo,articleNo:e.articleNo,artProcess:e.artProcess,approvalStatus:e.approvalStatus,finishedStatus:e.finishedStatus,approvalBy:this.createdBy(e.approvalBy),createdBy:this.createdBy(e.createdBy),season:e.season,createdDate:e.createdDate,modifiedDate:e.modifiedDate,updateTime:e.updateTime,bpfcName:`${e.modelName} - ${e.modelNo} - ${e.articleNo} - ${e.artProcess}`}))})}filterByFinishedStatus(){this.bPFCEstablishService.filterByFinishedStatus().subscribe(e=>{this.data=e.map(e=>({id:e.id,modelNameID:e.modelNameID,modelNoID:e.modelNoID,articleNoID:e.articleNoID,artProcessID:e.artProcessID,modelName:e.modelName,modelNo:e.modelNo,articleNo:e.articleNo,artProcess:e.artProcess,approvalStatus:e.approvalStatus,finishedStatus:e.finishedStatus,approvalBy:this.createdBy(e.approvalBy),createdBy:this.createdBy(e.createdBy),season:e.season,createdDate:e.createdDate,modifiedDate:e.modifiedDate,updateTime:e.updateTime,bpfcName:`${e.modelName} - ${e.modelNo} - ${e.articleNo} - ${e.artProcess}`}))})}defaultFilter(){this.bPFCEstablishService.defaultFilter().subscribe(e=>{this.data=e.map(e=>({id:e.id,modelNameID:e.modelNameID,modelNoID:e.modelNoID,articleNoID:e.articleNoID,artProcessID:e.artProcessID,modelName:e.modelName,modelNo:e.modelNo,articleNo:e.articleNo,artProcess:e.artProcess,approvalStatus:e.approvalStatus,finishedStatus:e.finishedStatus,approvalBy:this.createdBy(e.approvalBy),createdBy:this.createdBy(e.createdBy),season:e.season,createdDate:e.createdDate,modifiedDate:e.modifiedDate,updateTime:e.updateTime,bpfcName:`${e.modelName} - ${e.modelNo} - ${e.articleNo} - ${e.artProcess}`}))})}filterByNotApprovedStatus(){this.bPFCEstablishService.filterByNotApprovedStatus().subscribe(e=>{this.data=e.map(e=>({id:e.id,modelNameID:e.modelNameID,modelNoID:e.modelNoID,articleNoID:e.articleNoID,artProcessID:e.artProcessID,modelName:e.modelName,modelNo:e.modelNo,articleNo:e.articleNo,artProcess:e.artProcess,approvalStatus:e.approvalStatus,finishedStatus:e.finishedStatus,approvalBy:this.createdBy(e.approvalBy),createdBy:this.createdBy(e.createdBy),season:e.season,createdDate:e.createdDate,modifiedDate:e.modifiedDate,updateTime:e.updateTime,bpfcName:`${e.modelName} - ${e.modelNo} - ${e.articleNo} - ${e.artProcess}`}))})}update(e){this.modalNameService.update(e).subscribe(()=>{this.alertify.success("Update Modal Name Successfully")})}delete(e){this.alertify.confirm("Delete Modal Name",'Are you sure you want to delete this ModalName ID "'+e+'" ?',()=>{this.modalNameService.delete(e).subscribe(()=>{this.getAllBPFCStatus(),this.alertify.success("Modal Name has been deleted")},e=>{this.alertify.error("Failed to delete the Modal Name")})})}add(e){this.modalNameService.create(e).subscribe(()=>{this.alertify.success("Add Modal Name Successfully"),this.getAllBPFCStatus()})}approval(e){const t=JSON.parse(localStorage.getItem("user")).User.ID;this.bPFCEstablishService.approval(e,t).subscribe(()=>{this.alertify.success("The model name - model no has been approved!"),this.getAllBPFCStatus()})}done(e){const t=JSON.parse(localStorage.getItem("user")).User.ID;this.bPFCEstablishService.done(e,t).subscribe(()=>{this.alertify.success("The model name - model no has been finished!"),this.getAllBPFCStatus()})}release(){const e=JSON.parse(localStorage.getItem("user")).User.ID;this.bPFCEstablishService.release(this.BPFCEstablishID,e).subscribe(()=>{this.alertify.success("The model name - model no has been released!"),this.filterByApprovedStatus(),this.modalReferenceDetail.close()})}reject(){const e=JSON.parse(localStorage.getItem("user")).User.ID;this.bPFCEstablishService.reject(this.BPFCEstablishID,e).subscribe(e=>{if(!0===e.status){this.alertify.success(e.message),this.filterByNotApprovedStatus(),this.modalReferenceDetail.close();const t=this.users.filter(t=>t.ID===e.userId)[0].Email||"";this.bPFCEstablishService.sendMailForPIC(t).subscribe(()=>{})}else this.alertify.error(e.message)})}openModalDetail(e,t){this.modalReferenceDetail=this.modalService.open(e,{size:"xxl"}),setTimeout(()=>{this.getAllGluesByBPFCID(t)},300),this.BPFCEstablishID=t,this.getComments()}sortBySup(e){this.ingredientService.sortBySup(e,0).subscribe(e=>{this.ingredients=e.list1})}getAllGluesByBPFCID(e){this.glueService.getAllGluesByBPFCID(e).subscribe(e=>{this.glues=e.map(e=>({chemical:e.chemical,code:e.code,consumption:e.consumption,createdBy:this.createdBy(e.createdBy),createdDate:e.createdDate,expiredTime:e.expiredTime,glueID:e.glueID,glueName:e.glueName,id:e.id,ingredients:e.ingredients,materialName:e.materialName,materialNameID:e.materialNameID,modelNameID:e.modelNameID,modelNo:e.modelNo,modelNoID:e.modelNoID,name:e.name,partNameID:e.partNameID,pathName:e.pathName,bpfcName:`${e.modelName} - ${e.modelNo} - ${e.articleNo} - ${e.artProcess}`})),0===this.glues.length?this.glueid=0:(this.glueid=this.glues[0].id,this.sortBySup(this.glueid))})}rowSelected(e){this.sortBySup(e.data.id)}toolbarClick(e){switch(e.item.text){case"Approved":this.filterByApprovedStatus();break;case"Rejected":this.filterRejected();break;case"All":this.getAllBPFCStatus();break;case"Excel Export":this.gridModel.excelExport();break;case"Default":this.defaultFilter()}}getAllUsers(){this.userService.getAllUserInfo().subscribe(e=>{this.users=e,this.defaultFilter()})}createComment(){this.comment={id:0,content:this.content,createdBy:JSON.parse(localStorage.getItem("user")).User.ID,createdByName:"",BPFCEstablishID:this.BPFCEstablishID,createdDate:new Date},this.commentService.create(this.comment).subscribe(()=>{this.alertify.success("The comment has been created!"),this.content="",this.getComments()})}updateComment(){this.commentService.update(this.comment).subscribe(()=>{this.alertify.success("The comment has been updated!"),this.getComments()})}deleteComment(){this.commentService.delete(this.comment.id).subscribe(()=>{this.alertify.success("The comment has been deleted!"),this.getComments()})}getComments(){this.commentService.getAllCommentByBPFCEstablishID(this.BPFCEstablishID).subscribe(e=>{this.comments=e})}datetime(e){return this.calendarsService.JSONDateWithTime(e)}username(e){return this.users.filter(t=>t.id===e)[0].username}createdBy(e){if(0===e)return"#N/A";const t=this.users.filter(t=>t.id===e)[0];return void 0!==t?t.username:"#N/A"}}return e.\u0275fac=function(t){return new(t||e)(x.Mb(R.a),x.Mb(k.a),x.Mb(r.b),x.Mb(w.a),x.Mb(A.a),x.Mb(V.a),x.Mb(L.a),x.Mb(Pi),x.Mb(xi.a),x.Mb(ai.a),x.Mb(z.a))},e.\u0275cmp=x.Gb({type:e,selectors:[["app-bpfc-status"]],viewQuery:function(e,t){if(1&e&&x.Qc(Ri,!0),2&e){let e;x.xc(e=x.dc())&&(t.gridModel=e.first)}},decls:39,vars:5,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],["allowPaging","true","showColumnMenu","true","allowSorting","true","allowResizing","true","gridLines","Both",3,"searchSettings","toolbar","dataSource","allowExcelExport","pageSettings","dataBound","toolbarClick","actionBegin","recordDoubleClick","actionComplete"],["gridModel",""],["field","","headerText","#","isPrimaryKey","true","width","40","textAlign","Center","isPrimaryKey","true"],["template",""],["field","modelName","isPrimaryKey","true","textAlign","Center","headerText","Model Name","width","130"],["field","modelNo","isPrimaryKey","true","textAlign","Center","headerText","Model No","width","104"],["field","articleNo","isPrimaryKey","true","textAlign","Center","headerText","Article #","width","97"],["field","artProcess","isPrimaryKey","true","textAlign","Center","headerText","Process","width","97"],["field","createdDate","headerText","Created Date Time","type","date","format","dd MMM, yyyy HH:mm","width","155","textAlign","Center"],["headerTemplate",""],["field","createdBy","headerText","PIC","width","90","textAlign","Center"],["field","finishedStatus","isPrimaryKey","true","headerText","Finished","width","130","textAlign","Center"],["field","approvalStatus","isPrimaryKey","true","headerText","Approval Status","width","130","textAlign","Center"],["field","approvalBy","headerText","Approval By","width","100","textAlign","Center"],["field","tool","isPrimaryKey","true","headerText","Detail","width","70","textAlign","Center"],["detailModal",""],["class","badge badge-success",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],[1,"badge","badge-success"],[1,"badge","badge-danger"],["class","badge badge-warning",4,"ngIf"],[1,"badge","badge-warning"],["ejs-button","","cssClass","e-info",3,"click"],[1,"fa","fa-eye"],[1,"modal-header"],[1,"modal-title"],[1,"fas","fa-plus"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-md-6"],["showColumnMenu","true","allowSorting","true","allowResizing","true","gridLines","Both","height","250px",3,"dataSource","selectedRowIndex","rowSelected"],["gridglue",""],["field","name","isPrimaryKey","true","headerText","Chemical","textAlign","Center","width","150"],["field","consumption","headerText","Std. Con.(g)","textAlign","Center","width","150"],["field","finishedDate","headerText","Created Date Time","type","date","format","d MMM, yyyy HH:mm","width","150","textAlign","Center"],["field","finishedBy","headerText","PIC","width","100","textAlign","Center"],["field","modelNo","headerText","Kind","textAlign","Center","width","150"],["field","pathName","headerText","Part","textAlign","Center","width","150"],["field","materialName","headerText","Material","textAlign","Center","width","150"],["showColumnMenu","true","allowSorting","true","allowResizing","true","gridLines","Both","height","250px",3,"dataSource","allowSorting"],["grid",""],["field","position","headerText","Item","width","80","textAlign","Center"],["field","name","isPrimaryKey","true","headerText","Name","width","150","textAlign","Center"],["field","percentage","headerText","%","textAlign","Center","width","70"],["field","allow","headerText","Allow (%)","textAlign","Center","width","70"],[1,"modal-footer"],["type","submit","class","btn btn-success",3,"click",4,"ngIf"],["type","submit","class","btn btn-warning",3,"click",4,"ngIf"],["type","button",1,"btn","btn-danger",3,"click"],[1,"row","bootstrap","snippets"],[1,"col-md-12","col-md-offset-2","col-sm-12"],[1,"comment-wrapper"],[1,"panel","panel-info"],[1,"panel-body"],["placeholder","write a comment...","rows","3",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-info","pull-right",3,"click"],[1,"clearfix"],[1,"media-list",2,"padding","0"],["class","media",4,"ngFor","ngForOf"],["data-toggle","tooltip","data-placement","top",3,"title"],[1,"fas","fa-exclamation-circle"],["type","submit",1,"btn","btn-success",3,"click"],["type","submit",1,"btn","btn-warning",3,"click"],[1,"media"],["href","#",1,"pull-left"],["src","../../../../assets/img/logo-1.png","alt","",1,"img-circle"],[1,"media-body","ml-1"],[1,"text-muted","pull-right"],[1,"text-muted"],[1,"text-success"]],template:function(e,t){1&e&&(x.Sb(0,"div",0),x.Sb(1,"div",1),x.Sb(2,"div",2),x.Sb(3,"ejs-grid",3,4),x.cc("dataBound",function(){return t.dataBound()})("toolbarClick",function(e){return t.toolbarClick(e)})("actionBegin",function(e){return t.actionBegin(e)})("recordDoubleClick",function(e){return t.onDoubleClick(e)})("actionComplete",function(e){return t.actionComplete(e)}),x.Sb(5,"e-columns"),x.Sb(6,"e-column",5),x.Ic(7,Ai,1,1,"ng-template",null,6,x.Jc),x.Rb(),x.Nb(9,"e-column",7),x.Nb(10,"e-column",8),x.Nb(11,"e-column",9),x.Nb(12,"e-column",10),x.Sb(13,"e-column",11),x.Ic(14,Mi,2,3,"ng-template",null,12,x.Jc),x.Rb(),x.Sb(16,"e-column",13),x.Ic(17,ki,2,3,"ng-template",null,12,x.Jc),x.Rb(),x.Sb(19,"e-column",14),x.Ic(20,Fi,2,3,"ng-template",null,12,x.Jc),x.Ic(22,Gi,2,2,"ng-template",null,6,x.Jc),x.Rb(),x.Sb(24,"e-column",15),x.Ic(25,Ei,2,3,"ng-template",null,12,x.Jc),x.Ic(27,Li,3,3,"ng-template",null,6,x.Jc),x.Rb(),x.Sb(29,"e-column",16),x.Ic(30,zi,2,3,"ng-template",null,12,x.Jc),x.Rb(),x.Sb(32,"e-column",17),x.Ic(33,Ji,2,3,"ng-template",null,12,x.Jc),x.Ic(35,ji,2,0,"ng-template",null,6,x.Jc),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Ic(37,Xi,55,8,"ng-template",null,18,x.Jc),x.Rb()),2&e&&(x.zb(3),x.mc("searchSettings",t.searchSettings)("toolbar",t.toolbar)("dataSource",t.data)("allowExcelExport",!0)("pageSettings",t.pageSettings))},directives:[S.j,d.d,C.d,C.b,S.e,S.b,d.c,C.c,C.a,S.d,S.a,n.n,h.b,s.b,s.g,s.j,n.m],pipes:[b.c],styles:["body[_ngcontent-%COMP%]{margin-top:20px}.comment-wrapper[_ngcontent-%COMP%]   .panel-body[_ngcontent-%COMP%]{max-height:650px;overflow:auto}.comment-wrapper[_ngcontent-%COMP%]   .media-list[_ngcontent-%COMP%]   .media[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:64px;height:64px;border:2px solid #e5e7e8}.comment-wrapper[_ngcontent-%COMP%]   .media-list[_ngcontent-%COMP%]   .media[_ngcontent-%COMP%]{border-bottom:1px dashed #efefef;margin-bottom:25px}.e-grid[_ngcontent-%COMP%]   td.e-active[_ngcontent-%COMP%]{background:#6597ce!important;color:#000}"]}),e})(),data:{title:"BPFC Status",breadcrumb:"BPFC Status"}},{path:"bpfc-1",component:tt,data:{title:"BPFC ",breadcrumb:"BPFC "}}]}];let Zi,en=(()=>{class e{}return e.\u0275mod=x.Kb({type:e}),e.\u0275inj=x.Jb({factory:function(t){return new(t||e)},imports:[[w.f.forChild(Wi)],w.f]}),e})();function tn(e){return new p.a(e,"./assets/i18n/",".json")}const nn=localStorage.getItem("lang");Object(D.bb)(i("2PVe"),i("GFvd"),i("GFWS"),i("0zpJ"),i("LRxf")),Object(D.bb)(i("2PVe"),i("oP7I"),i("Joj5"),i("3JeS"),i("LRxf")),Zi="vi"===nn?nn:"en";let sn=(()=>{class e{constructor(){"vi"===nn?(Zi="vi",setTimeout(()=>{D.p.load(i("+7Wi")),Object(D.nb)("vi")})):(Zi="en",setTimeout(()=>{D.p.load(i("oyrQ")),Object(D.nb)("en")}))}}return e.\u0275mod=x.Kb({type:e}),e.\u0275inj=x.Jb({factory:function(t){return new(t||e)},providers:[n.d],imports:[[B.b,h.c,n.b,s.c,s.m,l.b,en,a.a,o.d,r.c,d.b,d.a,d.e,c.a,c.d,c.c,h.j,g.a,u.b,C.h,S.i,h.h,f.c,y.b,I.a,u.d,v.a,N.d,h.f,o.f,b.b.forChild({loader:{provide:b.a,useFactory:tn,deps:[m.b]},defaultLanguage:Zi})]]}),e})()},"h9f+":function(e,t,i){"use strict";i.d(t,"a",function(){return c});var n=i("2Vo4"),s=i("lJxs"),l=i("tk/3"),a=i("AytR"),o=i("2zK7"),r=i("fXoL");new l.e({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")});let c=(()=>{class e{constructor(e){this.http=e,this.baseUrl=a.a.apiUrlEC,this.authUrl=a.a.apiUrl,this.messageSource=new n.a(0),this.currentMessage=this.messageSource.asObservable()}changeMessage(e){this.messageSource.next(e)}getBuildingsAsTreeView(){return this.http.get(this.baseUrl+"Building/GetAllAsTreeView")}mappingUserWithBuilding(e){return this.http.post(this.baseUrl+"BuildingUser/MappingUserWithBuilding",e)}removeBuildingUser(e){return this.http.post(this.baseUrl+"BuildingUser/RemoveBuildingUser",e)}getAllUsers(e,t){const i=new o.a;return this.http.get(`${this.authUrl}Users/GetAllUsers/${a.a.systemCode}/${e}/${t}`,{observe:"response"}).pipe(Object(s.a)(e=>(i.result=e.body,null!=e.headers.get("Pagination")&&(i.pagination=JSON.parse(e.headers.get("Pagination"))),i)))}deleteUser(e){return this.http.delete(`${this.authUrl}Users/Delete/${e}`)}updateUser(e){return this.http.post(this.authUrl+"Users/Update",e)}createUser(e){return this.http.post(this.authUrl+"Users/Create",e)}getAllBuildingUsers(){return this.http.get(this.baseUrl+"BuildingUser/getAllBuildingUsers")}getBuildingUserByBuildingID(e){return this.http.get(`${this.baseUrl}BuildingUser/GetBuildingUserByBuildingID/${e}`)}}return e.\u0275fac=function(t){return new(t||e)(r.Zb(l.b))},e.\u0275prov=r.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},vrRs:function(e,t,i){"use strict";i.d(t,"a",function(){return c});var n=i("tk/3"),s=i("2Vo4"),l=i("lJxs"),a=i("AytR"),o=i("2zK7"),r=i("fXoL");new n.e({"Content-Type":"application/json"});let c=(()=>{class e{constructor(e){this.http=e,this.baseUrl=a.a.apiUrlEC,this.ingredientSource=new s.a(0),this.currentIngredient=this.ingredientSource.asObservable()}getIngredients(e,t){const i=new o.a;let s=new n.f;return null!=e&&null!=t&&(s=s.append("pageNumber",e),s=s.append("pageSize",t)),this.http.get(this.baseUrl+"ingredient/getingredients",{observe:"response",params:s}).pipe(Object(l.a)(e=>(i.result=e.body,null!=e.headers.get("Pagination")&&(i.pagination=JSON.parse(e.headers.get("Pagination"))),i)))}search(e,t,i){const s=new o.a;let a=new n.f;return null!=e&&null!=t&&(a=a.append("pageNumber",e),a=a.append("pageSize",t)),this.http.get(this.baseUrl+"ingredient/Search/"+i,{observe:"response",params:a}).pipe(Object(l.a)(e=>(s.result=e.body,null!=e.headers.get("Pagination")&&(s.pagination=JSON.parse(e.headers.get("Pagination"))),s)))}getAllIngredient(){return this.http.get(this.baseUrl+"ingredient/GetAll",{})}getAllGlueType(){return this.http.get(this.baseUrl+"ingredient/GetAllGlueType",{})}getByID(e){return this.http.get(this.baseUrl+"ingredient/GetbyID/"+e,{})}scanQRCode(e){return this.http.get(this.baseUrl+"ingredient/ScanQRCode/"+e,{})}scanQRCodeFromChemicalWareHouse(e,t,i){return this.http.get(`${this.baseUrl}ingredient/ScanQRCodeFromChemialWareHouse/${e}/${t}/${i}`,{})}scanQRCodeOutput(e,t,i){return this.http.get(`${this.baseUrl}ingredient/ScanQRCodeOutput/${e}/${t}/${i}`,{})}getAllSupplier(){return this.http.get(this.baseUrl+"Suppier/GetAll",{})}getAllIngredientInfo(){return this.http.get(this.baseUrl+"ingredient/GetAllIngredientInfo",{})}getAllIngredientInfoOutput(){return this.http.get(this.baseUrl+"ingredient/GetAllIngredientInfoOutPut",{})}getAllIngredientInfoByBuildingName(e){return this.http.get(this.baseUrl+"ingredient/GetAllIngredientInfoByBuildingName/"+e,{})}getAllIngredientInfoReport(){return this.http.get(this.baseUrl+"ingredient/GetAllIngredientInfoReport",{})}getAllIngredientInfoReportByBuildingName(e){return this.http.get(this.baseUrl+"ingredient/GetAllIngredientInfoReportByBuildingName/"+e,{})}searchInventory(e,t){return this.http.get(`${this.baseUrl}ingredient/Search/${e}/${t}`,{})}searchInventoryByBuildingName(e,t,i){return this.http.get(`${this.baseUrl}ingredient/SearchWithBuildingName/${e}/${t}/${i}`,{})}deleteIngredientInfo(e,t,i,n){return this.http.delete(this.baseUrl+`ingredient/DeleteIngredientInfo/${e}/${t}/${i}/${n}`)}UpdateConsumption(e,t,i){return this.http.post(this.baseUrl+`ingredient/UpdateConsumptionIngredientReport/${e}/${t}/${i}`,{})}UpdateConsumptionOfBuilding(e){return this.http.post(this.baseUrl+"ingredient/UpdateConsumptionOfBuildingIngredientReport",e)}createSub(e){return this.http.post(this.baseUrl+"suppier/create",e)}updateSub(e){return this.http.put(this.baseUrl+"suppier/update",e)}deleteSub(e){return this.http.delete(this.baseUrl+"suppier/delete/"+e)}sortBySup(e,t){return this.http.get(this.baseUrl+`GlueIngredient/GetIngredientsByGlueID/${e}/${t}`)}getIngredientsByGlueID(e){return this.http.get(this.baseUrl+"GlueIngredient/GetIngredientsByGlueID/"+e)}create(e){return this.http.post(this.baseUrl+"ingredient/create1",e)}update(e){return this.http.put(this.baseUrl+"ingredient/update",e)}delete(e){return this.http.delete(this.baseUrl+"ingredient/delete/"+e)}changeIngredient(e){this.ingredientSource.next(e)}import(e,t){const i=new FormData;return i.append("UploadedFile",e),i.append("CreatedBy",t),this.http.post(this.baseUrl+"ingredient/Import",i)}downloadFile(){return this.http.post(this.baseUrl+"ingredient/ExcelExport",{})}GetQrcodeByid(e){return this.http.get(this.baseUrl+"ingredient/GetbyID/"+e)}UpdatePrint(e){return this.http.put(this.baseUrl+"ingredient/UpdatePrint",e)}checkIncoming(e,t,i){return this.http.get(`${this.baseUrl}ingredient/CheckIncoming/${e}/${t}/${i}`,{})}getAllIngredientInfoByBuilding(e){return this.http.get(this.baseUrl+"ingredient/GetAllIngredientInfoByBuilding/"+e,{})}getAllIngredientInfoOutputByBuilding(e){return this.http.get(this.baseUrl+"ingredient/GetAllIngredientInfoOutputByBuilding/"+e,{})}}return e.\u0275fac=function(t){return new(t||e)(r.Zb(n.b))},e.\u0275prov=r.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);