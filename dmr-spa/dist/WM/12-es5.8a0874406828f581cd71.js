!function(){function e(e,i){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,i){if(!e)return;if("string"==typeof e)return t(e,i);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,i)}(e))||i&&e&&"number"==typeof e.length){n&&(e=n);var a=0,l=function(){};return{s:l,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return r=e.done,e},e:function(e){c=!0,o=e},f:function(){try{r||null==n.return||n.return()}finally{if(c)throw o}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{F7Yq:function(t,n,l){"use strict";l.r(n),l.d(n,"HttpLoaderFactory",function(){return bn}),l.d(n,"EstablishModule",function(){return vn});var o=l("ofXK"),r=l("3Pt+"),c=l("JqCM"),s=l("ZOsW"),d=l("jcQU"),u=l("1kSV"),g=l("uF4Q"),h=l("0jTc"),m=l("SRvG"),b=l("ed8r"),f=l("QYJQ"),p=l("tk/3"),v=l("sYmb"),I=l("mqiu"),S=l("Pk9d"),D=l("cZdB"),y=l("GJ+o"),N=l("4SUy"),C=l("hXFv"),B=l("QUNt"),w=l("z+xu"),k=l("ZwAT"),P=l("0hV+"),x=l("tyNb"),R=l("AytR"),A=l("fXoL"),M=l("qLS9"),F=l("HJFG"),T=l("h9f+"),G=l("t0UR"),E=l("KCoQ"),O=l("H552"),K=l("WAEy"),U=l("2Vo4"),L=l("lJxs"),z=l("2zK7");new p.e({Authorization:"Bearer "+localStorage.getItem("token")});var J,j,H,_,q=((J=function(){function e(t){i(this,e),this.http=t,this.baseUrl=R.a.apiUrlEC,this.gueIngredientSource=new U.a({}),this.currentGlueIngredient=this.gueIngredientSource.asObservable(),this.flagSource=new U.a("0"),this.currentFlag=this.flagSource.asObservable()}return a(e,[{key:"getIngredients",value:function(e,t,i){var n=new z.a;return this.http.get("".concat(this.baseUrl,"GlueIngredient/GetIngredientsByGlueID/").concat(e),{observe:"response"}).pipe(Object(L.a)(function(e){return n.result=e.body,null!=e.headers.get("Pagination")&&(n.pagination=JSON.parse(e.headers.get("Pagination"))),n}))}},{key:"getGlues",value:function(e,t){var i=new z.a;return this.http.get("".concat(this.baseUrl,"GlueIngredient/getAllGlues/").concat(e,"/").concat(t),{observe:"response"}).pipe(Object(L.a)(function(e){return i.result=e.body,null!=e.headers.get("Pagination")&&(i.pagination=JSON.parse(e.headers.get("Pagination"))),i}))}},{key:"mappGlueIngredient",value:function(e){return this.http.post(this.baseUrl+"GlueIngredient/MapGlueIngredient",e)}},{key:"mapGlueIngredientByGlueID",value:function(e){return this.http.post(this.baseUrl+"GlueIngredient/MapGlueIngredientByGlueID",e)}},{key:"mapGlueIngredient",value:function(e){return this.http.post(this.baseUrl+"GlueIngredient/MapGlueIngredients",e)}},{key:"delete",value:function(e,t){return this.http.get("".concat(this.baseUrl,"GlueIngredient/").concat(e,"/").concat(t,"/delete"))}},{key:"editPercentage",value:function(e){return this.http.put(this.baseUrl+"GlueIngredient/editPercentage",e)}},{key:"editAllow",value:function(e){return this.http.put(this.baseUrl+"GlueIngredient/editAllow",e)}},{key:"getDetail",value:function(e){return this.http.get(this.baseUrl+"GlueIngredient/".concat(e,"/detail"))}}]),e}()).\u0275fac=function(e){return new(e||J)(A.Zb(p.b))},J.\u0275prov=A.Ib({token:J,factory:J.\u0275fac,providedIn:"root"}),J),Q=l("xiVD"),V=l("j7qE"),Y=((H=function(){function e(t){i(this,e),this.http=t,this.baseUrl=R.a.apiUrlEC}return a(e,[{key:"getAll",value:function(){return this.http.get(this.baseUrl+"ModelNo/GetAll",{})}},{key:"getModelNoByModelNameID",value:function(e){return this.http.get(this.baseUrl+"ModelNo/getModelNoByModelNameID/"+e,{})}}]),e}()).\u0275fac=function(e){return new(e||H)(A.Zb(p.b))},H.\u0275prov=A.Ib({token:H,factory:H.\u0275fac,providedIn:"root"}),H),X=((j=function(){function e(t){i(this,e),this.http=t,this.baseUrl=R.a.apiUrlEC}return a(e,[{key:"getArticleNos",value:function(e,t){var i=new z.a,n=new p.f;return null!=e&&null!=t&&(n=(n=n.append("pageNumber",e)).append("pageSize",t)),this.http.get(this.baseUrl+"ArticleNo/getArticleNos",{observe:"response",params:n}).pipe(Object(L.a)(function(e){return i.result=e.body,null!=e.headers.get("Pagination")&&(i.pagination=JSON.parse(e.headers.get("Pagination"))),i}))}},{key:"getAlls",value:function(){return this.http.get(this.baseUrl+"ArticleNo/GetAll",{})}},{key:"getArticleNoByModelNameID",value:function(e){return this.http.get(this.baseUrl+"ArticleNo/getArticleNoByModelNameID/"+e,{})}},{key:"getArticleNoByModelNoID",value:function(e){return this.http.get(this.baseUrl+"ArticleNo/getArticleNoByModelNoID/"+e,{})}},{key:"create",value:function(e){return this.http.post(this.baseUrl+"ArticleNo/create",e)}},{key:"update",value:function(e){return this.http.put(this.baseUrl+"ArticleNo/update",e)}},{key:"delete",value:function(e){return this.http.delete(this.baseUrl+"ArticleNo/delete/"+e)}}]),e}()).\u0275fac=function(e){return new(e||j)(A.Zb(p.b))},j.\u0275prov=A.Ib({token:j,factory:j.\u0275fac,providedIn:"root"}),j),W=l("CC+3"),Z=l("MBJp"),ee=l("6U7I"),te=((_=function(){function e(t){i(this,e),this.http=t,this.baseUrl=R.a.apiUrlEC}return a(e,[{key:"getAll",value:function(){return this.http.get(this.baseUrl+"ArtProcess/GetAll",{})}},{key:"getArtProcessByArticleNoID",value:function(e){return this.http.get(this.baseUrl+"ArtProcess/getArtProcessByArticleNoID/"+e,{})}},{key:"GetAllProcess",value:function(){return this.http.get(this.baseUrl+"Process/GetAll",{})}}]),e}()).\u0275fac=function(e){return new(e||_)(A.Zb(p.b))},_.\u0275prov=A.Ib({token:_,factory:_.\u0275fac,providedIn:"root"}),_),ie=l("vrRs"),ne=["switch"],ae=["grid"],le=["gridglue"],oe=["grid2"],re=["modelNameDropdownlist"],ce=["modelNoDropdownlist"],se=["chemicalDropdownlist"],de=["positionDropdownlist"];function ue(e,t){if(1&e){var i=A.Tb();A.Sb(0,"div",11),A.Sb(1,"button",26),A.cc("click",function(){A.Bc(i);var e=A.gc(),t=A.yc(49);return e.openModal(t)}),A.Nb(2,"i",27),A.Rb(),A.Rb()}}function ge(e,t){if(1&e){var i=A.Tb();A.Qb(0),A.Sb(1,"ejs-radiobutton",28),A.cc("click",function(e){return A.Bc(i),A.gc().onClickProcess(e)}),A.Rb(),A.Pb()}if(2&e){var n=t.$implicit;A.zb(1),A.mc("label",n.name)("value",n.id)}}function he(e,t){if(1&e&&A.Nb(0,"ejs-barcodegenerator",30,31),2&e){var i=A.gc(2);A.mc("value",i.glue.code)}}function me(e,t){if(1&e&&(A.Sb(0,"div"),A.Ic(1,he,2,1,"ejs-barcodegenerator",29),A.Rb()),2&e){var i=A.gc();A.zb(1),A.mc("ngIf",i.showBarCode)}}function be(e,t){1&e&&(A.Kc(0),A.hc(1,"translate")),2&e&&A.Mc(" ",A.ic(1,1,"GLUE")," ")}function fe(e,t){if(1&e&&(A.Sb(0,"div",44),A.Kc(1),A.Rb()),2&e){var i=t.$implicit;A.nc("title",i.name),A.zb(1),A.Mc(" ",i.name," ")}}function pe(e,t){1&e&&(A.Kc(0),A.hc(1,"translate")),2&e&&A.Mc(" ",A.ic(1,1,"CONSUMPTION")," ")}function ve(e,t){if(1&e&&(A.Sb(0,"span"),A.Kc(1),A.Rb()),2&e){var i=t.$implicit,n=A.gc(2);A.Bb(n.changeConsumptionColor(i)),A.zb(1),A.Lc(""===i.consumption?"0":i.consumption)}}function Ie(e,t){1&e&&(A.Kc(0),A.hc(1,"translate")),2&e&&A.Mc(" ",A.ic(1,1,"EXPIRED_TIME")," ")}function Se(e,t){1&e&&(A.Kc(0),A.hc(1,"translate")),2&e&&A.Mc(" ",A.ic(1,1,"KIND")," ")}function De(e,t){if(1&e){var i=A.Tb();A.Sb(0,"ejs-dropdownlist",45,46),A.cc("ngModelChange",function(e){return t.$implicit.kindName=e})("select",function(e){return A.Bc(i),A.gc(2).onChangeKindEdit(e)}),A.Rb()}if(2&e){var n=t.$implicit,a=A.gc(2);A.mc("dataSource",a.kinds)("ngModel",n.kindName)("fields",a.fieldsKindEdit)("allowFiltering",!0)}}function ye(e,t){1&e&&(A.Kc(0),A.hc(1,"translate")),2&e&&A.Mc(" ",A.ic(1,1,"PART")," ")}function Ne(e,t){if(1&e){var i=A.Tb();A.Sb(0,"ejs-dropdownlist",47,48),A.cc("ngModelChange",function(e){return t.$implicit.partName=e})("select",function(e){return A.Bc(i),A.gc(2).onChangePartEdit(e)}),A.Rb()}if(2&e){var n=t.$implicit,a=A.gc(2);A.mc("dataSource",a.parts)("ngModel",n.partName)("fields",a.fieldsPartEdit)("allowFiltering",!0)}}function Ce(e,t){1&e&&(A.Kc(0),A.hc(1,"translate")),2&e&&A.Mc(" ",A.ic(1,1,"MATERIAL")," ")}function Be(e,t){if(1&e){var i=A.Tb();A.Sb(0,"ejs-dropdownlist",47,48),A.cc("ngModelChange",function(e){return t.$implicit.materialName=e})("select",function(e){return A.Bc(i),A.gc(2).onChangeMaterialEdit(e)}),A.Rb()}if(2&e){var n=t.$implicit,a=A.gc(2);A.mc("dataSource",a.materials)("ngModel",n.materialName)("fields",a.fieldsMaterialEdit)("allowFiltering",!0)}}function we(e,t){if(1&e){var i=A.Tb();A.Sb(0,"div",32),A.Sb(1,"ejs-grid",33,34),A.cc("rowDeselected",function(e){return A.Bc(i),A.gc().rowDeselected(e)})("actionBegin",function(e){return A.Bc(i),A.gc().actionBeginGlue(e)})("rowSelected",function(e){return A.Bc(i),A.gc().rowSelected(e)})("created",function(){return A.Bc(i),A.gc().onCreatedGridGlue()})("toolbarClick",function(e){return A.Bc(i),A.gc().toolbarClick(e)})("dataBound",function(){return A.Bc(i),A.gc().dataBoundGlue()}),A.Sb(3,"e-columns"),A.Sb(4,"e-column",35),A.Ic(5,be,2,3,"ng-template",null,36,A.Jc),A.Ic(7,fe,2,2,"ng-template",null,37,A.Jc),A.Rb(),A.Sb(9,"e-column",38),A.Ic(10,pe,2,3,"ng-template",null,36,A.Jc),A.Ic(12,ve,2,3,"ng-template",null,37,A.Jc),A.Rb(),A.Sb(14,"e-column",39),A.Ic(15,Ie,2,3,"ng-template",null,36,A.Jc),A.Rb(),A.Sb(17,"e-column",40),A.Ic(18,Se,2,3,"ng-template",null,36,A.Jc),A.Ic(20,De,2,4,"ng-template",null,41,A.Jc),A.Rb(),A.Sb(22,"e-column",42),A.Ic(23,ye,2,3,"ng-template",null,36,A.Jc),A.Ic(25,Ne,2,4,"ng-template",null,41,A.Jc),A.Rb(),A.Sb(27,"e-column",43),A.Ic(28,Ce,2,3,"ng-template",null,36,A.Jc),A.Ic(30,Be,2,4,"ng-template",null,41,A.Jc),A.Rb(),A.Rb(),A.Rb(),A.Rb()}if(2&e){var n=A.gc();A.zb(1),A.mc("dataSource",n.glues)("editSettings",n.editSettings)("toolbar",n.toolbar)("allowSorting",!0)("selectedRowIndex",n.rowIndex)}}function ke(e,t){if(1&e){var i=A.Tb();A.Sb(0,"ejs-switch",55,56),A.cc("click",function(){return A.Bc(i),A.gc(2).done()})("ngModelChange",function(e){return A.Bc(i),A.gc(2).createdStatus=e}),A.hc(2,"translate"),A.hc(3,"translate"),A.Rb()}if(2&e){var n=A.gc(2);A.nc("onLabel",A.ic(2,5,"DONE")),A.nc("offLabel",A.ic(3,7,"UNDONE")),A.mc("disabled",n.approvalStatus)("ngModel",n.createdStatus)("checked",n.createdStatus)}}function Pe(e,t){if(1&e){var i=A.Tb();A.Sb(0,"ejs-switch",58),A.cc("click",function(){return A.Bc(i),A.gc(3).approval()})("ngModelChange",function(e){return A.Bc(i),A.gc(3).approvalStatus=e}),A.hc(1,"translate"),A.Rb()}if(2&e){var n=A.gc(3);A.nc("offLabel",A.ic(1,3,"NOT_APPROVED")),A.mc("ngModel",n.approvalStatus)("checked",n.approvalStatus)}}function xe(e,t){if(1&e&&(A.Qb(0),A.Ic(1,Pe,2,5,"ejs-switch",57),A.Pb()),2&e){var i=A.gc(2);A.zb(1),A.mc("ngIf",i.modelNameID>0)}}function Re(e,t){if(1&e){var i=A.Tb();A.Sb(0,"button",59),A.cc("click",function(){return A.Bc(i),A.gc(2).finished()}),A.Nb(1,"i",60),A.Kc(2),A.hc(3,"translate"),A.Rb()}2&e&&(A.zb(2),A.Mc(" ",A.ic(3,1,"FINISHED")," "))}function Ae(e,t){if(1&e){var i=A.Tb();A.Sb(0,"button",61),A.cc("click",function(){A.Bc(i);var e=A.gc(2),t=A.yc(51);return e.openModalHistory(t)}),A.Nb(1,"i",62),A.Kc(2," History"),A.Rb()}}function Me(e,t){if(1&e&&(A.Sb(0,"div",49),A.Sb(1,"button",50),A.Nb(2,"i",51),A.Kc(3," Reset "),A.Rb(),A.Ic(4,ke,4,9,"ejs-switch",52),A.Ic(5,xe,2,1,"ng-container",15),A.Ic(6,Re,4,3,"button",53),A.Ic(7,Ae,3,0,"button",54),A.Rb()),2&e){var i=A.gc();A.zb(4),A.mc("ngIf",i.modelNameID>0),A.zb(1),A.mc("ngIf",3!==i.level&&4!==i.level),A.zb(1),A.mc("ngIf",i.modelNameID>0),A.zb(1),A.mc("ngIf",i.modelNameID>0)}}function Fe(e,t){if(1&e&&(A.Sb(0,"li",79),A.Sb(1,"a"),A.Kc(2),A.Sb(3,"span",80),A.Kc(4),A.Rb(),A.Rb(),A.Rb()),2&e){var i=t.$implicit;A.zb(2),A.Nc(" ",i.position,". ",i.ingredientName," "),A.zb(2),A.Mc("(",i.percentage,"%)")}}function Te(e,t){if(1&e&&(A.Sb(0,"ul"),A.Sb(1,"span",76),A.Kc(2),A.Rb(),A.Sb(3,"li",77),A.Kc(4),A.Sb(5,"ul"),A.Ic(6,Fe,5,3,"li",78),A.Rb(),A.Rb(),A.Rb()),2&e){var i=A.gc(2);A.zb(2),A.Lc(i.formulaTamp()),A.zb(2),A.Mc(" ",i.formula()," "),A.zb(2),A.mc("ngForOf",i.renderchemical())}}function Ge(e,t){if(1&e){var i=A.Tb();A.Sb(0,"button",81),A.cc("click",function(){A.Bc(i);var e=t.$implicit;return A.gc(2).sortBySup(e.id)}),A.Nb(1,"i",82),A.Kc(2),A.Rb()}if(2&e){var n=t.$implicit;A.zb(2),A.Mc(" ",n.name," ")}}function Ee(e,t){1&e&&(A.Kc(0),A.hc(1,"translate")),2&e&&A.Mc(" ",A.ic(1,1,"ITEM")," ")}function Oe(e,t){if(1&e){var i=A.Tb();A.Sb(0,"ejs-dropdownlist",83,84),A.cc("change",function(e){A.Bc(i);var n=t.$implicit;return A.gc(2).onChangePosition(e,n,n.index)}),A.Rb()}if(2&e){var n=t.$implicit,a=A.gc(2);A.mc("dataSource",a.dataPosition)("value",n.position)("fields",a.fieldsPosition)("allowFiltering",!0)}}function Ke(e,t){if(1&e){var i=A.Tb();A.Sb(0,"ejs-dropdownlist",83,84),A.cc("change",function(e){A.Bc(i);var n=t.$implicit;return A.gc(2).onChangePosition(e,n,n.index)}),A.Rb()}if(2&e){var n=t.$implicit,a=A.gc(2);A.mc("dataSource",a.dataPosition)("value",n.position)("fields",a.fieldsPosition)("allowFiltering",!0)}}function Ue(e,t){1&e&&(A.Kc(0),A.hc(1,"translate")),2&e&&A.Mc(" ",A.ic(1,1,"INGREDIENT_NAME")," ")}function Le(e,t){1&e&&A.Kc(0),2&e&&A.Mc(" ",t.$implicit.name," ")}function ze(e,t){1&e&&A.Kc(0),2&e&&A.Mc(" ",t.$implicit.name," ")}function Je(e,t){if(1&e&&(A.Sb(0,"div"),A.Kc(1),A.Rb()),2&e){var i=t.$implicit,n=A.gc(2);A.Bb(n.changePercentageColor(i)),A.zb(1),A.Lc(i.percentage)}}function je(e,t){1&e&&(A.Sb(0,"div"),A.Nb(1,"i",85),A.Rb())}function $e(e,t){if(1&e&&(A.Sb(0,"div"),A.Kc(1),A.Rb()),2&e){var i=t.$implicit,n=A.gc(2);A.Bb(n.changeAllowColor(i)),A.zb(1),A.Mc("\xb1 ",i.allow,"")}}function He(e,t){1&e&&(A.Kc(0),A.hc(1,"translate")),2&e&&A.Mc(" ",A.ic(1,1,"ITEM")," ")}function _e(e,t){if(1&e){var i=A.Tb();A.Sb(0,"ejs-dropdownlist",83,84),A.cc("change",function(e){A.Bc(i);var n=t.$implicit;return A.gc(2).onChangePosition(e,n,n.index)}),A.Rb()}if(2&e){var n=t.$implicit,a=A.gc(2);A.mc("dataSource",a.dataPosition)("value",n.position)("fields",a.fieldsPosition)("allowFiltering",!0)}}function qe(e,t){if(1&e){var i=A.Tb();A.Sb(0,"ejs-dropdownlist",83,84),A.cc("change",function(e){A.Bc(i);var n=t.$implicit;return A.gc(2).onChangePosition(e,n,n.index)}),A.Rb()}if(2&e){var n=t.$implicit,a=A.gc(2);A.mc("dataSource",a.dataPosition)("value",n.position)("fields",a.fieldsPosition)("allowFiltering",!0)}}function Qe(e,t){1&e&&(A.Kc(0),A.hc(1,"translate")),2&e&&A.Mc(" ",A.ic(1,1,"INGREDIENT_NAME")," ")}function Ve(e,t){1&e&&A.Kc(0),2&e&&A.Mc(" ",t.$implicit.name," ")}function Ye(e,t){1&e&&A.Kc(0),2&e&&A.Mc(" ",t.$implicit.name," ")}function Xe(e,t){1&e&&(A.Sb(0,"div"),A.Nb(1,"i",85),A.Rb())}function We(e,t){if(1&e&&(A.Sb(0,"div"),A.Kc(1),A.Rb()),2&e){var i=t.$implicit,n=A.gc(2);A.Bb(n.changeAllowColor(i)),A.zb(1),A.Mc("\xb1 ",i.allow,"")}}function Ze(e,t){if(1&e){var i=A.Tb();A.Sb(0,"div",63),A.Ic(1,Te,7,3,"ul",15),A.Sb(2,"div",0),A.Sb(3,"div",64),A.Sb(4,"button",65),A.cc("click",function(){return A.Bc(i),A.gc().sortBySup(0)}),A.Kc(5),A.hc(6,"translate"),A.Rb(),A.Ic(7,Ge,3,1,"button",66),A.Rb(),A.Rb(),A.Sb(8,"div",0),A.Sb(9,"div",67),A.Sb(10,"div",16),A.Sb(11,"div",32),A.Sb(12,"ejs-grid",68,69),A.cc("actionComplete",function(e){return A.Bc(i),A.gc().actionCompleteIngredient(e)})("recordDoubleClick",function(e){return A.Bc(i),A.gc().onDoubleClickIngredient(e)})("actionBegin",function(e){return A.Bc(i),A.gc().actionBeginIngredient(e)})("toolbarClick",function(e){return A.Bc(i),A.gc().toolbarClickIngredient(e)})("rowSelected",function(e){return A.Bc(i),A.gc().rowSelectedIngredient(e)}),A.Sb(14,"e-columns"),A.Sb(15,"e-column",70),A.Ic(16,Ee,2,3,"ng-template",null,36,A.Jc),A.Ic(18,Oe,2,4,"ng-template",null,37,A.Jc),A.Ic(20,Ke,2,4,"ng-template",null,41,A.Jc),A.Rb(),A.Sb(22,"e-column",71),A.Ic(23,Ue,2,3,"ng-template",null,36,A.Jc),A.Ic(25,Le,1,1,"ng-template",null,41,A.Jc),A.Ic(27,ze,1,1,"ng-template",null,37,A.Jc),A.Rb(),A.Sb(29,"e-column",72),A.Ic(30,Je,2,3,"ng-template",null,37,A.Jc),A.Rb(),A.Sb(32,"e-column",73),A.Ic(33,je,2,0,"ng-template",null,36,A.Jc),A.Ic(35,$e,2,3,"ng-template",null,37,A.Jc),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Sb(37,"div",67),A.Sb(38,"div",16),A.Sb(39,"div",32),A.Sb(40,"ejs-grid",74,75),A.cc("actionComplete",function(e){return A.Bc(i),A.gc().actionCompleteIngredient(e)})("recordDoubleClick",function(e){return A.Bc(i),A.gc().onDoubleClickIngredient(e)})("actionBegin",function(e){return A.Bc(i),A.gc().actionBeginIngredient(e)})("toolbarClick",function(e){return A.Bc(i),A.gc().toolbarClickIngredient(e)})("rowSelected",function(e){return A.Bc(i),A.gc().rowSelectedIngredient(e)}),A.Sb(42,"e-columns"),A.Sb(43,"e-column",70),A.Ic(44,He,2,3,"ng-template",null,36,A.Jc),A.Ic(46,_e,2,4,"ng-template",null,37,A.Jc),A.Ic(48,qe,2,4,"ng-template",null,41,A.Jc),A.Rb(),A.Sb(50,"e-column",71),A.Ic(51,Qe,2,3,"ng-template",null,36,A.Jc),A.Ic(53,Ve,1,1,"ng-template",null,41,A.Jc),A.Ic(55,Ye,1,1,"ng-template",null,37,A.Jc),A.Rb(),A.Nb(57,"e-column",72),A.Sb(58,"e-column",73),A.Ic(59,Xe,2,0,"ng-template",null,36,A.Jc),A.Ic(61,We,2,3,"ng-template",null,37,A.Jc),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Rb()}if(2&e){var n=A.gc();A.zb(1),A.mc("ngIf",n.renderchemical().length>0),A.zb(4),A.Mc(" ",A.ic(6,12,"DEFAULT")," "),A.zb(2),A.mc("ngForOf",n.supplier),A.zb(5),A.mc("dataSource",n.ingredients1)("allowSorting",!0)("allowSorting",!0)("editSettings",n.editSettings)("toolbar",n.toolbarOptions2),A.zb(28),A.mc("dataSource",n.ingredients2)("allowSorting",!0)("editSettings",n.editSettings)("toolbar",n.toolbarOptions2)}}function et(e,t){if(1&e){var i=A.Tb();A.Sb(0,"div",86),A.Sb(1,"h4",87),A.Nb(2,"i",88),A.Kc(3," Clone Article "),A.Rb(),A.Sb(4,"button",89),A.cc("click",function(){return t.$implicit.dismiss("Cross click")}),A.Sb(5,"span",90),A.Kc(6,"\xd7"),A.Rb(),A.Rb(),A.Rb(),A.Sb(7,"div",91),A.Sb(8,"div",0),A.Sb(9,"div",92),A.Sb(10,"div",93),A.Sb(11,"label",94),A.Kc(12,"Article Name"),A.Rb(),A.Sb(13,"span",95),A.Kc(14,"(*)"),A.Rb(),A.Sb(15,"input",96),A.cc("ngModelChange",function(e){return A.Bc(i),A.gc().articleName=e}),A.Rb(),A.Rb(),A.Rb(),A.Sb(16,"div",92),A.Sb(17,"div",93),A.Sb(18,"label",94),A.Kc(19,"Process"),A.Rb(),A.Sb(20,"ejs-dropdownlist",97,98),A.cc("change",function(e){return A.Bc(i),A.gc().onChangeProcessCloneModal(e)}),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Sb(22,"div",99),A.Sb(23,"button",100),A.cc("click",function(){return t.$implicit.close("Close click")}),A.Kc(24,"Close"),A.Rb(),A.Sb(25,"button",101),A.cc("click",function(){return A.Bc(i),A.gc().cloneArticleModelname()}),A.Kc(26,"Clone"),A.Rb(),A.Rb()}if(2&e){var n=A.gc();A.zb(15),A.mc("ngModel",n.articleName),A.zb(5),A.mc("value",n.valueProcess)("dataSource",n.processData)("allowFiltering",!0)("fields",n.processfields)}}function tt(e,t){if(1&e){var i=A.Tb();A.Qb(0),A.Sb(1,"ejs-radiobutton",105),A.cc("ngModelChange",function(e){return A.Bc(i),A.gc(2).artProcessIDClone=e}),A.Rb(),A.Pb()}if(2&e){var n=t.$implicit,a=A.gc(2);A.zb(1),A.mc("label",n.name)("value",n.id)("ngModel",a.artProcessIDClone)}}function it(e,t){if(1&e){var i=A.Tb();A.Sb(0,"div",86),A.Sb(1,"h4",87),A.Nb(2,"i",88),A.Kc(3," Clone BPFC "),A.Rb(),A.Sb(4,"button",89),A.cc("click",function(){return t.$implicit.dismiss("Cross click")}),A.Sb(5,"span",90),A.Kc(6,"\xd7"),A.Rb(),A.Rb(),A.Rb(),A.Sb(7,"div",91),A.Sb(8,"div",0),A.Sb(9,"div",92),A.Sb(10,"div",93),A.Sb(11,"label",94),A.Kc(12,"Model Name"),A.Rb(),A.Sb(13,"span",95),A.Kc(14,"(*)"),A.Rb(),A.Sb(15,"ejs-dropdownlist",102,7),A.cc("open",function(){return A.Bc(i),A.gc().openPopupDropdownlist()})("filtering",function(e){return A.Bc(i),A.gc().onFilteringModelNameClone(e)})("select",function(e){return A.Bc(i),A.gc().onChangeModelNameClone(e)}),A.Rb(),A.Kc(17),A.Rb(),A.Rb(),A.Sb(18,"div",92),A.Sb(19,"div",93),A.Sb(20,"label",94),A.Kc(21,"Model NO"),A.Rb(),A.Sb(22,"span",95),A.Kc(23,"(*)"),A.Rb(),A.Sb(24,"ejs-dropdownlist",103,10),A.cc("dataBound",function(e){return A.Bc(i),A.gc().OndataBound(e)})("filtering",function(e){return A.Bc(i),A.gc().onFilteringModelNOClone(e)})("select",function(e){return A.Bc(i),A.gc().onChangeModelNoClone(e)}),A.Rb(),A.Kc(26),A.Rb(),A.Rb(),A.Sb(27,"div",92),A.Sb(28,"div",93),A.Sb(29,"label",94),A.Kc(30,"Article NO"),A.Rb(),A.Sb(31,"span",95),A.Kc(32,"(*)"),A.Rb(),A.Sb(33,"ejs-dropdownlist",104,7),A.cc("filtering",function(e){return A.Bc(i),A.gc().onFilteringArticleNOClone(e)})("ngModelChange",function(e){return A.Bc(i),A.gc().articleNOIDClone=e})("select",function(e){return A.Bc(i),A.gc().onChangeArticleNoClone(e)}),A.Rb(),A.Kc(35),A.Rb(),A.Rb(),A.Sb(36,"div",92),A.Sb(37,"div",93),A.Sb(38,"label",94),A.Kc(39,"Process"),A.Rb(),A.Sb(40,"span",95),A.Kc(41,"(*)"),A.Rb(),A.Sb(42,"div",13),A.Ic(43,tt,2,3,"ng-container",14),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Sb(44,"div",99),A.Sb(45,"button",100),A.cc("click",function(){return t.$implicit.close("Close click")}),A.Kc(46,"Close"),A.Rb(),A.Sb(47,"button",101),A.cc("click",function(){return A.Bc(i),A.gc().onClickClone()}),A.Kc(48,"Clone"),A.Rb(),A.Rb()}if(2&e){var n=A.gc();A.zb(15),A.mc("dataSource",n.modelNameDataClone)("fields",n.fieldsBPFCs)("allowFiltering",!0)("value",n.value),A.zb(2),A.Mc(" ",n.modelNameIDClone," "),A.zb(7),A.mc("dataSource",n.modelNOsDataClone)("fields",n.fieldsBPFCs)("allowFiltering",!0)("value",n.valuemodelNo),A.zb(2),A.Mc(" ",n.modelNOIDClone," "),A.zb(7),A.mc("dataSource",n.articleNosDataClone)("fields",n.fieldsBPFCs)("allowFiltering",!0)("ngModel",n.articleNOIDClone),A.zb(2),A.Mc(" ",n.articleNOIDClone," "),A.zb(8),A.mc("ngForOf",n.artProcessDataClone2)}}function nt(e,t){1&e&&(A.Kc(0),A.hc(1,"date")),2&e&&A.Mc(" ",A.jc(1,1,t.$implicit.createdTime,"yyyy-MM-dd , hh:mm:ss a")," ")}function at(e,t){if(1&e&&(A.Qb(0),A.Nb(1,"input",118),A.Pb()),2&e){var i=A.gc().$implicit;A.zb(1),A.mc("value",i.remark)}}function lt(e,t){if(1&e&&A.Nb(0,"input",119),2&e){var i=A.gc().$implicit;A.mc("value",i.remark)}}function ot(e,t){if(1&e&&(A.Sb(0,"span",115),A.Ic(1,at,2,1,"ng-container",116),A.Ic(2,lt,1,1,"ng-template",null,117,A.Jc),A.Rb()),2&e){var i=t.$implicit,n=A.yc(3);A.mc("ngClass","Improve"==i.action?"e-input-group e-control-wrapper e-valid-input":"e-input-group e-control-wrapper e-valid-input e-disabled"),A.zb(1),A.mc("ngIf","Improve"==i.action)("ngIfElse",n)}}function rt(e,t){if(1&e){var i=A.Tb();A.Sb(0,"div",86),A.Sb(1,"h4",87),A.Nb(2,"i",88),A.Kc(3," BPFC History "),A.Rb(),A.Sb(4,"button",89),A.cc("click",function(){return t.$implicit.dismiss("Cross click")}),A.Sb(5,"span",90),A.Kc(6,"\xd7"),A.Rb(),A.Rb(),A.Rb(),A.Sb(7,"div",91),A.Sb(8,"ejs-grid",106,107),A.cc("actionBegin",function(e){return A.Bc(i),A.gc().actionBeginHistory(e)}),A.Sb(10,"e-columns"),A.Sb(11,"e-column",108),A.Ic(12,nt,2,4,"ng-template",null,37,A.Jc),A.Rb(),A.Nb(14,"e-column",109),A.Nb(15,"e-column",110),A.Nb(16,"e-column",111),A.Sb(17,"e-column",112),A.Ic(18,ot,4,3,"ng-template",null,41,A.Jc),A.Rb(),A.Nb(20,"e-column",113),A.Rb(),A.Rb(),A.Rb(),A.Sb(21,"div",99),A.Sb(22,"button",114),A.cc("click",function(){return t.$implicit.close("Close click")}),A.Kc(23,"Close"),A.Rb(),A.Rb()}if(2&e){var n=A.gc();A.zb(8),A.mc("dataSource",n.historyData)("allowSorting",!0)("allowSorting",!0)("editSettings",n.editSettingsHis)("toolbar",n.toolbarOptionsHistory),A.zb(9),A.mc("edit",n.editparamsHis)}}var ct,st=((ct=function(){function t(e,n,a,l,o,r,c,s,d,u,g,h,m,b,f,p){var v=this;i(this,t),this.glueIngredientService=e,this.modalNameService=n,this.glueService=a,this.alertify=l,this.modalService=o,this.route=r,this.authService=c,this.bPFCEstablishService=s,this.modelNoService=d,this.articleNoService=u,this.kindService=g,this.partService=h,this.materialService=m,this.buildingUserService=b,this.artProcessService=f,this.ingredientService=p,this.positions=["B","C","D","E"],this.approvalStatus=!1,this.createdStatus=!1,this.role=JSON.parse(localStorage.getItem("user")).User.Role,this.isShow=!1,this.selectedRow=[],this.LANG=localStorage.getItem("lang")||"vi",this.glue={},this.ingredient={},this.editPercentage={glueID:0,ingredientID:0,percentage:0},this.editAllow={glueID:0,ingredientID:0,allow:0},this.page=1,this.supplier=[],this.toolbarOptions=["Search","Delete"],this.toolbarOptions2=["Search","Add","Delete","Cancel"],this.toolbarOptionsHistory=["Search"],this.selectionOptions={type:"Multiple",mode:"Both"},this.editSettingsHis={allowEditing:!0,mode:"Normal",allowEditOnDblClick:!0},this.detailIngredient=[],this.totalPercentage=0,this.fieldsBPFCs={text:"name",value:"id"},this.fieldsBPFCss={text:"name",value:"id"},this.fieldsGlueChemical={text:"name",value:"name"},this.textGlue="Select Model Name",this.textModelName="Select Model Name - Model #",this.textGlueMaterial="Select ",this.fieldsGlue2={text:"name",value:"id"},this.articleNofields={text:"name",value:"id"},this.processfields={text:"name",value:"id"},this.processData=[{id:1,name:"ASY"},{id:2,name:"STF"}],this.valueProcess=1,this.textGlue2="Select Model No",this.existGlue=!1,this.editparamsHis={params:{format:"n"}},this.dataPosition=[{id:"0",name:""},{id:"1",name:"A"},{id:"2",name:"B"},{id:"3",name:"C"},{id:"4",name:"D"},{id:"5",name:"E"}],this.fieldsKindEdit={text:"name",value:"name"},this.fieldsPartEdit={text:"name",value:"name"},this.fieldsMaterialEdit={text:"name",value:"name"},this.fieldsGlueEdit={text:"name",value:"name"},this.fieldsChemical={text:"name",value:"name"},this.fieldsPosition={text:"name",value:"name"},this.rowIndex="",this.glueIngredient2={ingredientID:0,percentage:0,glueID:0,position:""},this.history={Action:"Created",BPFCEstablishID:0,GlueID:0,Before:"",BeforeAllow:"",After:"",AfterAllow:"",UserID:0,Remark:""},this.valuess="Badminton",this.modelNameSelect=!1,this.modelNoSelect=!1,this.modelArtSelect=!1,this.modelProcessSelect=!1,this.userData=[],this.onFiltering=function(e){var t=new O.h;t=""!==e.text?t.where("name","contains",e.text,!0):t,e.updateData(v.modelNameData,t)},this.onFilteringModelName=function(e){var t=new O.h;t=""!==e.text?t.where("name","contains",e.text,!0):t,e.updateData(v.modelNameData,t)},this.onFilteringModelNO=function(e){var t=new O.h;t=""!==e.text?t.where("name","contains",e.text,!0):t,e.updateData(v.modelNoData,t)},this.onFilteringArticleNO=function(e){var t=new O.h;t=""!==e.text?t.where("name","contains",e.text,!0):t,e.updateData(v.articleNoData,t)},this.onFilteringModelNameClone=function(e){var t=new O.h;t=""!==e.text?t.where("name","contains",e.text,!0):t,e.updateData(v.modelNameData,t)},this.onFilteringModelNOClone=function(e){var t=new O.h;t=""!==e.text?t.where("name","contains",e.text,!0):t,e.updateData(v.modelNoData,t)},this.onFilteringArticleNOClone=function(e){var t=new O.h;t=""!==e.text?t.where("name","contains",e.text,!0):t,e.updateData(v.articleNoData,t)},this.onFilteringArtProcessClone=function(e){var t=new O.h;t=""!==e.text?t.where("name","contains",e.text,!0):t,e.updateData(v.artProcessDataClone,t)}}return a(t,[{key:"ngOnInit",value:function(){var e=this;this.getModelNames(),this.getAllUsers(),this.modelNameID=0,this.subID=0,this.selIndex=[],this.isAdd=!1,this.existGlue=!1,this.oldDetail=[],this.glueIngredientDetail=[],this.removeLocalStore("details"),this.glueid=0,this.onService(),this.getAllSupllier(),this.sortOptions={columns:[{field:"item",direction:"Decending"}]},this.editParams={params:{value:""}},0===this.glue.id?(this.showBarCode=!1,this.genaratorGlueCode()):this.showBarCode=!0,this.ingredientService.currentIngredient.subscribe(function(t){200===t&&e.getIngredients()}),this.pageSettings={pageSize:12},this.paginationI={currentPage:1,itemsPerPage:10,totalItems:0,totalPages:0},this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"},this.toolbar=[{text:"Add New",tooltipText:"Add new row",prefixIcon:"e-add",id:"AddNew"},"Edit","Delete","Update","Cancel","Search"],this.orderidrules={required:!0,number:!0},this.customeridrules={required:!0},this.freightrules={required:!0},this.editparams={paramss:{popupHeight:"300px"}}}},{key:"onChangeProcessCloneModal",value:function(e){e.itemData&&(this.processID=e.itemData.id)}},{key:"resetLifeCycleBPFC",value:function(){this.selIndex=[],this.oldDetail=[],this.glueIngredientDetail=[],this.removeLocalStore("details"),this.removeLocalStore("detailsTamp"),this.ingredients1=[],this.ingredients2=[],this.glues=[],this.BPFCID=0}},{key:"onCreatedGridGlue",value:function(){}},{key:"ngAfterViewInit",value:function(){$('[data-toggle="tooltip"]').tooltip();var e=JSON.parse(localStorage.getItem("level"));this.level=e.id,this.getBuilding()}},{key:"onChangeKindEdit",value:function(e){this.kindEdit=e.value,this.kindID=e.itemData.id}},{key:"onChangePartEdit",value:function(e){this.partEdit=e.value,this.partID=e.itemData.id}},{key:"onChangeMaterialEdit",value:function(e){this.kindEdit=e.value,this.materialID=e.itemData.id}},{key:"dataBoundGlue",value:function(){$('[data-toggle="tooltip"]').tooltip(),this.selectedRow.length?(this.gridglue.selectRows(this.selectedRow),this.selectedRow=[]):this.gridglue.selectRows(this.selIndex)}},{key:"actionBeginGlue",value:function(e){var t=this;"beginEdit"===e.requestType&&(this.chemicalNameEdit=e.rowData.name,this.pathNameEdit=e.rowData.pathName,this.modelNoEdit=e.rowData.modelNo,this.materialNameEdit=e.rowData.materialName,this.glue.consumption=e.rowData.consumption,this.glue.kindID=e.rowData.kindID||null,this.glue.partID=e.rowData.partID||null,this.glue.materialID=e.rowData.materialID||null,this.glue.BPFCEstablishID=e.rowData.bpfcEstablishID,this.glue.name=e.rowData.name,this.glue.expiredTime=this.expiredTime,this.history.Before=""===e.rowData.consumption?"0":"Consumption "+e.rowData.consumption,this.detailGlue=!0),"save"===e.requestType&&(this.glue.id=e.rowData.id||0,this.glue.code=e.data.code||"",this.glue.consumption=e.data.consumption,this.glue.glueNameID=e.data.glueNameID,this.glue.kindID=this.kindID||null,this.glue.partID=this.partID||null,this.glue.materialID=this.materialID||null,this.glue.BPFCEstablishID=this.BPFCID,this.glue.name=this.chemicalNameEdit,this.glue.expiredTime=this.expiredTime,this.history.Action="Consumption",this.history.BPFCEstablishID=this.BPFCID,this.history.GlueID=this.glueid,this.history.After="Consumption "+e.data.consumption,this.history.UserID=JSON.parse(localStorage.getItem("user")).User.ID,this.glue.createdBy=JSON.parse(localStorage.getItem("user")).User.ID,this.bPFCEstablishService.AddHistoryBPFC(this.history).subscribe(function(){t.getBPFCID({modelNameID:t.modelNameID,modelNoID:t.modelNoID,articleNoID:t.articleNoID,artProcessID:t.artProcessID})}),this.saveGlue()),"delete"===e.requestType&&0!==e.data[0].id&&(this.glueid=e.data[0].id,this.history.Action="Delete",this.history.Before=e.data[0].name,this.history.BPFCEstablishID=this.BPFCID,this.history.GlueID=e.data[0].id,this.history.UserID=JSON.parse(localStorage.getItem("user")).User.ID,this.bPFCEstablishService.AddHistoryBPFC(this.history).subscribe(function(){t.glueService.delete(e.data[0].id).subscribe(function(){t.getAllGluesByBPFCID(t.BPFCID),t.detailGlue=!1,t.removeLocalStore("details"),t.glueIngredientDetail=[],t.oldDetail=[],t.grid.refresh(),t.grid2.refresh(),t.alertify.success("Glue has been deleted")},function(e){t.alertify.error("Failed to delete the Glue")})}))}},{key:"rowDeselected",value:function(e){var t=this,i=e.rowIndex,n=this.getLocalStore("details").sort(this.dynamicSort("position"));!1===this.compareArray(this.oldDetail,n)&&!0===e.isInteracted&&this.alertify.valid("C\u1ea3nh b\xe1o!","B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n b\u1ecf qua s\u1ef1 thay \u0111\u1ed5i n\xe0y kh\xf4ng?").then(function(e){if(t.modified=!0,t.gridglue.getSelectedRowIndexes().length){var n=t.gridglue.dataSource[i];n.name=n.chemical.name,t.gridglue.refresh()}}).catch(function(e){t.gridglue.selectRows([i])})}},{key:"rowSelected",value:function(e){e.data[0]&&(this.GlueNameDefault=e.data[0].name);var t=e.data[0]||e.data;this.selIndex=[e.rowIndex],!e.isInteracted&&e.previousRowIndex&&(this.selIndex=[e.previousRowIndex]),e.isInteracted&&void 0!==e.data.name&&this.modified&&this.loadPreview(Number(e.data.id)),!1!==e.isInteracted&&null===e.target||void 0!==t.name&&this.modified&&this.loadPreview(Number(t.id))}},{key:"onChangePosition",value:function(e,t,i){this.modified=!1,this.history.BeforeAllow=this.glueNewName;var n=e.value,a=this.getLocalStore("details");if(""===e.value);else{if(0!==a.length){var l="";switch(a[a.length-1].position){case"A":l="B";break;case"B":l="C";break;case"C":l="D";break;case"D":l="E"}if(n!==l)return this.alertify.warning("H\xe3y ch\u1ecdn ch\u1ea5t ti\u1ebfp theo l\xe0 "+l,!0),this.grid.refresh(),this.grid2.refresh(),void(e.cancel=!0)}if(0===a.filter(function(t){return t.position===e.value}).length&&null!==e.value)if(a=this.getLocalStore("details"),this.percentage=0,this.position=e.value,0!==a.filter(function(e){return e.ingredientName===t.name&&e.position===t.position}).length){var o=a.findIndex(function(e){return e.ingredientName===t.name});a[o].position=e.value,this.setLocalStore("details",a),this.glueIngredientDetail=this.getLocalStore("details"),this.makeFormula(),this.updateChemicalList(),this.grid.refresh()}else{a=this.getLocalStore("details");var r={id:0,glueID:this.glueid,ingredientID:t.id,glueName:"",ingredientName:t.name,percentage:this.percentage,position:e.value,createdDate:new Date,allow:0,expiredTime:t.expiredTime};"A"===e.value&&(r.percentage=100,r.expiredTime=t.expiredTime),a.push(r),this.setLocalStore("details",a),this.glueIngredientDetail=this.getLocalStore("details"),this.makeFormula(),this.updateChemicalList(),"A"===e.value&&this.grid.refresh()}}}},{key:"recordDoubleClick",value:function(e){this.modifiedGlue=!0}},{key:"toolbarClickIngredient",value:function(e){switch(e.item.text){case"Add":e.cancel=!0,this.openIngredientModalComponent()}}},{key:"onDoubleClickIngredient",value:function(e){this.setFocus=e.column}},{key:"rowSelectedIngredient",value:function(e){this.ingridientID=e.data.id}},{key:"genaratorGlueCode",value:function(){this.glue.code=this.makeid(8)}},{key:"makeid",value:function(e){for(var t="",i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",n=i.length,a=0;a<e;a++)t+=i.charAt(Math.floor(Math.random()*n));return t}},{key:"compareArray",value:function(e,t){return JSON.stringify(e)===JSON.stringify(t)}},{key:"setLocalStore",value:function(e,t){localStorage.removeItem(e);var i=JSON.stringify(t);localStorage.setItem(e,i)}},{key:"getLocalStore",value:function(e){return(JSON.parse(localStorage.getItem(e))||[]).sort(this.dynamicSort("position"))}},{key:"removeLocalStore",value:function(e){localStorage.removeItem(e)}},{key:"dynamicSort",value:function(e){var t=1;return"-"===e[0]&&(t=-1,e=e.substr(1)),function(i,n){return-1===t?n[e].localeCompare(i[e]):i[e].localeCompare(n[e])}}},{key:"checkColorCode",value:function(e){return!0===e.approvalStatus&&!0===e.finishedStatus}},{key:"checkDone",value:function(e){return!0===e.approvalStatus&&!0===e.finishedStatus?"Done":"Undone"}},{key:"checkStatus",value:function(e,t){return!0===e&&!0===t?"Done":"Undone"}},{key:"renderchemical",value:function(){return this.glueIngredientDetail=this.glueIngredientDetail||[],this.glueIngredientDetail.sort(this.dynamicSort("position"))}},{key:"makeFormula",value:function(){var e,t,i=this.getLocalStore("details").filter(function(e){return"A"===e.position})||[];this.nameGlue=(null===(e=i[0])||void 0===e?void 0:e.ingredientName)||"",this.nameGlues=(null===(t=i[0])||void 0===t?void 0:t.ingredientName)+"^"+this.glueIngredientDetail[0].allow+"%"||!1,this.A=i[0].ingredientName,this.glueIngredientDetail=this.renderchemical(),void 0===this.glueIngredientDetail[1]?this.B="":(this.B=this.glueIngredientDetail[1].percentage+"%"+this.glueIngredientDetail[1].ingredientName,this.BB=this.glueIngredientDetail[1].percentage+"%"+this.glueIngredientDetail[1].ingredientName+"^"+this.glueIngredientDetail[1].allow+"%"),void 0===this.glueIngredientDetail[2]?this.C="":(this.C=this.glueIngredientDetail[2].percentage+"%"+this.glueIngredientDetail[2].ingredientName,this.CC=this.glueIngredientDetail[2].percentage+"%"+this.glueIngredientDetail[2].ingredientName+"^"+this.glueIngredientDetail[2].allow+"%"),void 0===this.glueIngredientDetail[3]?this.D="":(this.D=this.glueIngredientDetail[3].percentage+"%"+this.glueIngredientDetail[3].ingredientName,this.DD=this.glueIngredientDetail[3].percentage+"%"+this.glueIngredientDetail[3].ingredientName+"^"+this.glueIngredientDetail[3].allow+"%"),void 0===this.glueIngredientDetail[4]?this.E="":(this.E=this.glueIngredientDetail[4].percentage+"%"+this.glueIngredientDetail[4].ingredientName,this.EE=this.glueIngredientDetail[4].percentage+"%"+this.glueIngredientDetail[4].ingredientName+"^"+this.glueIngredientDetail[4].allow+"%"),this.glueIngredientDetail.length>0?(this.percentageCount=this.glueIngredientDetail.map(function(e){return e.percentage}),this.percentageCountEdit=this.glueIngredientDetail.map(function(e){return e}),this.totalPercentage=this.percentageCount.reduce(function(e,t){return e+t},0)):(this.percentageCount=[],this.percentageCountEdit=[],this.totalPercentage=0);var n=this.gridglue.getSelectedRowIndexes()[0];this.gridglue.getSelectedRowIndexes().length&&(this.gridglue.getSelectedRecords(),this.gridglue.dataSource[n].name=this.formula(),this.gridglue.refresh())}},{key:"formula",value:function(){return this.B&&this.C&&this.D&&this.E?"{[ (".concat(this.nameGlue,"+ ").concat(this.B,") + ").concat(this.C," ] + ").concat(this.D,"}+ ").concat(this.E):this.B&&this.C&&this.D?"[(".concat(this.nameGlue," + ").concat(this.B,") + ").concat(this.C,"] + ").concat(this.D):this.B&&this.C?"(".concat(this.nameGlue," + ").concat(this.B,") + ").concat(this.C):this.B?"".concat(this.nameGlue," + ").concat(this.B):""+this.nameGlue}},{key:"formulaTamp",value:function(){return this.BB&&this.CC&&this.DD&&this.EE?(this.glueNewName="{[ (".concat(this.nameGlues,"+ ").concat(this.BB,") + ").concat(this.CC," ] + ").concat(this.DD,"}+ ").concat(this.EE),"{[ (".concat(this.nameGlues,"+ ").concat(this.BB,") + ").concat(this.CC," ] + ").concat(this.DD,"}+ ").concat(this.EE)):this.BB&&this.CC&&this.DD?(this.glueNewName="[(".concat(this.nameGlues," + ").concat(this.BB,") + ").concat(this.CC,"] + ").concat(this.DD),"[(".concat(this.nameGlues," + ").concat(this.BB,") + ").concat(this.CC,"] + ").concat(this.DD)):this.BB&&this.CC?(this.glueNewName="(".concat(this.nameGlues," + ").concat(this.BB,") + ").concat(this.CC),"(".concat(this.nameGlues," + ").concat(this.BB,") + ").concat(this.CC)):this.BB?(this.glueNewName="".concat(this.nameGlues," + ").concat(this.BB),"".concat(this.nameGlues," + ").concat(this.BB)):""+this.nameGlues}},{key:"getDetail",value:function(e){var t=this;this.glueIngredientService.getDetail(e).subscribe(function(e){var i,n,a,l;t.glueIngredientDetail=e.glueIngredients,t.setLocalStore("details",t.glueIngredientDetail),t.setLocalStore("detailsTamp",t.glueIngredientDetail),t.glueIngredientDetail=t.renderchemical(),t.oldDetail=t.renderchemical();var o=t.glueIngredientDetail.filter(function(e){return"A"===e.position})||[];t.nameGlue=(null===(i=o[0])||void 0===i?void 0:i.ingredientName)||"",t.nameGlues=(null===(n=o[0])||void 0===n?void 0:n.ingredientName)+"^"+(null===(a=t.glueIngredientDetail[0])||void 0===a?void 0:a.allow)+"%"||!1,t.A=(null===(l=o[0])||void 0===l?void 0:l.ingredientName)||"",void 0===t.glueIngredientDetail[1]?t.B="":(t.B=t.glueIngredientDetail[1].percentage+"%"+t.glueIngredientDetail[1].ingredientName,t.BB=t.glueIngredientDetail[1].percentage+"%"+t.glueIngredientDetail[1].ingredientName+"^"+t.glueIngredientDetail[1].allow+"%"),void 0===t.glueIngredientDetail[2]?t.C="":(t.C=t.glueIngredientDetail[2].percentage+"%"+t.glueIngredientDetail[2].ingredientName,t.CC=t.glueIngredientDetail[2].percentage+"%"+t.glueIngredientDetail[2].ingredientName+"^"+t.glueIngredientDetail[2].allow+"%"),void 0===t.glueIngredientDetail[3]?t.D="":(t.D=t.glueIngredientDetail[3].percentage+"%"+t.glueIngredientDetail[3].ingredientName,t.DD=t.glueIngredientDetail[3].percentage+"%"+t.glueIngredientDetail[3].ingredientName+"^"+t.glueIngredientDetail[3].allow+"%"),void 0===t.glueIngredientDetail[4]?t.E="":(t.E=t.glueIngredientDetail[4].percentage+"%"+t.glueIngredientDetail[4].ingredientName,t.EE=t.glueIngredientDetail[4].percentage+"%"+t.glueIngredientDetail[4].ingredientName+"^"+t.glueIngredientDetail[4].allow+"%"),t.glueIngredientDetail.length>0?(t.percentageCount=t.glueIngredientDetail.map(function(e){return e.percentage}),t.percentageCount.join("+"),t.percentageCountEdit=t.glueIngredientDetail.map(function(e){return e}),t.totalPercentage=t.percentageCount.reduce(function(e,t){return e+t},0)):(t.percentageCount=[],t.percentageCountEdit=[],t.totalPercentage=0)})}},{key:"updateChemicalList",value:function(){var t,i=this,n=this.getLocalStore("details"),a=e(n);try{var l=function(){var e=t.value,n=i.ingredients1.findIndex(function(t){return t.name===e.ingredientName&&t.id===e.ingredientID});-1!==n&&(i.ingredients1[n].position=e.position,i.ingredients1[n].percentage=e.percentage,i.ingredients1[n].allow=e.allow)};for(a.s();!(t=a.n()).done;)l()}catch(s){a.e(s)}finally{a.f()}var o,r=e(n);try{var c=function(){var e=o.value,t=i.ingredients2.findIndex(function(t){return t.name===e.ingredientName&&t.id===e.ingredientID});-1!==t&&(i.ingredients2[t].position=e.position,i.ingredients2[t].percentage=e.percentage,i.ingredients2[t].allow=e.allow)};for(r.s();!(o=r.n()).done;)c()}catch(s){r.e(s)}finally{r.f()}}},{key:"actionBeginIngredient",value:function(e){if("beginEdit"===e.requestType){if(null===e.rowData.position)return this.alertify.warning("H\xe3y ch\u1ecdn t\xean tr\u01b0\u1edbc khi ch\u1ec9nh s\u1eeda!",!0),void(e.cancel=!0);if("A"===e.rowData.position)return this.alertify.warning("Kh\xf4ng \u0111\u01b0\u1ee3c ch\u1ec9nh s\u1eeda ch\u1ea5t A!",!0),void(e.cancel=!0);this.editPercentage.glueID=this.glueid,this.editPercentage.ingredientID=e.rowData.id,this.percentageDefault=e.rowData.percentage,this.editAllow.glueID=this.glueid,this.history.BeforeAllow="",this.history.AfterAllow="",this.editAllow.ingredientID=e.rowData.id,this.allowDefault=e.rowData.allow||0}if("save"===e.requestType){this.percentageEdit={percentage:Number(e.data.percentage),id:Number(e.rowData.id)},this.allowEdit={allow:Number(e.data.allow),id:Number(e.rowData.id)},"edit"===e.action&&(this.allowChange=e.data.allow||0,this.percentageChange=e.data.percentage),this.editPercentage.percentage=e.data.percentage,this.editAllow.allow=e.data.allow;var t=Number(this.percentageDefault)!==Number(this.percentageChange),i=Number(this.allowDefault)!==Number(this.allowChange);if(t){this.modified=!1;var n=this.getLocalStore("details"),a=n.findIndex(function(t){return t.ingredientName===e.data.name&&t.ingredientID===e.data.id});n[a].percentage=e.data.percentage,this.setLocalStore("details",n),this.updateChemicals()}if(i){var l=this.getLocalStore("details"),o=l.findIndex(function(t){return t.ingredientName===e.data.name&&t.ingredientID===e.data.id});l[o].allow=e.data.allow,this.setLocalStore("details",l),this.modified=!1,this.history.BeforeAllow=this.glueNewName,this.updateChemicals()}}"delete"===e.requestType&&this.deleteIngredient()}},{key:"updateGlueIngredient",value:function(){}},{key:"loadPreview",value:function(e){this.glueid=Number(e),this.getIngredients(),this.getDetail(this.glueid),this.detailGlue=!0}},{key:"resolver",value:function(){var e=this;this.route.data.subscribe(function(t){e.glues=t.glues.result,e.paginationG=t.glues.pagination})}},{key:"onService",value:function(){var e=this;this.ingredientService.currentIngredient.subscribe(function(t){300===t&&(e.getIngredients(),e.updateChemicalList(),e.ingredientService.changeIngredient(0))})}},{key:"mapGlue",value:function(e){1==!e.status?(this.percentage=0,this.mapGlueIngredient({ingredientID:e.id,percentage:this.percentage,glueID:this.glueid})):this.delete(this.glueid,e.id)}},{key:"getIngredients",value:function(){var e=this;this.glueIngredientService.getIngredients(this.glueid).subscribe(function(t){e.ingredients1=t.result.list1,e.ingredients2=t.result.list2},function(t){e.alertify.error(t)})}},{key:"getGlues",value:function(){var e=this;this.glueService.getAllGlue().subscribe(function(t){e.glues=t},function(t){e.alertify.error(t)})}},{key:"mapGlueIngredients",value:function(e){var t=this;this.glueIngredientService.mapGlueIngredient(e).subscribe(function(e){void 0===t.subID?(t.sortBySup(0),t.getDetail(t.glueid)):(t.sortBySup(t.subID),t.getDetail(t.glueid))})}},{key:"mapGlueIngredient",value:function(e){var t=this;this.glueIngredientService.mappGlueIngredient(e).subscribe(function(e){void 0===t.subID?(t.getAllGluesByBPFCID(t.BPFCID),t.sortBySup(0),t.getDetail(t.glueid)):(t.sortBySup(t.subID),t.getDetail(t.glueid),t.getAllGluesByBPFCID(t.BPFCID))})}},{key:"mapGlueIngredientByGlueID",value:function(e){var t=this;this.glueIngredientService.mapGlueIngredientByGlueID(e).subscribe(function(e){t.alertify.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng!"),t.getAllGluesByBPFCID(t.BPFCID),t.detailGlue=!0,t.modified=!0,t.modified=!0,void 0===t.subID?(t.sortBySup(0),t.getDetail(t.glueid)):(t.sortBySup(t.subID),t.getDetail(t.glueid))})}},{key:"openIngredientModalComponent",value:function(){var e=this.modalService.open(K.a,{size:"md"});e.componentInstance.ingredient=this.ingredient,e.componentInstance.title="Add Ingredient",e.result.then(function(e){},function(e){})}},{key:"actionCompleteIngredient",value:function(e){"beginEdit"===e.requestType&&"Item"!==this.setFocus.field&&(e.form.elements.namedItem(this.setFocus.field).focus(),e.form.elements.namedItem(this.setFocus.field).value="")}},{key:"openPopupDropdownlist",value:function(){$('[data-toggle="tooltip"]').tooltip()}},{key:"toolbarClick",value:function(e){var t=this;switch(e.item.text){case"Add New":var i=this.getLocalStore("details").sort(this.dynamicSort("position"));!1===this.compareArray(this.oldDetail,i)&&i.length>0&&this.oldDetail.length>0?this.alertify.valid("C\u1ea3nh b\xe1o!","B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n b\u1ecf qua nh\u1eefng thay \u0111\u1ed5i n\xe0y?").then(function(e){t.glue.id=0,t.glue.name="1",t.glue.BPFCEstablishID=t.BPFCID,t.glue.createdBy=JSON.parse(localStorage.getItem("user")).User.ID,t.saveGlue()}).catch(function(t){e.cancel=!0}):(this.glue.id=0,this.glue.name="1",this.glue.BPFCEstablishID=this.BPFCID,this.glue.createdBy=JSON.parse(localStorage.getItem("user")).User.ID,this.saveGlue())}}},{key:"openModal",value:function(e){this.getModelNamesClone(),this.getAllProcess(),this.modalReference=this.modalService.open(e)}},{key:"openModalHistory",value:function(e){this.modalReference=this.modalService.open(e,{size:"xxl"}),this.LoadHistoryBPFC()}},{key:"LoadHistoryBPFC",value:function(){var e=this;this.bPFCEstablishService.LoadHistoryBPFC(this.BPFCID).subscribe(function(t){e.historyData=t.map(function(t){return{id:t.id,glueID:t.glueID,createdTime:t.createdTime,bpfcEstablishID:t.bpfcEstablishID,before:t.before,after:t.after,action:t.action,remark:t.remark,userID:t.userID,createdBy:e.createdBy(t.userID)}})})}},{key:"actionBeginHistory",value:function(e){var t=this;"save"===e.requestType&&this.bPFCEstablishService.UpdateHistoryBPFC({ID:e.data.id,Remark:e.data.remark}).subscribe(function(e){e&&t.alertify.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng!")})}},{key:"getAllUsers",value:function(){var e=this;this.buildingUserService.getAllUsers(1,1e3).subscribe(function(t){e.userData=t.result})}},{key:"createdBy",value:function(e){if(0===e)return"#N/A";var t=this.userData.filter(function(t){return t.ID===e})[0];return void 0!==t?t.Username:"#N/A"}},{key:"cloneModelname",value:function(){var e=this;this.alertify.confirm("Sao ch\xe9p model name!","B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n sao ch\xe9p model name kh\xf4ng?",function(){e.modalNameService.cloneModelname(e.modelNameID,e.modelNameClone,e.modelNoClone,e.valueProcess).subscribe(function(t){e.alertify.success("the model name has been cloned"),e.modalReference.close(),e.modelNameDropdownlist.hidePopup()})})}},{key:"cloneArticleModelname",value:function(){var e=this;this.alertify.confirm("Sao ch\xe9p article!","B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n sao ch\xe9p article kh\xf4ng?",function(){e.modalNameService.cloneArticleModelname(e.modelNameID,e.modelNameClone,e.modelNoClone,e.articleName,e.processID).subscribe(function(t){e.alertify.success("Sao ch\xe9p th\xe0nh c\xf4ng!"),e.modalReference.close(),e.modelNameDropdownlist.hidePopup()})})}},{key:"delete",value:function(e,t){var i=this;this.glueIngredientService.delete(e,t).subscribe(function(t){i.alertify.success("\u0110\xe3 x\xf3a th\xe0nh c\xf4ng!"),i.getIngredients(),i.getDetail(e)})}},{key:"deleteGlue",value:function(e){var t=this;this.alertify.confirm("X\xf3a keo",'B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a keo n\xe0y kh\xf4ng "'+e.id+'" ?',function(){t.glueService.delete(e.id).subscribe(function(){t.getGlues(),t.alertify.success("\u0110\xe3 x\xf3a th\xe0nh c\xf4ng!")},function(e){t.alertify.error("X\xf3a th\u1ea5t b\u1ea1i r\u1ed3i!")})})}},{key:"deleteIngridient",value:function(e){var t=this;this.alertify.confirm("X\xf3a ingredient",'B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a ingredient n\xe0y kh\xf4ng "'+e.id+'" ?',function(){t.ingredientService.delete(e.id).subscribe(function(){t.getIngredients(),t.alertify.success("\u0110\xe3 x\xf3a th\xe0nh c\xf4ng!")},function(e){t.alertify.error("X\xf3a th\u1ea5t b\u1ea1i r\u1ed3i!")})})}},{key:"getAllGluesByBPFCID",value:function(e){var t=this;this.glueService.getAllGluesByBPFCID(e).subscribe(function(e){t.glues=e})}},{key:"getAllGluesByBPFCID2",value:function(e){var t=this;this.glueService.getAllGluesByBPFCID(e).subscribe(function(e){void 0===t.ingredientID?(t.glues=e,e.length>0&&(t.detailGlue=!0)):(t.glueid=e[0].id,t.glueIngredient2.ingredientID=t.ingredientID,t.glueIngredient2.percentage=100,t.glueIngredient2.glueID=t.glueid,t.glueIngredient2.position="A",t.mapGlueIngredient(t.glueIngredient2))})}},{key:"updateChemicals",value:function(){var t=this;this.ingredientService.sortBySup(this.glueid,this.subID).subscribe(function(i){t.ingredients1=i.list1,t.ingredients2=i.list2;var n,a=t.getLocalStore("details"),l=e(a);try{var o=function(){var e=n.value,i=t.ingredients1.findIndex(function(t){return t.name===e.ingredientName&&t.id===e.ingredientID});-1!==i&&(t.ingredients1[i].position=e.position,t.ingredients1[i].percentage=e.percentage,t.ingredients1[i].allow=e.allow)};for(l.s();!(n=l.n()).done;)o()}catch(d){l.e(d)}finally{l.f()}var r,c=e(a);try{var s=function(){var e=r.value,i=t.ingredients2.findIndex(function(t){return t.name===e.ingredientName&&t.id===e.ingredientID});-1!==i&&(t.ingredients2[i].position=e.position,t.ingredients2[i].percentage=e.percentage,t.ingredients2[i].allow=e.allow)};for(c.s();!(r=c.n()).done;)s()}catch(d){c.e(d)}finally{c.f()}t.glueIngredientDetail=a,t.makeFormula()})}},{key:"sortBySup",value:function(e){var t=this;0===this.gridglue.getSelectedRowIndexes().length?this.alertify.warning("Please select a glue!",!0):(this.subID=e,this.ingredientService.sortBySup(this.glueid,e).subscribe(function(i){if(t.ingredients1=i.list1,t.ingredients2=i.list2,0===e){var n=t.getLocalStore("details");t.ingredients1=n.map(function(e){return{id:e.ingredientID,name:e.ingredientName,code:"",percentage:e.percentage,createdDate:e.createdDate,supplierID:0,allow:e.allow,position:e.position,expiredTime:e.expiredTime,daysToExpiration:e.daysToExpiration,voc:e.voc,materialNO:e.materialNO,unit:e.unit,real:e.real,glueTypeID:0,cbd:e.cbd,replacementFrequency:0,prepareTime:0,standardCycle:0}}),t.glueIngredientDetail=n}else t.updateChemicalList()}))}},{key:"saveGlue",value:function(){0===this.glue.id||void 0===this.glue.id?(""===this.glue.code&&this.genaratorGlueCode(),this.createGlue()):this.onChangeChemical?this.updateChemical():this.update(),this.oldDetail=[],localStorage.removeItem("details"),this.glueIngredientDetail=[],this.gridglue.refresh(),this.selectedRow=[0],this.selIndex=[0],this.modified=!0}},{key:"getBuilding",value:function(){JSON.parse(localStorage.getItem("user"))}},{key:"getAllIngredient",value:function(){var e=this;this.ingredientService.getAllIngredient().subscribe(function(t){e.ingrediented=t})}},{key:"createGlue",value:function(){var e=this;this.glueService.create(this.glue).subscribe(function(){e.alertify.success("\u0110\xe3 t\u1ea1o th\xe0nh c\xf4ng!"),e.getAllGluesByBPFCID(e.BPFCID),e.clearGlueForm(),e.genaratorGlueCode(),e.expiredTime=0},function(t){e.alertify.error(t),e.genaratorGlueCode()})}},{key:"finished",value:function(){var e=JSON.parse(localStorage.getItem("user")).User.ID;if(0===this.gridglue.getSelectedRowIndexes().length)this.alertify.warning("H\xe3y ch\u1ecdn v\xe0o 1 glue v\xe0 t\u1ea1o c\xf4ng th\u1ee9c sau \u0111\xf3 m\u1edbi b\u1ea5m ho\xe0n th\xe0nh!",!0);else{this.history.BPFCEstablishID=this.BPFCID,this.history.GlueID=this.glueid,this.history.After=this.GlueNameDefault,this.history.AfterAllow=this.glueNewName,this.history.UserID=e,this.bPFCEstablishService.AddHistoryBPFC(this.history).subscribe(function(){});var t=this.getLocalStore("details"),i=this.gridglue.getSelectedRecords()[0];i.expiredTime=t.filter(function(e){return"A"===e.position})[0].expiredTime,i.kindID=0===i.kindID?null:i.kindID,i.partID=0===i.partID?null:i.partID,i.materialID=0===i.materialID?null:i.materialID,this.selectedRow=this.gridglue.getSelectedRowIndexes(),t.length>0&&this.mapGlueIngredientByGlueID({glueName:i.name,glueID:i.id,glueIngredientForMapDto:t})}}},{key:"clearGlueForm",value:function(){this.glue.gluename="",this.glue.kindID=null,this.glue.partID=null,this.glue.materialID=null,this.glue.consumption="",this.showBarCode=!1}},{key:"update",value:function(){var e=this;this.glueService.update(this.glue).subscribe(function(t){e.alertify.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng!"),e.getAllGluesByBPFCID(e.BPFCID),e.detailGlue=!1,e.history.Action="Created",e.expiredTime=0})}},{key:"updateChemical",value:function(){var e=this;this.glueService.updateChemical(this.glue).subscribe(function(t){e.alertify.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng!"),e.getAllGluesByBPFCID(e.BPFCID),e.detailGlue=!1,e.onChangeChemical=!1,e.history.Action="Created"})}},{key:"deleteIngredient",value:function(){var e=this;this.ingredientService.delete(this.ingridientID).subscribe(function(){var t=e.getLocalStore("details").filter(function(t){return t.ingredientID!==e.ingridientID});e.setLocalStore("details",t),e.glueIngredientDetail=t,e.getIngredients(),e.makeFormula(),e.alertify.success("\u0110\xe3 x\xf3a th\xe0nh c\xf4ng!")},function(t){e.alertify.error("X\xf3a th\u1ea5t b\u1ea1i r\u1ed3i!")})}},{key:"approval",value:function(){var t=this,i=this.gridglue.dataSource;if(i){var n,a=e(i);try{for(a.s();!(n=a.n()).done;){var l=n.value;if(l.glueIngredients.length>0){var o,r=e(l.glueIngredients.filter(function(e){return"A"!==e.position}));try{for(r.s();!(o=r.n()).done;){var c=o.value;if(c.allow<=0&&"A"!==c.position)return this.approvalStatus=!this.approvalStatus,void this.alertify.warning("The allowance of checmical name ".concat(c.ingredient.name," must be greater than 0 <br>\n              M\u1ee9c cho ph\xe9p c\u1ee7a h\xf3a ch\u1ea5t ").concat(c.ingredient.name," ph\u1ea3i l\u1edbn h\u01a1n 0!<br>\n               <label>Glue Name: </label> ").concat(l.name," <br>\n              "),!0);if(c.percentage<=0&&"A"!==c.position)return this.approvalStatus=!this.approvalStatus,void this.alertify.warning("The percentage of checmical name ".concat(c.ingredient.name," must be greater than 0 <br>\n              Ph\u1ea7n tr\u0103m c\u1ee7a h\xf3a ch\u1ea5t ").concat(c.ingredient.name," ph\u1ea3i l\u1edbn h\u01a1n 0!<br>\n               <label>Glue Name: </label> ").concat(l.name," <br>\n              "),!0)}}catch(d){r.e(d)}finally{r.f()}}if(+l.consumption<=0)return this.approvalStatus=!this.approvalStatus,void this.alertify.warning("The consumption of glue name ".concat(l.name," must be greater than 0 <br>\n          M\u1ee9c ti\xeau th\u1ee5 c\u1ee7a keo ").concat(l.name," ph\u1ea3i l\u1edbn h\u01a1n 0! <br>\n          <label>Glue Name: </label> ").concat(l.name," <br>\n          "),!0)}}catch(d){a.e(d)}finally{a.f()}var s=JSON.parse(localStorage.getItem("user")).User.ID;this.bPFCEstablishService.approval(this.BPFCID,s).subscribe(function(e){t.alertify.success("The BPFC has been approved!"),t.createdStatus=t.approvalStatus;var i=t.modelNameDropdownlist.getDataByValue(t.modelNameDropdownlist.value);t.modelNameDropdownlist.valueTemplate="(".concat(t.checkStatus(t.approvalStatus,t.createdStatus),") ").concat(i.name)})}}},{key:"done",value:function(){var t=this,i=this.gridglue.dataSource,n=!1,a=!1,l=!1;if(i){var o,r=e(i);try{for(r.s();!(o=r.n()).done;){var c=o.value;if(c.glueIngredients.length>0){var s,d=c.glueIngredients.filter(function(e){return"A"!==e.position}),u=e(d);try{for(u.s();!(s=u.n()).done;){var g=s.value;if(g.allow<=0)return n=!1,this.createdStatus=!this.createdStatus,void this.alertify.warning("The allow of checmical name ".concat(g.ingredient.name," is greater than 0 <br>\n              M\u1ee9c cho ph\xe9p c\u1ee7a h\xf3a ch\u1ea5t ").concat(g.ingredient.name," ph\u1ea3i l\u1edbn h\u01a1n 0!<br>\n               <label>Glue Name: </label> ").concat(c.name," <br>\n              "),!0);if(g.percentage<=0)return a=!1,this.createdStatus=!this.createdStatus,void this.alertify.warning("The percentage of checmical name ".concat(g.ingredient.name," is greater than 0 <br>\n              Ph\u1ea7n tr\u0103m c\u1ee7a h\xf3a ch\u1ea5t ").concat(g.ingredient.name," ph\u1ea3i l\u1edbn h\u01a1n 0!<br>\n               <label>Glue Name: </label> ").concat(c.name," <br>\n              "),!0);n=!0,a=!0}}catch(m){u.e(m)}finally{u.f()}0===d.length&&(n=!0,a=!0)}if(c.consumption<=0)return l=!1,this.createdStatus=!this.createdStatus,void this.alertify.warning("The consumption of glue name ".concat(c.name," is greater than 0 <br>\n          M\u1ee9c ti\xeau th\u1ee5 c\u1ee7a keo ").concat(c.name," ph\u1ea3i l\u1edbn h\u01a1n 0! <br>\n          <label>Glue Name: </label> ").concat(c.name," <br>\n          "),!0);l=!0}}catch(m){r.e(m)}finally{r.f()}if(n&&a&&l){var h=JSON.parse(localStorage.getItem("user")).User.ID;this.bPFCEstablishService.done(this.BPFCID,h).subscribe(function(e){!0===e.status?(t.alertify.success(e.message),t.createdStatus=t.createdStatus):t.alertify.success(e.message)})}}}},{key:"getModelNames",value:function(){var e=this;this.modalNameService.getAllModalName().subscribe(function(t){e.modelNameData=t.map(function(e){return{id:e.id,name:e.name}})})}},{key:"getArticleNoByModelNameID",value:function(e){var t=this;this.articleNoService.getArticleNoByModelNoID(e).subscribe(function(e){t.articleNoData=e})}},{key:"getModelNoByModelNameID",value:function(e){var t=this;this.modelNoService.getModelNoByModelNameID(e).subscribe(function(e){t.modelNoData=e})}},{key:"getArtProcessByArticleNoID",value:function(e){var t=this;this.artProcessService.getArtProcessByArticleNoID(e).subscribe(function(e){t.artProcessData=e.map(function(e){return{id:e.id,name:1===e.processID?"ASY":"STF"}})})}},{key:"getAllProcess",value:function(){var e=this;this.artProcessService.GetAllProcess().subscribe(function(t){e.artProcessDataClone2=t})}},{key:"getAllKind",value:function(){var e=this;this.kindService.getAllKind().subscribe(function(t){e.kinds=t})}},{key:"getAllPart",value:function(){var e=this;this.partService.getAllPart().subscribe(function(t){e.parts=t})}},{key:"getAllMaterial",value:function(){var e=this;this.materialService.getAllMaterial().subscribe(function(t){e.materials=t})}},{key:"getIngredientsByGlueID",value:function(){var e=this;this.ingredientService.getIngredientsByGlueID(this.glueid).subscribe(function(t){e.ingredients1=t.list1,e.ingredients2=t.list2})}},{key:"getAllSupllier",value:function(){var e=this;this.ingredientService.getAllSupplier().subscribe(function(t){e.supplier=t})}},{key:"getArticleNoByModelNoID",value:function(e){var t=this;this.articleNoService.getArticleNoByModelNoID(e).subscribe(function(e){t.articleNosData=e})}},{key:"getBPFCID",value:function(e){var t=this;this.bPFCEstablishService.getBPFCID(e).subscribe(function(e){t.resetLifeCycleBPFC(),t.BPFCID=null==e?void 0:e.id,t.approvalStatus=e.approvalStatus,t.createdStatus=e.finishedStatus,t.glue.BPFCEstablishID=t.BPFCID,t.getAllGluesByBPFCID(t.BPFCID),t.getAllPart(),t.getAllKind(),t.getAllMaterial(),t.getAllIngredient(),t.existGlue=!0,t.modified=!0})}},{key:"OndataBound",value:function(e){this.modelNoDropdownlist.value=this.value}},{key:"getModelNamesClone",value:function(){var e=this;this.modalNameService.getAllModalName().subscribe(function(t){e.modelNameDataClone=t.map(function(e){return{id:e.id,name:e.name}}),e.getModelNoByModelNameIDClone(e.modelNameIDClone),e.articleNosDataClone=[],e.artProcessDataClone=[]})}},{key:"getArticleNoByModelNameIDClone",value:function(e){var t=this;this.articleNoService.getArticleNoByModelNoID(e).subscribe(function(e){t.articleNosDataClone=e})}},{key:"getModelNoByModelNameIDClone",value:function(e){var t=this;this.modelNoService.getModelNoByModelNameID(e).subscribe(function(e){t.modelNOsDataClone=e}),this.getArticleNoByModelNameIDClone(this.valuemodelNo)}},{key:"getArtProcessByArticleNoIDClone",value:function(e){var t=this;this.artProcessService.getArtProcessByArticleNoID(e).subscribe(function(e){t.artProcessDataClone=e.map(function(e){return{id:e.id,name:1===e.ProcessID?"ASY":"STF"}})})}},{key:"clone",value:function(e){var t=this;this.modalNameService.clone(e).subscribe(function(e){!0===e.status?(t.alertify.success("\u0110\xe3 sao ch\xe9p th\xe0nh c\xf4ng!"),t.modalService.dismissAll(),t.getArtProcessByArticleNoID(t.articleNoID),t.clearFormClone()):t.alertify.error("The BPFC exists!")})}},{key:"onChangeModelName",value:function(e){this.resetLifeCycleBPFC(),this.modelNameID=e.itemData.id,this.getModelNoByModelNameID(this.modelNameID),this.existGlue=!1,this.modelNameIDClone=e.value,this.value=e.value,this.valuemodelNo=0,this.modified=!1,this.modelNoData=[],this.articleNosData=[],this.artProcessData=[],this.modelNameSelect=!0,this.modelNoSelect=!1,this.modelArtSelect=!1,this.modelProcessSelect=!1}},{key:"onChangeModelNo",value:function(e){e.isInteracted&&(this.modelNoID=e.itemData.id,this.valuemodelNo=e.itemData.id,this.getArticleNoByModelNoID(this.modelNoID),this.existGlue=!1,this.modified=!1,this.articleNosData=[],this.artProcessData=[],this.modelNoSelect=!0)}},{key:"onChangeArticleNo",value:function(e){e.isInteracted&&(this.articleNoID=e.itemData.id,this.getArtProcessByArticleNoID(this.articleNoID),this.existGlue=!1,this.modified=!1,this.modelArtSelect=!0,this.artProcessData=[])}},{key:"onClickProcess",value:function(e){this.modelProcessSelect=!0,e.target.defaultValue&&(this.artProcessID=Number(e.target.defaultValue),this.getBPFCID({modelNameID:this.modelNameID,modelNoID:this.modelNoID,articleNoID:this.articleNoID,artProcessID:this.artProcessID}))}},{key:"ClickProcessData",value:function(e){}},{key:"clearFormClone",value:function(){this.modelNameIDClone=this.value,this.modelNOIDClone=this.valuemodelNo,this.articleNOIDClone=0,this.artProcessIDClone=0,this.articleNosDataClone=[],this.artProcessDataClone=[],this.artProcessDataClone2=[]}},{key:"onClickClone",value:function(){var e={modelNameID:this.modelNameIDClone,modelNOID:this.modelNOIDClone,articleNOID:this.articleNOIDClone,artProcessID:Number(this.artProcessIDClone),bpfcID:this.BPFCID,cloneBy:JSON.parse(localStorage.getItem("user")).User.ID};this.clone(e)}},{key:"onChangeModelNameClone",value:function(e){this.value!==e.itemData.id&&(this.modelNOsDataClone=[],this.modelNameIDClone=e.itemData.id,this.getModelNoByModelNameIDClone(this.modelNameIDClone)),this.modelNameIDClone=e.itemData.id,this.getModelNoByModelNameIDClone(this.modelNameIDClone)}},{key:"onChangeModelNoClone",value:function(e){this.modelNOIDClone=e.itemData.id,null!==this.modelNOIDClone&&this.getArticleNoByModelNameIDClone(this.modelNOIDClone),this.articleNosDataClone=[],this.artProcessDataClone=[]}},{key:"onChangeArticleNoClone",value:function(e){e.isInteracted&&(this.articleNOIDClone=e.itemData.id,this.getArtProcessByArticleNoIDClone(this.articleNOIDClone))}},{key:"onChangeProcessClone",value:function(e){e.isInteracted&&(this.artProcessIDClone=e.itemData.id)}},{key:"changeAllowColor",value:function(e){return null===e.position?"":this.positions.includes(e.position)&&0===e.allow||this.positions.includes(e.position)&&null===e.allow?"font-weight-bold text-white p-2 rounded-circle warning-text":void 0}},{key:"changePercentageColor",value:function(e){return null===e.percentage?"":this.positions.includes(e.position)&&0===e.percentage?"font-weight-bold text-white p-2 rounded-circle warning-text":void 0}},{key:"changeConsumptionColor",value:function(e){return 0===e.glueIngredients.length?"":""===e.consumption?"font-weight-bold text-white p-2 rounded-circle warning-text":void 0}}]),t}()).\u0275fac=function(e){return new(e||ct)(A.Mb(q),A.Mb(M.a),A.Mb(Q.a),A.Mb(F.a),A.Mb(u.b),A.Mb(x.a),A.Mb(V.a),A.Mb(G.a),A.Mb(Y),A.Mb(X),A.Mb(W.a),A.Mb(Z.a),A.Mb(ee.a),A.Mb(T.a),A.Mb(te),A.Mb(ie.a))},ct.\u0275cmp=A.Gb({type:ct,selectors:[["app-glue-ingredient"]],viewQuery:function(e,t){var i;1&e&&(A.Qc(ne,!0),A.Qc(ae,!0),A.Qc(le,!0),A.Qc(oe,!0),A.Qc(re,!0),A.Qc(ce,!0),A.Qc(se,!0),A.Qc(de,!0)),2&e&&(A.xc(i=A.dc())&&(t.switch=i.first),A.xc(i=A.dc())&&(t.grid=i.first),A.xc(i=A.dc())&&(t.gridglue=i.first),A.xc(i=A.dc())&&(t.grid2=i.first),A.xc(i=A.dc())&&(t.modelNameDropdownlist=i.first),A.xc(i=A.dc())&&(t.modelNoDropdownlist=i.first),A.xc(i=A.dc())&&(t.chemicalDropdownlist=i.first),A.xc(i=A.dc())&&(t.positionDropdownlist=i))},features:[A.yb([y.n,y.f,y.k])],decls:52,vars:21,consts:[[1,"row"],[1,"col-md-5"],[1,"card"],[1,"col-md-12","card-body","table-responsive"],[1,"col-md-3","mt-2"],[1,"col-md-8","mt-2"],["placeholder","Select a Model Name",1,"w-100","float-left",3,"dataSource","fields","allowFiltering","ngModel","open","ngModelChange","filtering","select"],["modelNameDropdownlist",""],["class","col-md-1 mt-2",4,"ngIf"],["placeholder","Select a Model NO",1,"w-100","float-left",3,"dataSource","fields","allowFiltering","ngModel","open","ngModelChange","filtering","select"],["modelNoDropdownlist",""],[1,"col-md-1","mt-2"],["placeholder","Select article NO   ",1,"w-100","float-left",3,"dataSource","fields","allowFiltering","ngModel","open","ngModelChange","filtering","select"],[1,"col-md-9","mt-2"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"card-body","table-responsive","p-0"],["class","control-section",4,"ngIf"],[1,"col-md-7"],[1,"card-header"],[1,"card-title"],["class","card-tools",4,"ngIf"],["class","card-body",4,"ngIf"],["cloneArticleModal",""],["cloneModal",""],["HistoryModal",""],["ejs-button","","cssClass","e-info",1,"float-right","ml-1",3,"click"],[1,"fa","fa-clone"],["name","process",3,"label","value","click"],["style","display: block;","id","barcode","width","300px","height","100px","mode","SVG","type","Code32",3,"value",4,"ngIf"],["id","barcode","width","300px","height","100px","mode","SVG","type","Code32",2,"display","block",3,"value"],["barcode",""],[1,"control-section"],["height","250px","showColumnMenu","true","allowSorting","true","allowResizing","true","gridLines","Both",3,"dataSource","editSettings","toolbar","allowSorting","selectedRowIndex","rowDeselected","actionBegin","rowSelected","created","toolbarClick","dataBound"],["gridglue",""],["field","name","isPrimaryKey","true","headerText","Chemical","textAlign","Center","width","150"],["headerTemplate",""],["template",""],["field","consumption","headerText","Std. Con.(g)","textAlign","Center","width","150"],["field","expiredTime","headerText","Expired Time","isPrimaryKey","true","textAlign","Center","width","150"],["field","kindName","headerText","Kind","textAlign","Center","width","150"],["editTemplate",""],["field","partName","headerText","Part","textAlign","Center","width","150"],["field","materialName","headerText","Material","textAlign","Center","width","150"],["data-toggle","tooltip","data-placement","top",3,"title"],[3,"dataSource","ngModel","fields","allowFiltering","ngModelChange","select"],["kindDropdownlist",""],["popupHeight","200px","popupWidth","250px",3,"dataSource","ngModel","fields","allowFiltering","ngModelChange","select"],["glueDropdownlist",""],[1,"card-tools"],["type","button",1,"btn","btn-danger","btn-sm","mr-2","d-none"],[1,"fas","fa-undo"],["style","width: 100px; margin-right: 10px;",3,"onLabel","offLabel","disabled","ngModel","checked","click","ngModelChange",4,"ngIf"],["type","button","ejs-button","","cssClass","e-small e-success ml-2",3,"click",4,"ngIf"],["type","button","ejs-button","","cssClass","e-small e-default ml-2",3,"click",4,"ngIf"],[2,"width","100px","margin-right","10px",3,"onLabel","offLabel","disabled","ngModel","checked","click","ngModelChange"],["switch",""],["onLabel","Approved","style","width: 120px;",3,"offLabel","ngModel","checked","click","ngModelChange",4,"ngIf"],["onLabel","Approved",2,"width","120px",3,"offLabel","ngModel","checked","click","ngModelChange"],["type","button","ejs-button","","cssClass","e-small e-success ml-2",3,"click"],[1,"fas","fa-save"],["type","button","ejs-button","","cssClass","e-small e-default ml-2",3,"click"],[1,"fas","fa-history"],[1,"card-body"],[1,"col-lg-12","col-xs-12","col-12",2,"text-align","center"],["type","button",1,"btn","bg-gradient-secondary","btn-sm","rounded-pill",3,"click"],["type","button","style","margin: 3px","class","btn btn-info btn-sm rounded-pill",3,"click",4,"ngFor","ngForOf"],[1,"col-md-6"],["height","675px","gridLines","Both","showColumnMenu","true","allowSorting","true","allowResizing","true",3,"dataSource","allowSorting","editSettings","toolbar","actionComplete","recordDoubleClick","actionBegin","toolbarClick","rowSelected"],["grid",""],["field","Item","isPrimaryKey","true","headerText","Item","width","80","textAlign","Center"],["field","name","isPrimaryKey","true","headerText","Name","width","140","textAlign","Center"],["field","percentage","headerText","%","textAlign","Center","width","60"],["field","allow","headerText","Allow (%)","textAlign","Center","width","60"],["height","675px","showColumnMenu","true","allowSorting","true","allowResizing","true","gridLines","Both",3,"dataSource","allowSorting","editSettings","toolbar","actionComplete","recordDoubleClick","actionBegin","toolbarClick","rowSelected"],["grid2",""],[2,"visibility","hidden"],[2,"list-style-type","square","font-weight","bold"],["style","list-style: none;",4,"ngFor","ngForOf"],[2,"list-style","none"],[1,"font-weight-bold","text-danger"],["type","button",1,"btn","btn-info","btn-sm","rounded-pill",2,"margin","3px",3,"click"],[1,"fas","fa-cannabis"],[3,"dataSource","value","fields","allowFiltering","change"],["positionDropdownlist",""],[1,"fas","fa-exclamation-circle"],[1,"modal-header"],[1,"modal-title"],[1,"fas","fa-plus"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-md-12"],[1,"form-group"],["for","Name"],[2,"color","red"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["placeholder","Select a process",1,"w-100",3,"value","dataSource","allowFiltering","fields","change"],["processDropdownlist",""],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["type","submit",1,"btn","btn-primary",3,"click"],["placeholder","Select a Model Name",1,"w-100","float-left",3,"dataSource","fields","allowFiltering","value","open","filtering","select"],["placeholder","Select a Model NO",1,"w-100","float-left",3,"dataSource","fields","allowFiltering","value","dataBound","filtering","select"],["placeholder","Select article NO   ",1,"w-100","float-left",3,"dataSource","fields","allowFiltering","ngModel","filtering","ngModelChange","select"],["name","process2",3,"label","value","ngModel","ngModelChange"],["height","675px","gridLines","Both","showColumnMenu","true","allowSorting","true","allowResizing","true",3,"dataSource","allowSorting","editSettings","toolbar","actionBegin"],["gridHistory",""],["field","createdTime","isPrimaryKey","true","headerText","Time","textAlign","Center"],["field","action","isPrimaryKey","true","headerText","Status","width","150","textAlign","Center"],["field","before","headerText","Before","width","450","isPrimaryKey","true","textAlign","Left"],["field","after","headerText","After","width","450","isPrimaryKey","true","textAlign","Left"],["field","remark","headerText","Remark","textAlign","Center",3,"edit"],["field","createdBy","headerText","Created By","isPrimaryKey","true","textAlign","Center"],["type","button",1,"btn","btn-primary",3,"click"],[3,"ngClass"],[4,"ngIf","ngIfElse"],["elseTemplate",""],["type","text","name","remark",1,"e-field","e-input","e-defaultcell",2,"text-align","Center",3,"value"],["disabled","disabled","type","text","name","remark",1,"e-field","e-input","e-defaultcell",2,"text-align","Center",3,"value"]],template:function(e,t){1&e&&(A.Sb(0,"div",0),A.Sb(1,"div",1),A.Sb(2,"div",2),A.Sb(3,"div",3),A.Sb(4,"div",0),A.Sb(5,"div",4),A.Sb(6,"label"),A.Kc(7,"Model Name: "),A.Rb(),A.Rb(),A.Sb(8,"div",5),A.Sb(9,"ejs-dropdownlist",6,7),A.cc("open",function(){return t.openPopupDropdownlist()})("ngModelChange",function(e){return t.modelNameID=e})("filtering",function(e){return t.onFilteringModelName(e)})("select",function(e){return t.onChangeModelName(e)}),A.Rb(),A.Rb(),A.Ic(11,ue,3,0,"div",8),A.Rb(),A.Sb(12,"div",0),A.Sb(13,"div",4),A.Sb(14,"label"),A.Kc(15,"Model NO: "),A.Rb(),A.Rb(),A.Sb(16,"div",5),A.Sb(17,"ejs-dropdownlist",9,10),A.cc("open",function(){return t.openPopupDropdownlist()})("ngModelChange",function(e){return t.modelNoID=e})("filtering",function(e){return t.onFilteringModelNO(e)})("select",function(e){return t.onChangeModelNo(e)}),A.Rb(),A.Rb(),A.Nb(19,"div",11),A.Rb(),A.Sb(20,"div",0),A.Sb(21,"div",4),A.Sb(22,"label"),A.Kc(23,"Article NO: "),A.Rb(),A.Rb(),A.Sb(24,"div",5),A.Sb(25,"ejs-dropdownlist",12,7),A.cc("open",function(){return t.openPopupDropdownlist()})("ngModelChange",function(e){return t.articleNoID=e})("filtering",function(e){return t.onFilteringArticleNO(e)})("select",function(e){return t.onChangeArticleNo(e)}),A.Rb(),A.Rb(),A.Nb(27,"div",11),A.Rb(),A.Sb(28,"div",0),A.Sb(29,"div",4),A.Sb(30,"label"),A.Kc(31,"Process: "),A.Rb(),A.Rb(),A.Sb(32,"div",13),A.Ic(33,ge,2,2,"ng-container",14),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Sb(34,"div",2),A.Ic(35,me,2,1,"div",15),A.Sb(36,"div",16),A.Ic(37,we,32,5,"div",17),A.Rb(),A.Rb(),A.Rb(),A.Sb(38,"div",18),A.Sb(39,"div",2),A.Sb(40,"div",19),A.Sb(41,"h3",20),A.Kc(42),A.hc(43,"translate"),A.Rb(),A.Ic(44,Me,8,4,"div",21),A.Rb(),A.Ic(45,Ze,63,14,"div",22),A.Rb(),A.Rb(),A.Ic(46,et,27,5,"ng-template",null,23,A.Jc),A.Ic(48,it,49,16,"ng-template",null,24,A.Jc),A.Ic(50,rt,24,6,"ng-template",null,25,A.Jc),A.Rb()),2&e&&(A.zb(9),A.mc("dataSource",t.modelNameData)("fields",t.fieldsBPFCs)("allowFiltering",!0)("ngModel",t.modelNameID),A.zb(2),A.mc("ngIf",t.modelNameSelect&&t.modelNoSelect&&t.modelArtSelect&&t.modelProcessSelect),A.zb(6),A.mc("dataSource",t.modelNoData)("fields",t.fieldsBPFCs)("allowFiltering",!0)("ngModel",t.modelNoID),A.zb(8),A.mc("dataSource",t.articleNosData)("fields",t.fieldsBPFCs)("allowFiltering",!0)("ngModel",t.articleNoID),A.zb(8),A.mc("ngForOf",t.artProcessData),A.zb(2),A.mc("ngIf",t.existGlue),A.zb(2),A.mc("ngIf",t.existGlue),A.zb(5),A.Mc("",A.ic(43,19,"PREVIEW")," "),A.zb(2),A.mc("ngIf",t.existGlue),A.zb(1),A.mc("ngIf",t.existGlue))},directives:[d.c,r.g,r.j,o.n,o.m,m.b,m.g,g.b,y.j,h.d,B.d,B.b,y.e,y.b,h.c,B.c,B.a,y.d,y.a,m.i,r.b,o.l],pipes:[v.c,o.d],styles:[".e-grid[_ngcontent-%COMP%]   td.e-active[_ngcontent-%COMP%]{background:#6597ce!important;color:#000}.radiobutton-control[_ngcontent-%COMP%]{margin:5% 0 5% 40%}@media only screen and (max-width:500px){.radiobutton-control[_ngcontent-%COMP%]{margin-left:21%;margin-top:20%;margin-bottom:27%}}@media only screen and (max-width:700px){.checkbox-control[_ngcontent-%COMP%]{margin-left:35%;margin-top:8%}.control-section[_ngcontent-%COMP%]{min-height:200px}}.control-section[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin:20px 0}.radiobutton-control[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px}.e-bigger[_ngcontent-%COMP%]   .radiobutton-control[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:20px}.warning-text[_ngcontent-%COMP%]{-webkit-animation:warning-frames .5s infinite;animation:warning-frames .5s infinite;color:#000}@-webkit-keyframes warning-frames{0%{background-color:#d40a0a}to{background-color:#ff6565}}@keyframes warning-frames{0%{background-color:#d40a0a}to{background-color:#ff6565}}"]}),ct),dt=["switch"],ut=["grid"],gt=["gridglue"],ht=["grid2"],mt=["modelNameDropdownlist"],bt=["modelNoDropdownlist"],ft=["chemicalDropdownlist"],pt=["positionDropdownlist"];function vt(e,t){if(1&e&&A.Nb(0,"ejs-barcodegenerator",21,22),2&e){var i=A.gc(2);A.mc("value",i.glue.code)}}function It(e,t){if(1&e&&(A.Sb(0,"div"),A.Ic(1,vt,2,1,"ejs-barcodegenerator",20),A.Rb()),2&e){var i=A.gc();A.zb(1),A.mc("ngIf",i.showBarCode)}}function St(e,t){1&e&&(A.Kc(0),A.hc(1,"translate")),2&e&&A.Mc(" ",A.ic(1,1,"GLUE")," ")}function Dt(e,t){if(1&e&&(A.Sb(0,"div",35),A.Kc(1),A.Rb()),2&e){var i=t.$implicit;A.nc("title",i.name),A.zb(1),A.Mc(" ",i.name," ")}}function yt(e,t){1&e&&(A.Kc(0),A.hc(1,"translate")),2&e&&A.Mc(" ",A.ic(1,1,"CONSUMPTION")," ")}function Nt(e,t){if(1&e&&(A.Sb(0,"span"),A.Kc(1),A.Rb()),2&e){var i=t.$implicit,n=A.gc(2);A.Bb(n.changeConsumptionColor(i)),A.zb(1),A.Lc(""===i.consumption?"0":i.consumption)}}function Ct(e,t){1&e&&(A.Kc(0),A.hc(1,"translate")),2&e&&A.Mc(" ",A.ic(1,1,"EXPIRED_TIME")," ")}function Bt(e,t){1&e&&(A.Kc(0),A.hc(1,"translate")),2&e&&A.Mc(" ",A.ic(1,1,"KIND")," ")}function wt(e,t){if(1&e){var i=A.Tb();A.Sb(0,"ejs-dropdownlist",36,37),A.cc("ngModelChange",function(e){return t.$implicit.kindName=e})("select",function(e){return A.Bc(i),A.gc(2).onChangeKindEdit(e)}),A.Rb()}if(2&e){var n=t.$implicit,a=A.gc(2);A.mc("dataSource",a.kinds)("ngModel",n.kindName)("fields",a.fieldsKindEdit)("allowFiltering",!0)}}function kt(e,t){1&e&&(A.Kc(0),A.hc(1,"translate")),2&e&&A.Mc(" ",A.ic(1,1,"PART")," ")}function Pt(e,t){if(1&e){var i=A.Tb();A.Sb(0,"ejs-dropdownlist",38,37),A.cc("ngModelChange",function(e){return t.$implicit.partName=e})("select",function(e){return A.Bc(i),A.gc(2).onChangePartEdit(e)}),A.Rb()}if(2&e){var n=t.$implicit,a=A.gc(2);A.mc("dataSource",a.parts)("ngModel",n.partName)("fields",a.fieldsPartEdit)("allowFiltering",!0)}}function xt(e,t){1&e&&(A.Kc(0),A.hc(1,"translate")),2&e&&A.Mc(" ",A.ic(1,1,"MATERIAL")," ")}function Rt(e,t){if(1&e){var i=A.Tb();A.Sb(0,"ejs-dropdownlist",38,37),A.cc("ngModelChange",function(e){return t.$implicit.materialName=e})("select",function(e){return A.Bc(i),A.gc(2).onChangeMaterialEdit(e)}),A.Rb()}if(2&e){var n=t.$implicit,a=A.gc(2);A.mc("dataSource",a.materials)("ngModel",n.materialName)("fields",a.fieldsMaterialEdit)("allowFiltering",!0)}}function At(e,t){if(1&e){var i=A.Tb();A.Sb(0,"div",23),A.Sb(1,"ejs-grid",24,25),A.cc("rowDeselected",function(e){return A.Bc(i),A.gc().rowDeselected(e)})("actionBegin",function(e){return A.Bc(i),A.gc().actionBeginGlue(e)})("rowSelected",function(e){return A.Bc(i),A.gc().rowSelected(e)})("created",function(){return A.Bc(i),A.gc().onCreatedGridGlue()})("toolbarClick",function(e){return A.Bc(i),A.gc().toolbarClick(e)})("dataBound",function(){return A.Bc(i),A.gc().dataBoundGlue()}),A.Sb(3,"e-columns"),A.Sb(4,"e-column",26),A.Ic(5,St,2,3,"ng-template",null,27,A.Jc),A.Ic(7,Dt,2,2,"ng-template",null,28,A.Jc),A.Rb(),A.Sb(9,"e-column",29),A.Ic(10,yt,2,3,"ng-template",null,27,A.Jc),A.Ic(12,Nt,2,3,"ng-template",null,28,A.Jc),A.Rb(),A.Sb(14,"e-column",30),A.Ic(15,Ct,2,3,"ng-template",null,27,A.Jc),A.Rb(),A.Sb(17,"e-column",31),A.Ic(18,Bt,2,3,"ng-template",null,27,A.Jc),A.Ic(20,wt,2,4,"ng-template",null,32,A.Jc),A.Rb(),A.Sb(22,"e-column",33),A.Ic(23,kt,2,3,"ng-template",null,27,A.Jc),A.Ic(25,Pt,2,4,"ng-template",null,32,A.Jc),A.Rb(),A.Sb(27,"e-column",34),A.Ic(28,xt,2,3,"ng-template",null,27,A.Jc),A.Ic(30,Rt,2,4,"ng-template",null,32,A.Jc),A.Rb(),A.Rb(),A.Rb(),A.Rb()}if(2&e){var n=A.gc();A.zb(1),A.mc("dataSource",n.glues)("editSettings",n.editSettings)("toolbar",n.toolbar)("allowSorting",!0)("selectedRowIndex",n.rowIndex)}}function Mt(e,t){if(1&e){var i=A.Tb();A.Sb(0,"ejs-switch",45,46),A.cc("click",function(){return A.Bc(i),A.gc(2).done()})("ngModelChange",function(e){return A.Bc(i),A.gc(2).createdStatus=e}),A.hc(2,"translate"),A.hc(3,"translate"),A.Rb()}if(2&e){var n=A.gc(2);A.nc("onLabel",A.ic(2,5,"DONE")),A.nc("offLabel",A.ic(3,7,"UNDONE")),A.mc("disabled",n.approvalStatus)("ngModel",n.createdStatus)("checked",n.createdStatus)}}function Ft(e,t){if(1&e){var i=A.Tb();A.Sb(0,"ejs-switch",48),A.cc("click",function(){return A.Bc(i),A.gc(3).approval()})("ngModelChange",function(e){return A.Bc(i),A.gc(3).approvalStatus=e}),A.hc(1,"translate"),A.Rb()}if(2&e){var n=A.gc(3);A.nc("offLabel",A.ic(1,3,"NOT_APPROVED")),A.mc("ngModel",n.approvalStatus)("checked",n.approvalStatus)}}function Tt(e,t){if(1&e&&(A.Qb(0),A.Ic(1,Ft,2,5,"ejs-switch",47),A.Pb()),2&e){var i=A.gc(2);A.zb(1),A.mc("ngIf",i.modelNameID>0)}}function Gt(e,t){if(1&e){var i=A.Tb();A.Sb(0,"button",49),A.cc("click",function(){return A.Bc(i),A.gc(2).finished()}),A.Nb(1,"i",50),A.Kc(2),A.hc(3,"translate"),A.Rb()}2&e&&(A.zb(2),A.Mc(" ",A.ic(3,1,"FINISHED")," "))}function Et(e,t){if(1&e){var i=A.Tb();A.Sb(0,"button",51),A.cc("click",function(){A.Bc(i);var e=A.gc(2),t=A.yc(46);return e.openModalHistory(t)}),A.Nb(1,"i",52),A.Kc(2," History"),A.Rb()}}function Ot(e,t){if(1&e&&(A.Sb(0,"div",39),A.Sb(1,"button",40),A.Nb(2,"i",41),A.Kc(3," Reset "),A.Rb(),A.Ic(4,Mt,4,9,"ejs-switch",42),A.Ic(5,Tt,2,1,"ng-container",9),A.Ic(6,Gt,4,3,"button",43),A.Ic(7,Et,3,0,"button",44),A.Rb()),2&e){var i=A.gc();A.zb(4),A.mc("ngIf",i.modelNameID>0),A.zb(1),A.mc("ngIf",3!==i.level&&4!==i.level),A.zb(1),A.mc("ngIf",i.modelNameID>0),A.zb(1),A.mc("ngIf",i.modelNameID>0)}}function Kt(e,t){if(1&e&&(A.Sb(0,"li",69),A.Sb(1,"a"),A.Kc(2),A.Sb(3,"span",70),A.Kc(4),A.Rb(),A.Rb(),A.Rb()),2&e){var i=t.$implicit;A.zb(2),A.Nc(" ",i.position,". ",i.ingredientName," "),A.zb(2),A.Mc("(",i.percentage,"%)")}}function Ut(e,t){if(1&e&&(A.Sb(0,"ul"),A.Sb(1,"span",66),A.Kc(2),A.Rb(),A.Sb(3,"li",67),A.Kc(4),A.Sb(5,"ul"),A.Ic(6,Kt,5,3,"li",68),A.Rb(),A.Rb(),A.Rb()),2&e){var i=A.gc(2);A.zb(2),A.Lc(i.formulaTamp()),A.zb(2),A.Mc(" ",i.formula()," "),A.zb(2),A.mc("ngForOf",i.renderchemical())}}function Lt(e,t){if(1&e){var i=A.Tb();A.Sb(0,"button",71),A.cc("click",function(){A.Bc(i);var e=t.$implicit;return A.gc(2).sortBySup(e.id)}),A.Nb(1,"i",72),A.Kc(2),A.Rb()}if(2&e){var n=t.$implicit;A.zb(2),A.Mc(" ",n.name," ")}}function zt(e,t){1&e&&(A.Kc(0),A.hc(1,"translate")),2&e&&A.Mc(" ",A.ic(1,1,"ITEM")," ")}function Jt(e,t){if(1&e){var i=A.Tb();A.Sb(0,"ejs-dropdownlist",73,74),A.cc("change",function(e){A.Bc(i);var n=t.$implicit;return A.gc(2).onChangePosition(e,n,n.index)}),A.Rb()}if(2&e){var n=t.$implicit,a=A.gc(2);A.mc("dataSource",a.dataPosition)("value",n.position)("fields",a.fieldsPosition)("allowFiltering",!0)}}function jt(e,t){if(1&e){var i=A.Tb();A.Sb(0,"ejs-dropdownlist",73,74),A.cc("change",function(e){A.Bc(i);var n=t.$implicit;return A.gc(2).onChangePosition(e,n,n.index)}),A.Rb()}if(2&e){var n=t.$implicit,a=A.gc(2);A.mc("dataSource",a.dataPosition)("value",n.position)("fields",a.fieldsPosition)("allowFiltering",!0)}}function $t(e,t){1&e&&(A.Kc(0),A.hc(1,"translate")),2&e&&A.Mc(" ",A.ic(1,1,"INGREDIENT_NAME")," ")}function Ht(e,t){1&e&&A.Kc(0),2&e&&A.Mc(" ",t.$implicit.name," ")}function _t(e,t){1&e&&A.Kc(0),2&e&&A.Mc(" ",t.$implicit.name," ")}function qt(e,t){if(1&e&&(A.Sb(0,"div"),A.Kc(1),A.Rb()),2&e){var i=t.$implicit,n=A.gc(2);A.Bb(n.changePercentageColor(i)),A.zb(1),A.Lc(i.percentage)}}function Qt(e,t){1&e&&(A.Sb(0,"div"),A.Nb(1,"i",75),A.Rb())}function Vt(e,t){if(1&e&&(A.Sb(0,"div"),A.Kc(1),A.Rb()),2&e){var i=t.$implicit,n=A.gc(2);A.Bb(n.changeAllowColor(i)),A.zb(1),A.Mc("\xb1 ",i.allow,"")}}function Yt(e,t){1&e&&(A.Kc(0),A.hc(1,"translate")),2&e&&A.Mc(" ",A.ic(1,1,"ITEM")," ")}function Xt(e,t){if(1&e){var i=A.Tb();A.Sb(0,"ejs-dropdownlist",73,74),A.cc("change",function(e){A.Bc(i);var n=t.$implicit;return A.gc(2).onChangePosition(e,n,n.index)}),A.Rb()}if(2&e){var n=t.$implicit,a=A.gc(2);A.mc("dataSource",a.dataPosition)("value",n.position)("fields",a.fieldsPosition)("allowFiltering",!0)}}function Wt(e,t){if(1&e){var i=A.Tb();A.Sb(0,"ejs-dropdownlist",73,74),A.cc("change",function(e){A.Bc(i);var n=t.$implicit;return A.gc(2).onChangePosition(e,n,n.index)}),A.Rb()}if(2&e){var n=t.$implicit,a=A.gc(2);A.mc("dataSource",a.dataPosition)("value",n.position)("fields",a.fieldsPosition)("allowFiltering",!0)}}function Zt(e,t){1&e&&(A.Kc(0),A.hc(1,"translate")),2&e&&A.Mc(" ",A.ic(1,1,"INGREDIENT_NAME")," ")}function ei(e,t){1&e&&A.Kc(0),2&e&&A.Mc(" ",t.$implicit.name," ")}function ti(e,t){1&e&&A.Kc(0),2&e&&A.Mc(" ",t.$implicit.name," ")}function ii(e,t){1&e&&(A.Sb(0,"div"),A.Nb(1,"i",75),A.Rb())}function ni(e,t){if(1&e&&(A.Sb(0,"div"),A.Kc(1),A.Rb()),2&e){var i=t.$implicit,n=A.gc(2);A.Bb(n.changeAllowColor(i)),A.zb(1),A.Mc("\xb1 ",i.allow,"")}}function ai(e,t){if(1&e){var i=A.Tb();A.Sb(0,"div",53),A.Ic(1,Ut,7,3,"ul",9),A.Sb(2,"div",0),A.Sb(3,"div",54),A.Sb(4,"button",55),A.cc("click",function(){return A.Bc(i),A.gc().sortBySup(0)}),A.Kc(5),A.hc(6,"translate"),A.Rb(),A.Ic(7,Lt,3,1,"button",56),A.Rb(),A.Rb(),A.Sb(8,"div",0),A.Sb(9,"div",57),A.Sb(10,"div",10),A.Sb(11,"div",23),A.Sb(12,"ejs-grid",58,59),A.cc("actionComplete",function(e){return A.Bc(i),A.gc().actionCompleteIngredient(e)})("recordDoubleClick",function(e){return A.Bc(i),A.gc().onDoubleClickIngredient(e)})("actionBegin",function(e){return A.Bc(i),A.gc().actionBeginIngredient(e)})("toolbarClick",function(e){return A.Bc(i),A.gc().toolbarClickIngredient(e)})("rowSelected",function(e){return A.Bc(i),A.gc().rowSelectedIngredient(e)}),A.Sb(14,"e-columns"),A.Sb(15,"e-column",60),A.Ic(16,zt,2,3,"ng-template",null,27,A.Jc),A.Ic(18,Jt,2,4,"ng-template",null,28,A.Jc),A.Ic(20,jt,2,4,"ng-template",null,32,A.Jc),A.Rb(),A.Sb(22,"e-column",61),A.Ic(23,$t,2,3,"ng-template",null,27,A.Jc),A.Ic(25,Ht,1,1,"ng-template",null,32,A.Jc),A.Ic(27,_t,1,1,"ng-template",null,28,A.Jc),A.Rb(),A.Sb(29,"e-column",62),A.Ic(30,qt,2,3,"ng-template",null,28,A.Jc),A.Rb(),A.Sb(32,"e-column",63),A.Ic(33,Qt,2,0,"ng-template",null,27,A.Jc),A.Ic(35,Vt,2,3,"ng-template",null,28,A.Jc),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Sb(37,"div",57),A.Sb(38,"div",10),A.Sb(39,"div",23),A.Sb(40,"ejs-grid",64,65),A.cc("actionComplete",function(e){return A.Bc(i),A.gc().actionCompleteIngredient(e)})("recordDoubleClick",function(e){return A.Bc(i),A.gc().onDoubleClickIngredient(e)})("actionBegin",function(e){return A.Bc(i),A.gc().actionBeginIngredient(e)})("toolbarClick",function(e){return A.Bc(i),A.gc().toolbarClickIngredient(e)})("rowSelected",function(e){return A.Bc(i),A.gc().rowSelectedIngredient(e)}),A.Sb(42,"e-columns"),A.Sb(43,"e-column",60),A.Ic(44,Yt,2,3,"ng-template",null,27,A.Jc),A.Ic(46,Xt,2,4,"ng-template",null,28,A.Jc),A.Ic(48,Wt,2,4,"ng-template",null,32,A.Jc),A.Rb(),A.Sb(50,"e-column",61),A.Ic(51,Zt,2,3,"ng-template",null,27,A.Jc),A.Ic(53,ei,1,1,"ng-template",null,32,A.Jc),A.Ic(55,ti,1,1,"ng-template",null,28,A.Jc),A.Rb(),A.Nb(57,"e-column",62),A.Sb(58,"e-column",63),A.Ic(59,ii,2,0,"ng-template",null,27,A.Jc),A.Ic(61,ni,2,3,"ng-template",null,28,A.Jc),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Rb()}if(2&e){var n=A.gc();A.zb(1),A.mc("ngIf",n.renderchemical().length>0),A.zb(4),A.Mc(" ",A.ic(6,12,"DEFAULT")," "),A.zb(2),A.mc("ngForOf",n.supplier),A.zb(5),A.mc("dataSource",n.ingredients1)("allowSorting",!0)("allowSorting",!0)("editSettings",n.editSettings)("toolbar",n.toolbarOptions2),A.zb(28),A.mc("dataSource",n.ingredients2)("allowSorting",!0)("editSettings",n.editSettings)("toolbar",n.toolbarOptions2)}}function li(e,t){if(1&e){var i=A.Tb();A.Sb(0,"div",76),A.Sb(1,"h4",77),A.Nb(2,"i",78),A.Kc(3," Clone Article "),A.Rb(),A.Sb(4,"button",79),A.cc("click",function(){return t.$implicit.dismiss("Cross click")}),A.Sb(5,"span",80),A.Kc(6,"\xd7"),A.Rb(),A.Rb(),A.Rb(),A.Sb(7,"div",81),A.Sb(8,"div",0),A.Sb(9,"div",82),A.Sb(10,"div",83),A.Sb(11,"label",84),A.Kc(12,"Article Name"),A.Rb(),A.Sb(13,"span",85),A.Kc(14,"(*)"),A.Rb(),A.Sb(15,"input",86),A.cc("ngModelChange",function(e){return A.Bc(i),A.gc().articleName=e}),A.Rb(),A.Rb(),A.Rb(),A.Sb(16,"div",82),A.Sb(17,"div",83),A.Sb(18,"label",84),A.Kc(19,"Process"),A.Rb(),A.Sb(20,"ejs-dropdownlist",87,88),A.cc("change",function(e){return A.Bc(i),A.gc().onChangeProcessCloneModal(e)}),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Sb(22,"div",89),A.Sb(23,"button",90),A.cc("click",function(){return t.$implicit.close("Close click")}),A.Kc(24,"Close"),A.Rb(),A.Sb(25,"button",91),A.cc("click",function(){return A.Bc(i),A.gc().cloneArticleModelname()}),A.Kc(26,"Clone"),A.Rb(),A.Rb()}if(2&e){var n=A.gc();A.zb(15),A.mc("ngModel",n.articleName),A.zb(5),A.mc("value",n.valueProcess)("dataSource",n.processData)("allowFiltering",!0)("fields",n.processfields)}}function oi(e,t){1&e&&(A.Kc(0),A.hc(1,"date")),2&e&&A.Mc(" ",A.jc(1,1,t.$implicit.createdTime,"yyyy-MM-dd , hh:mm:ss a")," ")}function ri(e,t){if(1&e&&(A.Qb(0),A.Nb(1,"input",104),A.Pb()),2&e){var i=A.gc().$implicit;A.zb(1),A.mc("value",i.remark)}}function ci(e,t){if(1&e&&A.Nb(0,"input",105),2&e){var i=A.gc().$implicit;A.mc("value",i.remark)}}function si(e,t){if(1&e&&(A.Sb(0,"span",101),A.Ic(1,ri,2,1,"ng-container",102),A.Ic(2,ci,1,1,"ng-template",null,103,A.Jc),A.Rb()),2&e){var i=t.$implicit,n=A.yc(3);A.mc("ngClass","Improve"==i.action?"e-input-group e-control-wrapper e-valid-input":"e-input-group e-control-wrapper e-valid-input e-disabled"),A.zb(1),A.mc("ngIf","Improve"==i.action)("ngIfElse",n)}}function di(e,t){if(1&e){var i=A.Tb();A.Sb(0,"div",76),A.Sb(1,"h4",77),A.Nb(2,"i",78),A.Kc(3," BPFC History "),A.Rb(),A.Sb(4,"button",79),A.cc("click",function(){return t.$implicit.dismiss("Cross click")}),A.Sb(5,"span",80),A.Kc(6,"\xd7"),A.Rb(),A.Rb(),A.Rb(),A.Sb(7,"div",81),A.Sb(8,"ejs-grid",92,93),A.cc("actionBegin",function(e){return A.Bc(i),A.gc().actionBeginHistory(e)}),A.Sb(10,"e-columns"),A.Sb(11,"e-column",94),A.Ic(12,oi,2,4,"ng-template",null,28,A.Jc),A.Rb(),A.Nb(14,"e-column",95),A.Nb(15,"e-column",96),A.Nb(16,"e-column",97),A.Sb(17,"e-column",98),A.Ic(18,si,4,3,"ng-template",null,32,A.Jc),A.Rb(),A.Nb(20,"e-column",99),A.Rb(),A.Rb(),A.Rb(),A.Sb(21,"div",89),A.Sb(22,"button",100),A.cc("click",function(){return t.$implicit.close("Close click")}),A.Kc(23,"Close"),A.Rb(),A.Rb()}if(2&e){var n=A.gc();A.zb(8),A.mc("dataSource",n.historyData)("allowSorting",!0)("allowSorting",!0)("editSettings",n.editSettingsHis)("toolbar",n.toolbarOptionsHistory),A.zb(9),A.mc("edit",n.editparamsHis)}}function ui(e,t){if(1&e){var i=A.Tb();A.Sb(0,"div",76),A.Sb(1,"h4",77),A.Nb(2,"i",78),A.Kc(3," Clone BPFC "),A.Rb(),A.Sb(4,"button",79),A.cc("click",function(){return t.$implicit.dismiss("Cross click")}),A.Sb(5,"span",80),A.Kc(6,"\xd7"),A.Rb(),A.Rb(),A.Rb(),A.Sb(7,"div",81),A.Sb(8,"div",0),A.Sb(9,"div",82),A.Sb(10,"div",83),A.Sb(11,"label",84),A.Kc(12,"Model Name"),A.Rb(),A.Sb(13,"span",85),A.Kc(14,"(*)"),A.Rb(),A.Nb(15,"input",6),A.Rb(),A.Rb(),A.Sb(16,"div",82),A.Sb(17,"div",83),A.Sb(18,"label",84),A.Kc(19,"Model NO"),A.Rb(),A.Sb(20,"span",85),A.Kc(21,"(*)"),A.Rb(),A.Nb(22,"input",6),A.Rb(),A.Rb(),A.Sb(23,"div",82),A.Sb(24,"div",83),A.Sb(25,"label",84),A.Kc(26,"Article NO"),A.Rb(),A.Sb(27,"span",85),A.Kc(28,"(*)"),A.Rb(),A.Sb(29,"input",106),A.cc("ngModelChange",function(e){return A.Bc(i),A.gc().articleNoNewLeo=e}),A.Rb(),A.Rb(),A.Rb(),A.Sb(30,"div",82),A.Sb(31,"div",83),A.Sb(32,"label",84),A.Kc(33,"Process"),A.Rb(),A.Sb(34,"span",85),A.Kc(35,"(*)"),A.Rb(),A.Nb(36,"input",6),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Sb(37,"div",89),A.Sb(38,"button",90),A.cc("click",function(){return t.$implicit.close("Close click")}),A.Kc(39,"Close"),A.Rb(),A.Sb(40,"button",91),A.cc("click",function(){return A.Bc(i),A.gc().onClickClone()}),A.Kc(41,"Clone"),A.Rb(),A.Rb()}if(2&e){var n=A.gc();A.zb(15),A.mc("value",n.modelNameLeo),A.zb(7),A.mc("value",n.modelNoLeo),A.zb(7),A.mc("ngModel",n.articleNoNewLeo)("value",n.articleNoLeo),A.zb(7),A.mc("value",n.artProcessLeo)}}var gi,hi=((gi=function(){function t(e,n,a,l,o,r,c,s,d,u,g,h,m,b,f,p,v){var I=this;i(this,t),this.glueIngredientService=e,this.modalNameService=n,this.glueService=a,this.alertify=l,this.modalService=o,this.route=r,this.authService=c,this.bPFCEstablishService=s,this.modelNoService=d,this.articleNoService=u,this.kindService=g,this.partService=h,this.materialService=m,this.buildingUserService=b,this.artProcessService=f,this.ingredientService=p,this.dataService=v,this.positions=["B","C","D","E"],this.approvalStatus=!1,this.createdStatus=!1,this.role=JSON.parse(localStorage.getItem("user")).User.Role,this.isShow=!1,this.selectedRow=[],this.LANG=localStorage.getItem("lang")||"vi",this.glue={id:0,name:"",gluename:"",code:"",createdDate:"",partID:0,kindID:0,materialID:0,BPFCEstablishID:0,consumption:"",expiredTime:0,createdBy:0,glueNameID:0,glueIngredients:[]},this.ingredient={id:0,name:"",code:"",percentage:0,createdDate:new Date,supplierID:0,position:0,allow:0,voc:0,expiredTime:0,daysToExpiration:0,materialNO:"",unit:0,real:0,cbd:0},this.editPercentage={glueID:0,ingredientID:0,percentage:0},this.editAllow={glueID:0,ingredientID:0,allow:0},this.page=1,this.supplier=[],this.toolbarOptions=["Search","Delete"],this.toolbarOptions2=["Search","Add","Delete","Cancel"],this.toolbarOptionsHistory=["Search"],this.selectionOptions={type:"Multiple",mode:"Both"},this.editSettingsHis={allowEditing:!0,mode:"Normal",allowEditOnDblClick:!0},this.detailIngredient=[],this.totalPercentage=0,this.fieldsBPFCs={text:"name",value:"id"},this.fieldsBPFCss={text:"name",value:"id"},this.fieldsGlueChemical={text:"name",value:"name"},this.textGlue="Select Model Name",this.textModelName="Select Model Name - Model #",this.textGlueMaterial="Select ",this.fieldsGlue2={text:"name",value:"id"},this.articleNofields={text:"name",value:"id"},this.processfields={text:"name",value:"id"},this.processData=[{id:1,name:"ASY"},{id:2,name:"STF"}],this.valueProcess=1,this.textGlue2="Select Model No",this.existGlue=!1,this.editparamsHis={params:{format:"n"}},this.dataPosition=[{id:"0",name:""},{id:"1",name:"A"},{id:"2",name:"B"},{id:"3",name:"C"},{id:"4",name:"D"},{id:"5",name:"E"}],this.fieldsKindEdit={text:"name",value:"name"},this.fieldsPartEdit={text:"name",value:"name"},this.fieldsMaterialEdit={text:"name",value:"name"},this.fieldsGlueEdit={text:"name",value:"name"},this.fieldsChemical={text:"name",value:"name"},this.fieldsPosition={text:"name",value:"name"},this.rowIndex="",this.glueIngredient2={ingredientID:0,percentage:0,glueID:0,position:""},this.history={Action:"Created",BPFCEstablishID:0,GlueID:0,Before:"",BeforeAllow:"",After:"",AfterAllow:"",UserID:0,Remark:""},this.valuess="Badminton",this.modelNameSelect=!1,this.modelNoSelect=!1,this.modelArtSelect=!1,this.modelProcessSelect=!1,this.userData=[],this.modelNameLeo=null,this.modelNoLeo=null,this.articleNoLeo=null,this.articleNoNewLeo=null,this.artProcessLeo=null,this.modelNameIDLeo=0,this.modelNoIDLeo=0,this.articleNoIDLeo=0,this.artProcessIDLeo=0,this.BPFCIDLeo=0,this.textSearch=null,this.onFiltering=function(e){var t=new O.h;t=""!==e.text?t.where("name","contains",e.text,!0):t,e.updateData(I.modelNameData,t)},this.onFilteringModelName=function(e){var t=new O.h;t=""!==e.text?t.where("name","contains",e.text,!0):t,e.updateData(I.modelNameData,t)},this.onFilteringModelNO=function(e){var t=new O.h;t=""!==e.text?t.where("name","contains",e.text,!0):t,e.updateData(I.modelNoData,t)},this.onFilteringArticleNO=function(e){var t=new O.h;t=""!==e.text?t.where("name","contains",e.text,!0):t,e.updateData(I.articleNoData,t)},this.onFilteringModelNameClone=function(e){var t=new O.h;t=""!==e.text?t.where("name","contains",e.text,!0):t,e.updateData(I.modelNameData,t)},this.onFilteringModelNOClone=function(e){var t=new O.h;t=""!==e.text?t.where("name","contains",e.text,!0):t,e.updateData(I.modelNoData,t)},this.onFilteringArticleNOClone=function(e){var t=new O.h;t=""!==e.text?t.where("name","contains",e.text,!0):t,e.updateData(I.articleNoData,t)},this.onFilteringArtProcessClone=function(e){var t=new O.h;t=""!==e.text?t.where("name","contains",e.text,!0):t,e.updateData(I.artProcessDataClone,t)},this.dataSearch=this.dataService.currentMessage.subscribe(function(e){I.textSearch=e})}return a(t,[{key:"ngOnInit",value:function(){var e=this;this.getModelNames(),this.getAllUsers(),this.modelNameID=0,this.subID=0,this.selIndex=[],this.isAdd=!1,this.existGlue=!1,this.oldDetail=[],this.glueIngredientDetail=[],this.removeLocalStore("details"),this.glueid=0,this.onService(),this.getAllSupllier(),this.GetDetailBPFC(),this.sortOptions={columns:[{field:"item",direction:"Decending"}]},this.editParams={params:{value:""}},0===this.glue.id?(this.showBarCode=!1,this.genaratorGlueCode()):this.showBarCode=!0,this.ingredientService.currentIngredient.subscribe(function(t){200===t&&e.getIngredients()}),this.pageSettings={pageSize:12},this.paginationI={currentPage:1,itemsPerPage:10,totalItems:0,totalPages:0},this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"},this.toolbar=[{text:"Add New",tooltipText:"Add new row",prefixIcon:"e-add",id:"AddNew"},"Edit","Delete","Update","Cancel","Search"],this.orderidrules={required:!0,number:!0},this.customeridrules={required:!0},this.freightrules={required:!0},this.editparams={paramss:{popupHeight:"300px"}}}},{key:"ngOnDestroy",value:function(){this.dataService.changeMessages(this.textSearch),this.dataSearch.unsubscribe()}},{key:"GetDetailBPFC",value:function(){var e=this;this.BPFCID=this.route.snapshot.params.id,this.bPFCEstablishService.getDetailBPFC(this.BPFCID).subscribe(function(t){var i,n=t[0];e.BPFCIDLeo=n.id,e.modelNameLeo=n.modelName,e.modelNoLeo=n.modelNo,e.articleNoLeo=n.articleNo,e.artProcessLeo=n.artProcess,e.articleNoNewLeo=n.articleNo,e.modelNameID=n.modelNameID,e.modelNoID=n.modelNoID,e.articleNoID=n.articleNoID,e.artProcessIDLeo="ASY"===n.artProcess?1:2,e.modelNameDetail=t[0].modelName,e.modelNameID=t[0].modelNameID,e.modelNoDetail=t[0].modelNo,e.articleNoDetail=t[0].articleNo,e.artProcessDetail=t[0].artProcess,e.modelNameIDClone=t[0].modelNameID,e.value=t[0].modelNameID,e.valuemodelNo=t[0].modelNoID,e.articleNoID=t[0].articleNoID,e.resetLifeCycleBPFC(),e.BPFCID=null===(i=t[0])||void 0===i?void 0:i.id,e.approvalStatus=t[0].approvalStatus,e.createdStatus=t[0].finishedStatus,localStorage.removeItem("details"),e.glue.BPFCEstablishID=e.BPFCID,e.getAllGluesByBPFCID(e.BPFCID),e.getAllPart(),e.getAllKind(),e.getAllMaterial(),e.getAllIngredient(),e.existGlue=!0,e.modified=!0})}},{key:"onChangeProcessCloneModal",value:function(e){e.itemData&&(this.processID=e.itemData.id)}},{key:"resetLifeCycleBPFC",value:function(){this.selIndex=[],this.oldDetail=[],this.glueIngredientDetail=[],this.removeLocalStore("details"),this.removeLocalStore("detailsTamp"),this.ingredients1=[],this.ingredients2=[],this.glues=[],this.BPFCID=0}},{key:"onCreatedGridGlue",value:function(){}},{key:"ngAfterViewInit",value:function(){$('[data-toggle="tooltip"]').tooltip();var e=JSON.parse(localStorage.getItem("level"));this.level=e.id,this.getBuilding()}},{key:"onChangeKindEdit",value:function(e){this.kindEdit=e.value,this.kindID=e.itemData.id}},{key:"onChangePartEdit",value:function(e){this.partEdit=e.value,this.partID=e.itemData.id}},{key:"onChangeMaterialEdit",value:function(e){this.kindEdit=e.value,this.materialID=e.itemData.id}},{key:"dataBoundGlue",value:function(){this.gridglue.selectRows(this.selectedRow.length?this.selectedRow:this.selIndex)}},{key:"actionBeginGlue",value:function(e){var t=this;"beginEdit"===e.requestType&&(this.chemicalNameEdit=e.rowData.name,this.pathNameEdit=e.rowData.pathName,this.modelNoEdit=e.rowData.modelNo,this.materialNameEdit=e.rowData.materialName,this.glue.consumption=e.rowData.consumption,this.glue.kindID=e.rowData.kindID||null,this.glue.partID=e.rowData.partID||null,this.glue.materialID=e.rowData.materialID||null,this.glue.BPFCEstablishID=e.rowData.bpfcEstablishID,this.glue.name=e.rowData.name,this.glue.expiredTime=this.expiredTime,this.history.Before=""===e.rowData.consumption?"0":"Consumption "+e.rowData.consumption,this.detailGlue=!0),"save"===e.requestType&&(this.glue.id=e.rowData.id||0,this.glue.code=e.data.code||"",this.glue.consumption=e.data.consumption,this.glue.glueNameID=e.data.glueNameID,this.glue.kindID=this.kindID||null,this.glue.partID=this.partID||null,this.glue.materialID=this.materialID||null,this.glue.BPFCEstablishID=this.BPFCID,this.glue.name=this.chemicalNameEdit,this.glue.expiredTime=this.expiredTime,this.history.Action="Consumption",this.history.BPFCEstablishID=this.BPFCID,this.history.GlueID=this.glueid,this.history.After="Consumption "+e.data.consumption,this.history.UserID=JSON.parse(localStorage.getItem("user")).User.ID,this.glue.createdBy=JSON.parse(localStorage.getItem("user")).User.ID,this.bPFCEstablishService.AddHistoryBPFC(this.history).subscribe(function(){}),this.saveGlue()),"delete"===e.requestType&&0!==e.data[0].id&&(this.glueid=e.data[0].id,this.history.Action="Delete",this.history.Before=e.data[0].name,this.history.BPFCEstablishID=this.BPFCID,this.history.GlueID=e.data[0].id,this.history.UserID=JSON.parse(localStorage.getItem("user")).User.ID,this.bPFCEstablishService.AddHistoryBPFC(this.history).subscribe(function(){t.glueService.delete(e.data[0].id).subscribe(function(){t.getAllGluesByBPFCID(t.BPFCID),t.detailGlue=!1,t.removeLocalStore("details"),t.glueIngredientDetail=[],t.oldDetail=[],t.alertify.success("Glue has been deleted")},function(e){t.alertify.error("Failed to delete the Glue")})}))}},{key:"rowDeselected",value:function(e){var t=this,i=e.rowIndex,n=this.getLocalStore("details").sort(this.dynamicSort("position"));!1===this.compareArray(this.oldDetail,n)&&!0===e.isInteracted&&this.alertify.valid("C\u1ea3nh b\xe1o!","B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n b\u1ecf qua s\u1ef1 thay \u0111\u1ed5i n\xe0y kh\xf4ng?").then(function(e){if(t.modified=!0,t.gridglue.getSelectedRowIndexes().length){var n=t.gridglue.dataSource[i];n.name=n.chemical.name,t.gridglue.refresh()}}).catch(function(e){t.gridglue.selectRows([i])})}},{key:"rowSelected",value:function(e){e.data[0]&&(this.GlueNameDefault=e.data[0].name);var t=e.data[0]||e.data;this.selIndex=[e.rowIndex],!e.isInteracted&&e.previousRowIndex&&(this.selIndex=[e.previousRowIndex]),e.isInteracted&&void 0!==e.data.name&&this.modified&&this.loadPreview(Number(e.data.id)),!1!==e.isInteracted&&null===e.target||void 0!==t.name&&this.modified&&this.loadPreview(Number(t.id))}},{key:"onChangePosition",value:function(e,t,i){this.modified=!1,this.history.BeforeAllow=this.glueNewName;var n=e.value,a=this.getLocalStore("details");if(""===e.value);else{if(0!==a.length){var l="";switch(a[a.length-1].position){case"A":l="B";break;case"B":l="C";break;case"C":l="D";break;case"D":l="E"}if(n!==l)return this.alertify.warning("H\xe3y ch\u1ecdn ch\u1ea5t ti\u1ebfp theo l\xe0 "+l,!0),this.grid.refresh(),this.grid2.refresh(),void(e.cancel=!0)}if(0===a.filter(function(t){return t.position===e.value}).length&&null!==e.value)if(a=this.getLocalStore("details"),this.percentage=0,this.position=e.value,0!==a.filter(function(e){return e.ingredientName===t.name&&e.position===t.position}).length){var o=a.findIndex(function(e){return e.ingredientName===t.name});a[o].position=e.value,this.setLocalStore("details",a),this.glueIngredientDetail=this.getLocalStore("details"),this.makeFormula(),this.updateChemicalList(),this.grid.refresh()}else{a=this.getLocalStore("details");var r={id:0,glueID:this.glueid,ingredientID:t.id,glueName:"",ingredientName:t.name,percentage:this.percentage,position:e.value,createdDate:new Date,allow:0,expiredTime:t.expiredTime};"A"===e.value&&(r.percentage=100,r.expiredTime=t.expiredTime),a.push(r),this.setLocalStore("details",a),this.glueIngredientDetail=this.getLocalStore("details"),this.makeFormula(),this.updateChemicalList(),"A"===e.value&&this.grid.refresh()}}}},{key:"recordDoubleClick",value:function(e){this.modifiedGlue=!0}},{key:"toolbarClickIngredient",value:function(e){switch(e.item.text){case"Add":e.cancel=!0,this.openIngredientModalComponent()}}},{key:"onDoubleClickIngredient",value:function(e){this.setFocus=e.column}},{key:"rowSelectedIngredient",value:function(e){this.ingridientID=e.data.id}},{key:"genaratorGlueCode",value:function(){this.glue.code=this.makeid(8)}},{key:"makeid",value:function(e){for(var t="",i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",n=i.length,a=0;a<e;a++)t+=i.charAt(Math.floor(Math.random()*n));return t}},{key:"compareArray",value:function(e,t){return JSON.stringify(e)===JSON.stringify(t)}},{key:"setLocalStore",value:function(e,t){localStorage.removeItem(e);var i=JSON.stringify(t);localStorage.setItem(e,i)}},{key:"getLocalStore",value:function(e){return(JSON.parse(localStorage.getItem(e))||[]).sort(this.dynamicSort("position"))}},{key:"removeLocalStore",value:function(e){localStorage.removeItem(e)}},{key:"dynamicSort",value:function(e){var t=1;return"-"===e[0]&&(t=-1,e=e.substr(1)),function(i,n){return-1===t?n[e].localeCompare(i[e]):i[e].localeCompare(n[e])}}},{key:"checkColorCode",value:function(e){return!0===e.approvalStatus&&!0===e.finishedStatus}},{key:"checkDone",value:function(e){return!0===e.approvalStatus&&!0===e.finishedStatus?"Done":"Undone"}},{key:"checkStatus",value:function(e,t){return!0===e&&!0===t?"Done":"Undone"}},{key:"renderchemical",value:function(){return this.glueIngredientDetail=this.glueIngredientDetail||[],this.glueIngredientDetail.sort(this.dynamicSort("position"))}},{key:"makeFormula",value:function(){var e,t,i=this.getLocalStore("details").filter(function(e){return"A"===e.position})||[];this.nameGlue=(null===(e=i[0])||void 0===e?void 0:e.ingredientName)||"",this.nameGlues=(null===(t=i[0])||void 0===t?void 0:t.ingredientName)+"^"+this.glueIngredientDetail[0].allow+"%"||!1,this.A=i[0].ingredientName,this.glueIngredientDetail=this.renderchemical(),void 0===this.glueIngredientDetail[1]?this.B="":(this.B=this.glueIngredientDetail[1].percentage+"%"+this.glueIngredientDetail[1].ingredientName,this.BB=this.glueIngredientDetail[1].percentage+"%"+this.glueIngredientDetail[1].ingredientName+"^"+this.glueIngredientDetail[1].allow+"%"),void 0===this.glueIngredientDetail[2]?this.C="":(this.C=this.glueIngredientDetail[2].percentage+"%"+this.glueIngredientDetail[2].ingredientName,this.CC=this.glueIngredientDetail[2].percentage+"%"+this.glueIngredientDetail[2].ingredientName+"^"+this.glueIngredientDetail[2].allow+"%"),void 0===this.glueIngredientDetail[3]?this.D="":(this.D=this.glueIngredientDetail[3].percentage+"%"+this.glueIngredientDetail[3].ingredientName,this.DD=this.glueIngredientDetail[3].percentage+"%"+this.glueIngredientDetail[3].ingredientName+"^"+this.glueIngredientDetail[3].allow+"%"),void 0===this.glueIngredientDetail[4]?this.E="":(this.E=this.glueIngredientDetail[4].percentage+"%"+this.glueIngredientDetail[4].ingredientName,this.EE=this.glueIngredientDetail[4].percentage+"%"+this.glueIngredientDetail[4].ingredientName+"^"+this.glueIngredientDetail[4].allow+"%"),this.glueIngredientDetail.length>0?(this.percentageCount=this.glueIngredientDetail.map(function(e){return e.percentage}),this.percentageCountEdit=this.glueIngredientDetail.map(function(e){return e}),this.totalPercentage=this.percentageCount.reduce(function(e,t){return e+t},0)):(this.percentageCount=[],this.percentageCountEdit=[],this.totalPercentage=0);var n=this.gridglue.getSelectedRowIndexes()[0];this.gridglue.getSelectedRowIndexes().length&&(this.gridglue.getSelectedRecords(),this.gridglue.dataSource[n].name=this.formula(),this.gridglue.refresh())}},{key:"formula",value:function(){return this.B&&this.C&&this.D&&this.E?"{[ (".concat(this.nameGlue,"+ ").concat(this.B,") + ").concat(this.C," ] + ").concat(this.D,"}+ ").concat(this.E):this.B&&this.C&&this.D?"[(".concat(this.nameGlue," + ").concat(this.B,") + ").concat(this.C,"] + ").concat(this.D):this.B&&this.C?"(".concat(this.nameGlue," + ").concat(this.B,") + ").concat(this.C):this.B?"".concat(this.nameGlue," + ").concat(this.B):""+this.nameGlue}},{key:"formulaTamp",value:function(){return this.BB&&this.CC&&this.DD&&this.EE?(this.glueNewName="{[ (".concat(this.nameGlues,"+ ").concat(this.BB,") + ").concat(this.CC," ] + ").concat(this.DD,"}+ ").concat(this.EE),"{[ (".concat(this.nameGlues,"+ ").concat(this.BB,") + ").concat(this.CC," ] + ").concat(this.DD,"}+ ").concat(this.EE)):this.BB&&this.CC&&this.DD?(this.glueNewName="[(".concat(this.nameGlues," + ").concat(this.BB,") + ").concat(this.CC,"] + ").concat(this.DD),"[(".concat(this.nameGlues," + ").concat(this.BB,") + ").concat(this.CC,"] + ").concat(this.DD)):this.BB&&this.CC?(this.glueNewName="(".concat(this.nameGlues," + ").concat(this.BB,") + ").concat(this.CC),"(".concat(this.nameGlues," + ").concat(this.BB,") + ").concat(this.CC)):this.BB?(this.glueNewName="".concat(this.nameGlues," + ").concat(this.BB),"".concat(this.nameGlues," + ").concat(this.BB)):""+this.nameGlues}},{key:"getDetail",value:function(e){var t=this;this.glueIngredientService.getDetail(e).subscribe(function(e){var i,n,a,l;t.glueIngredientDetail=e.glueIngredients,t.setLocalStore("details",t.glueIngredientDetail),t.setLocalStore("detailsTamp",t.glueIngredientDetail),t.glueIngredientDetail=t.renderchemical(),t.oldDetail=t.renderchemical();var o=t.glueIngredientDetail.filter(function(e){return"A"===e.position})||[];t.nameGlue=(null===(i=o[0])||void 0===i?void 0:i.ingredientName)||"",t.nameGlues=(null===(n=o[0])||void 0===n?void 0:n.ingredientName)+"^"+(null===(a=t.glueIngredientDetail[0])||void 0===a?void 0:a.allow)+"%"||!1,t.A=(null===(l=o[0])||void 0===l?void 0:l.ingredientName)||"",void 0===t.glueIngredientDetail[1]?t.B="":(t.B=t.glueIngredientDetail[1].percentage+"%"+t.glueIngredientDetail[1].ingredientName,t.BB=t.glueIngredientDetail[1].percentage+"%"+t.glueIngredientDetail[1].ingredientName+"^"+t.glueIngredientDetail[1].allow+"%"),void 0===t.glueIngredientDetail[2]?t.C="":(t.C=t.glueIngredientDetail[2].percentage+"%"+t.glueIngredientDetail[2].ingredientName,t.CC=t.glueIngredientDetail[2].percentage+"%"+t.glueIngredientDetail[2].ingredientName+"^"+t.glueIngredientDetail[2].allow+"%"),void 0===t.glueIngredientDetail[3]?t.D="":(t.D=t.glueIngredientDetail[3].percentage+"%"+t.glueIngredientDetail[3].ingredientName,t.DD=t.glueIngredientDetail[3].percentage+"%"+t.glueIngredientDetail[3].ingredientName+"^"+t.glueIngredientDetail[3].allow+"%"),void 0===t.glueIngredientDetail[4]?t.E="":(t.E=t.glueIngredientDetail[4].percentage+"%"+t.glueIngredientDetail[4].ingredientName,t.EE=t.glueIngredientDetail[4].percentage+"%"+t.glueIngredientDetail[4].ingredientName+"^"+t.glueIngredientDetail[4].allow+"%"),t.glueIngredientDetail.length>0?(t.percentageCount=t.glueIngredientDetail.map(function(e){return e.percentage}),t.percentageCount.join("+"),t.percentageCountEdit=t.glueIngredientDetail.map(function(e){return e}),t.totalPercentage=t.percentageCount.reduce(function(e,t){return e+t},0)):(t.percentageCount=[],t.percentageCountEdit=[],t.totalPercentage=0)})}},{key:"updateChemicalList",value:function(){var t,i=this,n=this.getLocalStore("details"),a=e(n);try{var l=function(){var e=t.value,n=i.ingredients1.findIndex(function(t){return t.name===e.ingredientName&&t.id===e.ingredientID});-1!==n&&(i.ingredients1[n].position=e.position,i.ingredients1[n].percentage=e.percentage,i.ingredients1[n].allow=e.allow)};for(a.s();!(t=a.n()).done;)l()}catch(s){a.e(s)}finally{a.f()}var o,r=e(n);try{var c=function(){var e=o.value,t=i.ingredients2.findIndex(function(t){return t.name===e.ingredientName&&t.id===e.ingredientID});-1!==t&&(i.ingredients2[t].position=e.position,i.ingredients2[t].percentage=e.percentage,i.ingredients2[t].allow=e.allow)};for(r.s();!(o=r.n()).done;)c()}catch(s){r.e(s)}finally{r.f()}}},{key:"actionBeginIngredient",value:function(e){if("beginEdit"===e.requestType){if(null===e.rowData.position)return this.alertify.warning("H\xe3y ch\u1ecdn t\xean tr\u01b0\u1edbc khi ch\u1ec9nh s\u1eeda!",!0),void(e.cancel=!0);if("A"===e.rowData.position)return this.alertify.warning("Kh\xf4ng \u0111\u01b0\u1ee3c ch\u1ec9nh s\u1eeda ch\u1ea5t A!",!0),void(e.cancel=!0);this.editPercentage.glueID=this.glueid,this.editPercentage.ingredientID=e.rowData.id,this.percentageDefault=e.rowData.percentage,this.editAllow.glueID=this.glueid,this.history.BeforeAllow="",this.history.AfterAllow="",this.editAllow.ingredientID=e.rowData.id,this.allowDefault=e.rowData.allow||0}if("save"===e.requestType){this.percentageEdit={percentage:Number(e.data.percentage),id:Number(e.rowData.id)},this.allowEdit={allow:Number(e.data.allow),id:Number(e.rowData.id)},"edit"===e.action&&(this.allowChange=e.data.allow||0,this.percentageChange=e.data.percentage),this.editPercentage.percentage=e.data.percentage,this.editAllow.allow=e.data.allow;var t=Number(this.percentageDefault)!==Number(this.percentageChange),i=Number(this.allowDefault)!==Number(this.allowChange);if(t){this.modified=!1;var n=this.getLocalStore("details"),a=n.findIndex(function(t){return t.ingredientName===e.data.name&&t.ingredientID===e.data.id});n[a].percentage=e.data.percentage,this.setLocalStore("details",n),this.updateChemicals()}if(i){var l=this.getLocalStore("details"),o=l.findIndex(function(t){return t.ingredientName===e.data.name&&t.ingredientID===e.data.id});l[o].allow=e.data.allow,this.setLocalStore("details",l),this.modified=!1,this.history.BeforeAllow=this.glueNewName,this.updateChemicals()}}"delete"===e.requestType&&this.deleteIngredient()}},{key:"updateGlueIngredient",value:function(){}},{key:"loadPreview",value:function(e){this.glueid=Number(e),this.getIngredients(),this.getDetail(this.glueid),this.detailGlue=!0}},{key:"resolver",value:function(){var e=this;this.route.data.subscribe(function(t){e.glues=t.glues.result,e.paginationG=t.glues.pagination})}},{key:"onService",value:function(){var e=this;this.ingredientService.currentIngredient.subscribe(function(t){300===t&&(e.getIngredients(),e.updateChemicalList(),e.ingredientService.changeIngredient(0))})}},{key:"mapGlue",value:function(e){1==!e.status?(this.percentage=0,this.mapGlueIngredient({ingredientID:e.id,percentage:this.percentage,glueID:this.glueid})):this.delete(this.glueid,e.id)}},{key:"getIngredients",value:function(){var e=this;this.glueIngredientService.getIngredients(this.glueid).subscribe(function(t){e.ingredients1=t.result.list1,e.ingredients2=t.result.list2},function(t){e.alertify.error(t)})}},{key:"getGlues",value:function(){var e=this;this.glueService.getAllGlue().subscribe(function(t){e.glues=t},function(t){e.alertify.error(t)})}},{key:"mapGlueIngredients",value:function(e){var t=this;this.glueIngredientService.mapGlueIngredient(e).subscribe(function(e){void 0===t.subID?(t.sortBySup(0),t.getDetail(t.glueid)):(t.sortBySup(t.subID),t.getDetail(t.glueid))})}},{key:"mapGlueIngredient",value:function(e){var t=this;this.glueIngredientService.mappGlueIngredient(e).subscribe(function(e){void 0===t.subID?(t.getAllGluesByBPFCID(t.BPFCID),t.sortBySup(0),t.getDetail(t.glueid)):(t.sortBySup(t.subID),t.getDetail(t.glueid),t.getAllGluesByBPFCID(t.BPFCID))})}},{key:"openIngredientModalComponent",value:function(){var e=this.modalService.open(K.a,{size:"md"});e.componentInstance.ingredient=this.ingredient,e.componentInstance.title="Add Ingredient",e.result.then(function(e){},function(e){})}},{key:"actionCompleteIngredient",value:function(e){"beginEdit"===e.requestType&&"Item"!==this.setFocus.field&&(e.form.elements.namedItem(this.setFocus.field).focus(),e.form.elements.namedItem(this.setFocus.field).value="")}},{key:"openPopupDropdownlist",value:function(){$('[data-toggle="tooltip"]').tooltip()}},{key:"toolbarClick",value:function(e){var t=this;switch(e.item.text){case"Add New":var i=this.getLocalStore("details").sort(this.dynamicSort("position"));if(!1===this.compareArray(this.oldDetail,i)&&i.length>0&&this.oldDetail.length>0)this.alertify.valid("C\u1ea3nh b\xe1o!","B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n b\u1ecf qua nh\u1eefng thay \u0111\u1ed5i n\xe0y?").then(function(e){var i={id:0,name:"1",code:"",gluename:"",createdDate:"",BPFCEstablishID:t.BPFCID,kindID:null,partID:null,materialID:null,consumption:"",expiredTime:0,createdBy:JSON.parse(localStorage.getItem("user")).User.ID,glueNameID:0,glueIngredients:[]};t.glue=i,t.saveGlue()}).catch(function(t){e.cancel=!0});else{var n={id:0,name:"1",code:"",gluename:"",createdDate:"",BPFCEstablishID:this.BPFCID,kindID:null,partID:null,materialID:null,consumption:"",expiredTime:0,createdBy:JSON.parse(localStorage.getItem("user")).User.ID,glueNameID:0,glueIngredients:[]};this.glue=n,this.saveGlue()}}}},{key:"openModal",value:function(e){this.modalReference=this.modalService.open(e)}},{key:"openModalHistory",value:function(e){this.modalReference=this.modalService.open(e,{size:"xxl"}),this.LoadHistoryBPFC()}},{key:"LoadHistoryBPFC",value:function(){var e=this;this.bPFCEstablishService.LoadHistoryBPFC(this.BPFCID).subscribe(function(t){e.historyData=t.map(function(t){return{id:t.id,glueID:t.glueID,createdTime:t.createdTime,bpfcEstablishID:t.bpfcEstablishID,before:t.before,after:t.after,action:t.action,remark:t.remark,userID:t.userID,createdBy:e.createdBy(t.userID)}})})}},{key:"actionBeginHistory",value:function(e){var t=this;"save"===e.requestType&&this.bPFCEstablishService.UpdateHistoryBPFC({ID:e.data.id,Remark:e.data.remark}).subscribe(function(e){e&&t.alertify.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng!")})}},{key:"getAllUsers",value:function(){var e=this;this.buildingUserService.getAllUsers(1,1e3).subscribe(function(t){e.userData=t.result})}},{key:"createdBy",value:function(e){if(0===e)return"#N/A";var t=this.userData.filter(function(t){return t.ID===e})[0];return void 0!==t?t.Username:"#N/A"}},{key:"cloneModelname",value:function(){var e=this;this.alertify.confirm("Sao ch\xe9p model name!","B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n sao ch\xe9p model name kh\xf4ng?",function(){e.modalNameService.cloneModelname(e.modelNameID,e.modelNameClone,e.modelNoClone,e.valueProcess).subscribe(function(t){e.alertify.success("the model name has been cloned"),e.modalReference.close(),e.modelNameDropdownlist.hidePopup()})})}},{key:"cloneArticleModelname",value:function(){var e=this;this.alertify.confirm("Sao ch\xe9p article!","B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n sao ch\xe9p article kh\xf4ng?",function(){e.modalNameService.cloneArticleModelname(e.modelNameID,e.modelNameClone,e.modelNoClone,e.articleName,e.processID).subscribe(function(t){e.alertify.success("Sao ch\xe9p th\xe0nh c\xf4ng!"),e.modalReference.close(),e.modelNameDropdownlist.hidePopup()})})}},{key:"delete",value:function(e,t){var i=this;this.glueIngredientService.delete(e,t).subscribe(function(t){i.alertify.success("\u0110\xe3 x\xf3a th\xe0nh c\xf4ng!"),i.getIngredients(),i.getDetail(e)})}},{key:"deleteGlue",value:function(e){var t=this;this.alertify.confirm("X\xf3a keo",'B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a keo n\xe0y kh\xf4ng "'+e.id+'" ?',function(){t.glueService.delete(e.id).subscribe(function(){t.getGlues(),t.alertify.success("\u0110\xe3 x\xf3a th\xe0nh c\xf4ng!")},function(e){t.alertify.error("X\xf3a th\u1ea5t b\u1ea1i r\u1ed3i!")})})}},{key:"deleteIngridient",value:function(e){var t=this;this.alertify.confirm("X\xf3a ingredient",'B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a ingredient n\xe0y kh\xf4ng "'+e.id+'" ?',function(){t.ingredientService.delete(e.id).subscribe(function(){t.getIngredients(),t.alertify.success("\u0110\xe3 x\xf3a th\xe0nh c\xf4ng!")},function(e){t.alertify.error("X\xf3a th\u1ea5t b\u1ea1i r\u1ed3i!")})})}},{key:"getAllGluesByBPFCID",value:function(e){var t=this;this.glueService.getAllGluesByBPFCID(e).subscribe(function(e){t.glues=e})}},{key:"getAllGluesByBPFCID2",value:function(e){var t=this;this.glueService.getAllGluesByBPFCID(e).subscribe(function(e){void 0===t.ingredientID?(t.glues=e,e.length>0&&(t.detailGlue=!0)):(t.glueid=e[0].id,t.glueIngredient2.ingredientID=t.ingredientID,t.glueIngredient2.percentage=100,t.glueIngredient2.glueID=t.glueid,t.glueIngredient2.position="A",t.mapGlueIngredient(t.glueIngredient2))})}},{key:"updateChemicals",value:function(){var t=this;this.ingredientService.sortBySup(this.glueid,this.subID).subscribe(function(i){t.ingredients1=i.list1,t.ingredients2=i.list2;var n,a=t.getLocalStore("details"),l=e(a);try{var o=function(){var e=n.value,i=t.ingredients1.findIndex(function(t){return t.name===e.ingredientName&&t.id===e.ingredientID});-1!==i&&(t.ingredients1[i].position=e.position,t.ingredients1[i].percentage=e.percentage,t.ingredients1[i].allow=e.allow)};for(l.s();!(n=l.n()).done;)o()}catch(d){l.e(d)}finally{l.f()}var r,c=e(a);try{var s=function(){var e=r.value,i=t.ingredients2.findIndex(function(t){return t.name===e.ingredientName&&t.id===e.ingredientID});-1!==i&&(t.ingredients2[i].position=e.position,t.ingredients2[i].percentage=e.percentage,t.ingredients2[i].allow=e.allow)};for(c.s();!(r=c.n()).done;)s()}catch(d){c.e(d)}finally{c.f()}t.glueIngredientDetail=a,t.makeFormula()})}},{key:"sortBySup",value:function(e){var t=this;0===this.gridglue.getSelectedRowIndexes().length?this.alertify.warning("Please select a glue!",!0):(this.subID=e,this.ingredientService.sortBySup(this.glueid,e).subscribe(function(i){if(t.ingredients1=i.list1,t.ingredients2=i.list2,0===e){var n=t.getLocalStore("details");t.ingredients1=n.map(function(e){return{id:e.ingredientID,name:e.ingredientName,code:"",percentage:e.percentage,createdDate:e.createdDate,supplierID:0,allow:e.allow,position:e.position,expiredTime:e.expiredTime,daysToExpiration:e.daysToExpiration,voc:e.voc,materialNO:e.materialNO,unit:e.unit,real:e.real,cbd:e.cbd}}),t.glueIngredientDetail=n}else t.updateChemicalList()}))}},{key:"saveGlue",value:function(){0===this.glue.id||void 0===this.glue.id?(""===this.glue.code&&this.genaratorGlueCode(),this.createGlue()):this.onChangeChemical?this.updateChemical():this.update(),this.oldDetail=[],localStorage.removeItem("details"),this.glueIngredientDetail=[],this.gridglue.refresh(),this.selectedRow=[0],this.selIndex=[0],this.modified=!0}},{key:"getBuilding",value:function(){JSON.parse(localStorage.getItem("user"))}},{key:"getAllIngredient",value:function(){var e=this;this.ingredientService.getAllIngredient().subscribe(function(t){e.ingrediented=t})}},{key:"createGlue",value:function(){var e=this;this.glueService.create(this.glue).subscribe(function(){e.alertify.success("\u0110\xe3 t\u1ea1o th\xe0nh c\xf4ng!"),e.getAllGluesByBPFCID(e.BPFCID),e.clearGlueForm(),e.genaratorGlueCode(),e.expiredTime=0},function(t){e.alertify.error(t),e.genaratorGlueCode()})}},{key:"finished",value:function(){var e=this,t=JSON.parse(localStorage.getItem("user")).User.ID;if(0===this.gridglue.getSelectedRowIndexes().length)this.alertify.warning("H\xe3y ch\u1ecdn v\xe0o 1 glue v\xe0 t\u1ea1o c\xf4ng th\u1ee9c sau \u0111\xf3 m\u1edbi b\u1ea5m ho\xe0n th\xe0nh!",!0);else{this.history.BPFCEstablishID=this.BPFCID,this.history.GlueID=this.glueid,this.history.After=this.GlueNameDefault,this.history.AfterAllow=this.glueNewName,this.history.UserID=t,this.bPFCEstablishService.AddHistoryBPFC(this.history).subscribe(function(){});var i=this.getLocalStore("details"),n=this.gridglue.getSelectedRecords()[0];n.expiredTime=i.filter(function(e){return"A"===e.position})[0].expiredTime,n.kindID=0===n.kindID?null:n.kindID,n.partID=0===n.partID?null:n.partID,n.materialID=0===n.materialID?null:n.materialID,this.selectedRow=this.gridglue.getSelectedRowIndexes(),this.glueService.update(n).subscribe(function(t){e.alertify.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng!"),e.getAllGluesByBPFCID(e.BPFCID),e.detailGlue=!0,e.modified=!0}),i.length>0&&(this.mapGlueIngredients(i),this.modified=!0)}}},{key:"clearGlueForm",value:function(){this.glue.gluename="",this.glue.kindID=null,this.glue.partID=null,this.glue.materialID=null,this.glue.consumption="",this.showBarCode=!1}},{key:"update",value:function(){var e=this;this.glueService.update(this.glue).subscribe(function(t){e.alertify.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng!"),e.getAllGluesByBPFCID(e.BPFCID),e.detailGlue=!1,e.history.Action="Created",e.expiredTime=0})}},{key:"updateChemical",value:function(){var e=this;this.glueService.updateChemical(this.glue).subscribe(function(t){e.alertify.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng!"),e.getAllGluesByBPFCID(e.BPFCID),e.detailGlue=!1,e.onChangeChemical=!1,e.history.Action="Created"})}},{key:"deleteIngredient",value:function(){var e=this;this.ingredientService.delete(this.ingridientID).subscribe(function(){var t=e.getLocalStore("details").filter(function(t){return t.ingredientID!==e.ingridientID});e.setLocalStore("details",t),e.glueIngredientDetail=t,e.getIngredients(),e.makeFormula(),e.alertify.success("\u0110\xe3 x\xf3a th\xe0nh c\xf4ng!")},function(t){e.alertify.error("X\xf3a th\u1ea5t b\u1ea1i r\u1ed3i!")})}},{key:"approval",value:function(){var t=this,i=this.gridglue.dataSource;if(i){var n,a=e(i);try{for(a.s();!(n=a.n()).done;){var l=n.value;if(l.glueIngredients.length>0){var o,r=e(l.glueIngredients.filter(function(e){return"A"!==e.position}));try{for(r.s();!(o=r.n()).done;){var c=o.value;if(c.allow<=0&&"A"!==c.position)return this.approvalStatus=!this.approvalStatus,void this.alertify.warning("The allowance of checmical name ".concat(c.ingredient.name," must be greater than 0 <br>\n              M\u1ee9c cho ph\xe9p c\u1ee7a h\xf3a ch\u1ea5t ").concat(c.ingredient.name," ph\u1ea3i l\u1edbn h\u01a1n 0!<br>\n               <label>Glue Name: </label> ").concat(l.name," <br>\n              "),!0);if(c.percentage<=0&&"A"!==c.position)return this.approvalStatus=!this.approvalStatus,void this.alertify.warning("The percentage of checmical name ".concat(c.ingredient.name," must be greater than 0 <br>\n              Ph\u1ea7n tr\u0103m c\u1ee7a h\xf3a ch\u1ea5t ").concat(c.ingredient.name," ph\u1ea3i l\u1edbn h\u01a1n 0!<br>\n               <label>Glue Name: </label> ").concat(l.name," <br>\n              "),!0)}}catch(d){r.e(d)}finally{r.f()}}if(+l.consumption<=0)return this.approvalStatus=!this.approvalStatus,void this.alertify.warning("The consumption of glue name ".concat(l.name," must be greater than 0 <br>\n          M\u1ee9c ti\xeau th\u1ee5 c\u1ee7a keo ").concat(l.name," ph\u1ea3i l\u1edbn h\u01a1n 0! <br>\n          <label>Glue Name: </label> ").concat(l.name," <br>\n          "),!0)}}catch(d){a.e(d)}finally{a.f()}var s=JSON.parse(localStorage.getItem("user")).User.ID;this.bPFCEstablishService.approval(this.BPFCID,s).subscribe(function(e){t.alertify.success("The BPFC has been approved!"),t.createdStatus=t.approvalStatus;var i=t.modelNameDropdownlist.getDataByValue(t.modelNameDropdownlist.value);t.modelNameDropdownlist.valueTemplate="(".concat(t.checkStatus(t.approvalStatus,t.createdStatus),") ").concat(i.name)})}}},{key:"done",value:function(){var t=this,i=this.gridglue.dataSource,n=!1,a=!1,l=!1;if(i){var o,r=e(i);try{for(r.s();!(o=r.n()).done;){var c=o.value;if(c.glueIngredients.length>0){var s,d=c.glueIngredients.filter(function(e){return"A"!==e.position}),u=e(d);try{for(u.s();!(s=u.n()).done;){var g=s.value;if(g.allow<=0)return n=!1,this.createdStatus=!this.createdStatus,void this.alertify.warning("The allow of checmical name ".concat(g.ingredient.name," is greater than 0 <br>\n              M\u1ee9c cho ph\xe9p c\u1ee7a h\xf3a ch\u1ea5t ").concat(g.ingredient.name," ph\u1ea3i l\u1edbn h\u01a1n 0!<br>\n               <label>Glue Name: </label> ").concat(c.name," <br>\n              "),!0);if(g.percentage<=0)return a=!1,this.createdStatus=!this.createdStatus,void this.alertify.warning("The percentage of checmical name ".concat(g.ingredient.name," is greater than 0 <br>\n              Ph\u1ea7n tr\u0103m c\u1ee7a h\xf3a ch\u1ea5t ").concat(g.ingredient.name," ph\u1ea3i l\u1edbn h\u01a1n 0!<br>\n               <label>Glue Name: </label> ").concat(c.name," <br>\n              "),!0);n=!0,a=!0}}catch(m){u.e(m)}finally{u.f()}0===d.length&&(n=!0,a=!0)}if(+c.consumption<=0)return l=!1,this.createdStatus=!this.createdStatus,void this.alertify.warning("The consumption of glue name ".concat(c.name," is greater than 0 <br>\n          M\u1ee9c ti\xeau th\u1ee5 c\u1ee7a keo ").concat(c.name," ph\u1ea3i l\u1edbn h\u01a1n 0! <br>\n          <label>Glue Name: </label> ").concat(c.name," <br>\n          "),!0);l=!0}}catch(m){r.e(m)}finally{r.f()}if(n&&a&&l){var h=JSON.parse(localStorage.getItem("user")).User.ID;this.bPFCEstablishService.done(this.BPFCID,h).subscribe(function(e){!0===e.status?(t.alertify.success(e.message),t.createdStatus=t.createdStatus):t.alertify.success(e.message)})}}}},{key:"getModelNames",value:function(){var e=this;this.modalNameService.getAllModalName().subscribe(function(t){e.modelNameData=t.map(function(e){return{id:e.id,name:e.name}})})}},{key:"getArticleNoByModelNameID",value:function(e){var t=this;this.articleNoService.getArticleNoByModelNoID(e).subscribe(function(e){t.articleNoData=e})}},{key:"getModelNoByModelNameID",value:function(e){var t=this;this.modelNoService.getModelNoByModelNameID(e).subscribe(function(e){t.modelNoData=e})}},{key:"getArtProcessByArticleNoID",value:function(e){var t=this;this.artProcessService.getArtProcessByArticleNoID(e).subscribe(function(e){t.artProcessData=e.map(function(e){return{id:e.id,name:1===e.processID?"ASY":"STF"}})})}},{key:"getAllProcess",value:function(){var e=this;this.artProcessService.GetAllProcess().subscribe(function(t){e.artProcessDataClone2=t})}},{key:"getAllKind",value:function(){var e=this;this.kindService.getAllKind().subscribe(function(t){e.kinds=t})}},{key:"getAllPart",value:function(){var e=this;this.partService.getAllPart().subscribe(function(t){e.parts=t})}},{key:"getAllMaterial",value:function(){var e=this;this.materialService.getAllMaterial().subscribe(function(t){e.materials=t})}},{key:"getIngredientsByGlueID",value:function(){var e=this;this.ingredientService.getIngredientsByGlueID(this.glueid).subscribe(function(t){e.ingredients1=t.list1,e.ingredients2=t.list2})}},{key:"getAllSupllier",value:function(){var e=this;this.ingredientService.getAllSupplier().subscribe(function(t){e.supplier=t})}},{key:"getArticleNoByModelNoID",value:function(e){var t=this;this.articleNoService.getArticleNoByModelNoID(e).subscribe(function(e){t.articleNosData=e})}},{key:"getBPFCID",value:function(e){var t=this;this.bPFCEstablishService.getBPFCID(e).subscribe(function(e){t.resetLifeCycleBPFC(),t.BPFCID=null==e?void 0:e.id,t.approvalStatus=e.approvalStatus,t.createdStatus=e.finishedStatus,t.glue.BPFCEstablishID=t.BPFCID,t.getAllGluesByBPFCID(t.BPFCID),t.getAllPart(),t.getAllKind(),t.getAllMaterial(),t.getAllIngredient(),t.existGlue=!0,t.modified=!0})}},{key:"OndataBound",value:function(e){}},{key:"getModelNamesClone",value:function(){var e=this;this.modalNameService.getAllModalName().subscribe(function(t){e.modelNameDataClone=t.map(function(e){return{id:e.id,name:e.name}}),e.getModelNoByModelNameIDClone(e.modelNameIDClone),e.articleNosDataClone=[],e.artProcessDataClone=[]})}},{key:"getArticleNoByModelNameIDClone",value:function(e){var t=this;this.articleNoService.getArticleNoByModelNoID(e).subscribe(function(e){t.articleNosDataClone=e})}},{key:"getModelNoByModelNameIDClone",value:function(e){var t=this;this.modelNoService.getModelNoByModelNameID(e).subscribe(function(e){t.modelNOsDataClone=e}),this.getArticleNoByModelNameIDClone(this.valuemodelNo)}},{key:"getArtProcessByArticleNoIDClone",value:function(e){var t=this;this.artProcessService.getArtProcessByArticleNoID(e).subscribe(function(e){t.artProcessDataClone=e.map(function(e){return{id:e.id,name:1===e.ProcessID?"ASY":"STF"}})})}},{key:"onChangeModelName",value:function(e){this.resetLifeCycleBPFC(),this.modelNameID=e.value,this.getModelNoByModelNameID(this.modelNameID),this.existGlue=!1,this.modelNameIDClone=e.value,this.value=e.value,this.valuemodelNo=0,this.modified=!1,this.modelNoData=[],this.articleNosData=[],this.artProcessData=[],this.modelNameSelect=!0,this.modelNoSelect=!1,this.modelArtSelect=!1,this.modelProcessSelect=!1}},{key:"onChangeModelNo",value:function(e){e.isInteracted&&(this.modelNoID=e.value,this.valuemodelNo=e.value,this.getArticleNoByModelNoID(this.modelNoID),this.existGlue=!1,this.modified=!1,this.articleNosData=[],this.artProcessData=[],this.modelNoSelect=!0)}},{key:"onChangeArticleNo",value:function(e){e.isInteracted&&(this.articleNoID=e.value,this.getArtProcessByArticleNoID(this.articleNoID),this.existGlue=!1,this.modified=!1,this.modelArtSelect=!0,this.artProcessData=[])}},{key:"onClickProcess",value:function(e){this.modelProcessSelect=!0,e.target.defaultValue&&(this.artProcessID=Number(e.target.defaultValue))}},{key:"ClickProcessData",value:function(e){}},{key:"clearFormClone",value:function(){this.modelNameIDClone=this.value,this.modelNOIDClone=this.valuemodelNo,this.articleNOIDClone=0,this.artProcessIDClone=0,this.articleNosDataClone=[],this.artProcessDataClone=[],this.artProcessDataClone2=[]}},{key:"onClickClone",value:function(){var e={modelNameID:this.modelNameIDLeo,modelNOID:this.modelNoIDLeo,articleNOID:this.articleNoIDLeo,artProcessID:Number(this.artProcessIDLeo),bpfcID:this.BPFCIDLeo,name:this.articleNoNewLeo,cloneBy:JSON.parse(localStorage.getItem("user")).User.ID};this.clone(e)}},{key:"clone",value:function(e){var t=this;this.articleNoNewLeo!==this.articleNoLeo?this.modalNameService.cloneBPFC(e).subscribe(function(e){!0===e.status?(t.alertify.success("\u0110\xe3 sao ch\xe9p th\xe0nh c\xf4ng!"),t.modalService.dismissAll(),t.getAllUsers()):t.alertify.error("The BPFC exists!")}):this.alertify.error("The BPFC exists!")}},{key:"onChangeModelNameClone",value:function(e){this.value!==e.value&&(this.modelNOsDataClone=[],this.modelNameIDClone=e.value,this.getModelNoByModelNameIDClone(this.modelNameIDClone)),this.modelNameIDClone=e.value,this.getModelNoByModelNameIDClone(this.modelNameIDClone)}},{key:"onChangeModelNoClone",value:function(e){this.modelNOIDClone=e.value,null!==this.modelNOIDClone&&this.getArticleNoByModelNameIDClone(this.modelNOIDClone),this.articleNosDataClone=[],this.artProcessDataClone=[]}},{key:"onChangeArticleNoClone",value:function(e){e.isInteracted&&(this.articleNOIDClone=e.value,this.getArtProcessByArticleNoIDClone(this.articleNOIDClone))}},{key:"onChangeProcessClone",value:function(e){e.isInteracted&&(this.artProcessIDClone=e.value)}},{key:"changeAllowColor",value:function(e){return null===e.position?"":this.positions.includes(e.position)&&0===e.allow||this.positions.includes(e.position)&&null===e.allow?"font-weight-bold text-white p-2 rounded-circle warning-text":void 0}},{key:"changePercentageColor",value:function(e){return null===e.percentage?"":this.positions.includes(e.position)&&0===e.percentage?"font-weight-bold text-white p-2 rounded-circle warning-text":void 0}},{key:"changeConsumptionColor",value:function(e){return 0===e.glueIngredients.length?"":""===e.consumption?"font-weight-bold text-white p-2 rounded-circle warning-text":void 0}}]),t}()).\u0275fac=function(e){return new(e||gi)(A.Mb(q),A.Mb(M.a),A.Mb(Q.a),A.Mb(F.a),A.Mb(u.b),A.Mb(x.a),A.Mb(V.a),A.Mb(G.a),A.Mb(Y),A.Mb(X),A.Mb(W.a),A.Mb(Z.a),A.Mb(ee.a),A.Mb(T.a),A.Mb(te),A.Mb(ie.a),A.Mb(E.a))},gi.\u0275cmp=A.Gb({type:gi,selectors:[["app-bpfc-detail"]],viewQuery:function(e,t){var i;1&e&&(A.Qc(dt,!0),A.Qc(ut,!0),A.Qc(gt,!0),A.Qc(ht,!0),A.Qc(mt,!0),A.Qc(bt,!0),A.Qc(ft,!0),A.Qc(pt,!0)),2&e&&(A.xc(i=A.dc())&&(t.switch=i.first),A.xc(i=A.dc())&&(t.grid=i.first),A.xc(i=A.dc())&&(t.gridglue=i.first),A.xc(i=A.dc())&&(t.grid2=i.first),A.xc(i=A.dc())&&(t.modelNameDropdownlist=i.first),A.xc(i=A.dc())&&(t.modelNoDropdownlist=i.first),A.xc(i=A.dc())&&(t.chemicalDropdownlist=i.first),A.xc(i=A.dc())&&(t.positionDropdownlist=i))},features:[A.yb([y.n,y.f,y.k])],decls:49,vars:11,consts:[[1,"row"],[1,"col-md-5"],[1,"card"],[1,"col-md-12","card-body","table-responsive"],[1,"col-md-3","mt-2"],[1,"col-md-8","mt-2"],["type","text","name","","disabled","","title","",1,"form-control",3,"value"],[1,"col-md-1","mt-2"],["type","button",1,"btn","btn-danger","rounded-pill"],[4,"ngIf"],[1,"card-body","table-responsive","p-0"],["class","control-section",4,"ngIf"],[1,"col-md-7"],[1,"card-header"],[1,"card-title"],["class","card-tools",4,"ngIf"],["class","card-body",4,"ngIf"],["cloneArticleModal",""],["HistoryModal",""],["cloneModal",""],["style","display: block;","id","barcode","width","300px","height","100px","mode","SVG","type","Code32",3,"value",4,"ngIf"],["id","barcode","width","300px","height","100px","mode","SVG","type","Code32",2,"display","block",3,"value"],["barcode",""],[1,"control-section"],["height","250px","showColumnMenu","true","allowSorting","true","allowResizing","true","gridLines","Both",3,"dataSource","editSettings","toolbar","allowSorting","selectedRowIndex","rowDeselected","actionBegin","rowSelected","created","toolbarClick","dataBound"],["gridglue",""],["field","name","isPrimaryKey","true","headerText","Chemical","textAlign","Center","width","150"],["headerTemplate",""],["template",""],["field","consumption","headerText","Std. Con.(g)","textAlign","Center","width","150"],["field","expiredTime","headerText","Expired Time","isPrimaryKey","true","textAlign","Center","width","150"],["field","kindName","headerText","Kind","textAlign","Center","width","150"],["editTemplate",""],["field","partName","headerText","Part","textAlign","Center","width","150"],["field","materialName","headerText","Material","textAlign","Center","width","150"],["data-toggle","tooltip","data-placement","top",3,"title"],[3,"dataSource","ngModel","fields","allowFiltering","ngModelChange","select"],["glueDropdownlist",""],["popupHeight","200px","popupWidth","250px",3,"dataSource","ngModel","fields","allowFiltering","ngModelChange","select"],[1,"card-tools"],["type","button",1,"btn","btn-danger","btn-sm","mr-2","d-none"],[1,"fas","fa-undo"],["style","width: 100px; margin-right: 10px;",3,"onLabel","offLabel","disabled","ngModel","checked","click","ngModelChange",4,"ngIf"],["type","button","ejs-button","","cssClass","e-small e-success ml-2",3,"click",4,"ngIf"],["type","button","ejs-button","","cssClass","e-small e-default ml-2",3,"click",4,"ngIf"],[2,"width","100px","margin-right","10px",3,"onLabel","offLabel","disabled","ngModel","checked","click","ngModelChange"],["switch",""],["onLabel","Approved","style","width: 120px;",3,"offLabel","ngModel","checked","click","ngModelChange",4,"ngIf"],["onLabel","Approved",2,"width","120px",3,"offLabel","ngModel","checked","click","ngModelChange"],["type","button","ejs-button","","cssClass","e-small e-success ml-2",3,"click"],[1,"fas","fa-save"],["type","button","ejs-button","","cssClass","e-small e-default ml-2",3,"click"],[1,"fas","fa-history"],[1,"card-body"],[1,"col-lg-12","col-xs-12","col-12",2,"text-align","center"],["type","button",1,"btn","bg-gradient-secondary","btn-sm","rounded-pill",3,"click"],["type","button","style","margin: 3px","class","btn btn-info btn-sm rounded-pill",3,"click",4,"ngFor","ngForOf"],[1,"col-md-6"],["height","675px","gridLines","Both","showColumnMenu","true","allowSorting","true","allowResizing","true",3,"dataSource","allowSorting","editSettings","toolbar","actionComplete","recordDoubleClick","actionBegin","toolbarClick","rowSelected"],["grid",""],["field","Item","isPrimaryKey","true","headerText","Item","width","80","textAlign","Center"],["field","name","isPrimaryKey","true","headerText","Name","width","140","textAlign","Center"],["field","percentage","headerText","%","textAlign","Center","width","60"],["field","allow","headerText","Allow (%)","textAlign","Center","width","60"],["height","675px","showColumnMenu","true","allowSorting","true","allowResizing","true","gridLines","Both",3,"dataSource","allowSorting","editSettings","toolbar","actionComplete","recordDoubleClick","actionBegin","toolbarClick","rowSelected"],["grid2",""],[2,"visibility","hidden"],[2,"list-style-type","square","font-weight","bold"],["style","list-style: none;",4,"ngFor","ngForOf"],[2,"list-style","none"],[1,"font-weight-bold","text-danger"],["type","button",1,"btn","btn-info","btn-sm","rounded-pill",2,"margin","3px",3,"click"],[1,"fas","fa-cannabis"],[3,"dataSource","value","fields","allowFiltering","change"],["positionDropdownlist",""],[1,"fas","fa-exclamation-circle"],[1,"modal-header"],[1,"modal-title"],[1,"fas","fa-plus"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-md-12"],[1,"form-group"],["for","Name"],[2,"color","red"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["placeholder","Select a process",1,"w-100",3,"value","dataSource","allowFiltering","fields","change"],["processDropdownlist",""],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["type","submit",1,"btn","btn-primary",3,"click"],["height","675px","gridLines","Both","showColumnMenu","true","allowSorting","true","allowResizing","true",3,"dataSource","allowSorting","editSettings","toolbar","actionBegin"],["gridHistory",""],["field","createdTime","isPrimaryKey","true","headerText","Time","textAlign","Center"],["field","action","isPrimaryKey","true","headerText","Status","width","150","textAlign","Center"],["field","before","headerText","Before","width","450","isPrimaryKey","true","textAlign","Left"],["field","after","headerText","After","width","450","isPrimaryKey","true","textAlign","Left"],["field","remark","headerText","Remark","textAlign","Center",3,"edit"],["field","createdBy","headerText","Created By","isPrimaryKey","true","textAlign","Center"],["type","button",1,"btn","btn-primary",3,"click"],[3,"ngClass"],[4,"ngIf","ngIfElse"],["elseTemplate",""],["type","text","name","remark",1,"e-field","e-input","e-defaultcell",2,"text-align","Center",3,"value"],["disabled","disabled","type","text","name","remark",1,"e-field","e-input","e-defaultcell",2,"text-align","Center",3,"value"],["type","text","name","","title","",1,"form-control",3,"ngModel","value","ngModelChange"]],template:function(e,t){1&e&&(A.Sb(0,"div",0),A.Sb(1,"div",1),A.Sb(2,"div",2),A.Sb(3,"div",3),A.Sb(4,"div",0),A.Sb(5,"div",4),A.Sb(6,"label"),A.Kc(7,"Model Name: "),A.Rb(),A.Rb(),A.Sb(8,"div",5),A.Nb(9,"input",6),A.Rb(),A.Rb(),A.Sb(10,"div",0),A.Sb(11,"div",4),A.Sb(12,"label"),A.Kc(13,"Model NO: "),A.Rb(),A.Rb(),A.Sb(14,"div",5),A.Nb(15,"input",6),A.Rb(),A.Rb(),A.Sb(16,"div",0),A.Sb(17,"div",4),A.Sb(18,"label"),A.Kc(19,"Article NO: "),A.Rb(),A.Rb(),A.Sb(20,"div",5),A.Nb(21,"input",6),A.Rb(),A.Nb(22,"div",7),A.Rb(),A.Sb(23,"div",0),A.Sb(24,"div",4),A.Sb(25,"label"),A.Kc(26,"Process: "),A.Rb(),A.Rb(),A.Sb(27,"div",5),A.Sb(28,"button",8),A.Kc(29),A.Rb(),A.Rb(),A.Nb(30,"div",7),A.Rb(),A.Rb(),A.Rb(),A.Sb(31,"div",2),A.Ic(32,It,2,1,"div",9),A.Sb(33,"div",10),A.Ic(34,At,32,5,"div",11),A.Rb(),A.Rb(),A.Rb(),A.Sb(35,"div",12),A.Sb(36,"div",2),A.Sb(37,"div",13),A.Sb(38,"h3",14),A.Kc(39),A.hc(40,"translate"),A.Rb(),A.Ic(41,Ot,8,4,"div",15),A.Rb(),A.Ic(42,ai,63,14,"div",16),A.Rb(),A.Rb(),A.Ic(43,li,27,5,"ng-template",null,17,A.Jc),A.Ic(45,di,24,6,"ng-template",null,18,A.Jc),A.Rb(),A.Ic(47,ui,42,5,"ng-template",null,19,A.Jc)),2&e&&(A.zb(9),A.mc("value",t.modelNameDetail),A.zb(6),A.mc("value",t.modelNoDetail),A.zb(6),A.mc("value",t.articleNoDetail),A.zb(8),A.Lc(t.artProcessDetail),A.zb(3),A.mc("ngIf",t.existGlue),A.zb(2),A.mc("ngIf",t.existGlue),A.zb(5),A.Mc("",A.ic(40,9,"PREVIEW")," "),A.zb(2),A.mc("ngIf",t.existGlue),A.zb(1),A.mc("ngIf",t.existGlue))},directives:[o.n,g.b,y.j,h.d,B.d,B.b,y.e,y.b,h.c,B.c,B.a,y.d,y.a,d.c,r.g,r.j,m.i,m.b,o.m,r.b,o.l],pipes:[v.c,o.d],styles:[".e-grid[_ngcontent-%COMP%]   td.e-active[_ngcontent-%COMP%]{background:#6597ce!important;color:#000}.radiobutton-control[_ngcontent-%COMP%]{margin:5% 0 5% 40%}@media only screen and (max-width:500px){.radiobutton-control[_ngcontent-%COMP%]{margin-left:21%;margin-top:20%;margin-bottom:27%}}@media only screen and (max-width:700px){.checkbox-control[_ngcontent-%COMP%]{margin-left:35%;margin-top:8%}.control-section[_ngcontent-%COMP%]{min-height:200px}}.control-section[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin:20px 0}.radiobutton-control[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px}.e-bigger[_ngcontent-%COMP%]   .radiobutton-control[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:20px}.warning-text[_ngcontent-%COMP%]{-webkit-animation:warning-frames .5s infinite;animation:warning-frames .5s infinite;color:#000}@-webkit-keyframes warning-frames{0%{background-color:#d40a0a}to{background-color:#ff6565}}@keyframes warning-frames{0%{background-color:#d40a0a}to{background-color:#ff6565}}"]}),gi),mi=l("quSY"),bi=l("MAxt"),fi=["grid"],pi=["importModal"],vi=["tooltip"];function Ii(e,t){if(1&e&&A.Kc(0),2&e){var i=t.$implicit,n=A.gc();A.Lc(n.NO(i.index))}}function Si(e,t){if(1&e){var i=A.Tb();A.Sb(0,"ejs-tooltip",24,25),A.cc("beforeRender",function(e){A.Bc(i);var n=t.$implicit;return A.gc().onBeforeRender(e,n,n.index)}),A.Kc(2),A.Rb()}if(2&e){var n=t.$implicit;A.zb(2),A.Mc(" ",n.modelName," ")}}function Di(e,t){if(1&e&&(A.Kc(0),A.hc(1,"date")),2&e){var i=t.$implicit;A.Mc(" ","ASY"===i.artProcess?"N/A":A.jc(1,1,i.dueDate,"d MMM, yyyy")," ")}}function yi(e,t){if(1&e){var i=A.Tb();A.Sb(0,"div"),A.Sb(1,"ejs-datepicker",28),A.cc("change",function(e){return A.Bc(i),A.gc(2).onChangeDueDate(e)}),A.Rb(),A.Rb()}if(2&e){var n=A.gc().$implicit;A.zb(1),A.mc("value",n.dueDate)}}function Ni(e,t){if(1&e&&(A.Kc(0),A.hc(1,"date")),2&e){var i=A.gc().$implicit;A.Mc(" ","ASY"===i.artProcess?"N/A":A.jc(1,1,i.dueDate,"d MMM, yyyy")," ")}}function Ci(e,t){if(1&e&&(A.Ic(0,yi,2,1,"div",26),A.Ic(1,Ni,2,4,"ng-template",null,27,A.Jc)),2&e){var i=t.$implicit,n=A.yc(2);A.mc("ngIf","STF"===i.artProcess)("ngIfElse",n)}}function Bi(e,t){1&e&&(A.Sb(0,"span",35),A.Kc(1," | "),A.Rb())}function wi(e,t){if(1&e){var i=A.Tb();A.Sb(0,"button",36),A.cc("click",function(){A.Bc(i);var e=A.gc().$implicit,t=A.gc(),n=A.yc(34);return t.openModal(n,e)}),A.Nb(1,"i",37),A.Rb()}}function ki(e,t){1&e&&(A.Sb(0,"span",35),A.Kc(1," | "),A.Rb())}function Pi(e,t){if(1&e){var i=A.Tb();A.Sb(0,"button",38),A.cc("click",function(){A.Bc(i);var e=A.gc().$implicit,t=A.gc(),n=A.yc(36);return t.openModalClone(n,e)}),A.Nb(1,"i",39),A.Rb()}}function xi(e,t){1&e&&(A.Sb(0,"span",35),A.Kc(1," | "),A.Rb())}function Ri(e,t){if(1&e){var i=A.Tb();A.Sb(0,"button",40),A.cc("click",function(){A.Bc(i);var e=A.gc().$implicit;return A.gc().delete(e.id)}),A.Nb(1,"i",41),A.Rb()}}function Ai(e,t){if(1&e){var i=A.Tb();A.Sb(0,"button",29),A.cc("click",function(){A.Bc(i);var e=t.$implicit;return A.gc().detail(e)}),A.Nb(1,"i",30),A.Rb(),A.Ic(2,Bi,2,0,"span",31),A.Ic(3,wi,2,0,"button",32),A.Ic(4,ki,2,0,"span",31),A.Ic(5,Pi,2,0,"button",33),A.Ic(6,xi,2,0,"span",31),A.Ic(7,Ri,2,0,"button",34)}if(2&e){var n=t.$implicit,a=A.gc();A.zb(2),A.mc("ngIf",!0===n.finishedStatus),A.zb(1),A.mc("ngIf",!0===n.finishedStatus),A.zb(1),A.mc("ngIf",!1===n.finishedStatus),A.zb(1),A.mc("ngIf",!1===n.finishedStatus),A.zb(1),A.mc("ngIf",1===a.role.id),A.zb(1),A.mc("ngIf",1===a.role.id)}}function Mi(e,t){if(1&e){var i=A.Tb();A.Sb(0,"div",42),A.Sb(1,"h4",43),A.Nb(2,"i",44),A.Kc(3," Import Excel "),A.Rb(),A.Sb(4,"button",45),A.cc("click",function(){return t.$implicit.dismiss("Cross click")}),A.Sb(5,"span",46),A.Kc(6,"\xd7"),A.Rb(),A.Rb(),A.Rb(),A.Sb(7,"div",47),A.Sb(8,"div",4),A.Sb(9,"div",48),A.Sb(10,"div",49),A.Sb(11,"label",50),A.Kc(12,"Select File (*Notice: Excel file must be followed a system template. If you do not have a template, please "),A.Sb(13,"a",51),A.Kc(14,"click here"),A.Rb(),A.Kc(15," to download. Thank you!)"),A.Rb(),A.Sb(16,"input",52),A.cc("change",function(e){return A.Bc(i),A.gc().fileProgress(e)}),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Sb(17,"div",53),A.Sb(18,"button",54),A.cc("click",function(){return A.Bc(i),A.gc().uploadFile()}),A.Kc(19,"Upload File"),A.Rb(),A.Sb(20,"button",55),A.cc("click",function(){return t.$implicit.close("Close click")}),A.Kc(21,"Close"),A.Rb(),A.Rb()}if(2&e){var n=A.gc();A.zb(13),A.mc("href",n.excelDownloadUrl,A.Dc)}}function Fi(e,t){if(1&e){var i=A.Tb();A.Sb(0,"div",42),A.Sb(1,"h4",43),A.Nb(2,"i",44),A.Kc(3," New Version BPFC "),A.Rb(),A.Sb(4,"button",45),A.cc("click",function(){return t.$implicit.dismiss("Cross click")}),A.Sb(5,"span",46),A.Kc(6,"\xd7"),A.Rb(),A.Rb(),A.Rb(),A.Sb(7,"div",47),A.Sb(8,"div",4),A.Sb(9,"div",5),A.Sb(10,"div",49),A.Sb(11,"label",50),A.Kc(12,"Model Name"),A.Rb(),A.Nb(13,"input",56),A.Rb(),A.Rb(),A.Sb(14,"div",5),A.Sb(15,"div",49),A.Sb(16,"label",50),A.Kc(17,"Model NO"),A.Rb(),A.Nb(18,"input",56),A.Rb(),A.Rb(),A.Sb(19,"div",5),A.Sb(20,"div",49),A.Sb(21,"label",50),A.Kc(22,"Article NO"),A.Rb(),A.Sb(23,"span",57),A.Kc(24,"(*)"),A.Rb(),A.Sb(25,"div",58),A.Sb(26,"div",59),A.Sb(27,"span",60),A.Kc(28),A.Rb(),A.Rb(),A.Sb(29,"input",61),A.cc("ngModelChange",function(e){return A.Bc(i),A.gc().value=e}),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Sb(30,"div",5),A.Sb(31,"div",49),A.Sb(32,"label",50),A.Kc(33,"Process"),A.Rb(),A.Nb(34,"input",56),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Sb(35,"div",53),A.Sb(36,"button",62),A.cc("click",function(){return t.$implicit.close("Close click")}),A.Kc(37,"Close"),A.Rb(),A.Sb(38,"button",63),A.cc("click",function(){return A.Bc(i),A.gc().onClickCloneNewVersion()}),A.Kc(39,"Copy"),A.Rb(),A.Rb()}if(2&e){var n=A.gc();A.zb(13),A.mc("value",n.modelName),A.zb(5),A.mc("value",n.modelNo),A.zb(10),A.Lc(n.articleNoDefault),A.zb(1),A.mc("ngModel",n.value),A.zb(5),A.mc("value",n.artProcess)}}function Ti(e,t){if(1&e){var i=A.Tb();A.Sb(0,"div",42),A.Sb(1,"h4",43),A.Nb(2,"i",44),A.Kc(3," Clone BPFC "),A.Rb(),A.Sb(4,"button",45),A.cc("click",function(){return t.$implicit.dismiss("Cross click")}),A.Sb(5,"span",46),A.Kc(6,"\xd7"),A.Rb(),A.Rb(),A.Rb(),A.Sb(7,"div",47),A.Sb(8,"div",4),A.Sb(9,"div",5),A.Sb(10,"div",49),A.Sb(11,"label",50),A.Kc(12,"Model Name"),A.Rb(),A.Nb(13,"input",56),A.Rb(),A.Rb(),A.Sb(14,"div",5),A.Sb(15,"div",49),A.Sb(16,"label",50),A.Kc(17,"Model NO"),A.Rb(),A.Nb(18,"input",56),A.Rb(),A.Rb(),A.Sb(19,"div",5),A.Sb(20,"div",49),A.Sb(21,"label",50),A.Kc(22,"Article NO"),A.Rb(),A.Sb(23,"span",57),A.Kc(24,"(*)"),A.Rb(),A.Sb(25,"ejs-dropdownlist",64,65),A.cc("open",function(){return A.Bc(i),A.gc().openPopupDropdownlist()})("ngModelChange",function(e){return A.Bc(i),A.gc().articleNoID=e})("filtering",function(e){return A.Bc(i),A.gc().onFilteringArticleNO(e)})("select",function(e){return A.Bc(i),A.gc().onChangeArticleNo(e)}),A.Rb(),A.Rb(),A.Rb(),A.Sb(27,"div",5),A.Sb(28,"div",49),A.Sb(29,"label",50),A.Kc(30,"Process"),A.Rb(),A.Nb(31,"input",56),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Sb(32,"div",53),A.Sb(33,"button",62),A.cc("click",function(){return t.$implicit.close("Close click")}),A.Kc(34,"Close"),A.Rb(),A.Sb(35,"button",63),A.cc("click",function(){return A.Bc(i),A.gc().onClickClone()}),A.Kc(36,"Copy"),A.Rb(),A.Rb()}if(2&e){var n=A.gc();A.zb(13),A.mc("value",n.modelName),A.zb(5),A.mc("value",n.modelNo),A.zb(7),A.mc("dataSource",n.articleNosData)("fields",n.fieldsBPFCs)("allowFiltering",!0)("ngModel",n.articleNoID),A.zb(6),A.mc("value",n.artProcess)}}new p.e({Accept:"application/json"});var Gi,Ei=((Gi=function(){function t(e,n,a,l,o,r,c,s,d,u,g){var h=this;i(this,t),this.modalNameService=e,this.alertify=n,this.userService=a,this.bPFCEstablishService=l,this.modalService=o,this.router=r,this.datePipe=c,this.spinner=s,this.articleNoService=d,this.dataService=u,this.http=g,this.pageSettings={pageCount:20,pageSizes:[50,100,150,200,"All"],pageSize:50},this.modelName=null,this.modelNo=null,this.articleNo=null,this.articleNoNew=null,this.articleNoDefault=null,this.artProcess=null,this.value=null,this.modelNameID=0,this.modelNoID=0,this.articleNoID=0,this.artProcessID=0,this.BPFCID=0,this.baseUrl=R.a.apiUrlEC,this.textSearch=null,this.textSearchs=null,this.fieldsBPFCs={text:"name",value:"id"},this.sortSettings={columns:[{field:"articleNo",direction:"Ascending"}]},this.subscriptions=new mi.a,this.checkCode=!1,this.styleBtn={background:"#6c757d",boxShadow:"0 0 0 3px rgba(130, 138, 145, 0.5)",border:"1px solid #6c757d",margin:"0",borderColor:"#6c757d",borderRadius:"4px",color:"#fff"},this.onFilteringArticleNO=function(e){var t=new O.h;t=""!==e.text?t.where("name","contains",e.text,!0):t,e.updateData(h.articleNosData,t)},this.onFilteringModelNOClone=function(e){var t=new O.h;t=""!==e.text?t.where("name","contains",e.text,!0):t,e.updateData(h.modelNOsDataClone,t)}}return a(t,[{key:"ngOnInit",value:function(){var e=this,t=JSON.parse(localStorage.getItem("level"));this.role=t,this.excelDownloadUrl=R.a.apiUrlEC+"ModelName/ExcelExport",this.toolbar=["Excel Import","ExcelExport","Search",{text:"Undone",tooltipText:"Undone",prefixIcon:"fa fa-remove",id:"Undone"},{text:"Done",tooltipText:"Done",prefixIcon:"fa fa-check",id:"Done"},{text:"All",tooltipText:"All",prefixIcon:"fa fa-list",id:"All"},{text:"% of done",tooltipText:"% of done",prefixIcon:"",id:"percentageOfDone"}],this.filterSettings={type:"Excel"},this.editSettings={allowEditing:!0,allowAdding:!0,allowDeleting:!0,newRowPosition:"Normal"},this.dataText=this.dataService.currentMessages.subscribe(function(t){e.textSearch=t,0!==t&&(e.searchOptions={fields:["modelName","modelNo","articleNo","approvedBy","artProcess"],operator:"contains",key:t||"",ignoreCase:!0})})}},{key:"ngOnDestroy",value:function(){this.dataText.unsubscribe()}},{key:"detail",value:function(e){return this.dataService.changeMessage(this.textSearch),this.router.navigate(["/ec/establish/bpfc-schedule/detail/"+e.id])}},{key:"onChangeArticleNo",value:function(e){e.isInteracted&&(this.articleNoID=e.itemData.id)}},{key:"onChangeDueDate",value:function(e){this.dueDate=e.value}},{key:"createdSearch",value:function(e){this.getAllUsers();var t=this.gridObj.element,i=document.createElement("span");i.className="e-clear-icon",i.id=t.id+"clear",i.onclick=this.cancelBtnClick.bind(this),t.querySelector(".e-toolbar-item .e-input-group").appendChild(i),this.percentageOfDone=new m.a({cssClass:"e-tbar-btn e-tbtn-txt e-control e-lib",iconCss:""}),this.percentageOfDone.appendTo("#percentageOfDone")}},{key:"cancelBtnClick",value:function(e){this.gridObj.searchSettings.key="",this.gridObj.element.querySelector(".e-input-group.e-search .e-input").value=""}},{key:"getSearchText",value:function(){}},{key:"getArticleNoByModelNoID",value:function(e,t){var i=this;this.articleNoService.getArticleNoByModelNoID(e).subscribe(function(e){i.articleNosData=e.filter(function(e){return e.name!==t})})}},{key:"openPopupDropdownlist",value:function(){}},{key:"onBeforeRender",value:function(e,t,i){var n=this.tooltip.filter(function(e,t){return t===+i})[0];n.content="Loading...",n.dataBind(),this.bPFCEstablishService.getGlueByBPFCID(t.id).subscribe(function(e){n.content=e.join("<br>"),n.dataBind()})}},{key:"onClickCloneNewVersion",value:function(){null!==this.value&&(this.articleNoNew=this.articleNoDefault+this.value);var e={modelNameID:this.modelNameID,modelNOID:this.modelNoID,articleNOID:this.articleNoID,artProcessID:Number(this.artProcessID),bpfcID:this.BPFCID,name:this.articleNoNew,cloneBy:JSON.parse(localStorage.getItem("user")).User.ID};this.cloneNewVersion(e)}},{key:"cloneNewVersion",value:function(e){var t=this;this.findArticleNo(this.articleNoNew),null!==this.value?this.checkCode?this.modalNameService.cloneBPFC(e).subscribe(function(e){!0===e.status?(t.alertify.success("\u0110\xe3 sao ch\xe9p th\xe0nh c\xf4ng! <br> Copy succeeded!"),t.modalService.dismissAll(),t.getUndone(),t.gridObj.search(t.articleNoNew),t.value=null):(t.alertify.error("The BPFC exists!"),t.value=null)}):(this.alertify.error("The BPFC exists!"),this.value=null):(this.alertify.error("Version can not be Empty!"),this.value=null)}},{key:"findArticleNo",value:function(t){var i,n=e(this.data);try{for(n.s();!(i=n.n()).done;){if(i.value.articleNo===t){this.checkCode=!1;break}this.checkCode=!0}}catch(a){n.e(a)}finally{n.f()}}},{key:"onClickClone",value:function(){var e={modelNameID:this.modelNameID,modelNOID:this.modelNoID,articleNOID:this.articleNoID,artProcessID:Number(this.artProcessID),bpfcID:this.BPFCID,cloneBy:JSON.parse(localStorage.getItem("user")).User.ID};this.clone(e)}},{key:"clone",value:function(e){var t=this;this.modalNameService.clone(e).subscribe(function(e){!0===e.status?(t.alertify.success("\u0110\xe3 sao ch\xe9p th\xe0nh c\xf4ng! <br> Copy succeeded!"),t.getUndone(),t.gridObj.search(t.articleNoNew),t.modalService.dismissAll()):t.alertify.error("The BPFC exists!")})}},{key:"openModal",value:function(e,t){this.modalReference=this.modalService.open(e,{size:"md",backdrop:"static",keyboard:!1}),this.BPFCID=t.id,this.modelName=t.modelName,this.modelNo=t.modelNo,this.articleNo=t.articleNo,this.artProcess=t.artProcess,this.articleNoNew=t.articleNo.split("-")[0]+"-T",this.articleNoDefault=t.articleNo.split("-")[0]+"-T",this.modelNameID=t.modelNameID,this.modelNoID=t.modelNoID,this.articleNoID=0,this.artProcessID="ASY"===t.artProcess?1:2}},{key:"openModalClone",value:function(e,t){this.modalReference=this.modalService.open(e,{size:"md",backdrop:"static",keyboard:!1}),this.BPFCID=t.id,this.modelName=t.modelName,this.modelNo=t.modelNo,this.artProcess=t.artProcess,this.articleNo=t.articleNo,this.modelNameID=t.modelNameID,this.modelNoID=t.modelNoID,this.articleNoID=0,this.getArticleNoByModelNoID(this.modelNoID,t.articleNo),this.artProcessID="ASY"===t.artProcess?1:2}},{key:"actionBegin",value:function(e){var t=this;if("searching"===e.requestType&&(this.textSearch=e.searchString),"save"===e.requestType){var i={id:e.data.id,season:e.data.season},n=e.previousData.season;(null!==n||""!==n&&n!==e.data.season)&&this.bPFCEstablishService.updateSeason(i).subscribe(function(){t.alertify.success("Update season successfully"),t.getAllUsers()});var a={id:e.data.id,dueDate:this.dueDate},l=e.previousData.dueDate;"STF"===e.data.artProcess&&this.dueDate.toDateString()!==l&&null!=l&&this.bPFCEstablishService.updateDueDate(a).subscribe(function(){t.getAllUsers(),t.alertify.success("Update due date successfully")})}}},{key:"dataBound",value:function(e){console.log("databound",e)}},{key:"toolbarClick",value:function(e){var t=this;switch(e.item.text){case"Excel Import":this.showModal(this.importModal);break;case"Done":this.gridObj.searchSettings.key="",this.getDone();break;case"Undone":this.gridObj.searchSettings.key="",this.getUndone();break;case"All":this.gridObj.searchSettings.key="",this.getAll();break;case"Excel Export":var i=this.data.map(function(e){return{approvedBy:e.approvedBy,approvalStatus:e.approvalStatus,createdBy:e.createdBy,articleNo:e.articleNo,createdDate:t.datePipe.transform(e.createdDate,"d MMM, yyyy HH:mm"),artProcess:e.artProcess,finishedStatus:!0===e.finishedStatus?"Yes":"No",modelName:e.modelName,modelNo:e.modelNo,season:e.season}});this.gridObj.excelExport({dataSource:i})}}},{key:"fileProgress",value:function(e){this.file=e.target.files[0]}},{key:"uploadFile",value:function(){var e=this,t=JSON.parse(localStorage.getItem("user")).User.ID;this.bPFCEstablishService.import(this.file,t).subscribe(function(t){e.getAll(),e.modalReference.close(),e.alertify.success("The excel has been imported into system!")})}},{key:"getAllUsers",value:function(){var e=this;this.userService.getAllUserInfo().subscribe(function(t){e.users=t,e.getUndone()})}},{key:"delete",value:function(e){var t=this;this.alertify.confirm("Delete BPFC",'Are you sure you want to delete this BPFC "'+e+'" ?',function(){t.bPFCEstablishService.delete(e).subscribe(function(e){t.alertify.success("Success"),t.getUndone()},function(e){t.alertify.warning(e)})})}},{key:"rowDB",value:function(e){e.data.dueDateStatus&&e.row.classList.add("bgcolor")}},{key:"editTextOfBtn",value:function(){this.undoneBtn=new m.a({cssClass:"e-tbar-btn e-tbtn-txt e-control e-btn e-lib",iconCss:"fa fa-remove",content:this.undoneText}),this.allBtn=new m.a({cssClass:"e-tbar-btn e-tbtn-txt e-control e-btn e-lib",iconCss:"fa fa-list",content:"All"}),this.doneBtn=new m.a({cssClass:"e-tbar-btn e-tbtn-txt e-control e-btn e-lib",iconCss:"fa fa-check",content:this.doneText}),this.doneBtn.appendTo("#Done"),this.allBtn.appendTo("#All"),this.undoneBtn.appendTo("#Undone"),!0===this.isDone?(this.setAttrBtn(this.doneBtn),this.resetAttrBtn(this.undoneBtn),this.resetAttrBtn(this.allBtn)):!1===this.isDone?(this.setAttrBtn(this.undoneBtn),this.resetAttrBtn(this.doneBtn),this.resetAttrBtn(this.allBtn)):(this.setAttrBtn(this.allBtn),this.resetAttrBtn(this.doneBtn),this.resetAttrBtn(this.undoneBtn))}},{key:"getAll",value:function(){var e=this;this.spinner.show(),this.bPFCEstablishService.getAll().subscribe(function(t){e.data=t.map(function(t){var i;return{id:t.id,modelNameID:t.modelNameID,modelNoID:t.modelNoID,articleNoID:t.articleNoID,artProcessID:t.artProcessID,modelName:t.modelName,modelNo:t.modelNo,createdDate:new Date(t.createdDate),articleNo:t.articleNo,approvalStatus:t.approvalStatus,finishedStatus:t.finishedStatus,dueDate:t.dueDate,dueDateStatus:t.dueDateStatus,approvedBy:null===(i=e.users.filter(function(e){return e.id===t.approvalBy})[0])||void 0===i?void 0:i.username,createdBy:t.createdBy,artProcess:t.artProcess,season:t.season}}),e.spinner.hide(),e.isDone=null,e.editTextOfBtn()})}},{key:"getDone",value:function(){var e=this;this.spinner.show(),this.bPFCEstablishService.getDoneBPFC().subscribe(function(t){e.data=t.data.map(function(t){var i;return{id:t.id,modelNameID:t.modelNameID,modelNoID:t.modelNoID,articleNoID:t.articleNoID,artProcessID:t.artProcessID,modelName:t.modelName,modelNo:t.modelNo,createdDate:new Date(t.createdDate),articleNo:t.articleNo,dueDate:t.dueDate,dueDateStatus:t.dueDateStatus,approvalStatus:t.approvalStatus,finishedStatus:t.finishedStatus,approvedBy:null===(i=e.users.filter(function(e){return e.id===t.approvalBy})[0])||void 0===i?void 0:i.username,createdBy:t.createdBy,artProcess:t.artProcess,season:t.season}}),e.percentageOfDoneData=t.percentageOfDone,e.percentageOfDone.element.innerHTML=e.percentageOfDoneData,e.doneText="Done (".concat(t.doneTotal,")"),e.undoneText="Undone (".concat(t.undoneTotal,")"),e.isDone=!0,e.editTextOfBtn(),e.spinner.hide()})}},{key:"getUndone",value:function(){var e=this;this.spinner.show(),this.bPFCEstablishService.getUndoneBPFC().subscribe(function(t){e.data=t.data.map(function(t){var i;return{id:t.id,modelNameID:t.modelNameID,modelNoID:t.modelNoID,articleNoID:t.articleNoID,artProcessID:t.artProcessID,modelName:t.modelName,modelNo:t.modelNo,createdDate:new Date(t.createdDate),articleNo:t.articleNo,dueDate:t.dueDate,dueDateStatus:t.dueDateStatus,approvalStatus:t.approvalStatus,finishedStatus:t.finishedStatus,approvedBy:null===(i=e.users.filter(function(e){return e.id===t.approvalBy})[0])||void 0===i?void 0:i.username,createdBy:t.createdBy,artProcess:t.artProcess,season:t.season}}),e.percentageOfDoneData=t.percentageOfDone,e.percentageOfDone.element.innerHTML=e.percentageOfDoneData,e.doneText="Done (".concat(t.doneTotal,")"),e.undoneText="Undone (".concat(t.undoneTotal,")"),e.isDone=!1,e.editTextOfBtn(),e.spinner.hide()})}},{key:"showModal",value:function(e){this.modalReference=this.modalService.open(e,{size:"xl"})}},{key:"NO",value:function(e){return(this.gridObj.pageSettings.currentPage-1)*this.gridObj.pageSettings.pageSize+Number(e)+1}},{key:"setAttrBtn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{background:"#6c757d",boxShadow:"0 0 0 3px rgba(130, 138, 145, 0.5)",border:"1px solid #6c757d",margin:"0",borderColor:"#6c757d",borderRadius:"4px",color:"#fff"};e.element.style.background=t.background,e.element.style.boxShadow=t.boxShadow,e.element.style.border=t.border,e.element.style.margin=t.margin,e.element.style.borderColor=t.borderColor,e.element.style.borderRadius=t.borderRadius,e.element.style.color=t.color}},{key:"resetAttrBtn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{background:"#f8f9fa",boxShadow:"none",border:"none",margin:"0",borderColor:"#f8f9fa",borderRadius:"none",color:"#495057"};e.element.style.background=t.background,e.element.style.boxShadow=t.boxShadow,e.element.style.border=t.border,e.element.style.margin=t.margin,e.element.style.borderColor=t.borderColor,e.element.style.borderRadius=t.borderRadius,e.element.style.color=t.color}}]),t}()).\u0275fac=function(e){return new(e||Gi)(A.Mb(M.a),A.Mb(F.a),A.Mb(bi.a),A.Mb(G.a),A.Mb(u.b),A.Mb(x.c),A.Mb(o.d),A.Mb(c.c),A.Mb(X),A.Mb(E.a),A.Mb(p.b))},Gi.\u0275cmp=A.Gb({type:Gi,selectors:[["app-BPFCSchedule"]],viewQuery:function(e,t){var i;1&e&&(A.Qc(fi,!0),A.Gc(pi,!0),A.Qc(vi,!0)),2&e&&(A.xc(i=A.dc())&&(t.gridObj=i.first),A.xc(i=A.dc())&&(t.importModal=i.first),A.xc(i=A.dc())&&(t.tooltip=i))},features:[A.yb([o.d])],decls:37,vars:10,consts:[["type","square-jelly-box","size","medium",3,"fullScreen"],[1,"loading"],[1,"card"],[1,"card-body","p-0"],[1,"row"],[1,"col-md-12"],["allowSorting","true","allowResizing","true","allowPaging","true","allowFiltering","true","allowResizing","true","gridLines","Both","showColumnMenu","true",3,"dataSource","pageSettings","filterSettings","sortSettings","editSettings","toolbar","allowExcelExport","searchSettings","rowDataBound","created","dataBound","toolbarClick","actionBegin"],["grid",""],["field","#","isPrimaryKey","true","textAlign","Center","headerText","#","width","40"],["template",""],["field","modelName","isPrimaryKey","true","textAlign","Left","headerText","Model Name"],["field","modelNo","isPrimaryKey","true","textAlign","Center","width","100","headerText","Model NO"],["field","articleNo","isPrimaryKey","true","textAlign","Center","width","150","headerText","Article NO"],["field","artProcess","isPrimaryKey","true","textAlign","Center","width","100","headerText","Process"],["field","dueDate","textAlign","Center","editType","datepickeredit","type","date","format","d MMM, yyyy","width","150","headerText","STF Date"],["editTemplate",""],["field","createdDate","isPrimaryKey","true","type","date","format","d MMM, yyyy HH:mm","headerText","Update Time","textAlign","Center"],["field","approvedBy","isPrimaryKey","true","textAlign","Center","width","150","headerText","Approval By Supervisor"],["field","season","textAlign","Center","width","100","headerText","Season"],["field","","isPrimaryKey","true","textAlign","Center","headerText","-- Option --","width","170",3,"visible"],[1,"card-footer"],["importModal",""],["newVersionModal",""],["cloneModal",""],["position","RightCenter","content","loading...",1,"fix-css",3,"beforeRender"],["tooltip",""],[4,"ngIf","ngIfElse"],["stf",""],["placeholder","Enter date",3,"value","change"],["ejs-button","","cssClass","e-info",3,"click"],[1,"far","fa-edit"],["style","color: transparent;",4,"ngIf"],["ejs-button","","cssClass","e-primary",3,"click",4,"ngIf"],["ejs-button","","cssClass","e-success",3,"click",4,"ngIf"],["ejs-button","","cssClass","e-danger",3,"click",4,"ngIf"],[2,"color","transparent"],["ejs-button","","cssClass","e-primary",3,"click"],[1,"fa","fa-plus"],["ejs-button","","cssClass","e-success",3,"click"],[1,"fa","fa-clone"],["ejs-button","","cssClass","e-danger",3,"click"],[1,"fa","fa-trash"],[1,"modal-header"],[1,"modal-title"],[1,"fas","fa-plus"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-md-6"],[1,"form-group"],["for","Name"],[3,"href"],["name","file","type","file",1,"form-control",3,"change"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],["type","text","name","","disabled","","required","required","title","",1,"form-control",3,"value"],[2,"color","red"],[1,"input-group","mb-3"],[1,"input-group-prepend"],["id","basic-addon3",1,"input-group-text"],["type","text","id","basic-url","placeholder","Enter Version Ex: 1","aria-describedby","basic-addon3",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-light",3,"click"],["type","submit",1,"btn","btn-primary",3,"click"],["placeholder","Select article NO   ",1,"w-100","float-left",3,"dataSource","fields","allowFiltering","ngModel","open","ngModelChange","filtering","select"],["modelNameDropdownlist",""]],template:function(e,t){1&e&&(A.Sb(0,"ngx-spinner",0),A.Sb(1,"p",1),A.Kc(2,"Loading data..."),A.Rb(),A.Rb(),A.Sb(3,"div",2),A.Sb(4,"div",3),A.Sb(5,"div",4),A.Sb(6,"div",5),A.Sb(7,"ejs-grid",6,7),A.cc("rowDataBound",function(e){return t.rowDB(e)})("created",function(e){return t.createdSearch(e)})("dataBound",function(e){return t.dataBound(e)})("toolbarClick",function(e){return t.toolbarClick(e)})("actionBegin",function(e){return t.actionBegin(e)}),A.Sb(9,"e-columns"),A.Sb(10,"e-column",8),A.Ic(11,Ii,1,1,"ng-template",null,9,A.Jc),A.Rb(),A.Sb(13,"e-column",10),A.Ic(14,Si,3,1,"ng-template",null,9,A.Jc),A.Rb(),A.Nb(16,"e-column",11),A.Nb(17,"e-column",12),A.Nb(18,"e-column",13),A.Sb(19,"e-column",14),A.Ic(20,Di,2,4,"ng-template",null,9,A.Jc),A.Ic(22,Ci,3,2,"ng-template",null,15,A.Jc),A.Rb(),A.Nb(24,"e-column",16),A.Nb(25,"e-column",17),A.Nb(26,"e-column",18),A.Sb(27,"e-column",19),A.Ic(28,Ai,8,6,"ng-template",null,9,A.Jc),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Nb(30,"div",20),A.Rb(),A.Ic(31,Mi,22,1,"ng-template",null,21,A.Jc),A.Ic(33,Fi,40,5,"ng-template",null,22,A.Jc),A.Ic(35,Ti,37,7,"ng-template",null,23,A.Jc)),2&e&&(A.mc("fullScreen",!0),A.zb(7),A.mc("dataSource",t.data)("pageSettings",t.pageSettings)("filterSettings",t.filterSettings)("sortSettings",t.sortSettings)("editSettings",t.editSettings)("toolbar",t.toolbar)("allowExcelExport",!0)("searchSettings",t.searchOptions),A.zb(20),A.mc("visible",!0))},directives:[c.a,y.j,h.d,B.d,B.b,y.e,y.b,h.c,B.c,B.a,y.d,y.a,S.b,o.n,b.a,m.b,r.b,r.g,r.j,d.c],pipes:[o.d],styles:[".active-btn[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.45098039215686275)!important;color:#fff!important}.bgcolor[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#fa7c7c}"]}),Gi);new p.e({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")});var Oi,Ki=((Oi=function(){function e(t){i(this,e),this.http=t,this.baseUrl=R.a.apiUrlEC,this.messageSource=new U.a(0),this.currentMessage=this.messageSource.asObservable()}return a(e,[{key:"changeMessage",value:function(e){this.messageSource.next(e)}},{key:"getAllComments",value:function(){return this.http.get(this.baseUrl+"Comment/GetAll",{})}},{key:"getAllCommentByBPFCEstablishID",value:function(e){return this.http.get("".concat(this.baseUrl,"Comment/GetAllCommentByBPFCEstablishID/").concat(e),{})}},{key:"create",value:function(e){return this.http.post(this.baseUrl+"Comment/Create",e)}},{key:"update",value:function(e){return this.http.put(this.baseUrl+"Comment/Update",e)}},{key:"delete",value:function(e){return this.http.delete(this.baseUrl+"Comment/Delete/"+e)}}]),e}()).\u0275fac=function(e){return new(e||Oi)(A.Zb(p.b))},Oi.\u0275prov=A.Ib({token:Oi,factory:Oi.\u0275fac,providedIn:"root"}),Oi),Ui=l("7FIR"),Li=["gridModel"];function zi(e,t){if(1&e&&A.Kc(0),2&e){var i=t.$implicit,n=A.gc();A.Mc(" ",n.no(i)," ")}}function Ji(e,t){1&e&&(A.Kc(0),A.hc(1,"translate")),2&e&&A.Mc(" ",A.ic(1,1,"CREATED_DATETIME_LABEL")," ")}function ji(e,t){1&e&&(A.Kc(0),A.hc(1,"translate")),2&e&&A.Mc(" ",A.ic(1,1,"PIC_LABEL")," ")}function $i(e,t){1&e&&(A.Kc(0),A.hc(1,"translate")),2&e&&A.Mc(" ",A.ic(1,1,"FINISH_LABEL")," ")}function Hi(e,t){1&e&&(A.Sb(0,"span",21),A.Kc(1,"YES"),A.Rb())}function _i(e,t){1&e&&(A.Sb(0,"span",22),A.Kc(1,"No"),A.Rb())}function qi(e,t){if(1&e&&(A.Ic(0,Hi,2,0,"span",19),A.Ic(1,_i,2,0,"span",20)),2&e){var i=t.$implicit;A.mc("ngIf",1==i.finishedStatus),A.zb(1),A.mc("ngIf",0==i.finishedStatus)}}function Qi(e,t){1&e&&(A.Kc(0),A.hc(1,"translate")),2&e&&A.Mc(" ",A.ic(1,1,"APPROVAL_STATUS_LABEL")," ")}function Vi(e,t){1&e&&(A.Sb(0,"span",22),A.Kc(1,"YET"),A.Rb())}function Yi(e,t){1&e&&(A.Sb(0,"span",24),A.Kc(1,"NG"),A.Rb())}function Xi(e,t){1&e&&(A.Sb(0,"span",21),A.Kc(1,"OK"),A.Rb())}function Wi(e,t){if(1&e&&(A.Ic(0,Vi,2,0,"span",20),A.Ic(1,Yi,2,0,"span",23),A.Ic(2,Xi,2,0,"span",19)),2&e){var i=t.$implicit;A.mc("ngIf",0==i.approvalStatus&&"#N/A"===i.approvalBy),A.zb(1),A.mc("ngIf",0==i.finishedStatus&&0==i.approvalStatus&&"#N/A"!==i.approvalBy),A.zb(1),A.mc("ngIf",1==i.approvalStatus&&"#N/A"!==i.approvalBy)}}function Zi(e,t){1&e&&(A.Kc(0),A.hc(1,"translate")),2&e&&A.Mc(" ",A.ic(1,1,"APPROVAL_BY_LABEL")," ")}function en(e,t){1&e&&(A.Kc(0),A.hc(1,"translate")),2&e&&A.Mc(" ",A.ic(1,1,"DETAIL_LABEL")," ")}function tn(e,t){if(1&e){var i=A.Tb();A.Sb(0,"button",25),A.cc("click",function(){A.Bc(i);var e=t.$implicit,n=A.gc(),a=A.yc(38);return n.openModalDetail(a,e.id)}),A.Nb(1,"i",26),A.Rb()}}function nn(e,t){if(1&e&&(A.Sb(0,"div",63),A.Kc(1),A.Rb()),2&e){var i=t.$implicit;A.nc("title",i.name),A.zb(1),A.Mc(" ",i.name," ")}}function an(e,t){1&e&&(A.Sb(0,"div"),A.Nb(1,"i",64),A.Rb())}function ln(e,t){if(1&e&&(A.Sb(0,"span"),A.Kc(1),A.Rb()),2&e){var i=t.$implicit;A.zb(1),A.Mc("\xb1 ",i.allow,"")}}function on(e,t){if(1&e){var i=A.Tb();A.Sb(0,"button",65),A.cc("click",function(){return A.Bc(i),A.gc(2).release()}),A.Kc(1,"Release"),A.Rb()}}function rn(e,t){if(1&e){var i=A.Tb();A.Sb(0,"button",66),A.cc("click",function(){return A.Bc(i),A.gc(2).reject()}),A.Kc(1,"Reject"),A.Rb()}}function cn(e,t){if(1&e&&(A.Sb(0,"li",67),A.Sb(1,"a",68),A.Nb(2,"img",69),A.Rb(),A.Sb(3,"div",70),A.Sb(4,"span",71),A.Sb(5,"small",72),A.Kc(6),A.Rb(),A.Rb(),A.Sb(7,"strong",73),A.Kc(8),A.Rb(),A.Sb(9,"p"),A.Kc(10),A.Rb(),A.Rb(),A.Rb()),2&e){var i=t.$implicit,n=A.gc(2);A.zb(6),A.Mc(" ",n.datetime(i.createdDate),""),A.zb(2),A.Mc(" ",n.username(i.createdBy),""),A.zb(2),A.Mc(" ",i.content," ")}}function sn(e,t){if(1&e){var i=A.Tb();A.Sb(0,"div",27),A.Sb(1,"h4",28),A.Nb(2,"i",29),A.Kc(3," BPFC Detail "),A.Rb(),A.Sb(4,"button",30),A.cc("click",function(){return t.$implicit.dismiss("Cross click")}),A.Sb(5,"span",31),A.Kc(6,"\xd7"),A.Rb(),A.Rb(),A.Rb(),A.Sb(7,"div",32),A.Sb(8,"div",0),A.Sb(9,"div",33),A.Sb(10,"ejs-grid",34,35),A.cc("rowSelected",function(e){return A.Bc(i),A.gc().rowSelected(e)}),A.Sb(12,"e-columns"),A.Sb(13,"e-column",36),A.Ic(14,nn,2,2,"ng-template",null,6,A.Jc),A.Rb(),A.Nb(16,"e-column",37),A.Nb(17,"e-column",38),A.Nb(18,"e-column",39),A.Nb(19,"e-column",40),A.Nb(20,"e-column",41),A.Nb(21,"e-column",42),A.Rb(),A.Rb(),A.Rb(),A.Sb(22,"div",33),A.Sb(23,"ejs-grid",43,44),A.Sb(25,"e-columns"),A.Nb(26,"e-column",45),A.Nb(27,"e-column",46),A.Nb(28,"e-column",47),A.Sb(29,"e-column",48),A.Ic(30,an,2,0,"ng-template",null,12,A.Jc),A.Ic(32,ln,2,1,"ng-template",null,6,A.Jc),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Sb(34,"div",49),A.Ic(35,on,2,0,"button",50),A.Ic(36,rn,2,0,"button",51),A.Sb(37,"button",52),A.cc("click",function(){return t.$implicit.close("Close click")}),A.Kc(38,"Close"),A.Rb(),A.Rb(),A.Sb(39,"div",32),A.Sb(40,"div",0),A.Sb(41,"div",1),A.Sb(42,"div",53),A.Sb(43,"div",54),A.Sb(44,"div",55),A.Sb(45,"div",56),A.Sb(46,"div",57),A.Sb(47,"textarea",58),A.cc("ngModelChange",function(e){return A.Bc(i),A.gc().content=e}),A.Rb(),A.Nb(48,"br"),A.Sb(49,"button",59),A.cc("click",function(){return A.Bc(i),A.gc().createComment()}),A.Kc(50,"Post"),A.Rb(),A.Nb(51,"div",60),A.Nb(52,"hr"),A.Sb(53,"ul",61),A.Ic(54,cn,11,3,"li",62),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Rb()}if(2&e){var n=A.gc();A.zb(10),A.mc("dataSource",n.glues)("selectedRowIndex",0),A.zb(13),A.mc("dataSource",n.ingredients)("allowSorting",!0),A.zb(12),A.mc("ngIf",3!==n.level&&4!==n.level),A.zb(1),A.mc("ngIf",3!==n.level&&4!==n.level),A.zb(11),A.mc("ngModel",n.content),A.zb(7),A.mc("ngForOf",n.comments)}}var dn,un,gn,hn=[{path:"",children:[{path:"bpfc-schedule",data:{title:"bpfc-schedule",breadcrumb:"BPFC Schedule"},children:[{path:"",component:Ei},{path:"detail",data:{title:"Detail",breadcrumb:"Detail"},children:[{path:"",component:hi},{path:":id",component:hi}]}]},{path:"bpfc-status",component:(dn=function(){function e(t,n,a,l,o,r,c,s,d,u,g){i(this,e),this.modalNameService=t,this.bPFCEstablishService=n,this.modalService=a,this.route=l,this.alertify=o,this.ingredientService=r,this.glueService=c,this.commentService=s,this.calendarsService=d,this.userService=u,this.authService=g,this.users=[],this.searchSettings={hierarchyMode:"Parent"},this.modalname={id:0,name:"",modelNo:"",createdBy:JSON.parse(localStorage.getItem("user")).User.ID}}return a(e,[{key:"ngOnInit",value:function(){this.pageSettings={pageSizes:!0,currentPage:1,pageSize:10,pageCount:20},this.editparams={params:{popupHeight:"300px"}},this.editSettings={showDeleteConfirmDialog:!0,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"},this.toolbar=["Default",{text:"Rejected",tooltipText:"Rejected",prefixIcon:"fa fa-times",id:"Rejected"},{text:"Approved",tooltipText:"Approved",prefixIcon:"fa fa-check",id:"Approved"},"All","ExcelExport","Search"],this.getAllUsers()}},{key:"ngAfterViewInit",value:function(){var e=JSON.parse(localStorage.getItem("level"));this.level=e.id,this.getBuilding()}},{key:"getBuilding",value:function(){JSON.parse(localStorage.getItem("user"))}},{key:"dataBound",value:function(){this.gridModel.autoFitColumns()}},{key:"no",value:function(e){return(this.pageSettings.currentPage-1)*this.pageSettings.pageSize+Number(e.index)+1}},{key:"actionBegin",value:function(e){"save"===e.requestType&&(this.modalname.id=e.data.id||0,this.modalname.name=e.data.name,this.modalname.modelNo=e.data.modelNo,e.data.id>0?this.update(this.modalname):this.add(this.modalname)),"delete"===e.requestType&&this.delete(e.data[0].id)}},{key:"actionComplete",value:function(e){"add"===e.requestType&&(e.form.elements.namedItem("name").focus(),e.form.elements.namedItem("id").disabled=!0,e.form.elements.namedItem("tool").disabled=!0)}},{key:"onDoubleClick",value:function(e){this.setFocus=e.column}},{key:"openaddModalName",value:function(e){this.modalReference=this.modalService.open(e)}},{key:"getAllBPFCStatus",value:function(){var e=this;this.bPFCEstablishService.getAllBPFCStatus().subscribe(function(t){e.data=t.map(function(t){return{id:t.id,modelNameID:t.modelNameID,modelNoID:t.modelNoID,articleNoID:t.articleNoID,artProcessID:t.artProcessID,modelName:t.modelName,modelNo:t.modelNo,articleNo:t.articleNo,artProcess:t.artProcess,approvalStatus:t.approvalStatus,finishedStatus:t.finishedStatus,approvalBy:e.createdBy(t.approvalBy),createdBy:e.createdBy(t.createdBy),season:t.season,createdDate:t.createdDate,modifiedDate:t.modifiedDate,updateTime:t.updateTime,bpfcName:"".concat(t.modelName," - ").concat(t.modelNo," - ").concat(t.articleNo," - ").concat(t.artProcess)}})})}},{key:"filterRejected",value:function(){var e=this;this.bPFCEstablishService.rejectedFilter().subscribe(function(t){e.data=t.map(function(t){return{id:t.id,modelNameID:t.modelNameID,modelNoID:t.modelNoID,articleNoID:t.articleNoID,artProcessID:t.artProcessID,modelName:t.modelName,modelNo:t.modelNo,articleNo:t.articleNo,artProcess:t.artProcess,approvalStatus:t.approvalStatus,finishedStatus:t.finishedStatus,approvalBy:e.createdBy(t.approvalBy),createdBy:e.createdBy(t.createdBy),season:t.season,createdDate:t.createdDate,modifiedDate:t.modifiedDate,updateTime:t.updateTime,bpfcName:"".concat(t.modelName," - ").concat(t.modelNo," - ").concat(t.articleNo," - ").concat(t.artProcess)}})})}},{key:"filterByApprovedStatus",value:function(){var e=this;this.bPFCEstablishService.filterByApprovedStatus().subscribe(function(t){e.data=t.map(function(t){return{id:t.id,modelNameID:t.modelNameID,modelNoID:t.modelNoID,articleNoID:t.articleNoID,artProcessID:t.artProcessID,modelName:t.modelName,modelNo:t.modelNo,articleNo:t.articleNo,artProcess:t.artProcess,approvalStatus:t.approvalStatus,finishedStatus:t.finishedStatus,approvalBy:e.createdBy(t.approvalBy),createdBy:e.createdBy(t.createdBy),season:t.season,createdDate:t.createdDate,modifiedDate:t.modifiedDate,updateTime:t.updateTime,bpfcName:"".concat(t.modelName," - ").concat(t.modelNo," - ").concat(t.articleNo," - ").concat(t.artProcess)}})})}},{key:"filterByFinishedStatus",value:function(){var e=this;this.bPFCEstablishService.filterByFinishedStatus().subscribe(function(t){e.data=t.map(function(t){return{id:t.id,modelNameID:t.modelNameID,modelNoID:t.modelNoID,articleNoID:t.articleNoID,artProcessID:t.artProcessID,modelName:t.modelName,modelNo:t.modelNo,articleNo:t.articleNo,artProcess:t.artProcess,approvalStatus:t.approvalStatus,finishedStatus:t.finishedStatus,approvalBy:e.createdBy(t.approvalBy),createdBy:e.createdBy(t.createdBy),season:t.season,createdDate:t.createdDate,modifiedDate:t.modifiedDate,updateTime:t.updateTime,bpfcName:"".concat(t.modelName," - ").concat(t.modelNo," - ").concat(t.articleNo," - ").concat(t.artProcess)}})})}},{key:"defaultFilter",value:function(){var e=this;this.bPFCEstablishService.defaultFilter().subscribe(function(t){e.data=t.map(function(t){return{id:t.id,modelNameID:t.modelNameID,modelNoID:t.modelNoID,articleNoID:t.articleNoID,artProcessID:t.artProcessID,modelName:t.modelName,modelNo:t.modelNo,articleNo:t.articleNo,artProcess:t.artProcess,approvalStatus:t.approvalStatus,finishedStatus:t.finishedStatus,approvalBy:e.createdBy(t.approvalBy),createdBy:e.createdBy(t.createdBy),season:t.season,createdDate:t.createdDate,modifiedDate:t.modifiedDate,updateTime:t.updateTime,bpfcName:"".concat(t.modelName," - ").concat(t.modelNo," - ").concat(t.articleNo," - ").concat(t.artProcess)}})})}},{key:"filterByNotApprovedStatus",value:function(){var e=this;this.bPFCEstablishService.filterByNotApprovedStatus().subscribe(function(t){e.data=t.map(function(t){return{id:t.id,modelNameID:t.modelNameID,modelNoID:t.modelNoID,articleNoID:t.articleNoID,artProcessID:t.artProcessID,modelName:t.modelName,modelNo:t.modelNo,articleNo:t.articleNo,artProcess:t.artProcess,approvalStatus:t.approvalStatus,finishedStatus:t.finishedStatus,approvalBy:e.createdBy(t.approvalBy),createdBy:e.createdBy(t.createdBy),season:t.season,createdDate:t.createdDate,modifiedDate:t.modifiedDate,updateTime:t.updateTime,bpfcName:"".concat(t.modelName," - ").concat(t.modelNo," - ").concat(t.articleNo," - ").concat(t.artProcess)}})})}},{key:"update",value:function(e){var t=this;this.modalNameService.update(e).subscribe(function(){t.alertify.success("Update Modal Name Successfully")})}},{key:"delete",value:function(e){var t=this;this.alertify.confirm("Delete Modal Name",'Are you sure you want to delete this ModalName ID "'+e+'" ?',function(){t.modalNameService.delete(e).subscribe(function(){t.getAllBPFCStatus(),t.alertify.success("Modal Name has been deleted")},function(e){t.alertify.error("Failed to delete the Modal Name")})})}},{key:"add",value:function(e){var t=this;this.modalNameService.create(e).subscribe(function(){t.alertify.success("Add Modal Name Successfully"),t.getAllBPFCStatus()})}},{key:"approval",value:function(e){var t=this,i=JSON.parse(localStorage.getItem("user")).User.ID;this.bPFCEstablishService.approval(e,i).subscribe(function(){t.alertify.success("The model name - model no has been approved!"),t.getAllBPFCStatus()})}},{key:"done",value:function(e){var t=this,i=JSON.parse(localStorage.getItem("user")).User.ID;this.bPFCEstablishService.done(e,i).subscribe(function(){t.alertify.success("The model name - model no has been finished!"),t.getAllBPFCStatus()})}},{key:"release",value:function(){var e=this,t=JSON.parse(localStorage.getItem("user")).User.ID;this.bPFCEstablishService.release(this.BPFCEstablishID,t).subscribe(function(){e.alertify.success("The model name - model no has been released!"),e.filterByApprovedStatus(),e.modalReferenceDetail.close()})}},{key:"reject",value:function(){var e=this,t=JSON.parse(localStorage.getItem("user")).User.ID;this.bPFCEstablishService.reject(this.BPFCEstablishID,t).subscribe(function(t){if(!0===t.status){e.alertify.success(t.message),e.filterByNotApprovedStatus(),e.modalReferenceDetail.close();var i=e.users.filter(function(e){return e.ID===t.userId})[0].Email||"";e.bPFCEstablishService.sendMailForPIC(i).subscribe(function(){})}else e.alertify.error(t.message)})}},{key:"openModalDetail",value:function(e,t){var i=this;this.modalReferenceDetail=this.modalService.open(e,{size:"xxl"}),setTimeout(function(){i.getAllGluesByBPFCID(t)},300),this.BPFCEstablishID=t,this.getComments()}},{key:"sortBySup",value:function(e){var t=this;this.ingredientService.sortBySup(e,0).subscribe(function(e){t.ingredients=e.list1})}},{key:"getAllGluesByBPFCID",value:function(e){var t=this;this.glueService.getAllGluesByBPFCID(e).subscribe(function(e){t.glues=e.map(function(e){return{chemical:e.chemical,code:e.code,consumption:e.consumption,createdBy:t.createdBy(e.createdBy),createdDate:e.createdDate,expiredTime:e.expiredTime,glueID:e.glueID,glueName:e.glueName,id:e.id,ingredients:e.ingredients,materialName:e.materialName,materialNameID:e.materialNameID,modelNameID:e.modelNameID,modelNo:e.modelNo,modelNoID:e.modelNoID,name:e.name,partNameID:e.partNameID,pathName:e.pathName,bpfcName:"".concat(e.modelName," - ").concat(e.modelNo," - ").concat(e.articleNo," - ").concat(e.artProcess)}}),0===t.glues.length?t.glueid=0:(t.glueid=t.glues[0].id,t.sortBySup(t.glueid))})}},{key:"rowSelected",value:function(e){this.sortBySup(e.data.id)}},{key:"toolbarClick",value:function(e){switch(e.item.text){case"Approved":this.filterByApprovedStatus();break;case"Rejected":this.filterRejected();break;case"All":this.getAllBPFCStatus();break;case"Excel Export":this.gridModel.excelExport();break;case"Default":this.defaultFilter()}}},{key:"getAllUsers",value:function(){var e=this;this.userService.getAllUserInfo().subscribe(function(t){e.users=t,e.defaultFilter()})}},{key:"createComment",value:function(){var e=this;this.comment={id:0,content:this.content,createdBy:JSON.parse(localStorage.getItem("user")).User.ID,createdByName:"",BPFCEstablishID:this.BPFCEstablishID,createdDate:new Date},this.commentService.create(this.comment).subscribe(function(){e.alertify.success("The comment has been created!"),e.content="",e.getComments()})}},{key:"updateComment",value:function(){var e=this;this.commentService.update(this.comment).subscribe(function(){e.alertify.success("The comment has been updated!"),e.getComments()})}},{key:"deleteComment",value:function(){var e=this;this.commentService.delete(this.comment.id).subscribe(function(){e.alertify.success("The comment has been deleted!"),e.getComments()})}},{key:"getComments",value:function(){var e=this;this.commentService.getAllCommentByBPFCEstablishID(this.BPFCEstablishID).subscribe(function(t){e.comments=t})}},{key:"datetime",value:function(e){return this.calendarsService.JSONDateWithTime(e)}},{key:"username",value:function(e){return this.users.filter(function(t){return t.id===e})[0].username}},{key:"createdBy",value:function(e){if(0===e)return"#N/A";var t=this.users.filter(function(t){return t.id===e})[0];return void 0!==t?t.username:"#N/A"}}]),e}(),dn.\u0275fac=function(e){return new(e||dn)(A.Mb(M.a),A.Mb(G.a),A.Mb(u.b),A.Mb(x.a),A.Mb(F.a),A.Mb(ie.a),A.Mb(Q.a),A.Mb(Ki),A.Mb(Ui.a),A.Mb(bi.a),A.Mb(V.a))},dn.\u0275cmp=A.Gb({type:dn,selectors:[["app-bpfc-status"]],viewQuery:function(e,t){var i;1&e&&A.Qc(Li,!0),2&e&&A.xc(i=A.dc())&&(t.gridModel=i.first)},decls:39,vars:5,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],["allowPaging","true","showColumnMenu","true","allowSorting","true","allowResizing","true","gridLines","Both",3,"searchSettings","toolbar","dataSource","allowExcelExport","pageSettings","dataBound","toolbarClick","actionBegin","recordDoubleClick","actionComplete"],["gridModel",""],["field","","headerText","#","isPrimaryKey","true","width","40","textAlign","Center","isPrimaryKey","true"],["template",""],["field","modelName","isPrimaryKey","true","textAlign","Center","headerText","Model Name","width","130"],["field","modelNo","isPrimaryKey","true","textAlign","Center","headerText","Model No","width","104"],["field","articleNo","isPrimaryKey","true","textAlign","Center","headerText","Article #","width","97"],["field","artProcess","isPrimaryKey","true","textAlign","Center","headerText","Process","width","97"],["field","createdDate","headerText","Created Date Time","type","date","format","dd MMM, yyyy HH:mm","width","155","textAlign","Center"],["headerTemplate",""],["field","createdBy","headerText","PIC","width","90","textAlign","Center"],["field","finishedStatus","isPrimaryKey","true","headerText","Finished","width","130","textAlign","Center"],["field","approvalStatus","isPrimaryKey","true","headerText","Approval Status","width","130","textAlign","Center"],["field","approvalBy","headerText","Approval By","width","100","textAlign","Center"],["field","tool","isPrimaryKey","true","headerText","Detail","width","70","textAlign","Center"],["detailModal",""],["class","badge badge-success",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],[1,"badge","badge-success"],[1,"badge","badge-danger"],["class","badge badge-warning",4,"ngIf"],[1,"badge","badge-warning"],["ejs-button","","cssClass","e-info",3,"click"],[1,"fa","fa-eye"],[1,"modal-header"],[1,"modal-title"],[1,"fas","fa-plus"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-md-6"],["showColumnMenu","true","allowSorting","true","allowResizing","true","gridLines","Both","height","250px",3,"dataSource","selectedRowIndex","rowSelected"],["gridglue",""],["field","name","isPrimaryKey","true","headerText","Chemical","textAlign","Center","width","150"],["field","consumption","headerText","Std. Con.(g)","textAlign","Center","width","150"],["field","finishedDate","headerText","Created Date Time","type","date","format","d MMM, yyyy HH:mm","width","150","textAlign","Center"],["field","finishedBy","headerText","PIC","width","100","textAlign","Center"],["field","modelNo","headerText","Kind","textAlign","Center","width","150"],["field","pathName","headerText","Part","textAlign","Center","width","150"],["field","materialName","headerText","Material","textAlign","Center","width","150"],["showColumnMenu","true","allowSorting","true","allowResizing","true","gridLines","Both","height","250px",3,"dataSource","allowSorting"],["grid",""],["field","position","headerText","Item","width","80","textAlign","Center"],["field","name","isPrimaryKey","true","headerText","Name","width","150","textAlign","Center"],["field","percentage","headerText","%","textAlign","Center","width","70"],["field","allow","headerText","Allow (%)","textAlign","Center","width","70"],[1,"modal-footer"],["type","submit","class","btn btn-success",3,"click",4,"ngIf"],["type","submit","class","btn btn-warning",3,"click",4,"ngIf"],["type","button",1,"btn","btn-danger",3,"click"],[1,"row","bootstrap","snippets"],[1,"col-md-12","col-md-offset-2","col-sm-12"],[1,"comment-wrapper"],[1,"panel","panel-info"],[1,"panel-body"],["placeholder","write a comment...","rows","3",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-info","pull-right",3,"click"],[1,"clearfix"],[1,"media-list",2,"padding","0"],["class","media",4,"ngFor","ngForOf"],["data-toggle","tooltip","data-placement","top",3,"title"],[1,"fas","fa-exclamation-circle"],["type","submit",1,"btn","btn-success",3,"click"],["type","submit",1,"btn","btn-warning",3,"click"],[1,"media"],["href","#",1,"pull-left"],["src","../../../../assets/img/logo-1.png","alt","",1,"img-circle"],[1,"media-body","ml-1"],[1,"text-muted","pull-right"],[1,"text-muted"],[1,"text-success"]],template:function(e,t){1&e&&(A.Sb(0,"div",0),A.Sb(1,"div",1),A.Sb(2,"div",2),A.Sb(3,"ejs-grid",3,4),A.cc("dataBound",function(){return t.dataBound()})("toolbarClick",function(e){return t.toolbarClick(e)})("actionBegin",function(e){return t.actionBegin(e)})("recordDoubleClick",function(e){return t.onDoubleClick(e)})("actionComplete",function(e){return t.actionComplete(e)}),A.Sb(5,"e-columns"),A.Sb(6,"e-column",5),A.Ic(7,zi,1,1,"ng-template",null,6,A.Jc),A.Rb(),A.Nb(9,"e-column",7),A.Nb(10,"e-column",8),A.Nb(11,"e-column",9),A.Nb(12,"e-column",10),A.Sb(13,"e-column",11),A.Ic(14,Ji,2,3,"ng-template",null,12,A.Jc),A.Rb(),A.Sb(16,"e-column",13),A.Ic(17,ji,2,3,"ng-template",null,12,A.Jc),A.Rb(),A.Sb(19,"e-column",14),A.Ic(20,$i,2,3,"ng-template",null,12,A.Jc),A.Ic(22,qi,2,2,"ng-template",null,6,A.Jc),A.Rb(),A.Sb(24,"e-column",15),A.Ic(25,Qi,2,3,"ng-template",null,12,A.Jc),A.Ic(27,Wi,3,3,"ng-template",null,6,A.Jc),A.Rb(),A.Sb(29,"e-column",16),A.Ic(30,Zi,2,3,"ng-template",null,12,A.Jc),A.Rb(),A.Sb(32,"e-column",17),A.Ic(33,en,2,3,"ng-template",null,12,A.Jc),A.Ic(35,tn,2,0,"ng-template",null,6,A.Jc),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Rb(),A.Ic(37,sn,55,8,"ng-template",null,18,A.Jc),A.Rb()),2&e&&(A.zb(3),A.mc("searchSettings",t.searchSettings)("toolbar",t.toolbar)("dataSource",t.data)("allowExcelExport",!0)("pageSettings",t.pageSettings))},directives:[y.j,h.d,B.d,B.b,y.e,y.b,h.c,B.c,B.a,y.d,y.a,o.n,m.b,r.b,r.g,r.j,o.m],pipes:[v.c],styles:["body[_ngcontent-%COMP%]{margin-top:20px}.comment-wrapper[_ngcontent-%COMP%]   .panel-body[_ngcontent-%COMP%]{max-height:650px;overflow:auto}.comment-wrapper[_ngcontent-%COMP%]   .media-list[_ngcontent-%COMP%]   .media[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:64px;height:64px;border:2px solid #e5e7e8}.comment-wrapper[_ngcontent-%COMP%]   .media-list[_ngcontent-%COMP%]   .media[_ngcontent-%COMP%]{border-bottom:1px dashed #efefef;margin-bottom:25px}.e-grid[_ngcontent-%COMP%]   td.e-active[_ngcontent-%COMP%]{background:#6597ce!important;color:#000}"]}),dn),data:{title:"BPFC Status",breadcrumb:"BPFC Status"}},{path:"bpfc-1",component:st,data:{title:"BPFC ",breadcrumb:"BPFC "}}]}],mn=((gn=function e(){i(this,e)}).\u0275mod=A.Kb({type:gn}),gn.\u0275inj=A.Jb({factory:function(e){return new(e||gn)},imports:[[x.f.forChild(hn)],x.f]}),gn);function bn(e){return new I.a(e,"./assets/i18n/",".json")}var fn=localStorage.getItem("lang");Object(N.bb)(l("2PVe"),l("GFvd"),l("GFWS"),l("0zpJ"),l("LRxf")),Object(N.bb)(l("2PVe"),l("oP7I"),l("Joj5"),l("3JeS"),l("LRxf")),un="vi"===fn?fn:"en";var pn,vn=((pn=function e(){i(this,e),"vi"===fn?(un="vi",setTimeout(function(){N.p.load(l("+7Wi")),Object(N.nb)("vi")})):(un="en",setTimeout(function(){N.p.load(l("oyrQ")),Object(N.nb)("en")}))}).\u0275mod=A.Kb({type:pn}),pn.\u0275inj=A.Jb({factory:function(e){return new(e||pn)},providers:[o.d],imports:[[P.b,m.c,o.b,r.c,r.m,c.b,mn,s.a,d.d,u.c,h.b,h.a,h.e,g.a,g.d,g.c,m.j,f.a,b.b,B.h,y.i,m.h,S.c,k.b,D.a,b.d,w.a,C.d,m.f,d.f,v.b.forChild({loader:{provide:v.a,useFactory:bn,deps:[p.b]},defaultLanguage:un})]]}),pn)},"h9f+":function(e,t,n){"use strict";n.d(t,"a",function(){return u});var l=n("2Vo4"),o=n("lJxs"),r=n("tk/3"),c=n("AytR"),s=n("2zK7"),d=n("fXoL");new r.e({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")});var u=function(){var e=function(){function e(t){i(this,e),this.http=t,this.baseUrl=c.a.apiUrlEC,this.authUrl=c.a.apiUrl,this.messageSource=new l.a(0),this.currentMessage=this.messageSource.asObservable()}return a(e,[{key:"changeMessage",value:function(e){this.messageSource.next(e)}},{key:"getBuildingsAsTreeView",value:function(){return this.http.get(this.baseUrl+"Building/GetAllAsTreeView")}},{key:"mappingUserWithBuilding",value:function(e){return this.http.post(this.baseUrl+"BuildingUser/MappingUserWithBuilding",e)}},{key:"removeBuildingUser",value:function(e){return this.http.post(this.baseUrl+"BuildingUser/RemoveBuildingUser",e)}},{key:"getAllUsers",value:function(e,t){var i=new s.a;return this.http.get("".concat(this.authUrl,"Users/GetAllUsers/").concat(c.a.systemCode,"/").concat(e,"/").concat(t),{observe:"response"}).pipe(Object(o.a)(function(e){return i.result=e.body,null!=e.headers.get("Pagination")&&(i.pagination=JSON.parse(e.headers.get("Pagination"))),i}))}},{key:"deleteUser",value:function(e){return this.http.delete("".concat(this.authUrl,"Users/Delete/").concat(e))}},{key:"updateUser",value:function(e){return this.http.post(this.authUrl+"Users/Update",e)}},{key:"createUser",value:function(e){return this.http.post(this.authUrl+"Users/Create",e)}},{key:"getAllBuildingUsers",value:function(){return this.http.get(this.baseUrl+"BuildingUser/getAllBuildingUsers")}},{key:"getBuildingUserByBuildingID",value:function(e){return this.http.get("".concat(this.baseUrl,"BuildingUser/GetBuildingUserByBuildingID/").concat(e))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.Zb(r.b))},e.\u0275prov=d.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},vrRs:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var l=n("tk/3"),o=n("2Vo4"),r=n("lJxs"),c=n("AytR"),s=n("2zK7"),d=n("fXoL");new l.e({"Content-Type":"application/json"});var u=function(){var e=function(){function e(t){i(this,e),this.http=t,this.baseUrl=c.a.apiUrlEC,this.ingredientSource=new o.a(0),this.currentIngredient=this.ingredientSource.asObservable()}return a(e,[{key:"getIngredients",value:function(e,t){var i=new s.a,n=new l.f;return null!=e&&null!=t&&(n=(n=n.append("pageNumber",e)).append("pageSize",t)),this.http.get(this.baseUrl+"ingredient/getingredients",{observe:"response",params:n}).pipe(Object(r.a)(function(e){return i.result=e.body,null!=e.headers.get("Pagination")&&(i.pagination=JSON.parse(e.headers.get("Pagination"))),i}))}},{key:"search",value:function(e,t,i){var n=new s.a,a=new l.f;return null!=e&&null!=t&&(a=(a=a.append("pageNumber",e)).append("pageSize",t)),this.http.get(this.baseUrl+"ingredient/Search/"+i,{observe:"response",params:a}).pipe(Object(r.a)(function(e){return n.result=e.body,null!=e.headers.get("Pagination")&&(n.pagination=JSON.parse(e.headers.get("Pagination"))),n}))}},{key:"getAllIngredient",value:function(){return this.http.get(this.baseUrl+"ingredient/GetAll",{})}},{key:"getAllGlueType",value:function(){return this.http.get(this.baseUrl+"ingredient/GetAllGlueType",{})}},{key:"getByID",value:function(e){return this.http.get(this.baseUrl+"ingredient/GetbyID/"+e,{})}},{key:"scanQRCode",value:function(e){return this.http.get(this.baseUrl+"ingredient/ScanQRCode/"+e,{})}},{key:"scanQRCodeFromChemicalWareHouse",value:function(e,t,i){return this.http.get("".concat(this.baseUrl,"ingredient/ScanQRCodeFromChemialWareHouse/").concat(e,"/").concat(t,"/").concat(i),{})}},{key:"scanQRCodeOutput",value:function(e,t,i){return this.http.get("".concat(this.baseUrl,"ingredient/ScanQRCodeOutput/").concat(e,"/").concat(t,"/").concat(i),{})}},{key:"getAllSupplier",value:function(){return this.http.get(this.baseUrl+"Suppier/GetAll",{})}},{key:"getAllIngredientInfo",value:function(){return this.http.get(this.baseUrl+"ingredient/GetAllIngredientInfo",{})}},{key:"getAllIngredientInfoOutput",value:function(){return this.http.get(this.baseUrl+"ingredient/GetAllIngredientInfoOutPut",{})}},{key:"getAllIngredientInfoByBuildingName",value:function(e){return this.http.get(this.baseUrl+"ingredient/GetAllIngredientInfoByBuildingName/"+e,{})}},{key:"getAllIngredientInfoReport",value:function(){return this.http.get(this.baseUrl+"ingredient/GetAllIngredientInfoReport",{})}},{key:"getAllIngredientInfoReportByBuildingName",value:function(e){return this.http.get(this.baseUrl+"ingredient/GetAllIngredientInfoReportByBuildingName/"+e,{})}},{key:"searchInventory",value:function(e,t){return this.http.get("".concat(this.baseUrl,"ingredient/Search/").concat(e,"/").concat(t),{})}},{key:"searchInventoryByBuildingName",value:function(e,t,i){return this.http.get("".concat(this.baseUrl,"ingredient/SearchWithBuildingName/").concat(e,"/").concat(t,"/").concat(i),{})}},{key:"deleteIngredientInfo",value:function(e,t,i,n){return this.http.delete(this.baseUrl+"ingredient/DeleteIngredientInfo/".concat(e,"/").concat(t,"/").concat(i,"/").concat(n))}},{key:"UpdateConsumption",value:function(e,t,i){return this.http.post(this.baseUrl+"ingredient/UpdateConsumptionIngredientReport/".concat(e,"/").concat(t,"/").concat(i),{})}},{key:"UpdateConsumptionOfBuilding",value:function(e){return this.http.post(this.baseUrl+"ingredient/UpdateConsumptionOfBuildingIngredientReport",e)}},{key:"createSub",value:function(e){return this.http.post(this.baseUrl+"suppier/create",e)}},{key:"updateSub",value:function(e){return this.http.put(this.baseUrl+"suppier/update",e)}},{key:"deleteSub",value:function(e){return this.http.delete(this.baseUrl+"suppier/delete/"+e)}},{key:"sortBySup",value:function(e,t){return this.http.get(this.baseUrl+"GlueIngredient/GetIngredientsByGlueID/".concat(e,"/").concat(t))}},{key:"getIngredientsByGlueID",value:function(e){return this.http.get(this.baseUrl+"GlueIngredient/GetIngredientsByGlueID/"+e)}},{key:"create",value:function(e){return this.http.post(this.baseUrl+"ingredient/create1",e)}},{key:"update",value:function(e){return this.http.put(this.baseUrl+"ingredient/update",e)}},{key:"delete",value:function(e){return this.http.delete(this.baseUrl+"ingredient/delete/"+e)}},{key:"changeIngredient",value:function(e){this.ingredientSource.next(e)}},{key:"import",value:function(e,t){var i=new FormData;return i.append("UploadedFile",e),i.append("CreatedBy",t),this.http.post(this.baseUrl+"ingredient/Import",i)}},{key:"downloadFile",value:function(){return this.http.post(this.baseUrl+"ingredient/ExcelExport",{})}},{key:"GetQrcodeByid",value:function(e){return this.http.get(this.baseUrl+"ingredient/GetbyID/"+e)}},{key:"UpdatePrint",value:function(e){return this.http.put(this.baseUrl+"ingredient/UpdatePrint",e)}},{key:"checkIncoming",value:function(e,t,i){return this.http.get("".concat(this.baseUrl,"ingredient/CheckIncoming/").concat(e,"/").concat(t,"/").concat(i),{})}},{key:"getAllIngredientInfoByBuilding",value:function(e){return this.http.get(this.baseUrl+"ingredient/GetAllIngredientInfoByBuilding/"+e,{})}},{key:"getAllIngredientInfoOutputByBuilding",value:function(e){return this.http.get(this.baseUrl+"ingredient/GetAllIngredientInfoOutputByBuilding/"+e,{})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.Zb(l.b))},e.\u0275prov=d.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()}}])}();