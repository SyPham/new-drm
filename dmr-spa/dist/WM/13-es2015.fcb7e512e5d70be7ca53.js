(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"R5/Y":function(t,e,i){var n;n=function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}var e=function(){var t={};return function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"introjs-stamp";return t[i]=t[i]||0,void 0===e[i]&&(e[i]=t[i]++),e[i]}}();function i(t,e,i){if(t)for(var n=0,o=t.length;n<o;n++)e(t[n],n);"function"==typeof i&&i()}var n=new function(){var t="introjs_event";this._id=function(t,i,n,o){return i+e(n)+(o?"_".concat(e(o)):"")},this.on=function(e,i,n,o,a){var s=this._id.apply(this,arguments),c=function(t){return n.call(o||e,t||window.event)};"addEventListener"in e?e.addEventListener(i,c,a):"attachEvent"in e&&e.attachEvent("on".concat(i),c),e[t]=e[t]||{},e[t][s]=c},this.off=function(e,i,n,o,a){var s=this._id.apply(this,arguments),c=e[t]&&e[t][s];c&&("removeEventListener"in e?e.removeEventListener(i,c,a):"detachEvent"in e&&e.detachEvent("on".concat(i),c),e[t][s]=null)}},o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function a(t,e){return t(e={exports:{}},e.exports),e.exports}var s=function(t){return t&&t.Math==Math&&t},c=s("object"==typeof globalThis&&globalThis)||s("object"==typeof window&&window)||s("object"==typeof self&&self)||s("object"==typeof o&&o)||function(){return this}()||Function("return this")(),l=function(t){try{return!!t()}catch(e){return!0}},r=!l(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),d={}.propertyIsEnumerable,h=Object.getOwnPropertyDescriptor,u={f:h&&!d.call({1:2},1)?function(t){var e=h(this,t);return!!e&&e.enumerable}:d},g=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},b={}.toString,p=function(t){return b.call(t).slice(8,-1)},m="".split,f=l(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==p(t)?m.call(t,""):Object(t)}:Object,S=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},v=function(t){return f(S(t))},y=function(t){return"object"==typeof t?null!==t:"function"==typeof t},D=function(t,e){if(!y(t))return t;var i,n;if(e&&"function"==typeof(i=t.toString)&&!y(n=i.call(t)))return n;if("function"==typeof(i=t.valueOf)&&!y(n=i.call(t)))return n;if(!e&&"function"==typeof(i=t.toString)&&!y(n=i.call(t)))return n;throw TypeError("Can't convert object to primitive value")},C={}.hasOwnProperty,T=function(t,e){return C.call(t,e)},w=c.document,I=y(w)&&y(w.createElement),x=function(t){return I?w.createElement(t):{}},R=!r&&!l(function(){return 7!=Object.defineProperty(x("div"),"a",{get:function(){return 7}}).a}),M=Object.getOwnPropertyDescriptor,k={f:r?M:function(t,e){if(t=v(t),e=D(e,!0),R)try{return M(t,e)}catch(i){}if(T(t,e))return g(!u.f.call(t,e),t[e])}},B=function(t){if(!y(t))throw TypeError(String(t)+" is not an object");return t},N=Object.defineProperty,A={f:r?N:function(t,e,i){if(B(t),e=D(e,!0),B(i),R)try{return N(t,e,i)}catch(n){}if("get"in i||"set"in i)throw TypeError("Accessors not supported");return"value"in i&&(t[e]=i.value),t}},O=r?function(t,e,i){return A.f(t,e,g(1,i))}:function(t,e,i){return t[e]=i,t},P=function(t,e){try{O(c,t,e)}catch(i){c[t]=e}return e},E=c["__core-js_shared__"]||P("__core-js_shared__",{}),L=Function.toString;"function"!=typeof E.inspectSource&&(E.inspectSource=function(t){return L.call(t)});var _,F,j,K=E.inspectSource,$=c.WeakMap,z="function"==typeof $&&/native code/.test(K($)),H=a(function(t){(t.exports=function(t,e){return E[t]||(E[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.8.1",mode:"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})}),U=0,J=Math.random(),G=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++U+J).toString(36)},Q=H("keys"),q=function(t){return Q[t]||(Q[t]=G(t))},V={};if(z){var W=E.state||(E.state=new(0,c.WeakMap)),Y=W.get,X=W.has,Z=W.set;_=function(t,e){return e.facade=t,Z.call(W,t,e),e},F=function(t){return Y.call(W,t)||{}},j=function(t){return X.call(W,t)}}else{var tt=q("state");V[tt]=!0,_=function(t,e){return e.facade=t,O(t,tt,e),e},F=function(t){return T(t,tt)?t[tt]:{}},j=function(t){return T(t,tt)}}var et={set:_,get:F,has:j,enforce:function(t){return j(t)?F(t):_(t,{})},getterFor:function(t){return function(e){var i;if(!y(e)||(i=F(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return i}}},it=a(function(t){var e=et.get,i=et.enforce,n=String(String).split("String");(t.exports=function(t,e,o,a){var s,l=!!a&&!!a.unsafe,r=!!a&&!!a.enumerable,d=!!a&&!!a.noTargetGet;"function"==typeof o&&("string"!=typeof e||T(o,"name")||O(o,"name",e),(s=i(o)).source||(s.source=n.join("string"==typeof e?e:""))),t!==c?(l?!d&&t[e]&&(r=!0):delete t[e],r?t[e]=o:O(t,e,o)):r?t[e]=o:P(e,o)})(Function.prototype,"toString",function(){return"function"==typeof this&&e(this).source||K(this)})}),nt=c,ot=function(t){return"function"==typeof t?t:void 0},at=function(t,e){return arguments.length<2?ot(nt[t])||ot(c[t]):nt[t]&&nt[t][e]||c[t]&&c[t][e]},st=Math.ceil,ct=Math.floor,lt=function(t){return isNaN(t=+t)?0:(t>0?ct:st)(t)},rt=Math.min,dt=function(t){return t>0?rt(lt(t),9007199254740991):0},ht=Math.max,ut=Math.min,gt=function(t,e){var i=lt(t);return i<0?ht(i+e,0):ut(i,e)},bt=function(t){return function(e,i,n){var o,a=v(e),s=dt(a.length),c=gt(n,s);if(t&&i!=i){for(;s>c;)if((o=a[c++])!=o)return!0}else for(;s>c;c++)if((t||c in a)&&a[c]===i)return t||c||0;return!t&&-1}},pt={includes:bt(!0),indexOf:bt(!1)},mt=pt.indexOf,ft=function(t,e){var i,n=v(t),o=0,a=[];for(i in n)!T(V,i)&&T(n,i)&&a.push(i);for(;e.length>o;)T(n,i=e[o++])&&(~mt(a,i)||a.push(i));return a},St=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],vt=St.concat("length","prototype"),yt={f:Object.getOwnPropertyNames||function(t){return ft(t,vt)}},Dt={f:Object.getOwnPropertySymbols},Ct=at("Reflect","ownKeys")||function(t){var e=yt.f(B(t)),i=Dt.f;return i?e.concat(i(t)):e},Tt=function(t,e){for(var i=Ct(e),n=A.f,o=k.f,a=0;a<i.length;a++){var s=i[a];T(t,s)||n(t,s,o(e,s))}},wt=/#|\.prototype\./,It=function(t,e){var i=Rt[xt(t)];return i==kt||i!=Mt&&("function"==typeof e?l(e):!!e)},xt=It.normalize=function(t){return String(t).replace(wt,".").toLowerCase()},Rt=It.data={},Mt=It.NATIVE="N",kt=It.POLYFILL="P",Bt=It,Nt=k.f,At=function(t,e){var i,n,o,a,s,l=t.target,r=t.global,d=t.stat;if(i=r?c:d?c[l]||P(l,{}):(c[l]||{}).prototype)for(n in e){if(a=e[n],o=t.noTargetGet?(s=Nt(i,n))&&s.value:i[n],!Bt(r?n:l+(d?".":"#")+n,t.forced)&&void 0!==o){if(typeof a==typeof o)continue;Tt(a,o)}(t.sham||o&&o.sham)&&O(a,"sham",!0),it(i,n,a,t)}},Ot=function(){var t=B(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e};function Pt(t,e){return RegExp(t,e)}var Et,Lt,_t={UNSUPPORTED_Y:l(function(){var t=Pt("a","y");return t.lastIndex=2,null!=t.exec("abcd")}),BROKEN_CARET:l(function(){var t=Pt("^r","gy");return t.lastIndex=2,null!=t.exec("str")})},Ft=RegExp.prototype.exec,jt=String.prototype.replace,Kt=Ft,$t=(Lt=/b*/g,Ft.call(Et=/a/,"a"),Ft.call(Lt,"a"),0!==Et.lastIndex||0!==Lt.lastIndex),zt=_t.UNSUPPORTED_Y||_t.BROKEN_CARET,Ht=void 0!==/()??/.exec("")[1];($t||Ht||zt)&&(Kt=function(t){var e,i,n,o,a=this,s=zt&&a.sticky,c=Ot.call(a),l=a.source,r=0,d=t;return s&&(-1===(c=c.replace("y","")).indexOf("g")&&(c+="g"),d=String(t).slice(a.lastIndex),a.lastIndex>0&&(!a.multiline||a.multiline&&"\n"!==t[a.lastIndex-1])&&(l="(?: "+l+")",d=" "+d,r++),i=new RegExp("^(?:"+l+")",c)),Ht&&(i=new RegExp("^"+l+"$(?!\\s)",c)),$t&&(e=a.lastIndex),n=Ft.call(s?i:a,d),s?n?(n.input=n.input.slice(r),n[0]=n[0].slice(r),n.index=a.lastIndex,a.lastIndex+=n[0].length):a.lastIndex=0:$t&&n&&(a.lastIndex=a.global?n.index+n[0].length:e),Ht&&n&&n.length>1&&jt.call(n[0],i,function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(n[o]=void 0)}),n});var Ut=Kt;At({target:"RegExp",proto:!0,forced:/./.exec!==Ut},{exec:Ut});var Jt=!!Object.getOwnPropertySymbols&&!l(function(){return!String(Symbol())}),Gt=Jt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Qt=H("wks"),qt=c.Symbol,Vt=Gt?qt:qt&&qt.withoutSetter||G,Wt=function(t){return T(Qt,t)||(Qt[t]=Jt&&T(qt,t)?qt[t]:Vt("Symbol."+t)),Qt[t]},Yt=Wt("species"),Xt=!l(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),Zt="$0"==="a".replace(/./,"$0"),te=Wt("replace"),ee=!!/./[te]&&""===/./[te]("a","$0"),ie=!l(function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var i="ab".split(t);return 2!==i.length||"a"!==i[0]||"b"!==i[1]}),ne=function(t,e,i,n){var o=Wt(t),a=!l(function(){var e={};return e[o]=function(){return 7},7!=""[t](e)}),s=a&&!l(function(){var e=!1,i=/a/;return"split"===t&&((i={}).constructor={},i.constructor[Yt]=function(){return i},i.flags="",i[o]=/./[o]),i.exec=function(){return e=!0,null},i[o](""),!e});if(!a||!s||"replace"===t&&(!Xt||!Zt||ee)||"split"===t&&!ie){var c=/./[o],r=i(o,""[t],function(t,e,i,n,o){return e.exec===Ut?a&&!o?{done:!0,value:c.call(e,i,n)}:{done:!0,value:t.call(i,e,n)}:{done:!1}},{REPLACE_KEEPS_$0:Zt,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:ee}),d=r[1];it(String.prototype,t,r[0]),it(RegExp.prototype,o,2==e?function(t,e){return d.call(t,this,e)}:function(t){return d.call(t,this)})}n&&O(RegExp.prototype[o],"sham",!0)},oe=function(t){return function(e,i){var n,o,a=String(S(e)),s=lt(i),c=a.length;return s<0||s>=c?t?"":void 0:(n=a.charCodeAt(s))<55296||n>56319||s+1===c||(o=a.charCodeAt(s+1))<56320||o>57343?t?a.charAt(s):n:t?a.slice(s,s+2):o-56320+(n-55296<<10)+65536}},ae=(oe(!1),oe(!0)),se=function(t,e,i){return e+(i?ae(t,e).length:1)},ce=function(t,e){var i=t.exec;if("function"==typeof i){var n=i.call(t,e);if("object"!=typeof n)throw TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==p(t))throw TypeError("RegExp#exec called on incompatible receiver");return Ut.call(t,e)};ne("match",1,function(t,e,i){return[function(e){var i=S(this),n=null==e?void 0:e[t];return void 0!==n?n.call(e,i):new RegExp(e)[t](String(i))},function(t){var n=i(e,t,this);if(n.done)return n.value;var o=B(t),a=String(this);if(!o.global)return ce(o,a);var s=o.unicode;o.lastIndex=0;for(var c,l=[],r=0;null!==(c=ce(o,a));){var d=String(c[0]);l[r]=d,""===d&&(o.lastIndex=se(a,dt(o.lastIndex),s)),r++}return 0===r?null:l}]});var le,re,de=Array.isArray||function(t){return"Array"==p(t)},he=function(t){return Object(S(t))},ue=function(t,e,i){var n=D(e);n in t?A.f(t,n,g(0,i)):t[n]=i},ge=Wt("species"),be=function(t,e){var i;return de(t)&&("function"!=typeof(i=t.constructor)||i!==Array&&!de(i.prototype)?y(i)&&null===(i=i[ge])&&(i=void 0):i=void 0),new(void 0===i?Array:i)(0===e?0:e)},pe=at("navigator","userAgent")||"",me=c.process,fe=me&&me.versions,Se=fe&&fe.v8;Se?re=(le=Se.split("."))[0]+le[1]:pe&&(!(le=pe.match(/Edge\/(\d+)/))||le[1]>=74)&&(le=pe.match(/Chrome\/(\d+)/))&&(re=le[1]);var ve=re&&+re,ye=Wt("species"),De=function(t){return ve>=51||!l(function(){var e=[];return(e.constructor={})[ye]=function(){return{foo:1}},1!==e[t](Boolean).foo})},Ce=Wt("isConcatSpreadable"),Te=ve>=51||!l(function(){var t=[];return t[Ce]=!1,t.concat()[0]!==t}),we=De("concat"),Ie=function(t){if(!y(t))return!1;var e=t[Ce];return void 0!==e?!!e:de(t)};At({target:"Array",proto:!0,forced:!Te||!we},{concat:function(t){var e,i,n,o,a,s=he(this),c=be(s,0),l=0;for(e=-1,n=arguments.length;e<n;e++)if(Ie(a=-1===e?s:arguments[e])){if(l+(o=dt(a.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(i=0;i<o;i++,l++)i in a&&ue(c,l,a[i])}else{if(l>=9007199254740991)throw TypeError("Maximum allowed index exceeded");ue(c,l++,a)}return c.length=l,c}});var xe={};xe[Wt("toStringTag")]="z";var Re="[object z]"===String(xe),Me=Wt("toStringTag"),ke="Arguments"==p(function(){return arguments}()),Be=Re?p:function(t){var e,i,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(i){}}(e=Object(t),Me))?i:ke?p(e):"Object"==(n=p(e))&&"function"==typeof e.callee?"Arguments":n};Re||it(Object.prototype,"toString",Re?{}.toString:function(){return"[object "+Be(this)+"]"},{unsafe:!0});var Ne=RegExp.prototype,Ae=Ne.toString;(l(function(){return"/a/b"!=Ae.call({source:"a",flags:"b"})})||"toString"!=Ae.name)&&it(RegExp.prototype,"toString",function(){var t=B(this),e=String(t.source),i=t.flags;return"/"+e+"/"+String(void 0===i&&t instanceof RegExp&&!("flags"in Ne)?Ot.call(t):i)},{unsafe:!0});var Oe=Wt("match"),Pe=function(t){var e;return y(t)&&(void 0!==(e=t[Oe])?!!e:"RegExp"==p(t))},Ee=Wt("species"),Le=[].push,_e=Math.min,Fe=!l(function(){return!RegExp(4294967295,"y")});function je(t,e){if(t instanceof SVGElement){var n=t.getAttribute("class")||"";n.match(e)||t.setAttribute("class","".concat(n," ").concat(e))}else void 0!==t.classList?i(e.split(" "),function(e){t.classList.add(e)}):t.className.match(e)||(t.className+=" ".concat(e))}function Ke(t,e){var i="";return t.currentStyle?i=t.currentStyle[e]:document.defaultView&&document.defaultView.getComputedStyle&&(i=document.defaultView.getComputedStyle(t,null).getPropertyValue(e)),i&&i.toLowerCase?i.toLowerCase():i}function $e(t){var e=t.element;if(this._options.scrollToElement){var i=function(t){var e=window.getComputedStyle(t),i="absolute"===e.position,n=/(auto|scroll)/;if("fixed"===e.position)return document.body;for(var o=t;o=o.parentElement;)if(e=window.getComputedStyle(o),(!i||"static"!==e.position)&&n.test(e.overflow+e.overflowY+e.overflowX))return o;return document.body}(e);i!==document.body&&(i.scrollTop=e.offsetTop-i.offsetTop)}}function ze(){if(void 0!==window.innerWidth)return{width:window.innerWidth,height:window.innerHeight};var t=document.documentElement;return{width:t.clientWidth,height:t.clientHeight}}function He(t,e,i){var n,o=e.element;if("off"!==t&&this._options.scrollToElement&&(n="tooltip"===t?i.getBoundingClientRect():o.getBoundingClientRect(),!function(t){var e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom+80<=window.innerHeight&&e.right<=window.innerWidth}(o))){var a=ze().height;n.bottom-(n.bottom-n.top)<0||o.clientHeight>a?window.scrollBy(0,n.top-(a/2-n.height/2)-this._options.scrollPadding):window.scrollBy(0,n.top-(a/2-n.height/2)+this._options.scrollPadding)}}function Ue(t){t.setAttribute("role","button"),t.tabIndex=0}function Je(t){var e=document.body,i=document.documentElement,n=window.pageYOffset||i.scrollTop||e.scrollTop,o=window.pageXOffset||i.scrollLeft||e.scrollLeft,a=t.getBoundingClientRect();return{top:a.top+n,width:a.width,height:a.height,left:a.left+o}}function Ge(t){var e=t.parentNode;return!(!e||"HTML"===e.nodeName)&&("fixed"===Ke(t,"position")||Ge(e))}ne("split",2,function(t,e,i){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,i){var n=String(S(this)),o=void 0===i?4294967295:i>>>0;if(0===o)return[];if(void 0===t)return[n];if(!Pe(t))return e.call(n,t,o);for(var a,s,c,l=[],r=0,d=new RegExp(t.source,(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":"")+"g");(a=Ut.call(d,n))&&!((s=d.lastIndex)>r&&(l.push(n.slice(r,a.index)),a.length>1&&a.index<n.length&&Le.apply(l,a.slice(1)),c=a[0].length,r=s,l.length>=o));)d.lastIndex===a.index&&d.lastIndex++;return r===n.length?!c&&d.test("")||l.push(""):l.push(n.slice(r)),l.length>o?l.slice(0,o):l}:"0".split(void 0,0).length?function(t,i){return void 0===t&&0===i?[]:e.call(this,t,i)}:e,[function(e,i){var o=S(this),a=null==e?void 0:e[t];return void 0!==a?a.call(e,o,i):n.call(String(o),e,i)},function(t,o){var a=i(n,t,this,o,n!==e);if(a.done)return a.value;var s=B(t),c=String(this),l=function(t,e){var i,n=B(t).constructor;return void 0===n||null==(i=B(n)[Ee])?e:function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}(i)}(s,RegExp),r=s.unicode,d=new l(Fe?s:"^(?:"+s.source+")",(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+(Fe?"y":"g")),h=void 0===o?4294967295:o>>>0;if(0===h)return[];if(0===c.length)return null===ce(d,c)?[c]:[];for(var u=0,g=0,b=[];g<c.length;){d.lastIndex=Fe?g:0;var p,m=ce(d,Fe?c:c.slice(g));if(null===m||(p=_e(dt(d.lastIndex+(Fe?0:g)),c.length))===u)g=se(c,g,r);else{if(b.push(c.slice(u,g)),b.length===h)return b;for(var f=1;f<=m.length-1;f++)if(b.push(m[f]),b.length===h)return b;g=u=p}}return b.push(c.slice(u)),b}]},!Fe);var Qe=Math.max,qe=Math.min,Ve=Math.floor,We=/\$([$&'`]|\d\d?|<[^>]*>)/g,Ye=/\$([$&'`]|\d\d?)/g;function Xe(t,e){if(t instanceof SVGElement){var i=t.getAttribute("class")||"";t.setAttribute("class",i.replace(e,"").replace(/^\s+|\s+$/g,""))}else t.className=t.className.replace(e,"").replace(/^\s+|\s+$/g,"")}function Ze(t,e){var i="";if(t.style.cssText&&(i+=t.style.cssText),"string"==typeof e)i+=e;else for(var n in e)i+="".concat(n,":").concat(e[n],";");t.style.cssText=i}function ti(t){if(t){if(!this._introItems[this._currentStep])return;var e=this._introItems[this._currentStep],i=Je(e.element),n=this._options.helperElementPadding;Ge(e.element)?je(t,"introjs-fixedTooltip"):Xe(t,"introjs-fixedTooltip"),"floating"===e.position&&(n=0),Ze(t,{width:"".concat(i.width+n,"px"),height:"".concat(i.height+n,"px"),top:"".concat(i.top-n/2,"px"),left:"".concat(i.left-n/2,"px")})}}ne("replace",2,function(t,e,i,n){var o=n.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,a=n.REPLACE_KEEPS_$0,s=o?"$":"$0";return[function(i,n){var o=S(this),a=null==i?void 0:i[t];return void 0!==a?a.call(i,o,n):e.call(String(o),i,n)},function(t,n){if(!o&&a||"string"==typeof n&&-1===n.indexOf(s)){var l=i(e,t,this,n);if(l.done)return l.value}var r=B(t),d=String(this),h="function"==typeof n;h||(n=String(n));var u=r.global;if(u){var g=r.unicode;r.lastIndex=0}for(var b=[];;){var p=ce(r,d);if(null===p)break;if(b.push(p),!u)break;""===String(p[0])&&(r.lastIndex=se(d,dt(r.lastIndex),g))}for(var m,f="",S=0,v=0;v<b.length;v++){p=b[v];for(var y=String(p[0]),D=Qe(qe(lt(p.index),d.length),0),C=[],T=1;T<p.length;T++)C.push(void 0===(m=p[T])?m:String(m));var w=p.groups;if(h){var I=[y].concat(C,D,d);void 0!==w&&I.push(w);var x=String(n.apply(void 0,I))}else x=c(y,d,D,C,w,n);D>=S&&(f+=d.slice(S,D)+x,S=D+y.length)}return f+d.slice(S)}];function c(t,i,n,o,a,s){var c=n+t.length,l=o.length,r=Ye;return void 0!==a&&(a=he(a),r=We),e.call(s,r,function(e,s){var r;switch(s.charAt(0)){case"$":return"$";case"&":return t;case"`":return i.slice(0,n);case"'":return i.slice(c);case"<":r=a[s.slice(1,-1)];break;default:var d=+s;if(0===d)return e;if(d>l){var h=Ve(d/10);return 0===h?e:h<=l?void 0===o[h-1]?s.charAt(1):o[h-1]+s.charAt(1):e}r=o[d-1]}return void 0===r?"":r})}});var ei,ii=Object.keys||function(t){return ft(t,St)},ni=r?Object.defineProperties:function(t,e){B(t);for(var i,n=ii(e),o=n.length,a=0;o>a;)A.f(t,i=n[a++],e[i]);return t},oi=at("document","documentElement"),ai=q("IE_PROTO"),si=function(){},ci=function(t){return"<script>"+t+"<\/script>"},li=function(){try{ei=document.domain&&new ActiveXObject("htmlfile")}catch(n){}var t,e;li=ei?function(t){t.write(ci("")),t.close();var e=t.parentWindow.Object;return t=null,e}(ei):((e=x("iframe")).style.display="none",oi.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(ci("document.F=Object")),t.close(),t.F);for(var i=St.length;i--;)delete li.prototype[St[i]];return li()};V[ai]=!0;var ri=Object.create||function(t,e){var i;return null!==t?(si.prototype=B(t),i=new si,si.prototype=null,i[ai]=t):i=li(),void 0===e?i:ni(i,e)},di=Wt("unscopables"),hi=Array.prototype;null==hi[di]&&A.f(hi,di,{configurable:!0,value:ri(null)});var ui=Object.defineProperty,gi={},bi=function(t){throw t},pi=function(t,e){if(T(gi,t))return gi[t];e||(e={});var i=[][t],n=!!T(e,"ACCESSORS")&&e.ACCESSORS,o=T(e,0)?e[0]:bi,a=T(e,1)?e[1]:void 0;return gi[t]=!!i&&!l(function(){if(n&&!r)return!0;var t={length:-1};n?ui(t,1,{enumerable:!0,get:bi}):t[1]=1,i.call(t,o,a)})},mi=pt.includes;At({target:"Array",proto:!0,forced:!pi("indexOf",{ACCESSORS:!0,1:0})},{includes:function(t){return mi(this,t,arguments.length>1?arguments[1]:void 0)}}),hi[di].includes=!0;var fi,Si=pt.indexOf,vi=[].indexOf,yi=!!vi&&1/[1].indexOf(1,-0)<0,Di=!!(fi=[].indexOf)&&l(function(){fi.call(null,function(){throw 1},1)}),Ci=pi("indexOf",{ACCESSORS:!0,1:0});At({target:"Array",proto:!0,forced:yi||!Di||!Ci},{indexOf:function(t){return yi?vi.apply(this,arguments)||0:Si(this,t,arguments.length>1?arguments[1]:void 0)}});var Ti=De("slice"),wi=pi("slice",{ACCESSORS:!0,0:0,1:2}),Ii=Wt("species"),xi=[].slice,Ri=Math.max;At({target:"Array",proto:!0,forced:!Ti||!wi},{slice:function(t,e){var i,n,o,a=v(this),s=dt(a.length),c=gt(t,s),l=gt(void 0===e?s:e,s);if(de(a)&&("function"!=typeof(i=a.constructor)||i!==Array&&!de(i.prototype)?y(i)&&null===(i=i[Ii])&&(i=void 0):i=void 0,i===Array||void 0===i))return xi.call(a,c,l);for(n=new(void 0===i?Array:i)(Ri(l-c,0)),o=0;c<l;c++,o++)c in a&&ue(n,o,a[c]);return n.length=o,n}});var Mi=function(t){if(Pe(t))throw TypeError("The method doesn't accept regular expressions");return t},ki=Wt("match");function Bi(t,e,i,n,o){return t.left+e+i.width>n.width?(o.left="".concat(n.width-i.width-t.left,"px"),!1):(o.left="".concat(e,"px"),!0)}function Ni(t,e,i,n){return t.left+t.width-e-i.width<0?(n.style.left="".concat(-t.left,"px"),!1):(n.style.right="".concat(e,"px"),!0)}At({target:"String",proto:!0,forced:!function(t){var e=/./;try{"/./".includes(e)}catch(i){try{return e[ki]=!1,"/./".includes(e)}catch(n){}}return!1}()},{includes:function(t){return!!~String(S(this)).indexOf(Mi(t),arguments.length>1?arguments[1]:void 0)}});var Ai=De("splice"),Oi=pi("splice",{ACCESSORS:!0,0:0,1:2}),Pi=Math.max,Ei=Math.min;function Li(t,e){t.includes(e)&&t.splice(t.indexOf(e),1)}function _i(t,e,i){var n=this._options.positionPrecedence.slice(),o=ze(),a=Je(e).height+10,s=Je(e).width+20,c=t.getBoundingClientRect(),l="floating";c.bottom+a>o.height&&Li(n,"bottom"),c.top-a<0&&Li(n,"top"),c.right+s>o.width&&Li(n,"right"),c.left-s<0&&Li(n,"left");var r,d,h=-1!==(d=(r=i||"").indexOf("-"))?r.substr(d):"";return i&&(i=i.split("-")[0]),n.length&&(l="auto"!==i&&n.includes(i)?i:n[0]),["top","bottom"].includes(l)&&(l+=function(t,e,i,n){var o=e/2,a=Math.min(i.width,window.screen.width),s=["-left-aligned","-middle-aligned","-right-aligned"];return a-t<e&&Li(s,"-left-aligned"),(t<o||a-t<o)&&Li(s,"-middle-aligned"),t<e&&Li(s,"-right-aligned"),s.length?s.includes(n)?n:s[0]:"-middle-aligned"}(c.left,s,o,h)),l}function Fi(t,e,i,n){var o,a,s,c,l;if(n=n||!1,e.style.top=null,e.style.right=null,e.style.bottom=null,e.style.left=null,e.style.marginLeft=null,e.style.marginTop=null,i.style.display="inherit",this._introItems[this._currentStep])switch(e.className="introjs-tooltip ".concat("string"==typeof(o=this._introItems[this._currentStep]).tooltipClass?o.tooltipClass:this._options.tooltipClass).replace(/^\s+|\s+$/g,""),e.setAttribute("role","dialog"),"floating"!==(l=this._introItems[this._currentStep].position)&&(l=_i.call(this,t,e,l)),s=Je(t),a=Je(e),c=ze(),je(e,"introjs-".concat(l)),l){case"top-right-aligned":i.className="introjs-arrow bottom-right";var r=0;Ni(s,r,a,e),e.style.bottom="".concat(s.height+20,"px");break;case"top-middle-aligned":i.className="introjs-arrow bottom-middle";var d=s.width/2-a.width/2;n&&(d+=5),Ni(s,d,a,e)&&(e.style.right=null,Bi(s,d,a,c,e)),e.style.bottom="".concat(s.height+20,"px");break;case"top-left-aligned":case"top":i.className="introjs-arrow bottom",Bi(s,n?0:15,a,c,e),e.style.bottom="".concat(s.height+20,"px");break;case"right":e.style.left="".concat(s.width+20,"px"),s.top+a.height>c.height?(i.className="introjs-arrow left-bottom",e.style.top="-".concat(a.height-s.height-20,"px")):i.className="introjs-arrow left";break;case"left":n||!0!==this._options.showStepNumbers||(e.style.top="15px"),s.top+a.height>c.height?(e.style.top="-".concat(a.height-s.height-20,"px"),i.className="introjs-arrow right-bottom"):i.className="introjs-arrow right",e.style.right="".concat(s.width+20,"px");break;case"floating":i.style.display="none",e.style.left="50%",e.style.top="50%",e.style.marginLeft="-".concat(a.width/2,"px"),e.style.marginTop="-".concat(a.height/2,"px");break;case"bottom-right-aligned":i.className="introjs-arrow top-right",Ni(s,r=0,a,e),e.style.top="".concat(s.height+20,"px");break;case"bottom-middle-aligned":i.className="introjs-arrow top-middle",d=s.width/2-a.width/2,n&&(d+=5),Ni(s,d,a,e)&&(e.style.right=null,Bi(s,d,a,c,e)),e.style.top="".concat(s.height+20,"px");break;default:i.className="introjs-arrow top",Bi(s,0,a,c,e),e.style.top="".concat(s.height+20,"px")}}function ji(){i(document.querySelectorAll(".introjs-showElement"),function(t){Xe(t,/introjs-[a-zA-Z]+/g)})}function Ki(t,e){var i=document.createElement(t);e=e||{};var n=/^(?:role|data-|aria-)/;for(var o in e){var a=e[o];"style"===o?Ze(i,a):o.match(n)?i.setAttribute(o,a):i[o]=a}return i}function $i(t,e,i){if(i){var n=e.style.opacity||"1";Ze(e,{opacity:"0"}),window.setTimeout(function(){Ze(e,{opacity:n})},10)}t.appendChild(e)}function zi(){return parseInt(this._currentStep+1,10)/this._introItems.length*100}function Hi(){var t=document.querySelector(".introjs-disableInteraction");null===t&&(t=Ki("div",{className:"introjs-disableInteraction"}),this._targetElement.appendChild(t)),ti.call(this,t)}function Ui(t){var e=this;void 0!==this._introChangeCallback&&this._introChangeCallback.call(this,t.element);var n,o,a,s=this,c=document.querySelector(".introjs-helperLayer"),l=document.querySelector(".introjs-tooltipReferenceLayer"),r="introjs-helperLayer";if("string"==typeof t.highlightClass&&(r+=" ".concat(t.highlightClass)),"string"==typeof this._options.highlightClass&&(r+=" ".concat(this._options.highlightClass)),null!==c){var d=l.querySelector(".introjs-helperNumberLayer"),h=l.querySelector(".introjs-tooltiptext"),u=l.querySelector(".introjs-tooltip-title"),g=l.querySelector(".introjs-arrow"),b=l.querySelector(".introjs-tooltip");a=l.querySelector(".introjs-skipbutton"),o=l.querySelector(".introjs-prevbutton"),n=l.querySelector(".introjs-nextbutton"),c.className=r,b.style.opacity=0,b.style.display="none",$e.call(s,t),ti.call(s,c),ti.call(s,l),ji(),s._lastShowElementTimer&&window.clearTimeout(s._lastShowElementTimer),s._lastShowElementTimer=window.setTimeout(function(){null!==d&&(d.innerHTML="".concat(t.step," of ").concat(e._introItems.length)),h.innerHTML=t.intro,u.innerHTML=t.title,b.style.display="block",Fi.call(s,t.element,b,g),s._options.showBullets&&(l.querySelector(".introjs-bullets li > a.active").className="",l.querySelector('.introjs-bullets li > a[data-stepnumber="'.concat(t.step,'"]')).className="active"),l.querySelector(".introjs-progress .introjs-progressbar").style.cssText="width:".concat(zi.call(s),"%;"),l.querySelector(".introjs-progress .introjs-progressbar").setAttribute("aria-valuenow",zi.call(s)),b.style.opacity=1,(null!=n&&/introjs-donebutton/gi.test(n.className)||null!=n)&&n.focus(),He.call(s,t.scrollTo,t,h)},350)}else{var p=Ki("div",{className:r}),m=Ki("div",{className:"introjs-tooltipReferenceLayer"}),f=Ki("div",{className:"introjs-arrow"}),S=Ki("div",{className:"introjs-tooltip"}),v=Ki("div",{className:"introjs-tooltiptext"}),y=Ki("div",{className:"introjs-tooltip-header"}),D=Ki("h1",{className:"introjs-tooltip-title"}),C=Ki("div",{className:"introjs-bullets"}),T=Ki("div"),w=Ki("div");Ze(p,{"box-shadow":"0 0 1px 2px rgba(33, 33, 33, 0.8), rgba(33, 33, 33, ".concat(s._options.overlayOpacity.toString(),") 0 0 0 5000px")}),$e.call(s,t),ti.call(s,p),ti.call(s,m),$i(this._targetElement,p,!0),$i(this._targetElement,m),v.innerHTML=t.intro,D.innerHTML=t.title,!1===this._options.showBullets&&(C.style.display="none");var I=Ki("ul");I.setAttribute("role","tablist");var x=function(){s.goToStep(this.getAttribute("data-stepnumber"))};i(this._introItems,function(e,i){var n=e.step,o=Ki("li"),a=Ki("a");o.setAttribute("role","presentation"),a.setAttribute("role","tab"),a.onclick=x,i===t.step-1&&(a.className="active"),Ue(a),a.innerHTML="&nbsp;",a.setAttribute("data-stepnumber",n),o.appendChild(a),I.appendChild(o)}),C.appendChild(I),T.className="introjs-progress",!1===this._options.showProgress&&(T.style.display="none");var R=Ki("div",{className:"introjs-progressbar"});this._options.progressBarAdditionalClass&&(R.className+=" "+this._options.progressBarAdditionalClass),R.setAttribute("role","progress"),R.setAttribute("aria-valuemin",0),R.setAttribute("aria-valuemax",100),R.setAttribute("aria-valuenow",zi.call(this)),R.style.cssText="width:".concat(zi.call(this),"%;"),T.appendChild(R),w.className="introjs-tooltipbuttons",!1===this._options.showButtons&&(w.style.display="none"),y.appendChild(D),S.appendChild(y),S.appendChild(v),S.appendChild(C),S.appendChild(T);var M=Ki("div");!0===this._options.showStepNumbers&&(M.className="introjs-helperNumberLayer",M.innerHTML="".concat(t.step," of ").concat(this._introItems.length),S.appendChild(M)),S.appendChild(f),m.appendChild(S),(n=Ki("a")).onclick=function(){s._introItems.length-1!==s._currentStep?Qi.call(s):/introjs-donebutton/gi.test(n.className)&&("function"==typeof s._introCompleteCallback&&s._introCompleteCallback.call(s),pn.call(s,s._targetElement))},Ue(n),n.innerHTML=this._options.nextLabel,(o=Ki("a")).onclick=function(){0!==s._currentStep&&qi.call(s)},Ue(o),o.innerHTML=this._options.prevLabel,Ue(a=Ki("a",{className:"introjs-skipbutton"})),a.innerHTML=this._options.skipLabel,a.onclick=function(){s._introItems.length-1===s._currentStep&&"function"==typeof s._introCompleteCallback&&s._introCompleteCallback.call(s),"function"==typeof s._introSkipCallback&&s._introSkipCallback.call(s),pn.call(s,s._targetElement)},y.appendChild(a),this._introItems.length>1&&w.appendChild(o),w.appendChild(n),S.appendChild(w),Fi.call(s,t.element,S,f),He.call(this,t.scrollTo,t,S)}var k=s._targetElement.querySelector(".introjs-disableInteraction");k&&k.parentNode.removeChild(k),t.disableInteraction&&Hi.call(s),0===this._currentStep&&this._introItems.length>1?(null!=n&&(n.className="".concat(this._options.buttonClass," introjs-nextbutton"),n.innerHTML=this._options.nextLabel),!0===this._options.hidePrev?(null!=o&&(o.className="".concat(this._options.buttonClass," introjs-prevbutton introjs-hidden")),null!=n&&je(n,"introjs-fullbutton")):null!=o&&(o.className="".concat(this._options.buttonClass," introjs-prevbutton introjs-disabled"))):this._introItems.length-1===this._currentStep||1===this._introItems.length?(null!=o&&(o.className="".concat(this._options.buttonClass," introjs-prevbutton")),!0===this._options.hideNext?(null!=n&&(n.className="".concat(this._options.buttonClass," introjs-nextbutton introjs-hidden")),null!=o&&je(o,"introjs-fullbutton")):null!=n&&(!0===this._options.nextToDone?(n.innerHTML=this._options.doneLabel,je(n,"".concat(this._options.buttonClass," introjs-nextbutton introjs-donebutton"))):n.className="".concat(this._options.buttonClass," introjs-nextbutton introjs-disabled"))):(null!=o&&(o.className="".concat(this._options.buttonClass," introjs-prevbutton")),null!=n&&(n.className="".concat(this._options.buttonClass," introjs-nextbutton"),n.innerHTML=this._options.nextLabel)),null!=o&&o.setAttribute("role","button"),null!=n&&n.setAttribute("role","button"),null!=a&&a.setAttribute("role","button"),null!=n&&n.focus(),function(t){var e=t.element;je(e,"introjs-showElement");var i=Ke(e,"position");"absolute"!==i&&"relative"!==i&&"sticky"!==i&&"fixed"!==i&&je(e,"introjs-relativePosition")}(t),void 0!==this._introAfterChangeCallback&&this._introAfterChangeCallback.call(this,t.element)}function Ji(t){this._currentStep=t-2,void 0!==this._introItems&&Qi.call(this)}function Gi(t){this._currentStepNumber=t,void 0!==this._introItems&&Qi.call(this)}function Qi(){var t=this;this._direction="forward",void 0!==this._currentStepNumber&&i(this._introItems,function(e,i){e.step===t._currentStepNumber&&(t._currentStep=i-1,t._currentStepNumber=void 0)}),void 0===this._currentStep?this._currentStep=0:++this._currentStep;var e=this._introItems[this._currentStep],n=!0;return void 0!==this._introBeforeChangeCallback&&(n=this._introBeforeChangeCallback.call(this,e&&e.element)),!1===n?(--this._currentStep,!1):this._introItems.length<=this._currentStep?("function"==typeof this._introCompleteCallback&&this._introCompleteCallback.call(this),void pn.call(this,this._targetElement)):void Ui.call(this,e)}function qi(){if(this._direction="backward",0===this._currentStep)return!1;--this._currentStep;var t=this._introItems[this._currentStep],e=!0;if(void 0!==this._introBeforeChangeCallback&&(e=this._introBeforeChangeCallback.call(this,t&&t.element)),!1===e)return++this._currentStep,!1;Ui.call(this,t)}function Vi(){return this._currentStep}function Wi(t){var e=null===t.code?t.which:t.code;if(null===e&&(e=null===t.charCode?t.keyCode:t.charCode),"Escape"!==e&&27!==e||!0!==this._options.exitOnEsc){if("ArrowLeft"===e||37===e)qi.call(this);else if("ArrowRight"===e||39===e)Qi.call(this);else if("Enter"===e||"NumpadEnter"===e||13===e){var i=t.target||t.srcElement;i&&i.className.match("introjs-prevbutton")?qi.call(this):i&&i.className.match("introjs-skipbutton")?(this._introItems.length-1===this._currentStep&&"function"==typeof this._introCompleteCallback&&this._introCompleteCallback.call(this),pn.call(this,this._targetElement)):i&&i.getAttribute("data-stepnumber")?i.click():Qi.call(this),t.preventDefault?t.preventDefault():t.returnValue=!1}}else pn.call(this,this._targetElement)}function Yi(e){if(null===e||"object"!==t(e)||void 0!==e.nodeType)return e;var i={};for(var n in e)i[n]=void 0!==window.jQuery&&e[n]instanceof window.jQuery?e[n]:Yi(e[n]);return i}function Xi(t){var e=document.querySelector(".introjs-hints");return e?e.querySelectorAll(t):[]}function Zi(t){var e=Xi('.introjs-hint[data-step="'.concat(t,'"]'))[0];rn.call(this),e&&je(e,"introjs-hidehint"),void 0!==this._hintCloseCallback&&this._hintCloseCallback.call(this,t)}function tn(){var t=this;i(Xi(".introjs-hint"),function(e){Zi.call(t,e.getAttribute("data-step"))})}function en(){var t=this,e=Xi(".introjs-hint");e&&e.length?i(e,function(e){nn.call(t,e.getAttribute("data-step"))}):dn.call(this,this._targetElement)}function nn(t){var e=Xi('.introjs-hint[data-step="'.concat(t,'"]'))[0];e&&Xe(e,/introjs-hidehint/g)}function on(){var t=this;i(Xi(".introjs-hint"),function(e){an.call(t,e.getAttribute("data-step"))})}function an(t){var e=Xi('.introjs-hint[data-step="'.concat(t,'"]'))[0];e&&e.parentNode.removeChild(e)}function sn(){var t=this,e=this,n=document.querySelector(".introjs-hints");null===n&&(n=Ki("div",{className:"introjs-hints"})),i(this._introItems,function(i,o){if(!document.querySelector('.introjs-hint[data-step="'.concat(o,'"]'))){var a=Ki("a",{className:"introjs-hint"});Ue(a),a.onclick=function(t){return function(i){var n=i||window.event;n.stopPropagation&&n.stopPropagation(),null!==n.cancelBubble&&(n.cancelBubble=!0),ln.call(e,t)}}(o),i.hintAnimation||je(a,"introjs-hint-no-anim"),Ge(i.element)&&je(a,"introjs-fixedhint");var s=Ki("div",{className:"introjs-hint-dot"}),c=Ki("div",{className:"introjs-hint-pulse"});a.appendChild(s),a.appendChild(c),a.setAttribute("data-step",o),i.targetElement=i.element,i.element=a,cn.call(t,i.hintPosition,a,i.targetElement),n.appendChild(a)}}),document.body.appendChild(n),void 0!==this._hintsAddedCallback&&this._hintsAddedCallback.call(this)}function cn(t,e,i){var n=e.style,o=Je.call(this,i);switch(t){default:case"top-left":n.left="".concat(o.left,"px"),n.top="".concat(o.top,"px");break;case"top-right":n.left="".concat(o.left+o.width-20,"px"),n.top="".concat(o.top,"px");break;case"bottom-left":n.left="".concat(o.left,"px"),n.top="".concat(o.top+o.height-20,"px");break;case"bottom-right":n.left="".concat(o.left+o.width-20,"px"),n.top="".concat(o.top+o.height-20,"px");break;case"middle-left":n.left="".concat(o.left,"px"),n.top="".concat(o.top+(o.height-20)/2,"px");break;case"middle-right":n.left="".concat(o.left+o.width-20,"px"),n.top="".concat(o.top+(o.height-20)/2,"px");break;case"middle-middle":n.left="".concat(o.left+(o.width-20)/2,"px"),n.top="".concat(o.top+(o.height-20)/2,"px");break;case"bottom-middle":n.left="".concat(o.left+(o.width-20)/2,"px"),n.top="".concat(o.top+o.height-20,"px");break;case"top-middle":n.left="".concat(o.left+(o.width-20)/2,"px"),n.top="".concat(o.top,"px")}}function ln(t){var e=document.querySelector('.introjs-hint[data-step="'.concat(t,'"]')),i=this._introItems[t];void 0!==this._hintClickCallback&&this._hintClickCallback.call(this,e,i,t);var n=rn.call(this);if(parseInt(n,10)!==t){var o=Ki("div",{className:"introjs-tooltip"}),a=Ki("div"),s=Ki("div"),c=Ki("div");o.onclick=function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},a.className="introjs-tooltiptext";var l=Ki("p");l.innerHTML=i.hint;var r=Ki("a");r.className=this._options.buttonClass,r.setAttribute("role","button"),r.innerHTML=this._options.hintButtonLabel,r.onclick=Zi.bind(this,t),a.appendChild(l),a.appendChild(r),s.className="introjs-arrow",o.appendChild(s),o.appendChild(a),this._currentStep=e.getAttribute("data-step"),c.className="introjs-tooltipReferenceLayer introjs-hintReference",c.setAttribute("data-step",e.getAttribute("data-step")),ti.call(this,c),c.appendChild(o),document.body.appendChild(c),Fi.call(this,e,o,s,!0)}}function rn(){var t=document.querySelector(".introjs-hintReference");if(t){var e=t.getAttribute("data-step");return t.parentNode.removeChild(t),e}}function dn(t){var e=this;if(this._introItems=[],this._options.hints)i(this._options.hints,function(t){var i=Yi(t);"string"==typeof i.element&&(i.element=document.querySelector(i.element)),i.hintPosition=i.hintPosition||e._options.hintPosition,i.hintAnimation=i.hintAnimation||e._options.hintAnimation,null!==i.element&&e._introItems.push(i)});else{var o=t.querySelectorAll("*[data-hint]");if(!o||!o.length)return!1;i(o,function(t){var i=t.getAttribute("data-hintanimation");i=i?"true"===i:e._options.hintAnimation,e._introItems.push({element:t,hint:t.getAttribute("data-hint"),hintPosition:t.getAttribute("data-hintposition")||e._options.hintPosition,hintAnimation:i,tooltipClass:t.getAttribute("data-tooltipclass"),position:t.getAttribute("data-position")||e._options.tooltipPosition})})}sn.call(this),n.on(document,"click",rn,this,!1),n.on(window,"resize",hn,this,!0)}function hn(){var t=this;i(this._introItems,function(e){var i=e.targetElement;void 0!==i&&cn.call(t,e.hintPosition,e.element,i)})}function un(){if(ti.call(this,document.querySelector(".introjs-helperLayer")),ti.call(this,document.querySelector(".introjs-tooltipReferenceLayer")),ti.call(this,document.querySelector(".introjs-disableInteraction")),null!=this._currentStep){var t=document.querySelector(".introjs-arrow"),e=document.querySelector(".introjs-tooltip");Fi.call(this,this._introItems[this._currentStep].element,e,t)}return hn.call(this),this}function gn(){un.call(this)}function bn(t,e){if(t&&t.parentElement){var i=t.parentElement;e?(Ze(t,{opacity:"0"}),window.setTimeout(function(){i.removeChild(t)},500)):i.removeChild(t)}}function pn(t,e){var o=!0;if(void 0!==this._introBeforeExitCallback&&(o=this._introBeforeExitCallback.call(this)),e||!1!==o){var a=t.querySelectorAll(".introjs-overlay");a&&a.length&&i(a,function(t){return bn(t)}),bn(t.querySelector(".introjs-helperLayer"),!0),bn(t.querySelector(".introjs-tooltipReferenceLayer")),bn(t.querySelector(".introjs-disableInteraction")),bn(document.querySelector(".introjsFloatingElement")),ji(),n.off(window,"keydown",Wi,this,!0),n.off(window,"resize",gn,this,!0),void 0!==this._introExitCallback&&this._introExitCallback.call(this),this._currentStep=void 0}}function mn(t){var e=Ki("div",{className:"introjs-overlay"}),i=this;if(t.tagName&&"body"!==t.tagName.toLowerCase()){var n=Je(t);n&&Ze(e,{width:"".concat(n.width,"px"),height:"".concat(n.height,"px"),top:"".concat(n.top,"px"),left:"".concat(n.left,"px")})}else Ze(e,{top:0,bottom:0,left:0,right:0,position:"fixed"});return t.appendChild(e),!0===i._options.exitOnOverlayClick&&(Ze(e,{cursor:"pointer"}),e.onclick=function(){pn.call(i,t)}),!0}function fn(t,e){var o=this,a=t.querySelectorAll("*[data-intro]"),s=[];if(this._options.steps)i(this._options.steps,function(t){var e=Yi(t);if(e.step=s.length+1,e.title=e.title||"","string"==typeof e.element&&(e.element=document.querySelector(e.element)),null==e.element){var i=document.querySelector(".introjsFloatingElement");null===i&&(i=Ki("div",{className:"introjsFloatingElement"}),document.body.appendChild(i)),e.element=i,e.position="floating"}e.scrollTo=e.scrollTo||o._options.scrollTo,void 0===e.disableInteraction&&(e.disableInteraction=o._options.disableInteraction),null!==e.element&&s.push(e)});else{var c;if(a.length<1)return!1;i(a,function(t){if((!e||t.getAttribute("data-intro-group")===e)&&"none"!==t.style.display){var i=parseInt(t.getAttribute("data-step"),10);c=t.hasAttribute("data-disable-interaction")?!!t.getAttribute("data-disable-interaction"):o._options.disableInteraction,i>0&&(s[i-1]={element:t,title:t.getAttribute("data-title")||"",intro:t.getAttribute("data-intro"),step:parseInt(t.getAttribute("data-step"),10),tooltipClass:t.getAttribute("data-tooltipclass"),highlightClass:t.getAttribute("data-highlightclass"),position:t.getAttribute("data-position")||o._options.tooltipPosition,scrollTo:t.getAttribute("data-scrollto")||o._options.scrollTo,disableInteraction:c})}});var l=0;i(a,function(t){if((!e||t.getAttribute("data-intro-group")===e)&&null===t.getAttribute("data-step")){for(;void 0!==s[l];)l++;c=t.hasAttribute("data-disable-interaction")?!!t.getAttribute("data-disable-interaction"):o._options.disableInteraction,s[l]={element:t,title:t.getAttribute("data-title")||"",intro:t.getAttribute("data-intro"),step:l+1,tooltipClass:t.getAttribute("data-tooltipclass"),highlightClass:t.getAttribute("data-highlightclass"),position:t.getAttribute("data-position")||o._options.tooltipPosition,scrollTo:t.getAttribute("data-scrollto")||o._options.scrollTo,disableInteraction:c}}})}for(var r=[],d=0;d<s.length;d++)s[d]&&r.push(s[d]);return(s=r).sort(function(t,e){return t.step-e.step}),this._introItems=s,mn.call(this,t)&&(Qi.call(this),this._options.keyboardNavigation&&n.on(window,"keydown",Wi,this,!0),n.on(window,"resize",gn,this,!0)),!1}function Sn(t){this._targetElement=t,this._introItems=[],this._options={nextLabel:"Next",prevLabel:"Back",skipLabel:"\xd7",doneLabel:"Done",hidePrev:!1,hideNext:!1,nextToDone:!0,tooltipPosition:"bottom",tooltipClass:"",highlightClass:"",exitOnEsc:!0,exitOnOverlayClick:!0,showStepNumbers:!1,keyboardNavigation:!0,showButtons:!0,showBullets:!0,showProgress:!1,scrollToElement:!0,scrollTo:"element",scrollPadding:30,overlayOpacity:.5,positionPrecedence:["bottom","top","right","left"],disableInteraction:!1,helperElementPadding:10,hintPosition:"top-middle",hintButtonLabel:"Got it",hintAnimation:!0,buttonClass:"introjs-button",progressBarAdditionalClass:!1}}At({target:"Array",proto:!0,forced:!Ai||!Oi},{splice:function(t,e){var i,n,o,a,s,c,l=he(this),r=dt(l.length),d=gt(t,r),h=arguments.length;if(0===h?i=n=0:1===h?(i=0,n=r-d):(i=h-2,n=Ei(Pi(lt(e),0),r-d)),r+i-n>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(o=be(l,n),a=0;a<n;a++)(s=d+a)in l&&ue(o,a,l[s]);if(o.length=n,i<n){for(a=d;a<r-n;a++)c=a+i,(s=a+n)in l?l[c]=l[s]:delete l[c];for(a=r;a>r-n+i;a--)delete l[a-1]}else if(i>n)for(a=r-n;a>d;a--)c=a+i-1,(s=a+n-1)in l?l[c]=l[s]:delete l[c];for(a=0;a<i;a++)l[a+d]=arguments[a+2];return l.length=r-n+i,o}});var vn=function i(n){var o;if("object"===t(n))o=new Sn(n);else if("string"==typeof n){var a=document.querySelector(n);if(!a)throw new Error("There is no element with given selector.");o=new Sn(a)}else o=new Sn(document.body);return i.instances[e(o,"introjs-instance")]=o,o};return vn.version="3.2.1",vn.instances={},vn.fn=Sn.prototype={clone:function(){return new Sn(this)},setOption:function(t,e){return this._options[t]=e,this},setOptions:function(t){return this._options=function(t,e){var i,n={};for(i in t)n[i]=t[i];for(i in e)n[i]=e[i];return n}(this._options,t),this},start:function(t){return fn.call(this,this._targetElement,t),this},goToStep:function(t){return Ji.call(this,t),this},addStep:function(t){return this._options.steps||(this._options.steps=[]),this._options.steps.push(t),this},addSteps:function(t){if(t.length){for(var e=0;e<t.length;e++)this.addStep(t[e]);return this}},goToStepNumber:function(t){return Gi.call(this,t),this},nextStep:function(){return Qi.call(this),this},previousStep:function(){return qi.call(this),this},currentStep:function(){return Vi.call(this)},exit:function(t){return pn.call(this,this._targetElement,t),this},refresh:function(){return un.call(this),this},onbeforechange:function(t){if("function"!=typeof t)throw new Error("Provided callback for onbeforechange was not a function");return this._introBeforeChangeCallback=t,this},onchange:function(t){if("function"!=typeof t)throw new Error("Provided callback for onchange was not a function.");return this._introChangeCallback=t,this},onafterchange:function(t){if("function"!=typeof t)throw new Error("Provided callback for onafterchange was not a function");return this._introAfterChangeCallback=t,this},oncomplete:function(t){if("function"!=typeof t)throw new Error("Provided callback for oncomplete was not a function.");return this._introCompleteCallback=t,this},onhintsadded:function(t){if("function"!=typeof t)throw new Error("Provided callback for onhintsadded was not a function.");return this._hintsAddedCallback=t,this},onhintclick:function(t){if("function"!=typeof t)throw new Error("Provided callback for onhintclick was not a function.");return this._hintClickCallback=t,this},onhintclose:function(t){if("function"!=typeof t)throw new Error("Provided callback for onhintclose was not a function.");return this._hintCloseCallback=t,this},onexit:function(t){if("function"!=typeof t)throw new Error("Provided callback for onexit was not a function.");return this._introExitCallback=t,this},onskip:function(t){if("function"!=typeof t)throw new Error("Provided callback for onskip was not a function.");return this._introSkipCallback=t,this},onbeforeexit:function(t){if("function"!=typeof t)throw new Error("Provided callback for onbeforeexit was not a function.");return this._introBeforeExitCallback=t,this},addHints:function(){return dn.call(this,this._targetElement),this},hideHint:function(t){return Zi.call(this,t),this},hideHints:function(){return tn.call(this),this},showHint:function(t){return nn.call(this,t),this},showHints:function(){return en.call(this),this},removeHints:function(){return on.call(this),this},removeHint:function(t){return an().call(this,t),this},showHintDialog:function(t){return ln.call(this,t),this}},vn},t.exports=n()},poEM:function(t,e,i){"use strict";i.r(e),i.d(e,"HttpLoaderFactory",function(){return ys}),i.d(e,"ExecutionModule",function(){return Cs});var n=i("ofXK"),o=i("3Pt+"),a=i("JqCM"),s=i("ZOsW"),c=i("jcQU"),l=i("1kSV"),r=i("uF4Q"),d=i("0jTc"),h=i("SRvG"),u=i("ed8r"),g=i("QYJQ"),b=i("tk/3"),p=i("sYmb"),m=i("mqiu"),f=i("Pk9d"),S=i("cZdB"),v=i("GJ+o"),y=i("4SUy"),D=i("hXFv"),C=i("QUNt"),T=i("z+xu"),w=i("ZwAT"),I=i("0hV+"),x=i("tyNb"),R=i("mrSG"),M=i("XNiG"),k=i("Kj3r"),B=i("H552"),N=i("fXoL"),A=i("HJFG"),O=i("wsp1"),P=i("vrRs");let E=(()=>{class t{constructor(t){this.host=t,this.subject=new M.a,this.subscription=[]}onFocus(){setTimeout(()=>{this.host.nativeElement.select()},300)}onFocusout(){setTimeout(()=>{this.host.nativeElement.focus()},2e3)}onChange(t){this.subject.next(t)}ngAfterViewInit(){setTimeout(()=>{this.host.nativeElement.focus()},300)}ngOnInit(){this.subscription.push(this.subject.pipe(Object(k.a)(300)).subscribe(t=>Object(R.a)(this,void 0,void 0,function*(){this.host.nativeElement.select()})))}ngOnDestroy(){this.subscription.forEach(t=>t.unsubscribe())}onKeydownHandler(t){t.preventDefault(),this.host.nativeElement.value=this.host.nativeElement.value+"    "}onKeydownTabHandler(t){t.preventDefault(),this.host.nativeElement.value=this.host.nativeElement.value+"    "}}return t.\u0275fac=function(e){return new(e||t)(N.Mb(N.l))},t.\u0275dir=N.Hb({type:t,selectors:[["","autofocusSearch",""]],hostBindings:function(t,e){1&t&&N.cc("focus",function(){return e.onFocus()})("focusout",function(){return e.onFocusout()})("ngModelChange",function(t){return e.onChange(t)})("keydown.enter",function(t){return e.onKeydownHandler(t)},!1,N.zc)("keydown.tab",function(t){return e.onKeydownTabHandler(t)},!1,N.zc)}}),t})();const L=["ddlelement"],_=["scanQRCode"],F=["grid"],j=["scanText"],K=["ingredientinfoGrid"];function $(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"TIME_LABEL")," ")}function z(t,e){1&t&&(N.Kc(0),N.hc(1,"date")),2&t&&N.Mc(" ",N.jc(1,1,e.$implicit.createdTime,"dd MMM, yyyy , HH:mm")," ")}function H(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"SUPPLIER")," ")}function U(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"Material #")," ")}function J(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"INGREDIENT_LABEL")," ")}function G(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"PRODUCTION_DATE_LABEL")," ")}function Q(t,e){1&t&&(N.Kc(0),N.hc(1,"date")),2&t&&N.Mc(" ",N.jc(1,1,e.$implicit.manufacturingDate,"dd MMM, yyyy")," ")}function q(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"BATCH_LABEL")," ")}function V(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"EXPIRED_DATE_LABEL")," ")}function W(t,e){1&t&&(N.Kc(0),N.hc(1,"date")),2&t&&N.Mc(" ",N.jc(1,1,e.$implicit.expiredTime,"dd MMM, yyyy")," ")}function Y(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"QTY_LABEL")," ")}function X(t,e){1&t&&N.Kc(0),2&t&&N.Mc(" ",e.$implicit.qty," Kg ")}function Z(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"STATUS_LABEL")," ")}function tt(t,e){1&t&&(N.Qb(0),N.Sb(1,"span",39),N.Kc(2),N.hc(3,"translate"),N.Rb(),N.Pb()),2&t&&(N.zb(2),N.Lc(N.ic(3,1,"OUTOFSTOCK_LABEL")))}function et(t,e){1&t&&(N.Sb(0,"span",40),N.Kc(1),N.hc(2,"translate"),N.Rb()),2&t&&(N.zb(1),N.Lc(N.ic(2,1,"STOCKING_LABEL")))}function it(t,e){if(1&t&&(N.Ic(0,tt,4,3,"ng-container",37),N.Ic(1,et,3,3,"ng-template",null,38,N.Jc)),2&t){const t=e.$implicit,i=N.yc(2);N.mc("ngIf",!0===t.status)("ngIfElse",i)}}function nt(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"OPTION")," ")}function ot(t,e){if(1&t){const t=N.Tb();N.Sb(0,"div",41),N.Sb(1,"button",42),N.cc("click",function(){N.Bc(t);const i=e.$implicit;return N.gc().delete(i)}),N.Nb(2,"i",43),N.Rb(),N.Rb()}}let at=(()=>{class t{constructor(t,e,i,n,o,a){this.modalService=t,this.alertify=e,this.datePipe=i,this.buildingService=n,this.ingredientService=o,this.cdr=a,this.displayTextMethod={visibility:!1},this.pageSettings={pageCount:20,pageSizes:!0,pageSize:20},this.checkout=!1,this.checkin=!0,this.ingredients=[],this.test="form-control w3-light-grey",this.autofocus=!1,this.toolbarOptions=["Search"],this.filterSettings={type:"Excel"},this.subject=new M.a,this.subscription=[],this.fieldsBuildings={text:"name",value:"id"},this.buildingID=0,this.buildingName="",this.toggleColor=!0,this.onFilteringBuilding=t=>{let e=new B.h;e=""!==t.text?e.where("name","contains",t.text,!0):e,t.updateData(this.buildings,e)}}ngAfterViewInit(){this.cdr.detectChanges()}ngOnDestroy(){this.subscription.forEach(t=>t.unsubscribe())}ngOnInit(){this.getBuilding(()=>{this.buildingID=+localStorage.getItem("buildingID"),0===this.buildingID&&this.alertify.warning("Vui l\xf2ng ch\u1ecdn t\xf2a nh\xe0 tr\u01b0\u1edbc!",!0)}),this.getAllIngredient(),this.checkQRCode()}getBuilding(t){this.buildingService.getBuildings().subscribe(e=>Object(R.a)(this,void 0,void 0,function*(){this.buildings=e.filter(t=>2===t.level),t()}))}onChangeBuilding(t){localStorage.setItem("buildingID",this.buildingID+""),this.buildingID=t.itemData.id,this.buildingName=t.itemData.name,this.getAllIngredientInfoByBuilding()}NO(t){return(this.ingredientinfoGrid.pageSettings.currentPage-1)*this.ingredientinfoGrid.pageSettings.pageSize+Number(t)+1}dataBound(){this.ingredientinfoGrid.autoFitColumns()}OutputChange(t){this.checkin=!1,this.checkout=!0,this.getAllIngredientInfoOutputByBuilding()}InputChange(t){this.checkin=!0,this.checkout=!1,this.getAllIngredientInfoByBuilding()}toolbarClick(t){switch(t.item.text){case"Excel Export":this.grid.excelExport()}}showPopupWindow(t,e){this.alertify.$swal.fire({html:`<div class='d-flex justify-content-center align-items-center' style='Width:100%; height: 400px;'>\n               <h1 style='font-size: 150px;' class='display-1 mb-3 align-self-center text-${!0===this.toggleColor?"success":"danger"} font-weight-bold'> ${t} | ${e.name}</h1>\n             </div>`,timer:2e3,showConfirmButton:!1,timerProgressBar:!0,width:"90%",icon:"success"}),this.toggleColor=!this.toggleColor}checkQRCode(){this.subscription.push(this.subject.pipe(Object(k.a)(500)).subscribe(t=>Object(R.a)(this,void 0,void 0,function*(){t.QRCode.split("-");const e=t.QRCode.match(/(\d+)-(\w+)-/g),i=t.QRCode.replace(e[0],""),n=JSON.parse(localStorage.getItem("building"));let o=n.name;[1,0].includes(n.level)&&(o="E");const a=this.findIngredientCode(i);if(!0===this.checkin)if(!0===this.checkCode){const e=JSON.parse(localStorage.getItem("user")).User.ID;this.ingredientService.scanQRCodeFromChemicalWareHouse(t.QRCode,this.buildingName,e).subscribe(t=>{if(!0===t){this.getAllIngredientInfoByBuilding();const t=this.findInputedIngredient(i);this.showPopupWindow(t,a)}})}else this.alertify.error("Wrong Chemical!");else if(!0===this.checkCode){const e=JSON.parse(localStorage.getItem("user")).User.ID;this.ingredientService.scanQRCodeOutput(t.QRCode,this.buildingName,e).subscribe(t=>{if(!0===t){this.getAllIngredientInfoOutputByBuilding();const t=this.findOutputedIngredient(i);this.showPopupWindow(t,a)}else this.alertify.error(t.message)})}else this.alertify.error("Wrong Chemical!")})))}onNgModelChangeScanQRCode(t){return Object(R.a)(this,void 0,void 0,function*(){0===this.buildingID?this.alertify.warning("Vui l\xf2ng ch\u1ecdn t\xf2a nh\xe0 tr\u01b0\u1edbc!",!0):this.subject.next({QRCode:t,ingredient:null})})}getIngredientInfo(){this.ingredientService.getAllIngredientInfo().subscribe(t=>{this.data=t})}getIngredientInfoOutput(){this.ingredientService.getAllIngredientInfoOutput().subscribe(t=>{this.data=t})}getAllIngredientInfoByBuilding(){this.ingredientService.getAllIngredientInfoByBuilding(this.buildingName).subscribe(t=>{this.data=t})}getAllIngredientInfoOutputByBuilding(){this.ingredientService.getAllIngredientInfoOutputByBuilding(this.buildingName).subscribe(t=>{this.data=t})}findIngredientCode(t){for(const e of this.ingredients){if(e.materialNO===t)return this.checkCode=!0,e;this.checkCode=!1}}findInputedIngredient(t){let e=this.data.filter(e=>e.code===t&&!1===e.status).length;return 0===e?1:e+1}findOutputedIngredient(t){let e=this.data.filter(e=>e.code===t&&!0===e.status).length;return 0===e?1:e+1}getAllIngredient(){this.ingredientService.getAllIngredient().subscribe(t=>{this.ingredients=t,console.log("Global Ingerdient: ",t)})}ConvertClass(t){0!==t.length?this.test="form-control success-scan":(this.test="form-control error-scan",this.alertify.error("Wrong Chemical!"))}delete(t){this.ingredientService.deleteIngredientInfo(t.id,t.code,t.qty,t.batch).subscribe(()=>{this.alertify.success("Delete Success!"),this.getIngredientInfo(),this.getIngredientInfoOutput()})}confirm(){this.alertify.confirm("Do you want confirm this","Do you want confirm this",()=>{this.alertify.success("Confirm Success")})}}return t.\u0275fac=function(e){return new(e||t)(N.Mb(l.b),N.Mb(A.a),N.Mb(n.d),N.Mb(O.a),N.Mb(P.a),N.Mb(N.h))},t.\u0275cmp=N.Gb({type:t,selectors:[["app-incoming"]],viewQuery:function(t,e){if(1&t&&(N.Qc(L,!0),N.Qc(_,!0),N.Qc(F,!0),N.Qc(j,!0),N.Qc(K,!0)),2&t){let t;N.xc(t=N.dc())&&(e.dropDownListObject=t.first),N.xc(t=N.dc())&&(e.scanQRCodeElement=t.first),N.xc(t=N.dc())&&(e.grid=t.first),N.xc(t=N.dc())&&(e.scanText=t.first),N.xc(t=N.dc())&&(e.ingredientinfoGrid=t.first)}},features:[N.yb([n.d])],decls:83,vars:21,consts:[[1,"card"],[1,"card-body"],[1,"row","mb-2"],[1,"col-md-12","d-flex","justify-content-center","align-items-center"],[1,"font-weight-bold","pr-3"],["placeholder","Select a building",3,"dataSource","fields","allowFiltering","value","filtering","change"],["ddlelement",""],[1,"row"],[1,"col-md-12"],[1,"w3-container","w3-card-4","w3-text-black"],[1,"w3-center"],[1,"w3-row","w3-section"],[1,"w3-col",2,"width","100px"],["src","../../../../assets/img/gif/1981.gif","height","40px","width","80%","alt",""],[1,"w3-rest"],["name","qrcode","autocomplete","off","autofocusSearch","","type","text",3,"ngClass","ngModel","ngModelChange"],[1,"col-md-12","mt-4","text-center"],[1,"pretty","p-icon","p-round",2,"font-size","30px"],["type","radio","checked","","name","icon_solid",3,"change"],[1,"state","p-success"],[1,"icon","mdi","mdi-check"],["type","radio","name","icon_solid",3,"change"],[1,"state","p-danger"],["allowResizing","true","allowFiltering","true","showColumnMenu","true","allowPaging","true","gridLines","Both",3,"dataSource","allowExcelExport","allowSorting","filterSettings","toolbar","pageSettings","dataBound","toolbarClick"],["ingredientinfoGrid",""],["field","createdTime","textAlign","Center","headerText","Time","width","150"],["headerTemplate",""],["template",""],["field","supplierName","textAlign","Center","headerText","Supplier","width","120"],["field","code","textAlign","Center","headerText","Material #","width","120"],["field","name","textAlign","Center","headerText","Ingredient","width","100"],["field","manufacturingDate","textAlign","Center","headerText","Production date","width","130"],["field","batch","textAlign","Center","headerText","Batch","width","100"],["field","expiredTime","textAlign","Center","headerText","Expired Date","width","130"],["field","qty","textAlign","Center","headerText","Recieve Qty (Kg)","width","130"],["field","status","textAlign","Center","headerText","Status","width","100"],["field","Option","textAlign","Center","headerText","Option","width","90"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"badge","badge-secondary"],[1,"badge","badge-success"],[1,"btn-group"],["type","button",1,"btn","btn-xs","btn-danger",3,"click"],[1,"fa","fa-trash"]],template:function(t,e){1&t&&(N.Sb(0,"div",0),N.Sb(1,"div",1),N.Sb(2,"div",2),N.Sb(3,"div",3),N.Sb(4,"h2",4),N.Kc(5),N.hc(6,"translate"),N.Rb(),N.Sb(7,"ejs-dropdownlist",5,6),N.cc("filtering",function(t){return e.onFilteringBuilding(t)})("change",function(t){return e.onChangeBuilding(t)}),N.Rb(),N.Rb(),N.Rb(),N.Sb(9,"div",7),N.Sb(10,"div",8),N.Sb(11,"form",9),N.Sb(12,"h2",10),N.Kc(13,"Scan QR Code"),N.Rb(),N.Sb(14,"div",11),N.Sb(15,"div",12),N.Nb(16,"img",13),N.Rb(),N.Sb(17,"div",14),N.Sb(18,"input",15),N.cc("ngModelChange",function(t){return e.onNgModelChangeScanQRCode(t)}),N.Rb(),N.Rb(),N.Sb(19,"div",7),N.Sb(20,"div",16),N.Sb(21,"div",17),N.Sb(22,"input",18),N.cc("change",function(t){return e.InputChange(t)}),N.Rb(),N.Sb(23,"div",19),N.Nb(24,"i",20),N.Sb(25,"label"),N.Kc(26),N.hc(27,"translate"),N.Rb(),N.Rb(),N.Rb(),N.Sb(28,"div",17),N.Sb(29,"input",21),N.cc("change",function(t){return e.OutputChange(t)}),N.Rb(),N.Sb(30,"div",22),N.Nb(31,"i",20),N.Sb(32,"label"),N.Kc(33),N.hc(34,"translate"),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Sb(35,"div",1),N.Sb(36,"div",7),N.Sb(37,"div",8),N.Sb(38,"ejs-grid",23,24),N.cc("dataBound",function(){return e.dataBound()})("toolbarClick",function(t){return e.toolbarClick(t)}),N.Sb(40,"e-columns"),N.Sb(41,"e-column",25),N.Ic(42,$,2,3,"ng-template",null,26,N.Jc),N.Ic(44,z,2,4,"ng-template",null,27,N.Jc),N.Rb(),N.Sb(46,"e-column",28),N.Ic(47,H,2,3,"ng-template",null,26,N.Jc),N.Rb(),N.Sb(49,"e-column",29),N.Ic(50,U,2,3,"ng-template",null,26,N.Jc),N.Rb(),N.Sb(52,"e-column",30),N.Ic(53,J,2,3,"ng-template",null,26,N.Jc),N.Rb(),N.Sb(55,"e-column",31),N.Ic(56,G,2,3,"ng-template",null,26,N.Jc),N.Ic(58,Q,2,4,"ng-template",null,27,N.Jc),N.Rb(),N.Sb(60,"e-column",32),N.Ic(61,q,2,3,"ng-template",null,26,N.Jc),N.Rb(),N.Sb(63,"e-column",33),N.Ic(64,V,2,3,"ng-template",null,26,N.Jc),N.Ic(66,W,2,4,"ng-template",null,27,N.Jc),N.Rb(),N.Sb(68,"e-column",34),N.Ic(69,Y,2,3,"ng-template",null,26,N.Jc),N.Ic(71,X,1,1,"ng-template",null,27,N.Jc),N.Rb(),N.Sb(73,"e-column",35),N.Ic(74,Z,2,3,"ng-template",null,26,N.Jc),N.Ic(76,it,3,2,"ng-template",null,27,N.Jc),N.Rb(),N.Sb(78,"e-column",36),N.Ic(79,nt,2,3,"ng-template",null,26,N.Jc),N.Ic(81,ot,3,0,"ng-template",null,27,N.Jc),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Rb()),2&t&&(N.zb(5),N.Mc("",N.ic(6,15,"Building"),":"),N.zb(2),N.mc("dataSource",e.buildings)("fields",e.fieldsBuildings)("allowFiltering",!0)("value",e.buildingID),N.zb(11),N.mc("ngClass",e.test)("ngModel",e.qrcodeChange),N.zb(8),N.Lc(N.ic(27,17,"INPUT_LABEL")),N.zb(7),N.Lc(N.ic(34,19,"OUTPUT_LABEL")),N.zb(5),N.mc("dataSource",e.data)("allowExcelExport",!0)("allowSorting",!0)("filterSettings",e.filterSettings)("toolbar",e.toolbarOptions)("pageSettings",e.pageSettings))},directives:[c.c,o.p,o.h,o.i,o.b,E,n.l,o.g,o.j,v.j,d.d,C.d,C.b,v.e,v.b,d.c,C.c,C.a,v.d,v.a,n.n],pipes:[p.c,n.d],styles:[".e-grid[_ngcontent-%COMP%]   .e-altrow[_ngcontent-%COMP%]{background-color:#d6d8db}"]}),t})();var st=i("2Vo4"),ct=i("AytR");let lt=(()=>{class t{constructor(t){this.http=t,this.baseUrl=ct.a.apiUrlEC,this.messageSource=new st.a(0),this.info=new st.a(null),this.currentMessage=this.messageSource.asObservable()}changeMessage(t){this.messageSource.next(t)}setValue(t){this.info.next(t)}getValue(){return this.info.asObservable()}getAll(){return this.http.get(this.baseUrl+"Station/GetAll")}getAllByPlanID(t){return this.http.get(`${this.baseUrl}Station/GetAllByPlanID/${t}`)}create(t){return this.http.post(this.baseUrl+"Station/create",t)}createRange(t){return this.http.post(this.baseUrl+"Station/AddRange",t)}update(t){return this.http.put(this.baseUrl+"Station/update",t)}updateRange(t){return this.http.post(this.baseUrl+"Station/updateRange",t)}delete(t){return this.http.delete(`${this.baseUrl}Station/Delete/${t}`,{})}}return t.\u0275fac=function(e){return new(e||t)(N.Zb(b.b))},t.\u0275prov=N.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const rt=["grid"];let dt=(()=>{class t{constructor(t,e,i){this.activeModal=t,this.alertify=e,this.stationSevice=i,this.toolbarOptions=["Edit","Cancel","Delete","Search"],this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"}}ngOnInit(){this.getAllByPlanID(),this.toolbarOptions=["Edit","Cancel","Delete","Search"]}actionBegin(t){"edit"===t.action&&"save"===t.requestType&&this.update(t.data)}actionComplete(t){}toolbarClick(t){}confirm(){this.activeModal.dismiss(),this.alertify.success("Updated successed!")}getAllByPlanID(){this.stationSevice.getAllByPlanID(this.plan.id||0).subscribe(t=>{this.data=t})}createRange(t){this.stationSevice.createRange(t).subscribe(t=>{this.alertify.success("Created successed!"),this.activeModal.dismiss(),this.stationSevice.setValue(!0)})}update(t){this.stationSevice.update(t).subscribe(t=>{this.stationSevice.setValue(!0)})}updateRange(t){this.stationSevice.updateRange(t).subscribe(t=>{this.alertify.success("Updated successed!"),this.activeModal.dismiss(),this.stationSevice.setValue(!0)})}delete(){this.stationSevice.delete(this.station.id).subscribe(t=>{this.alertify.success("delete successed!"),this.activeModal.dismiss(),this.stationSevice.setValue(!0)})}}return t.\u0275fac=function(e){return new(e||t)(N.Mb(l.a),N.Mb(A.a),N.Mb(lt))},t.\u0275cmp=N.Gb({type:t,selectors:[["app-station"]],viewQuery:function(t,e){if(1&t&&N.Qc(rt,!0),2&t){let t;N.xc(t=N.dc())&&(e.grid=t.first)}},inputs:{plan:"plan"},decls:19,vars:7,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","p-0"],["allowResizing","true","gridLines","Both",3,"dataSource","allowSelection","allowSorting","toolbar","editSettings","actionBegin","actionComplete","toolbarClick"],["grid",""],["field","glueName","headerText","Glue","textAlign","Center","width","120",3,"allowEditing"],["field","amount","headerText","Station","textAlign","Center","width","100"],[1,"modal-footer","justify-content-center","d-flex"],["type","button",1,"btn","btn-warning",3,"click"],[1,"fa","fa-remove"],["type","button",1,"btn","btn-success",3,"click"],[1,"fa","fa-check"]],template:function(t,e){1&t&&(N.Sb(0,"div",0),N.Sb(1,"h4",1),N.Kc(2,"Station"),N.Rb(),N.Sb(3,"button",2),N.cc("click",function(){return e.activeModal.dismiss("Cross click")}),N.Sb(4,"span",3),N.Kc(5,"\xd7"),N.Rb(),N.Rb(),N.Rb(),N.Sb(6,"div",4),N.Sb(7,"ejs-grid",5,6),N.cc("actionBegin",function(t){return e.actionBegin(t)})("actionComplete",function(t){return e.actionComplete(t)})("toolbarClick",function(t){return e.toolbarClick(t)}),N.Sb(9,"e-columns"),N.Nb(10,"e-column",7),N.Nb(11,"e-column",8),N.Rb(),N.Rb(),N.Rb(),N.Sb(12,"div",9),N.Sb(13,"button",10),N.cc("click",function(){return e.activeModal.close("Close click")}),N.Nb(14,"i",11),N.Kc(15," Close"),N.Rb(),N.Sb(16,"button",12),N.cc("click",function(){return e.confirm()}),N.Nb(17,"i",13),N.Kc(18," Confirm"),N.Rb(),N.Rb()),2&t&&(N.zb(7),N.mc("dataSource",e.data)("allowSelection",!0)("allowSorting",!0)("allowSorting",!0)("toolbar",e.toolbarOptions)("editSettings",e.editSettings),N.zb(3),N.mc("allowEditing",!1))},directives:[v.j,d.d,C.d,C.b,v.e,v.b,d.c,C.c,C.a,v.d,v.a],styles:[""]}),t})();var ht=i("R5/Y"),ut=i("iStF"),gt=i("0WEV"),bt=i("XMGJ"),pt=i("j7qE"),mt=i("KCoQ"),ft=i("t0UR");const St=["bpfcDropdownlist"],vt=["cloneModal"],yt=["stationModal"],Dt=["planForm"],Ct=["timepicker"],Tt=["grid"];function wt(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"LINE_LABEL")," ")}function It(t,e){if(1&t){const t=N.Tb();N.Sb(0,"ejs-dropdownlist",37,38),N.cc("change",function(i){N.Bc(t);const n=e.$implicit;return N.gc().onChangeLine(i,n)}),N.hc(2,"translate"),N.Rb()}if(2&t){const t=e.$implicit,i=N.gc();N.mc("dataSource",i.lines)("placeholder",N.ic(2,5,"Select a line"))("value",t.buildingName)("fields",i.fieldsLine)("allowFiltering",!0)}}function xt(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"BPFC_NAME_LABEL")," ")}function Rt(t,e){if(1&t){const t=N.Tb();N.Sb(0,"ejs-dropdownlist",39,40),N.cc("filtering",function(e){return N.Bc(t),N.gc().onFiltering(e)})("change",function(i){N.Bc(t);const n=e.$implicit;return N.gc().onChangeBPFC(i,n)}),N.hc(2,"translate"),N.Rb()}if(2&t){const t=e.$implicit,i=N.gc();N.mc("dataSource",i.BPFCs)("value",t.bpfcName)("placeholder",N.ic(2,5,"Select a model"))("fields",i.fieldsBPFC)("allowFiltering",!0)}}function Mt(t,e){1&t&&N.Kc(0),2&t&&N.Mc(" ",e.$implicit.bpfcName||"#N/A"," ")}function kt(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"DUE_DATE_LABEL")," ")}function Bt(t,e){if(1&t){const t=N.Tb();N.Sb(0,"ejs-datepicker",41),N.cc("change",function(i){N.Bc(t);const n=e.$implicit;return N.gc().onChangeDueDateEdit(i,n)}),N.hc(1,"translate"),N.Rb()}2&t&&N.mc("value",e.$implicit.dueDate)("allowEdit",!1)("placeholder",N.ic(1,3,"Select a date"))}function Nt(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"Start Time")," ")}function At(t,e){1&t&&(N.Kc(0),N.hc(1,"date")),2&t&&N.Mc(" ",N.jc(1,1,e.$implicit.startWorkingTime,"HH:mm")," ")}function Ot(t,e){if(1&t&&(N.Kc(0),N.hc(1,"date")),2&t){const t=N.gc();N.Mc(" ",N.jc(1,1,t.period.startTime,"HH:mm")," ")}}function Pt(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"End Time")," ")}function Et(t,e){if(1&t&&(N.Sb(0,"span"),N.Kc(1),N.hc(2,"date"),N.Rb()),2&t){const t=N.gc().$implicit;N.zb(1),N.Mc(" ",N.jc(2,1,t.updatedOffline,"HH:mm")," ")}}function Lt(t,e){if(1&t&&(N.Kc(0),N.hc(1,"date")),2&t){const t=N.gc().$implicit;N.Mc(" ",N.jc(1,1,t.finishWorkingTime,"HH:mm")," ")}}function _t(t,e){if(1&t&&(N.Ic(0,Et,3,4,"span",42),N.Ic(1,Lt,2,4,"ng-template",null,43,N.Jc)),2&t){const t=e.$implicit,i=N.yc(2);N.mc("ngIf",!0===t.isOffline)("ngIfElse",i)}}function Ft(t,e){1&t&&N.Kc(0," 16:30 ")}function jt(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"HOURLY_OUTPUT_LABEL")," ")}function Kt(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"Status")," ")}function $t(t,e){1&t&&N.Kc(0," N/A ")}function zt(t,e){1&t&&(N.Sb(0,"span"),N.Nb(1,"i",45),N.Rb())}function Ht(t,e){1&t&&(N.Sb(0,"span"),N.Nb(1,"i",46),N.Rb())}function Ut(t,e){if(1&t&&(N.Ic(0,zt,2,0,"span",44),N.Ic(1,Ht,2,0,"span",44)),2&t){const t=e.$implicit;N.mc("ngIf",t.isGenerate),N.zb(1),N.mc("ngIf",!t.isGenerate)}}function Jt(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"Created Date")," ")}function Gt(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"Updated Time")," ")}function Qt(t,e){if(1&t&&(N.Kc(0),N.hc(1,"date")),2&t){const t=e.$implicit;N.Mc(" ",null===t.updatedTime?"N/A":N.jc(1,1,t.updatedTime,"MM-dd-yyyy HH:mm")," ")}}function qt(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"Updated Offline")," ")}function Vt(t,e){if(1&t&&(N.Kc(0),N.hc(1,"date")),2&t){const t=e.$implicit;N.Mc(" ",null===t.updatedOffline?"N/A":N.jc(1,1,t.updatedOffline,"MM-dd-yyyy HH:mm")," ")}}function Wt(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"Updated Overtime")," ")}function Yt(t,e){if(1&t&&(N.Kc(0),N.hc(1,"date")),2&t){const t=e.$implicit;N.Mc(" ",null===t.updatedOvertime?"N/A":N.jc(1,1,t.updatedOvertime,"MM-dd-yyyy HH:mm")," ")}}function Xt(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"Inactive")," ")}function Zt(t,e){if(1&t){const t=N.Tb();N.Sb(0,"ejs-switch",48,49),N.cc("change",function(e){N.Bc(t);const i=N.gc().$implicit;return N.gc().changeStopLine(e,i)}),N.hc(2,"translate"),N.hc(3,"translate"),N.Rb()}if(2&t){const t=N.gc().$implicit;N.nc("onLabel",N.ic(2,4,"Inactive")),N.nc("offLabel",N.ic(3,6,"")),N.mc("checked",t.isOffline)("disabled",t.isOffline)}}function te(t,e){1&t&&N.Ic(0,Zt,4,8,"ejs-switch",47),2&t&&N.mc("ngIf",e.$implicit.isGenerate)}function ee(t,e){}function ie(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"Overtime/No Overtime")," ")}function ne(t,e){if(1&t){const t=N.Tb();N.Sb(0,"ejs-switch",51,49),N.cc("change",function(e){N.Bc(t);const i=N.gc().$implicit;return N.gc().changeOvertime(e,i)}),N.hc(2,"translate"),N.hc(3,"translate"),N.Rb()}if(2&t){const t=N.gc().$implicit;N.nc("onLabel",N.ic(2,3,"Overtime")),N.nc("offLabel",N.ic(3,5,"No overtime")),N.mc("checked",t.isOvertime)}}function oe(t,e){if(1&t&&N.Ic(0,ne,4,7,"ejs-switch",50),2&t){const t=e.$implicit;N.mc("ngIf",!1===t.isOffline&&t.isGenerate&&0==t.isChangeBPFC)}}function ae(t,e){1&t&&N.Kc(0," Option ")}function se(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"Change BPFC")," ")}function ce(t,e){if(1&t){const t=N.Tb();N.Sb(0,"button",55),N.cc("click",function(){N.Bc(t);const e=N.gc().$implicit,i=N.gc(),n=N.yc(127);return i.openChangeBPFCModalComponent(n,e)}),N.Nb(1,"i",56),N.Rb()}}function le(t,e){if(1&t){const t=N.Tb();N.Sb(0,"div",57),N.Sb(1,"button",58),N.cc("click",function(){N.Bc(t);const e=N.gc().$implicit;return N.gc().delete(e.id)}),N.Nb(2,"i",59),N.Rb(),N.Rb()}}function re(t,e){if(1&t&&(N.Sb(0,"div",52),N.Ic(1,ce,2,0,"button",53),N.Rb(),N.Ic(2,le,3,0,"div",54)),2&t){const t=e.$implicit;N.zb(1),N.mc("ngIf",!1===t.isOffline&&t.isGenerate&&0==t.isChangeBPFC),N.zb(1),N.mc("ngIf",!1===t.isOffline&&0==t.isGenerate)}}function de(t,e){1&t&&N.Kc(0," Option ")}function he(t,e){if(1&t){const t=N.Tb();N.Sb(0,"div",60),N.Sb(1,"h4",61),N.Nb(2,"i",62),N.Kc(3," Clone Work Plan "),N.Rb(),N.Sb(4,"button",63),N.cc("click",function(){return e.$implicit.dismiss("Cross click")}),N.Sb(5,"span",64),N.Kc(6,"\xd7"),N.Rb(),N.Rb(),N.Rb(),N.Sb(7,"div",65),N.Sb(8,"div",7),N.Sb(9,"div",3),N.Sb(10,"div",66),N.Sb(11,"label",67),N.Kc(12,"DueDate"),N.Rb(),N.Sb(13,"span",68),N.Kc(14,"(*)"),N.Rb(),N.Sb(15,"ejs-datepicker",69),N.cc("change",function(e){return N.Bc(t),N.gc().onChangeDueDateClone(e)}),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Sb(16,"div",70),N.Sb(17,"button",71),N.cc("click",function(){return e.$implicit.close("Close click")}),N.Kc(18,"Close"),N.Rb(),N.Sb(19,"button",72),N.cc("click",function(){return N.Bc(t),N.gc().onClickClone()}),N.Kc(20,"Clone"),N.Rb(),N.Rb()}if(2&t){const t=N.gc();N.zb(15),N.mc("value",t.date)}}function ue(t,e){if(1&t){const t=N.Tb();N.Sb(0,"div",60),N.Sb(1,"h4",61),N.Nb(2,"i",62),N.Kc(3," Change BPFC "),N.Sb(4,"b",73),N.Kc(5),N.Rb(),N.Rb(),N.Sb(6,"button",63),N.cc("click",function(){return e.$implicit.dismiss("Cross click")}),N.Sb(7,"span",64),N.Kc(8,"\xd7"),N.Rb(),N.Rb(),N.Rb(),N.Sb(9,"div",65),N.Sb(10,"div",7),N.Sb(11,"div",3),N.Sb(12,"div",66),N.Sb(13,"ejs-dropdownlist",74,75),N.cc("ngModelChange",function(e){return N.Bc(t),N.gc().changebpfcID=e})("filtering",function(e){return N.Bc(t),N.gc().onFilteringChangeBPFCModal(e)})("created",function(){return N.Bc(t),N.gc().created()})("select",function(e){return N.Bc(t),N.gc().onChangeBPFCModal(e)}),N.hc(15,"translate"),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Sb(16,"div",70),N.Sb(17,"button",71),N.cc("click",function(){return e.$implicit.close("Close click")}),N.Kc(18),N.hc(19,"translate"),N.Rb(),N.Sb(20,"button",72),N.cc("click",function(){return N.Bc(t),N.gc().changeBPFC()}),N.Kc(21),N.hc(22,"translate"),N.Rb(),N.Rb()}if(2&t){const t=N.gc();N.zb(5),N.Mc("(L\u01b0u \xfd: Anh/Ch\u1ecb \u0111ang \u0111\u1ed5i gi\xe0y cho chuy\u1ec1n ",t.buildingNameForChangeModal,")"),N.zb(8),N.mc("dataSource",t.BPFCsForChangeModal)("ngModel",t.changebpfcID)("placeholder",N.ic(15,8,"Select a model"))("fields",t.fieldsBPFC)("allowFiltering",!0),N.zb(5),N.Lc(N.ic(19,10,"Close")),N.zb(3),N.Lc(N.ic(22,12,"Confirm"))}}let ge=(()=>{class t{constructor(t,e,i,n,o,a,s,l,r,d,h){this.alertify=t,this.modalService=e,this.planService=i,this.todolistService=n,this.buildingService=o,this.stationSevice=a,this.authService=s,this.dataService=l,this.spinner=r,this.bPFCEstablishService=d,this.datePipe=h,this.introJS=ht(),this.startTime={hour:7,minute:0},this.endTime={hour:16,minute:30},this.sortSettings={columns:[{field:"buildingName",direction:"Ascending"}]},this.bpfcID=0,this.data=[],this.searchSettings={hierarchyMode:"Parent"},this.modalPlan={id:0,buildingID:0,BPFCEstablishID:0,BPFCName:"",hourlyOutput:0,workingHour:0,dueDate:new Date,startWorkingTime:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDay(),7,0,0),finishWorkingTime:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDay(),16,30,0),startTime:{hour:7,minute:0},endTime:{hour:16,minute:30}},this.buildingNameForChangeModal="",this.textLine="Select a line name",this.fieldsGlue={text:"name",value:"name"},this.fieldsLine={text:"name",value:"name"},this.fieldsBPFC={text:"name",value:"name",tooltip:"name",itemCreated:t=>{Object(c.g)(t.item,this.queryString,!0,"Contains")}},this.fieldsBuildings={text:"name",value:"id"},this.startWorkingTimeParams={params:{value:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate(),7,30,0)}},this.finishWorkingTimeParams={params:{value:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate(),16,30,0)}},this.lineID=0,this.BPFCs=new Array,this.subscription=[],this.hourlyOutputRules={required:!0},this.numericParams={create:()=>(this.elem=document.createElement("input"),this.elem),read:()=>this.elem.value,write:t=>{},params:{value:120,format:"####"}},this.lines=[],this.kindOfLine=0,this.bpfcKindData=[],this.bpfcDataSource=new Array,this.updateOnTimePercentage="",this.onFiltering=t=>{this.queryString=t.text;let e=new B.h;e=""!==t.text?e.where("name","contains",t.text,!0):e,t.updateData(this.BPFCs,e)},this.onFilteringBuilding=t=>{let e=new B.h;e=""!==t.text?e.where("name","contains",t.text,!0):e,t.updateData(this.buildings,e)},this.onFilteringChangeBPFCModal=t=>{let e=new B.h;e=""!==t.text?e.where("name","contains",t.text,!0):e,t.updateData(this.BPFCs,e)},this.gridConfig()}ngAfterViewInit(){}ngOnInit(){this.buildingID=0,this.date=new Date,this.endDate=new Date,this.startDate=new Date,this.hasWorker=!1;const t=JSON.parse(localStorage.getItem("building")),e=JSON.parse(localStorage.getItem("level"));this.role=e,this.building=t,this.watch(),this.checkRole(),this.clearForm()}onTimeChange(t){}watch(){const t=this.stationSevice.getValue().subscribe(t=>{!0===t&&this.getAll()});this.subscription.push(t)}checkRole(){switch(this.role.id){case ut.a.ADMIN:case ut.a.SUPERVISOR:case ut.a.STAFF:case ut.a.WORKER:this.IsAdmin=!0;const t=+localStorage.getItem("buildingID");this.getBuilding(0===t?()=>{this.alertify.message("Please select a building!",!0)}:()=>{this.buildingID=t});break;case ut.a.DISPATCHER:this.building=JSON.parse(localStorage.getItem("building")),this.getBuilding(()=>{this.buildingID=this.building[0].id})}}ngOnDestroy(){localStorage.removeItem("isSTF"),this.subscription.forEach(t=>t.unsubscribe())}onChangeBuilding(t){console.clear(),this.buildingID=t.itemData.id,this.buildingName=t.itemData.name,this.isSTF=t.itemData.isSTF,localStorage.setItem("buildingID",t.itemData.id),localStorage.setItem("isSTF",t.itemData.isSTF),console.log("- Chon t\xf2a nh\xe0: ",this.buildingName),console.log("\u0110\xe2y l\xe0: "+(!0===this.isSTF?"X\u01b0\u1edfng \u0111\u1ebf":"Th\xe0nh h\xecnh")),this.getAll(),this.achievementRate(),this.getStartTimeFromPeriod(),this.getAllBPFC(),this.buildingID=void 0===this.buildingID?0:this.buildingID,this.getAllLine(this.buildingID)}gridConfig(){this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"},this.selectOptions={checkboxOnly:!0},this.pageSettings={pageCount:20,pageSizes:!0,pageSize:12},this.editparams={params:{popupHeight:"300px"}},this.toolbarOptions=["Add",{text:"Update",tooltipText:"Update",prefixIcon:"fa fa-tasks",id:"Update"},"Search",{text:"Export Excel",tooltipText:"Export Excel",prefixIcon:"e-btn-icon fa fa-file-excel-o e-icons e-icon-left",id:"exportExcel"},"ColumnChooser"],this.subscription.push(this.dataService.getValueLocale().subscribe(t=>{if("vi"!==t)if("en"!==t){const t=localStorage.getItem("lang");if("vi"===t)return void(this.toolbarOptions=["Add",{text:"C\u1eadp Nh\u1eadt",tooltipText:"C\u1eadp Nh\u1eadt",prefixIcon:"fa fa-tasks",id:"Update"},"Search",{text:"Export Excel",tooltipText:"Export Excel",prefixIcon:"e-btn-icon fa fa-file-excel-o e-icons e-icon-left",id:"exportExcel"},"ColumnChooser"]);if("en"===t)return void(this.toolbarOptions=["Add",{text:"Update",tooltipText:"Update",prefixIcon:"fa fa-tasks",id:"Update"},"Search",{text:"Export Excel",tooltipText:"Export Excel",prefixIcon:"e-btn-icon fa fa-file-excel-o e-icons e-icon-left",id:"exportExcel"},"ColumnChooser"])}else this.toolbarOptions=["Add",{text:"Update",tooltipText:"Update",prefixIcon:"fa fa-tasks",id:"Update"},"Search",{text:"Export Excel",tooltipText:"Export Excel",prefixIcon:"e-btn-icon fa fa-file-excel-o e-icons e-icon-left",id:"exportExcel"},"ColumnChooser"];else this.toolbarOptions=["Add",{text:"C\u1eadp Nh\u1eadt",tooltipText:"C\u1eadp Nh\u1eadt",prefixIcon:"fa fa-tasks",id:"Update"},"Search",{text:"Export Excel",tooltipText:"Export Excel",prefixIcon:"e-btn-icon fa fa-file-excel-o e-icons e-icon-left",id:"exportExcel"},"ColumnChooser"]}))}count(t){return Number(t)+1}onDoubleClick(t){this.setFocus=t.column}getBuildingWorker(t){const e=+JSON.parse(localStorage.getItem("user")).User.ID;this.authService.getBuildingUserByUserID(e).subscribe(e=>{this.buildings=e.data,t()})}getBuilding(t){const e=+JSON.parse(localStorage.getItem("user")).User.ID;this.authService.getBuildingUserByUserID(e).subscribe(e=>{this.buildings=e.data,t()})}achievementRate(){this.planService.achievementRate(this.buildingID).subscribe(t=>{this.updateOnTimePercentage=t.data})}getAllLine(t){this.planService.getLines(t).subscribe(t=>{this.lines=t,console.log("L\u1ea5y t\u1ea5t c\u1ea3 c\xe1c chuy\u1ec1n theo t\xf2a nh\xe0: ",this.buildingName)})}onChangeLine(t,e){var i,n;if(this.lineID=(null===(i=t.itemData)||void 0===i?void 0:i.id)||0,this.kindOfLine=(null===(n=t.itemData)||void 0===n?void 0:n.kindID)||0,this.isSTF?(this.BPFCs=this.bpfcDataSource.filter(t=>t.kinds.includes(this.kindOfLine)&&"STF"===t.artProcess),this.bpfcDropdownlist.refresh()):(this.BPFCs=this.bpfcDataSource.filter(t=>"STF"!==t.artProcess),this.bpfcDropdownlist.refresh()),e.isGenerate&&e.buildingID!==this.lineID)return this.lineID=e.buildingID,this.grid.refresh(),void this.alertify.warning("Kh\xf4ng \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt chuy\u1ec1n cho k\u1ebf ho\u1ea1ch l\xe0m vi\u1ec7c n\xe0y! <br>\n        L\xfd Do: K\u1ebf ho\u1ea1ch l\xe0m vi\u1ec7c n\xe0y \u0111\xe3 t\u1ea1o danh s\xe1ch vi\u1ec7c l\xe0m r\u1ed3i! ",!0)}onChangeDueDateEdit(t,e){var i;if(this.dueDate=null===(i=t.value)||void 0===i?void 0:i.toDateString(),e.isGenerate&&e.buildingID!==this.lineID)return this.lineID=e.buildingID,this.grid.refresh(),void this.alertify.warning("Kh\xf4ng \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt ng\xe0y th\u1ef1c thi cho k\u1ebf ho\u1ea1ch l\xe0m vi\u1ec7c n\xe0y! <br>\n        L\xfd Do: K\u1ebf ho\u1ea1ch l\xe0m vi\u1ec7c n\xe0y \u0111\xe3 t\u1ea1o danh s\xe1ch vi\u1ec7c l\xe0m r\u1ed3i! ",!0)}onChangeDueDateClone(t){this.date=t.value}onChangeBPFC(t,e){var i,n;if(this.bpfcID=(null===(i=t.itemData)||void 0===i?void 0:i.id)||0,this.bpfcKindData=(null===(n=t.itemData)||void 0===n?void 0:n.kinds)||[],this.isSTF&&this.validateKind(),e.isGenerate&&e.bpfcEstablishID!==this.bpfcID)return this.alertify.warning("Kh\xf4ng \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt BPFC cho k\u1ebf ho\u1ea1ch l\xe0m vi\u1ec7c n\xe0y! <br>\n        L\xfd Do: K\u1ebf ho\u1ea1ch l\xe0m vi\u1ec7c n\xe0y \u0111\xe3 t\u1ea1o danh s\xe1ch vi\u1ec7c l\xe0m r\u1ed3i!\n        ",!0),this.bpfcID=e.bpfcEstablishID,void this.grid.refresh()}actionComplete(t){}convertTimeToDatetime(t){return(new Date).toDateString()+` ${t.hour}:${t.minute}`}convertDatetimeToTime(t){const e=t;return{hour:e.getHours(),minute:e.getMinutes()}}dataBound(){this.grid.autoFitColumns()}rowDataBound(t){}onChangeStartTime(t){}onChangeEndTime(t){}actionBegin(t){var e;if("beginEdit"===t.requestType){const e=t.rowData;!0===t.rowData.isOffline&&(t.cancel=!0),this.clearForm(),this.modalPlan.finishWorkingTime=e.finishWorkingTime,this.modalPlan.startWorkingTime=e.startWorkingTime,this.dueDate=e.dueDate,this.modalPlan.startTime={hour:this.modalPlan.startWorkingTime.getHours(),minute:this.modalPlan.startWorkingTime.getMinutes()},this.modalPlan.endTime={hour:this.modalPlan.finishWorkingTime.getHours(),minute:this.modalPlan.finishWorkingTime.getMinutes()}}if("cancel"===t.requestType&&(this.clearForm(),this.grid.refresh()),"save"===t.requestType){if("edit"===t.action){const i=t.previousData,n=t.data;if(t.data.isGenerate&&i.hourlyOutput!==n.hourlyOutput)return this.alertify.warning("Kh\xf4ng \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt s\u1ea3n l\u01b0\u1ee3ng h\xe0ng gi\u1edd cho k\u1ebf ho\u1ea1ch l\xe0m vi\u1ec7c n\xe0y! <br>\n            L\xfd Do: K\u1ebf ho\u1ea1ch l\xe0m vi\u1ec7c n\xe0y \u0111\xe3 t\u1ea1o danh s\xe1ch vi\u1ec7c l\xe0m r\u1ed3i!",!0),void this.grid.refresh();this.modalPlan.id=t.data.id||0,this.modalPlan.buildingID=null!==(e=this.lineID)&&void 0!==e?e:t.data.buildingID,this.modalPlan.dueDate=this.dueDate,this.modalPlan.workingHour=t.data.workingHour,this.modalPlan.BPFCEstablishID=t.data.bpfcEstablishID,this.modalPlan.BPFCName=t.data.bpfcName,this.modalPlan.hourlyOutput=t.data.hourlyOutput,this.modalPlan.startTime={hour:this.modalPlan.startWorkingTime.getHours(),minute:this.modalPlan.startWorkingTime.getMinutes()},this.modalPlan.endTime={hour:this.modalPlan.finishWorkingTime.getHours(),minute:this.modalPlan.finishWorkingTime.getMinutes()},this.planService.update(this.modalPlan).subscribe(t=>{this.alertify.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng! <br>Updated succeeded!"),this.clearForm(),this.getAll()},t=>{this.alertify.error(t,!0),this.grid.refresh(),this.getAll(),this.clearForm()}),console.clear(),console.log("\u0110\xe3 ch\u1ec9nh s\u1eeda th\xe0nh c\xf4ng k\u1ebf ho\u1ea1ch l\xe0m vi\u1ec7c!")}"add"===t.action&&(t.data.hourlyOutput=120,this.modalPlan.buildingID=this.lineID,this.modalPlan.dueDate=this.dueDate,this.modalPlan.workingHour=t.data.workingHour||0,this.modalPlan.BPFCEstablishID=this.bpfcID,this.modalPlan.BPFCName=t.data.bpfcName,this.modalPlan.hourlyOutput=t.data.hourlyOutput||0,this.modalPlan.startTime={hour:this.modalPlan.startWorkingTime.getHours(),minute:this.modalPlan.startWorkingTime.getMinutes()},this.modalPlan.endTime={hour:this.modalPlan.finishWorkingTime.getHours(),minute:this.modalPlan.finishWorkingTime.getMinutes()},this.planService.create(this.modalPlan).subscribe(t=>{t?(this.alertify.success("T\u1ea1o th\xe0nh c\xf4ng!<br>Created succeeded!"),this.getAll(),this.clearForm()):(this.alertify.warning("D\u1eef li\u1ec7u \u0111\xe3 t\u1ed3n t\u1ea1i! <br>This plan has already existed!!!"),this.getAll(),this.clearForm())},t=>{this.alertify.error(t,!0),this.grid.refresh(),this.getAll(),this.clearForm()}),console.clear(),console.log("\u0110\xe3 th\xeam m\u1edbi th\xe0nh c\xf4ng k\u1ebf ho\u1ea1ch l\xe0m vi\u1ec7c!"))}}clearForm(){this.modalPlan={id:0,buildingID:0,BPFCEstablishID:0,BPFCName:"",hourlyOutput:0,workingHour:0,dueDate:new Date,startWorkingTime:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDay(),7,0,0),finishWorkingTime:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDay(),16,30,0),startTime:{hour:7,minute:0},endTime:{hour:16,minute:30}},this.startTime={hour:7,minute:0},this.endTime={hour:16,minute:30},this.bpfcID=0,this.hourlyOutput=0,this.workHour=0,this.dueDate=new Date,this.queryString=""}validForm(){return[this.bpfcID].every(t=>t>0)}onChangeWorkingHour(t){this.workHour=t}onChangeHourlyOutput(t){this.hourlyOutput=t}openaddModalPlan(t){this.modalReference=this.modalService.open(t)}actionFailure(t){console.log(t.error)}getAllBPFC(){this.bPFCEstablishService.filterByApprovedStatus().subscribe(t=>{if(console.log("N\u1ebfu l\xe0 th\xe0nh h\xecnh th\xec ch\u1ec9 l\u1ea5y nh\u1eefng m\u1eabu gi\u1ea7y c\u1ee7a th\xe0nh h\xecnh, ng\u01b0\u1ee3c l\u1ea1i l\u1ea5y c\u1ee7a x\u01b0\u1edfng \u0111\u1ebf!"),this.bpfcDataSource=t.map(t=>({id:t.id,artProcess:t.artProcess,glues:t.glues,kinds:t.kinds,name:`${t.modelName} - ${t.modelNo} - ${t.articleNo} - ${t.artProcess}`})),this.isSTF=JSON.parse(localStorage.getItem("isSTF")),this.isSTF){const e=t.filter(t=>"STF"===t.artProcess).map(t=>({id:t.id,artProcess:t.artProcess,glues:t.glues,kinds:t.kinds,name:`${t.modelName} - ${t.modelNo} - ${t.articleNo} - ${t.artProcess}`}));this.BPFCs=Object.assign([],e),this.BPFCsForChangeModal=Object.assign([],e)}else{const e=t.filter(t=>"STF"!==t.artProcess).map(t=>({id:t.id,artProcess:t.artProcess,glues:t.glues,kinds:t.kinds,name:`${t.modelName} - ${t.modelNo} - ${t.articleNo} - ${t.artProcess}`}));this.BPFCs=Object.assign([],e),this.BPFCsForChangeModal=Object.assign([],e)}console.log("L\u1ea5y danh s\xe1ch m\u1eabu gi\xe0y: ",this.BPFCs.length)})}getStartTimeFromPeriod(){this.planService.getStartTimeFromPeriod(this.buildingID).subscribe(t=>{!0===t.status?(this.period=t.data,console.log("Nh\u1eefng d\u1eef li\u1ec7u c\u1ea7n thi\u1ebft cho vi\u1ec7c t\u1ea1o k\u1ebf ho\u1ea1ch l\xe0m vi\u1ec7c: "),console.log("L\u1ea5y th\u1eddi gian b\u1eaft \u0111\u1ea7u tr\u1ed9n keo \u0111\u1ea7u ti\xean trong ng\xe0y!")):this.alertify.warning(t.message)},t=>this.alertify.warning(t.message))}getAll(){this.planService.search(this.buildingID,this.startDate.toDateString(),this.endDate.toDateString()).subscribe(t=>{this.data=t.map(t=>({id:t.id,bpfcName:`${t.modelName} - ${t.modelNoName} - ${t.articleName} - ${t.processName}`,dueDate:t.dueDate,createdDate:t.createdDate,hourlyOutput:t.hourlyOutput,buildingName:t.buildingName,buildingID:t.buildingID,startWorkingTime:new Date(t.startWorkingTime),finishWorkingTime:new Date(t.finishWorkingTime),startTime:t.startTime,endTime:t.endTime,isChangeBPFC:t.isChangeBPFC,bpfcEstablishID:t.bpfcEstablishID,glues:t.glues||[],lineKind:t.lineKind,isGenerate:t.isGenerate,isOvertime:t.isOvertime,isOffline:t.isOffline,updatedTime:t.updatedTime,updatedOffline:t.updatedOffline,updatedOvertime:t.updatedOvertime,isShowOvertimeOption:t.isShowOvertimeOption})),this.data=this.data||[],console.log("L\u1ea5y t\u1ea5t c\u1ea3 k\u1ebf ho\u1ea1ch l\xe0m vi\u1ec7c c\u1ee7a t\xf2a nh\xe0 : ",this.buildingName)})}deleteRange(t){this.alertify.confirm("Delete Plan <br> X\xf3a k\u1ebf ho\u1ea1c l\xe0m vi\u1ec7c","Are you sure you want to delete this Plans ?<br> B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a kh\xf4ng?",()=>{this.planService.deleteRange(t).subscribe(()=>{this.getAll(),this.alertify.success("X\xf3a th\xe0nh c\xf4ng! <br>Plans has been deleted")},t=>{this.alertify.error("X\xf3a th\u1ea5t b\u1ea1i! <br>Failed to delete the Model Name")})})}delete(t){this.alertify.confirm("Delete Plan <br> X\xf3a k\u1ebf ho\u1ea1c l\xe0m vi\u1ec7c","Are you sure you want to delete this Plans ?<br> B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a kh\xf4ng?",()=>{this.planService.deleteRange([t]).subscribe(()=>{this.getAll(),this.alertify.success("X\xf3a th\xe0nh c\xf4ng! <br>Plans has been deleted")},t=>{this.alertify.error("X\xf3a th\u1ea5t b\u1ea1i! <br>Failed to delete the Model Name")})})}openModal(t){const e=this.grid.getSelectedRecords();0!==e.length?(this.plansSelected=e.map(t=>({id:t.id,bpfcEstablishID:t.bpfcEstablishID,hourlyOutput:t.hourlyOutput,dueDate:t.dueDate,buildingID:t.buildingID})),this.modalReference=this.modalService.open(t)):this.alertify.warning("H\xe3y ch\u1ecdn 1 ho\u1eb7c nhi\u1ec1u d\xf2ng \u0111\u1ec3 nh\xe2n b\u1ea3n!<br>Please select the plan!",!0)}openCloneModal(t){this.modalReference=this.modalService.open(this.cloneModal),this.plansSelected=[{id:t.id,bpfcEstablishID:t.bpfcEstablishID,hourlyOutput:t.hourlyOutput,dueDate:t.dueDate,buildingID:t.buildingID}]}toolbarClick(t){switch(t.item.id){case"Clone":this.openModal(this.cloneModal);break;case"Update":this.generateTodolist();break;case"exportExcel":this.spinner.show();const t=this.data.map(t=>t.id);this.planService.exportExcel({plans:t,buildingID:this.buildingID}).subscribe(t=>{new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});const e=window.URL.createObjectURL(t),i=document.createElement("a");i.href=e,i.download="report.xlsx",i.click(),this.spinner.hide()},t=>{this.spinner.hide(),this.alertify.error("Server error!")})}}onClickClone(){this.plansSelected.map(t=>{t.dueDate=this.date}),this.planService.clonePlan(this.plansSelected).subscribe(t=>{t?(this.alertify.success("Nh\xe2n b\u1ea3n th\xe0nh c\xf4ng! <br>Successfully!"),this.startDate=this.date,this.endDate=this.date,this.getAll(),this.modalService.dismissAll()):(this.alertify.warning("D\u1eef li\u1ec7u n\xe0y \u0111\xe3 t\u1ed3n t\u1ea1i!<br>The plans have already existed!"),this.modalService.dismissAll())})}search(t,e){this.planService.search(this.buildingID,t.toDateString(),e.toDateString()).subscribe(t=>{this.data=t.map(t=>({id:t.id,bpfcName:`${t.modelName} - ${t.modelNoName} - ${t.articleName} - ${t.processName}`,dueDate:t.dueDate,createdDate:t.createdDate,hourlyOutput:t.hourlyOutput,buildingName:t.buildingName,buildingID:t.buildingID,startWorkingTime:new Date(t.startWorkingTime),finishWorkingTime:new Date(t.finishWorkingTime),startTime:t.startTime,endTime:t.endTime,isChangeBPFC:t.isChangeBPFC,bpfcEstablishID:t.bpfcEstablishID,glues:t.glues||[],lineKind:t.lineKind,isGenerate:t.isGenerate,isOvertime:t.isOvertime,isOffline:t.isOffline,updatedTime:t.updatedTime,updatedOffline:t.updatedOffline,updatedOvertime:t.updatedOvertime,isShowOvertimeOption:t.isShowOvertimeOption}))})}changeStopLine(t,e){const i=e.id;t.checked?this.offline(i,()=>{this.grid.refresh()}):this.online(i,()=>{this.grid.refresh()})}changeOvertime(t,e){const i=[e.id];t.checked?this.addOvertime(i,()=>{this.grid.refresh()}):this.removeOvertime(i,()=>{this.grid.refresh()})}onClickDefault(){this.startDate=new Date,this.endDate=new Date,this.getAll()}startDateOnchange(t){this.startDate=t.value,this.search(this.startDate,this.endDate)}endDateOnchange(t){this.endDate=t.value,this.search(this.startDate,this.endDate)}tooltipContext(t){if(t){const e=["1","2","3","4","5","6","7","8","9","10"],i=[];for(const n of t)e.includes(n)||i.push(n);return i.join("<br>")}return""}tooltip(t){"bpfcName"===t.column.field&&new f.a({content:this.tooltipContext(t.data.glues)},t.cell),"buildingName"===t.column.field&&new f.a({content:t.data.lineKind},t.cell)}onClickFilter(){this.search(this.startDate,this.endDate)}generateTodolist(){const t=this.grid.dataSource.filter(t=>!1===t.isGenerate);if(0===t.length)return void this.alertify.warning("T\u1ea5t c\u1ea3 c\xe1c k\u1ebf ho\u1ea1ch l\xe0m vi\u1ec7c \u0111\xe3 \u0111\u01b0\u1ee3c t\u1ea1o nhi\u1ec7m v\u1ee5!<br>\n      All work plans have been created with tasks !",!0);const e=t.map(t=>t.id);this.todolistService.generateToDoList(e).subscribe(t=>{t.status?(this.alertify.success("T\u1ea1o nhi\u1ec7m v\u1ee5 th\xe0nh c\xf4ng!<br>Success!",!0),this.getAll()):this.alertify.error(t.message,!0)},t=>this.alertify.error(t,!0))}generateDispatchList(){const t=this.grid.dataSource.filter(t=>!1===t.isGenerate);if(0===t.length)return void this.alertify.warning("T\u1ea5t c\u1ea3 c\xe1c k\u1ebf ho\u1ea1ch l\xe0m vi\u1ec7c \u0111\xe3 \u0111\u01b0\u1ee3c t\u1ea1o nhi\u1ec7m v\u1ee5!<br>\n      All work plans have been created with tasks !",!0);const e=t.map(t=>t.id);this.todolistService.generateDispatchList(e).subscribe(t=>{t.status?(this.alertify.success("T\u1ea1o nhi\u1ec7m v\u1ee5 th\xe0nh c\xf4ng!<br>Success!",!0),this.getAll()):this.alertify.error(t.message,!0)},t=>this.alertify.error(t,!0))}changeBPFC(){this.planService.changeBPFC(this.planID,this.changebpfcID).subscribe(()=>{this.alertify.success("T\u1ea1o nhi\u1ec7m v\u1ee5 th\xe0nh c\xf4ng!<br>Success!",!0),this.getAll(),this.modalReference.dismiss()},t=>this.alertify.error(t,!0))}online(t,e){this.alertify.confirm2("Open Line! <br>M\u1edf l\u1ea1i nh\xe9!","Are you sure you want to open line of this Plans ?<br> B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n m\u1edf l\u1ea1i chuy\u1ec1n kh\xf4ng?",()=>{this.planService.online(t).subscribe(()=>{this.alertify.success("Th\xe0nh c\xf4ng!<br>Success!",!0),this.getAll()},t=>this.alertify.error(t,!0))},()=>{e()})}offline(t,e){this.alertify.confirm2("Stop Line! <br>  Ng\u01b0ng chuy\u1ec1n kh\xf4ng!","Are you sure you want to stop line of this Plans ?<br> B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n ng\u01b0ng chuy\u1ec1n kh\xf4ng?",()=>{this.planService.offline(t).subscribe(()=>{this.alertify.success("Th\xe0nh c\xf4ng!<br>Success!",!0),this.getAll()},t=>this.alertify.error(t,!0))},()=>{e()})}openStationComponent(t){const e=this.modalService.open(dt,{size:"lg",backdrop:"static",keyboard:!1});e.componentInstance.plan=t,e.result.then(t=>{},t=>{})}openChangeBPFCModalComponent(t,e){this.planID=e.id,this.buildingNameForChangeModal=e.buildingName,this.modalReference=this.modalService.open(t,{size:"lg"}),this.modalReference.result.then(t=>{},t=>{})}onChangeBPFCModal(t){this.changebpfcID=t.itemData.id}startSteps(){this.introJS.setOptions({steps:[{element:".step1-li",intro:"B\u01b0\u1edbc 1: Ch\u1ecdn v\xe0o n\xfat \u0111\u1ed5i m\xe3 BPFC!"},{element:".step2-li",intro:"B\u01b0\u1edbc 2: Ch\u1ecdn 1 BPFC kh\xe1c!"}],hidePrev:!0,hideNext:!1}).start()}created(){this.getAllBPFCForChangeModal()}getAllBPFCForChangeModal(){}addOvertime(t,e){this.alertify.confirm2("Add Overtime! <br> C\xe0i \u0111\u1eb7t gi\u1edd t\u0103ng ca!","Are you sure you want to add overtime of this Plans ?<br> B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n c\xe0i \u0111\u1eb7t gi\u1edd \u0103n ca kh\xf4ng?",()=>{this.todolistService.addOvertime(t).subscribe(t=>{!0===t.status?(this.getAll(),this.alertify.success(t.message)):this.alertify.error(t.message)},t=>{this.alertify.error("L\u1ed7i m\xe1y ch\u1ee7!")})},()=>{e()})}removeOvertime(t,e){this.alertify.confirm2("remove overtime of this plan <br> X\xf3a gi\u1edd t\u0103ng ca c\u1ee7a k\u1ebf ho\u1ea1c l\xe0m vi\u1ec7c","Are you sure you want to remove overtime of this Plans ?<br> B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n h\u1ee7y gi\u1edd t\u0103ng c\u1ea3 c\u1ee7a k\u1ebf ho\u1ea1ch l\xe0m vi\u1ec7c n\xe0y kh\xf4ng?",()=>{this.todolistService.removeOvertime(t).subscribe(t=>{!0===t.status?(this.getAll(),this.alertify.success(t.message)):this.alertify.error(t.message)},t=>{this.alertify.error("L\u1ed7i m\xe1y ch\u1ee7!")})},()=>{e()})}validateKind(){0===this.lineID&&(this.alertify.warning("Vui l\xf2ng ch\u1ecdn chuy\u1ec1n tr\u01b0\u1edbc!",!0),this.bpfcID=0,this.bpfcDropdownlist.clear()),!1===this.bpfcKindData.includes(this.kindOfLine)&&(this.alertify.warning("Nh\u1eefng h\xf3a ch\u1ea5t trong BPFC hi\u1ec7n t\u1ea1i kh\xf4ng c\xf3 ch\u1ee9a kind n\xe0o c\u1ee7a chuy\u1ec1n hi\u1ec7n t\u1ea1i! Vui l\xf2ng ch\u1ecdn l\u1ea1i!",!0),this.bpfcID=0,this.bpfcDropdownlist.clear())}}return t.\u0275fac=function(e){return new(e||t)(N.Mb(A.a),N.Mb(l.b),N.Mb(gt.a),N.Mb(bt.a),N.Mb(O.a),N.Mb(lt),N.Mb(pt.a),N.Mb(mt.a),N.Mb(a.c),N.Mb(ft.a),N.Mb(n.d))},t.\u0275cmp=N.Gb({type:t,selectors:[["app-plan"]],viewQuery:function(t,e){if(1&t&&(N.Qc(St,!0),N.Qc(vt,!0),N.Qc(yt,!0),N.Qc(Dt,!0),N.Qc(Ct,!0),N.Qc(Tt,!0)),2&t){let t;N.xc(t=N.dc())&&(e.bpfcDropdownlist=t.first),N.xc(t=N.dc())&&(e.cloneModal=t.first),N.xc(t=N.dc())&&(e.stationModal=t.first),N.xc(t=N.dc())&&(e.orderForm=t.first),N.xc(t=N.dc())&&(e.startTimepicker=t.first),N.xc(t=N.dc())&&(e.grid=t.first)}},features:[N.yb([n.d,v.m,v.f,v.h])],decls:128,vars:74,consts:[["type","square-jelly-box","size","medium",3,"fullScreen"],[1,"loading"],[1,"row","pt-2"],[1,"col-md-12"],[1,"card"],[1,"card-body","table-responsive","p-0"],[1,"row","my-3"],[1,"row"],[1,"col-md-12","d-flex","justify-content-start","align-items-center"],[1,"font-weight-bold","px-3"],[1,"pr-3",3,"value","ngModel","change","ngModelChange"],[1,"font-weight-bold","pr-3"],["placeholder","Select a building",1,"pr-3",3,"dataSource","fields","allowFiltering","value","filtering","change"],[1,"btn","btn-sm","btn-default",3,"click"],[1,"fa","fa-times"],[1,"font-weight-bold","px-3","text-danger"],["showColumnMenu","true","allowPaging","true","allowSorting","true","allowResizing","true","gridLines","Both",3,"dataSource","searchSettings","allowExcelExport","showColumnChooser","toolbar","selectionSettings","sortSettings","pageSettings","editSettings","actionBegin","actionComplete","rowDataBound","dataBound","queryCellInfo","actionFailure","toolbarClick","recordDoubleClick"],["grid",""],["field","buildingName","width","92","textAlign","Center",3,"headerText"],["headerTemplate",""],["editTemplate",""],["field","bpfcName","width","344","textAlign","Center",3,"headerText"],["template",""],["field","dueDate","type","date","format","MM-dd-yyyy","width","138","textAlign","Center",3,"headerText"],["field","startTime","isPrimaryKey","true","type","date","width","95","textAlign","Center",3,"headerText"],["field","endTime","isPrimaryKey","true","type","date","width","100","textAlign","Center",3,"headerText"],["field","hourlyOutput","editType","numericedit","format","####","width","115","textAlign","Center",3,"headerText"],["field","isGenerate","width","110","textAlign","Center",3,"headerText"],["field","createdDate","type","date","format","MM-dd-yyyy HH:mm","width","138","textAlign","Center",3,"visible","headerText"],["field","updatedTime","type","date","format","MM-dd-yyyy HH:mm","width","138","textAlign","Center",3,"visible","headerText"],["field","updatedOffline","type","date","format","MM-dd-yyyy HH:mm","width","138","textAlign","Center",3,"visible","headerText"],["field","updatedOvertime","type","date","format","MM-dd-yyyy HH:mm","width","138","textAlign","Center",3,"visible","headerText"],["field","Inactive","type","date","format","MM-dd-yyyy HH:mm","width","138","textAlign","Center",3,"headerText"],["field","Overtime/No Overtime","textAlign","Center","width","136",3,"headerText"],["field","Change BPFC","textAlign","Center","width","120",3,"headerText"],["cloneModal",""],["changeBPFCModal",""],["id","buildingNameDropdownlist","popupHeight","200px","popupWidth","250px",3,"dataSource","placeholder","value","fields","allowFiltering","change"],["buildingNameDropdownlist",""],["id","bpfcDropdownlist","popupHeight","300px","popupWidth","450px",3,"dataSource","value","placeholder","fields","allowFiltering","filtering","change"],["bpfcDropdownlist",""],["format","MM-dd-yyyy",3,"value","allowEdit","placeholder","change"],[4,"ngIf","ngIfElse"],["elseOffline",""],[4,"ngIf"],[1,"fa","fa-check",2,"color","green"],[1,"fa","fa-times",2,"color","red"],["cssClass","custom-stop-line","style","width: 80px; ",3,"onLabel","offLabel","checked","disabled","change",4,"ngIf"],["cssClass","custom-stop-line",2,"width","80px",3,"onLabel","offLabel","checked","disabled","change"],["switch",""],["cssClass","custom-overtime","style","width: 80px; ",3,"onLabel","offLabel","checked","change",4,"ngIf"],["cssClass","custom-overtime",2,"width","80px",3,"onLabel","offLabel","checked","change"],[1,"btn-group"],["type","button","class","btn btn-xs btn-primary step1-li",3,"click",4,"ngIf"],["class","btn-group ml-1",4,"ngIf"],["type","button",1,"btn","btn-xs","btn-primary","step1-li",3,"click"],[1,"fas","fa-arrows-alt-h"],[1,"btn-group","ml-1"],["type","button",1,"btn","btn-xs","btn-danger",3,"click"],[1,"fa","fa-trash"],[1,"modal-header"],[1,"modal-title"],[1,"fas","fa-plus"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group"],["for","Name"],[2,"color","red"],["format","MM-dd-yyyy",3,"value","change"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"text-danger"],["popupHeight","300px","popupWidth","450px",3,"dataSource","ngModel","placeholder","fields","allowFiltering","ngModelChange","filtering","created","select"],["changeBPFCDroupdownlist",""]],template:function(t,e){1&t&&(N.Sb(0,"ngx-spinner",0),N.Sb(1,"p",1),N.Kc(2,"Loading data..."),N.Rb(),N.Rb(),N.Sb(3,"div",2),N.Sb(4,"div",3),N.Sb(5,"div",4),N.Sb(6,"div",5),N.Sb(7,"div",6),N.Sb(8,"div",3),N.Sb(9,"div",7),N.Sb(10,"div",8),N.Sb(11,"div",9),N.Kc(12),N.hc(13,"translate"),N.Rb(),N.Sb(14,"ejs-datepicker",10),N.cc("change",function(t){return e.startDateOnchange(t)})("ngModelChange",function(t){return e.startDate=t}),N.Rb(),N.Sb(15,"div",11),N.Kc(16),N.hc(17,"translate"),N.Rb(),N.Sb(18,"ejs-datepicker",10),N.cc("change",function(t){return e.endDateOnchange(t)})("ngModelChange",function(t){return e.endDate=t}),N.Rb(),N.Sb(19,"div",11),N.Kc(20),N.hc(21,"translate"),N.Rb(),N.Sb(22,"ejs-dropdownlist",12),N.cc("filtering",function(t){return e.onFilteringBuilding(t)})("change",function(t){return e.onChangeBuilding(t)}),N.Rb(),N.Sb(23,"button",13),N.cc("click",function(){return e.onClickDefault()}),N.Nb(24,"i",14),N.Rb(),N.Sb(25,"h4",15),N.Kc(26),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Sb(27,"ejs-grid",16,17),N.cc("actionBegin",function(t){return e.actionBegin(t)})("actionComplete",function(t){return e.actionComplete(t)})("rowDataBound",function(t){return e.rowDataBound(t)})("dataBound",function(){return e.dataBound()})("queryCellInfo",function(t){return e.tooltip(t)})("actionFailure",function(t){return e.actionFailure(t)})("toolbarClick",function(t){return e.toolbarClick(t)})("recordDoubleClick",function(t){return e.onDoubleClick(t)}),N.Sb(29,"e-columns"),N.Sb(30,"e-column",18),N.hc(31,"translate"),N.Ic(32,wt,2,3,"ng-template",null,19,N.Jc),N.Ic(34,It,3,7,"ng-template",null,20,N.Jc),N.Rb(),N.Sb(36,"e-column",21),N.hc(37,"translate"),N.Ic(38,xt,2,3,"ng-template",null,19,N.Jc),N.Ic(40,Rt,3,7,"ng-template",null,20,N.Jc),N.Ic(42,Mt,1,1,"ng-template",null,22,N.Jc),N.Rb(),N.Sb(44,"e-column",23),N.hc(45,"translate"),N.Ic(46,kt,2,3,"ng-template",null,19,N.Jc),N.Ic(48,Bt,2,5,"ng-template",null,20,N.Jc),N.Rb(),N.Sb(50,"e-column",24),N.hc(51,"translate"),N.Ic(52,Nt,2,3,"ng-template",null,19,N.Jc),N.Ic(54,At,2,4,"ng-template",null,22,N.Jc),N.Ic(56,Ot,2,4,"ng-template",null,20,N.Jc),N.Rb(),N.Sb(58,"e-column",25),N.hc(59,"translate"),N.Ic(60,Pt,2,3,"ng-template",null,19,N.Jc),N.Ic(62,_t,3,2,"ng-template",null,22,N.Jc),N.Ic(64,Ft,1,0,"ng-template",null,20,N.Jc),N.Rb(),N.Sb(66,"e-column",26),N.hc(67,"translate"),N.Ic(68,jt,2,3,"ng-template",null,19,N.Jc),N.Rb(),N.Sb(70,"e-column",27),N.hc(71,"translate"),N.Ic(72,Kt,2,3,"ng-template",null,19,N.Jc),N.Ic(74,$t,1,0,"ng-template",null,20,N.Jc),N.Ic(76,Ut,2,2,"ng-template",null,22,N.Jc),N.Rb(),N.Sb(78,"e-column",28),N.hc(79,"translate"),N.Ic(80,Jt,2,3,"ng-template",null,19,N.Jc),N.Rb(),N.Sb(82,"e-column",29),N.hc(83,"translate"),N.Ic(84,Gt,2,3,"ng-template",null,19,N.Jc),N.Ic(86,Qt,2,4,"ng-template",null,22,N.Jc),N.Rb(),N.Sb(88,"e-column",30),N.hc(89,"translate"),N.Ic(90,qt,2,3,"ng-template",null,19,N.Jc),N.Ic(92,Vt,2,4,"ng-template",null,22,N.Jc),N.Rb(),N.Sb(94,"e-column",31),N.hc(95,"translate"),N.Ic(96,Wt,2,3,"ng-template",null,19,N.Jc),N.Ic(98,Yt,2,4,"ng-template",null,22,N.Jc),N.Rb(),N.Sb(100,"e-column",32),N.hc(101,"translate"),N.Ic(102,Xt,2,3,"ng-template",null,19,N.Jc),N.Ic(104,te,1,1,"ng-template",null,22,N.Jc),N.Ic(106,ee,0,0,"ng-template",null,20,N.Jc),N.Rb(),N.Sb(108,"e-column",33),N.hc(109,"translate"),N.Ic(110,ie,2,3,"ng-template",null,19,N.Jc),N.Ic(112,oe,1,1,"ng-template",null,22,N.Jc),N.Ic(114,ae,1,0,"ng-template",null,20,N.Jc),N.Rb(),N.Sb(116,"e-column",34),N.hc(117,"translate"),N.Ic(118,se,2,3,"ng-template",null,19,N.Jc),N.Ic(120,re,3,2,"ng-template",null,22,N.Jc),N.Ic(122,de,1,0,"ng-template",null,20,N.Jc),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Ic(124,he,21,1,"ng-template",null,35,N.Jc),N.Ic(126,ue,23,14,"ng-template",null,36,N.Jc)),2&t&&(N.mc("fullScreen",!1),N.zb(12),N.Mc("",N.ic(13,40,"Start Time"),":"),N.zb(2),N.mc("value",e.startDate)("ngModel",e.startDate),N.zb(2),N.Mc("",N.ic(17,42,"End Time"),":"),N.zb(2),N.mc("value",e.endDate)("ngModel",e.endDate),N.zb(2),N.Mc("",N.ic(21,44,"Building"),":"),N.zb(2),N.mc("dataSource",e.buildings)("fields",e.fieldsBuildings)("allowFiltering",!0)("value",e.buildingID),N.zb(4),N.Lc(e.updateOnTimePercentage),N.zb(1),N.mc("dataSource",e.data)("searchSettings",e.searchSettings)("allowExcelExport",!0)("showColumnChooser",!0)("toolbar",e.toolbarOptions)("selectionSettings",e.selectOptions)("sortSettings",e.sortSettings)("pageSettings",e.pageSettings)("editSettings",e.editSettings),N.zb(3),N.nc("headerText",N.ic(31,46,"LINE_LABEL")),N.zb(6),N.nc("headerText",N.ic(37,48,"BPFC_NAME_LABEL")),N.zb(8),N.nc("headerText",N.ic(45,50,"DUE_DATE_LABEL")),N.zb(6),N.nc("headerText",N.ic(51,52,"Start Time")),N.zb(8),N.nc("headerText",N.ic(59,54,"End Time")),N.zb(8),N.nc("headerText",N.ic(67,56,"HOURLY_OUTPUT_LABEL")),N.zb(4),N.nc("headerText",N.ic(71,58,"Status")),N.zb(8),N.nc("headerText",N.ic(79,60,"Created Date")),N.mc("visible",!1),N.zb(4),N.nc("headerText",N.ic(83,62,"Updated Time")),N.mc("visible",!1),N.zb(6),N.nc("headerText",N.ic(89,64,"Updated Offline")),N.mc("visible",!1),N.zb(6),N.nc("headerText",N.ic(95,66,"Updated Overtime")),N.mc("visible",!1),N.zb(6),N.nc("headerText",N.ic(101,68,"Inactive")),N.zb(8),N.nc("headerText",N.ic(109,70,"Overtime/No Overtime")),N.zb(8),N.oc("headerText"," ",N.ic(117,72,"Change BPFC"),""))},directives:[a.a,u.a,o.g,o.j,c.c,v.j,d.d,C.d,C.b,v.e,v.b,d.c,C.c,C.a,v.d,v.a,n.n,h.i],pipes:[p.c,n.d],styles:[".disablecheckbox[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}.e-grid[_ngcontent-%COMP%]   .e-altrow[_ngcontent-%COMP%]{background-color:#d6d8db}.e-switch-wrapper.custom-stop-line[_ngcontent-%COMP%]   .e-switch-inner.e-switch-active[_ngcontent-%COMP%], .e-switch-wrapper.custom-stop-line[_ngcontent-%COMP%]   .e-switch-inner.e-switch-active[_ngcontent-%COMP%]   .e-switch-on[_ngcontent-%COMP%], .e-switch-wrapper.custom-stop-line[_ngcontent-%COMP%]:hover   .e-switch-inner.e-switch-active[_ngcontent-%COMP%]   .e-switch-on[_ngcontent-%COMP%]{background-color:#dc3545!important;border-color:#dc3545!important;font-weight:500;font-size:10px}.e-switch-wrapper.custom-stop-line[_ngcontent-%COMP%]{width:42px;height:24px}.e-switch-wrapper.custom-stop-line[_ngcontent-%COMP%]   .e-switch-handle[_ngcontent-%COMP%]{width:20px;height:20px}.e-switch-wrapper.custom-stop-line[_ngcontent-%COMP%]   .e-switch-handle.e-switch-active[_ngcontent-%COMP%]{margin-left:-22px}.e-switch-wrapper.custom-overtime[_ngcontent-%COMP%]   .e-switch-inner.e-switch-active[_ngcontent-%COMP%], .e-switch-wrapper.custom-overtime[_ngcontent-%COMP%]   .e-switch-inner.e-switch-active[_ngcontent-%COMP%]   .e-switch-on[_ngcontent-%COMP%], .e-switch-wrapper.custom-overtime[_ngcontent-%COMP%]:hover   .e-switch-inner.e-switch-active[_ngcontent-%COMP%]   .e-switch-on[_ngcontent-%COMP%]{background-color:#ffc107!important;border-color:#ffc107!important;color:#000;font-weight:500;font-size:10px}.e-switch-wrapper.custom-overtime[_ngcontent-%COMP%]{width:42px;height:24px}.e-switch-wrapper.custom-overtime[_ngcontent-%COMP%]   .e-switch-handle[_ngcontent-%COMP%]{width:20px;height:20px}.e-switch-wrapper.custom-overtime[_ngcontent-%COMP%]   .e-switch-handle.e-switch-active[_ngcontent-%COMP%]{margin-left:-22px}"]}),t})();const be=["cloneModal"],pe=["planForm"],me=["grid"];function fe(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"LINE_LABEL")," ")}function Se(t,e){1&t&&N.Kc(0),2&t&&N.Mc(" ",e.$implicit.buildingName," ")}function ve(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"BPFC_NAME_LABEL")," ")}function ye(t,e){1&t&&N.Kc(0),2&t&&N.Mc(" ",e.$implicit.bpfcName," ")}function De(t,e){if(1&t&&(N.Sb(0,"ejs-tooltip",25),N.Kc(1),N.Rb()),2&t){const t=e.$implicit,i=N.gc();N.mc("content",i.tooltip(t.glues)),N.zb(1),N.Mc(" ",t.bpfcName||"#N/A"," ")}}function Ce(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"OUTPUT_QUANTITY")," ")}function Te(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"DUE_DATE_LABEL")," ")}function we(t,e){1&t&&(N.Kc(0),N.hc(1,"date")),2&t&&N.Mc(" ",N.jc(1,1,e.$implicit.dueDate,"dd MMM, yyyy")," ")}function Ie(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"UPDATE_TIME")," ")}function xe(t,e){if(1&t&&(N.Kc(0),N.hc(1,"date")),2&t){const t=e.$implicit;N.Mc(" ",0===t.quantity?"-":N.jc(1,1,t.createdDate,"dd MMM, yyyy HH:mm")," ")}}function Re(t,e){if(1&t&&(N.Kc(0),N.hc(1,"date")),2&t){const t=e.$implicit;N.Mc(" ",0===t.quantity?"-":N.jc(1,1,t.createdDate,"dd MMM, yyyy HH:mm")," ")}}function Me(t,e){if(1&t){const t=N.Tb();N.Sb(0,"div",26),N.Sb(1,"h4",27),N.Nb(2,"i",28),N.Kc(3," Clone Work Plan "),N.Rb(),N.Sb(4,"button",29),N.cc("click",function(){return e.$implicit.dismiss("Cross click")}),N.Sb(5,"span",30),N.Kc(6,"\xd7"),N.Rb(),N.Rb(),N.Rb(),N.Sb(7,"div",31),N.Sb(8,"div",32),N.Sb(9,"div",3),N.Sb(10,"div",33),N.Sb(11,"label",34),N.Kc(12,"DueDate"),N.Rb(),N.Sb(13,"span",35),N.Kc(14,"(*)"),N.Rb(),N.Sb(15,"ejs-datepicker",36),N.cc("change",function(e){return N.Bc(t),N.gc().onChangeDueDateClone(e)}),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Sb(16,"div",37),N.Sb(17,"button",38),N.cc("click",function(){return e.$implicit.close("Close click")}),N.Kc(18,"Close"),N.Rb(),N.Sb(19,"button",39),N.cc("click",function(){return N.Bc(t),N.gc().onClickClone()}),N.Kc(20,"Clone"),N.Rb(),N.Rb()}if(2&t){const t=N.gc();N.zb(15),N.mc("value",t.date)}}let ke=(()=>{class t{constructor(t,e,i,n,o,a,s,c,l){this.alertify=t,this.modalService=e,this.planService=i,this.bPFCEstablishService=n,this.authService=o,this.datePipe=a,this.buildingService=s,this.dataService=c,this.spinner=l,this.startDate=new Date,this.endDate=new Date,this.date=new Date,this.searchSettings={hierarchyMode:"Parent"},this.modalPlan={id:0,buildingID:0,BPFCEstablishID:0,BPFCName:"",hourlyOutput:0,workingHour:0,dueDate:new Date,startWorkingTime:new Date,finishWorkingTime:new Date,startTime:{hour:7,minute:0},endTime:{hour:16,minute:30}},this.textLine="Select a line name",this.fieldsGlue={text:"name",value:"name"},this.fieldsLine={text:"name",value:"name"},this.fieldsBPFC={text:"name",value:"name"},this.fieldsBuildings={text:"name",value:"id"},this.subscription=[],this.onFilteringBuilding=t=>{let e=new B.h;e=""!==t.text?e.where("name","contains",t.text,!0):e,t.updateData(this.buildings,e)}}ngOnInit(){this.date=new Date,this.endDate=new Date,this.endDate=new Date;const t=JSON.parse(localStorage.getItem("building")),e=JSON.parse(localStorage.getItem("level"));this.role=e,this.building=t,this.gridConfig(),this.checkRole(),this.getAllBPFC(),this.ClearForm()}gridConfig(){this.pageSettings={pageCount:20,pageSizes:!0,pageSize:12},this.sortSettings={columns:[{field:"dueDate",direction:"Ascending"}]},this.editparams={params:{popupHeight:"300px"}},this.hasWorker=!0,this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"},this.toolbarOptions=["Cancel","Search"]}count(t){return Number(t)+1}getAllLine(t){this.planService.getLines(t).subscribe(t=>{this.buildingName=t})}created(){}onChangeBuilding(t){this.buildingID=t.itemData.id}getBuilding(t){this.buildingService.getBuildings().subscribe(e=>{this.buildings=e.filter(t=>2===t.level),t()})}onSelectBuilding(t){this.buildingID=t.itemData.id,this.buildingName=t.itemData.name,localStorage.setItem("buildingID",t.itemData.id),this.getAll()}checkRole(){switch(this.role.id){case 1:case 2:case 3:case 4:this.IsAdmin=!0;const t=+localStorage.getItem("buildingID");this.getBuilding(0===t?()=>{this.alertify.message("Please select a building!",!0)}:()=>{this.buildingID=t,this.getAll(),this.getAllLine(this.buildingID)});break;case 6:this.building=JSON.parse(localStorage.getItem("building")),this.getBuilding(()=>{this.buildingID=this.building[0].id,this.getAll(),this.getAllLine(this.buildingID)})}}getReport(t){this.spinner.show(),this.planService.getReport(t).subscribe(t=>{new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});const e=window.URL.createObjectURL(t),i=document.createElement("a");i.href=e,i.download="report.xlsx",i.click(),this.spinner.hide()},t=>{this.alertify.error("Ch\u1ec9 \u0111\u01b0\u1ee3c xu\u1ea5t d\u1eef li\u1ec7u b\xe1o c\xe1o trong 30 ng\xe0y!!!<br>\n        The report data can only be exported for 30 days !!!",!0),this.spinner.hide()})}downLoadFile(t,e){const i=new Blob([t],{type:e}),n=window.URL.createObjectURL(i),o=window.open(n);o&&!o.closed&&void 0!==o.closed||this.alertify.error("Please disable your Pop-up blocker and try again."),this.spinner.hide()}onChangeBuildingNameEdit(t){this.buildingNameEdit=t.itemData.id}onChangeDueDateEdit(t){this.dueDate=t.value.toDateString()}onChangeDueDateClone(t){this.date=t.value}onChangeBPFCEdit(t){this.bpfcEdit=t.itemData.id}actionComplete(t){var e;"beginEdit"===t.requestType&&(null===(e=this.setFocus)||void 0===e?void 0:e.field)&&t.form.elements.namedItem("quantity").focus()}onDoubleClick(t){this.setFocus=t.column}actionBegin(t){"cancel"===t.requestType&&this.ClearForm(),"save"===t.requestType&&"edit"===t.action&&(t.data.quantity!==t.previousData.quantity?this.planService.editQuantity(t.data.id||0,t.data.quantity).subscribe(t=>{this.alertify.success("Updated succeeded!"),this.ClearForm(),this.getAll()}):t.cancel=!0)}ClearForm(){this.bpfcEdit=0,this.hourlyOutput=0,this.workHour=0,this.dueDate=new Date}validForm(){return[this.bpfcEdit].every(t=>t>0)}onChangeWorkingHour(t){this.workHour=t}onChangeHourlyOutput(t){this.hourlyOutput=t}rowSelected(t){}openaddModalPlan(t){this.modalReference=this.modalService.open(t)}getAllBPFC(){this.bPFCEstablishService.filterByApprovedStatus().subscribe(t=>{this.BPFCs=t.map(t=>({id:t.id,name:`${t.modelName} - ${t.modelNo} - ${t.articleNo} - ${t.artProcess}`}))})}getAll(){this.planService.search(this.buildingID,this.startDate.toDateString(),this.endDate.toDateString()).subscribe(t=>{this.data=t.map(t=>({id:t.id,bpfcName:`${t.modelName} - ${t.modelNoName} - ${t.articleName} - ${t.processName}`,dueDate:t.dueDate,createdDate:t.createdDate,workingHour:t.workingHour,hourlyOutput:t.hourlyOutput,buildingName:t.buildingName,buildingID:t.buildingID,quantity:t.quantity,bpfcEstablishID:t.bpfcEstablishID,glues:t.glues||[]}))})}deleteRange(t){this.alertify.confirm("Delete Plan","Are you sure you want to delete this Plans ?",()=>{this.planService.deleteRange(t).subscribe(()=>{this.getAll(),this.alertify.success("Plans has been deleted")},t=>{this.alertify.error("Failed to delete the Modal Name")})})}openModal(t){const e=this.grid.getSelectedRecords();0!==e.length?(this.plansSelected=e.map(t=>({id:0,bpfcEstablishID:t.bpfcEstablishID,workingHour:t.workingHour,hourlyOutput:t.hourlyOutput,dueDate:t.dueDate,buildingID:t.buildingID})),this.modalReference=this.modalService.open(t)):this.alertify.warning("Please select the plan")}toolbarClick(t){switch(t.item.text){case"Clone":this.openModal(this.cloneModal);break;case"Delete Range":if(0===this.grid.getSelectedRecords().length)this.alertify.warning("Please select the plans!!");else{const t=this.grid.getSelectedRecords().map(t=>t.id);console.log("Delete Range",t),this.deleteRange(t)}break;case"Excel Export":this.getReport({startDate:this.startDate,endDate:this.endDate})}}onClickClone(){this.plansSelected.map(t=>{t.dueDate=this.date}),this.planService.clonePlan(this.plansSelected).subscribe(t=>{t?(this.alertify.success("Successfully!"),this.startDate=this.date,this.endDate=this.date,this.getAll(),this.modalService.dismissAll()):(this.alertify.warning("the plans have already existed!"),this.modalService.dismissAll())})}search(){this.planService.search(this.buildingID,this.startDate.toDateString(),this.endDate.toDateString()).subscribe(t=>{this.data=t.map(t=>({id:t.id,bpfcName:`${t.modelName} - ${t.modelNoName} - ${t.articleName} - ${t.processName}`,dueDate:t.dueDate,createdDate:t.createdDate,workingHour:t.workingHour,hourlyOutput:t.hourlyOutput,buildingName:t.buildingName,buildingID:t.buildingID,bpfcEstablishID:t.bpfcEstablishID,quantity:t.quantity,glues:t.glues||[]}))})}onClickDefault(){this.startDate=new Date,this.endDate=new Date,this.getAll()}startDateOnchange(t){this.startDate=t.value,this.search()}endDateOnchange(t){this.endDate=t.value,this.search()}tooltip(t){return t?t.join("<br>"):""}editQuantity(t,e){this.planService.editQuantity(t,e)}onClickFilter(){this.search()}}return t.\u0275fac=function(e){return new(e||t)(N.Mb(A.a),N.Mb(l.b),N.Mb(gt.a),N.Mb(ft.a),N.Mb(pt.a),N.Mb(n.d),N.Mb(O.a),N.Mb(mt.a),N.Mb(a.c))},t.\u0275cmp=N.Gb({type:t,selectors:[["app-plan-output-quantity"]],viewQuery:function(t,e){if(1&t&&(N.Qc(be,!0),N.Qc(pe,!0),N.Qc(me,!0)),2&t){let t;N.xc(t=N.dc())&&(e.cloneModal=t.first),N.xc(t=N.dc())&&(e.orderForm=t.first),N.xc(t=N.dc())&&(e.grid=t.first)}},decls:55,vars:23,consts:[["type","square-jelly-box","size","medium",3,"fullScreen"],[1,"loading"],[1,"row","pt-2"],[1,"col-md-12"],[1,"card"],[1,"card-body","table-responsive","p-0"],[1,"row","my-3"],[1,"col-md-12","col-md-12","d-flex","justify-content-start","align-items-center"],[1,"font-weight-bold","px-3"],[1,"pr-3",3,"value","change"],[1,"font-weight-bold","pr-3"],["placeholder","Select a building",1,"pr-3",3,"dataSource","fields","allowFiltering","ngModel","ngModelChange","filtering","change","select"],[1,"btn","btn-sm","btn-default",3,"click"],[1,"fa","fa-times"],["showColumnMenu","true","allowPaging","true","allowSorting","true","allowResizing","true","gridLines","Both",3,"dataSource","searchSettings","allowExcelExport","sortSettings","toolbar","pageSettings","editSettings","actionBegin","created","actionComplete","recordDoubleClick","rowSelected","toolbarClick"],["grid",""],["field","buildingName","headerText","Line","width","100","textAlign","Center"],["headerTemplate",""],["editTemplate",""],["field","bpfcName","headerText","BPFC Name","width","290","textAlign","Center"],["template",""],["field","quantity","headerText","Quantity","width","170","textAlign","Center"],["field","dueDate","type","date","format","dd MMM, yyyy","headerText","Due Date","width","160","textAlign","Center"],["field","createdDate","isPrimaryKey","true","type","date","format","dd MMM, yyyy HH:mm","headerText","Created Date","width","200","textAlign","Center"],["cloneModal",""],[3,"content"],[1,"modal-header"],[1,"modal-title"],[1,"fas","fa-plus"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row"],[1,"form-group"],["for","Name"],[2,"color","red"],["format","dd MMM, yyyy",3,"value","change"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["type","submit",1,"btn","btn-primary",3,"click"]],template:function(t,e){1&t&&(N.Sb(0,"ngx-spinner",0),N.Sb(1,"p",1),N.Kc(2,"Loading data..."),N.Rb(),N.Rb(),N.Sb(3,"div",2),N.Sb(4,"div",3),N.Sb(5,"div",4),N.Sb(6,"div",5),N.Sb(7,"div",6),N.Sb(8,"div",7),N.Sb(9,"div",8),N.Kc(10),N.hc(11,"translate"),N.Rb(),N.Sb(12,"ejs-datepicker",9),N.cc("change",function(t){return e.startDateOnchange(t)}),N.Rb(),N.Sb(13,"div",10),N.Kc(14),N.hc(15,"translate"),N.Rb(),N.Sb(16,"ejs-datepicker",9),N.cc("change",function(t){return e.endDateOnchange(t)}),N.Rb(),N.Sb(17,"div",10),N.Kc(18),N.hc(19,"translate"),N.Rb(),N.Sb(20,"ejs-dropdownlist",11),N.cc("ngModelChange",function(t){return e.buildingID=t})("filtering",function(t){return e.onFilteringBuilding(t)})("change",function(t){return e.onChangeBuilding(t)})("select",function(t){return e.onSelectBuilding(t)}),N.Rb(),N.Sb(21,"button",12),N.cc("click",function(){return e.onClickDefault()}),N.Nb(22,"i",13),N.Rb(),N.Rb(),N.Rb(),N.Sb(23,"ejs-grid",14,15),N.cc("actionBegin",function(t){return e.actionBegin(t)})("created",function(){return e.created()})("actionComplete",function(t){return e.actionComplete(t)})("recordDoubleClick",function(t){return e.onDoubleClick(t)})("rowSelected",function(t){return e.rowSelected(t)})("toolbarClick",function(t){return e.toolbarClick(t)}),N.Sb(25,"e-columns"),N.Sb(26,"e-column",16),N.Ic(27,fe,2,3,"ng-template",null,17,N.Jc),N.Ic(29,Se,1,1,"ng-template",null,18,N.Jc),N.Rb(),N.Sb(31,"e-column",19),N.Ic(32,ve,2,3,"ng-template",null,17,N.Jc),N.Ic(34,ye,1,1,"ng-template",null,18,N.Jc),N.Ic(36,De,2,2,"ng-template",null,20,N.Jc),N.Rb(),N.Sb(38,"e-column",21),N.Ic(39,Ce,2,3,"ng-template",null,17,N.Jc),N.Rb(),N.Sb(41,"e-column",22),N.Ic(42,Te,2,3,"ng-template",null,17,N.Jc),N.Ic(44,we,2,4,"ng-template",null,18,N.Jc),N.Rb(),N.Sb(46,"e-column",23),N.Ic(47,Ie,2,3,"ng-template",null,17,N.Jc),N.Ic(49,xe,2,4,"ng-template",null,18,N.Jc),N.Ic(51,Re,2,4,"ng-template",null,20,N.Jc),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Ic(53,Me,21,1,"ng-template",null,24,N.Jc)),2&t&&(N.mc("fullScreen",!1),N.zb(10),N.Mc("",N.ic(11,17,"Start Time"),":"),N.zb(2),N.mc("value",e.startDate),N.zb(2),N.Mc("",N.ic(15,19,"End Time"),":"),N.zb(2),N.mc("value",e.endDate),N.zb(2),N.Mc("",N.ic(19,21,"Building"),":"),N.zb(2),N.mc("dataSource",e.buildings)("fields",e.fieldsBuildings)("allowFiltering",!0)("ngModel",e.buildingID),N.zb(3),N.mc("dataSource",e.data)("searchSettings",e.searchSettings)("allowExcelExport",!0)("sortSettings",e.sortSettings)("toolbar",e.toolbarOptions)("pageSettings",e.pageSettings)("editSettings",e.editSettings))},directives:[a.a,u.a,c.c,o.g,o.j,v.j,d.d,C.d,C.b,v.e,v.b,d.c,C.c,C.a,v.d,v.a,f.b],pipes:[p.c,n.d],styles:[""]}),t})();var Be=i("YW37"),Ne=i("pwR+");function Ae(t,e){if(1&t&&(N.Sb(0,"span"),N.Sb(1,"span",27),N.Sb(2,"span",28),N.Kc(3),N.Rb(),N.Kc(4),N.Rb(),N.Rb()),2&t){const t=e.$implicit;N.zb(3),N.Mc("",null==t?null:t.name,":"),N.zb(1),N.Mc(" ",null==t?null:t.amountTotal,"G")}}function Oe(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"Line")," ")}function Pe(t,e){if(1&t){const t=N.Tb();N.Sb(0,"ejs-dropdownlist",29),N.cc("change",function(e){return N.Bc(t),N.gc().onChangeLine(e)}),N.Rb()}if(2&t){const t=N.gc();N.mc("dataSource",t.lineNames)("value",t.lineItem)}}function Ee(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"Remaining Amount")," ")}function Le(t,e){if(1&t&&N.Kc(0),2&t){const t=e.$implicit;N.Mc(" ",null===t.remainingAmount?"N/A":t.remainingAmount," ")}}function _e(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"Dispatch Amount")," ")}function Fe(t,e){1&t&&N.Kc(0),2&t&&N.Mc(" ",e.$implicit.amount," ")}function je(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"Time")," ")}function Ke(t,e){1&t&&(N.Kc(0),N.hc(1,"date")),2&t&&N.Mc(" ",N.jc(1,1,e.$implicit.createdTime,"HH:mm")," ")}function $e(t,e){1&t&&(N.Kc(0),N.hc(1,"date")),2&t&&N.Mc(" ",N.jc(1,1,e.$implicit.createdTime,"HH:mm")," ")}let ze=(()=>{class t{constructor(t,e,i,n){this.activeModal=t,this.alertify=e,this.datePipe=i,this.bottomFactoryService=n,this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"},this.toolbarOptions=["Add","Edit","Cancel","Search"],this.option="Default",this.lines=[]}ngOnInit(){this.lineNames=this.data.lineNames,this.objForGet={buildingID:this.data.buildingID,glueNameID:this.data.glueNameID,mixingInfoID:this.data.mixingInfoID},this.getAllDispatch()}toolbarClick(t){this.isEditing=!1,this.lineItem=""}recordDoubleClick(t){this.isEditing=!0}actionBegin(t){if("beginEdit"===t.requestType&&(this.lineItem=t.rowData.building.name),"save"===t.requestType&&"edit"===t.action){const e=t.data;if(e.amount-e.remainingAmount<0)return this.alertify.warning("Vui l\xf2ng nh\u1eadp KL c\xf2n l\u1ea1i nh\u1ecf h\u01a1n ho\u1eb7c b\u1eb1ng kh\u1ed1i l\u01b0\u1ee3ng!"),void(t.cancel=!0);if(e.amount-e.remainingAmount==0)return this.alertify.warning("Vui l\xf2ng nh\u1eadp s\u1ed1 l\u01b0\u1ee3ng c\xf2n l\u1ea1i b\u1eb1ng 0.!"),void(t.cancel=!0);this.bottomFactoryService.updateDispatch({iD:e.id,remaningAmount:e.remainingAmount}).subscribe(()=>{this.alertify.success("Th\xe0nh C\xf4ng!"),this.getAllDispatch()},t=>{this.alertify.warning("L\u1ed7i m\xe1y ch\u1ee7! Vui l\xf2ng li\xean h\u1ec7 Lab-Team!")})}}onChangeLine(t){console.log("onchangeline",t.itemData.value),this.obj={mixingInfoID:this.data.mixingInfoID,lineName:t.itemData.value,glueNameID:this.data.glueNameID,option:this.option,buildingID:this.data.buildingID,estimatedStartTime:this.data.estimatedStartTime,estimatedFinishTime:this.data.estimatedFinishTime},this.addDispatch(),console.log("onchangeline",this.obj)}onChangeReset(t){console.log("onChangeReset",this.option)}onChangeDefault(t){console.log("onChangeDefault",this.option)}getAllDispatch(){this.bottomFactoryService.getAllDispatch(this.objForGet).subscribe(t=>{this.dispatchData=t.dispatches,this.lines=t.lines},t=>{})}addDispatch(){this.bottomFactoryService.addDispatch(this.obj).subscribe(t=>{this.option="Default",this.lineItem="",this.getAllDispatch()},t=>{this.alertify.warning(t),this.getAllDispatch()})}}return t.\u0275fac=function(e){return new(e||t)(N.Mb(l.a),N.Mb(A.a),N.Mb(n.d),N.Mb(Ne.a))},t.\u0275cmp=N.Gb({type:t,selectors:[["app-dispatchEVAUV"]],inputs:{data:"data"},features:[N.yb([n.d])],decls:53,vars:13,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","p-2"],[1,"row","pt-2"],[1,"col-md-12"],[1,"my-2"],[1,"d-flex","justify-content-start","align-items-center",2,"height","50px","box-shadow","0 4px 10px 0 rgb(0 0 0 / 20%), 0 4px 20px 0 rgb(0 0 0 / 19%)"],[1,"pretty","p-default","p-smooth","p-bigger","ml-2"],["type","radio","value","Default","name","radio",3,"ngModel","ngModelChange","change"],[1,"state","p-success"],[1,"pretty","p-default","p-smooth","p-bigger"],["type","radio","value","Reset","name","radio",3,"ngModel","ngModelChange","change"],[4,"ngFor","ngForOf"],["allowResizing","true","gridLines","Both",3,"dataSource","editSettings","toolbar","actionBegin","recordDoubleClick","toolbarClick"],["grid",""],["field","building.name","headerText","Name","width","100","textAlign","Center"],["headerTemplate",""],["editTemplate",""],["field","remainingAmount","headerText","Remaining Amount","width","200","textAlign","Center"],["template",""],["field","amount","headerText","Dispatch Amount","width","200","textAlign","Center"],["field","createdTime","headerText","Time","width","100","textAlign","Center"],[1,"modal-footer","justify-content-center","d-flex"],["type","button",1,"btn","btn-warning",3,"click"],[1,"fa","fa-save"],[1,"mx-2"],[1,"font-weight-bold"],["id","reportOption",3,"dataSource","value","change"]],template:function(t,e){1&t&&(N.Sb(0,"div",0),N.Sb(1,"h4",1),N.Kc(2),N.hc(3,"translate"),N.Rb(),N.Sb(4,"button",2),N.cc("click",function(){return e.activeModal.dismiss("Cross click")}),N.Sb(5,"span",3),N.Kc(6,"\xd7"),N.Rb(),N.Rb(),N.Rb(),N.Sb(7,"div",4),N.Sb(8,"div",5),N.Sb(9,"div",6),N.Sb(10,"div",7),N.Sb(11,"div",8),N.Sb(12,"div",9),N.Sb(13,"input",10),N.cc("ngModelChange",function(t){return e.option=t})("change",function(t){return e.onChangeDefault(t)}),N.Rb(),N.Sb(14,"div",11),N.Sb(15,"label"),N.Kc(16,"Default"),N.Rb(),N.Rb(),N.Rb(),N.Sb(17,"div",12),N.Sb(18,"input",13),N.cc("ngModelChange",function(t){return e.option=t})("change",function(t){return e.onChangeReset(t)}),N.Rb(),N.Sb(19,"div",11),N.Sb(20,"label"),N.Kc(21,"Reset"),N.Rb(),N.Rb(),N.Rb(),N.Ic(22,Ae,5,2,"span",14),N.Rb(),N.Rb(),N.Sb(23,"ejs-grid",15,16),N.cc("actionBegin",function(t){return e.actionBegin(t)})("recordDoubleClick",function(t){return e.recordDoubleClick(t)})("toolbarClick",function(t){return e.toolbarClick(t)}),N.Sb(25,"e-columns"),N.Sb(26,"e-column",17),N.Ic(27,Oe,2,3,"ng-template",null,18,N.Jc),N.Ic(29,Pe,1,2,"ng-template",null,19,N.Jc),N.Rb(),N.Sb(31,"e-column",20),N.Ic(32,Ee,2,3,"ng-template",null,18,N.Jc),N.Ic(34,Le,1,1,"ng-template",null,21,N.Jc),N.Rb(),N.Sb(36,"e-column",22),N.Ic(37,_e,2,3,"ng-template",null,18,N.Jc),N.Ic(39,Fe,1,1,"ng-template",null,19,N.Jc),N.Rb(),N.Sb(41,"e-column",23),N.Ic(42,je,2,3,"ng-template",null,18,N.Jc),N.Ic(44,Ke,2,4,"ng-template",null,21,N.Jc),N.Ic(46,$e,2,4,"ng-template",null,19,N.Jc),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Sb(48,"div",24),N.Sb(49,"button",25),N.cc("click",function(){return e.activeModal.close("Close click")}),N.Nb(50,"i",26),N.Kc(51),N.hc(52,"translate"),N.Rb(),N.Rb()),2&t&&(N.zb(2),N.Nc("",N.ic(3,9,"Dispatch")," ",e.data.glueName," "),N.zb(11),N.mc("ngModel",e.option),N.zb(5),N.mc("ngModel",e.option),N.zb(4),N.mc("ngForOf",e.lines),N.zb(1),N.mc("dataSource",e.dispatchData)("editSettings",e.editSettings)("toolbar",e.toolbarOptions),N.zb(28),N.Mc(" ",N.ic(52,11,"SAVE"),""))},directives:[o.l,o.b,o.g,o.j,n.m,v.j,d.d,C.d,C.b,v.e,v.b,d.c,C.c,C.a,v.d,v.a,c.c],pipes:[p.c,n.d],styles:[""]}),t})();var He=i("kK9S"),Ue=i("6HpG"),Je=function(t){return t[t.EVA_UV=1]="EVA_UV",t[t.ATTACHING=2]="ATTACHING",t[t.RUBBER=3]="RUBBER",t}({}),Ge=i("1AaR"),Qe=i("0go6"),qe=i("KOup");function Ve(t,e){if(1&t){const t=N.Tb();N.Sb(0,"input",14),N.cc("ngModelChange",function(e){return N.Bc(t),N.gc(2).qrCode=e})("ngModelChange",function(e){return N.Bc(t),N.gc(2).onNgModelChangeScanQRCode(e)}),N.Rb()}if(2&t){const t=N.gc(2);N.mc("ngModel",t.qrCode)}}function We(t,e){if(1&t&&(N.Sb(0,"div",10),N.Nb(1,"div",11),N.Sb(2,"div",12),N.Ic(3,Ve,1,1,"input",13),N.Rb(),N.Nb(4,"div",11),N.Rb()),2&t){const t=N.gc();N.zb(3),N.mc("ngIf",t.isShow)}}function Ye(t,e){if(1&t&&(N.Sb(0,"div",18),N.Sb(1,"div",19),N.Nb(2,"qrcode",20),N.Rb(),N.Sb(3,"div"),N.Sb(4,"label"),N.Kc(5,"Name:"),N.Rb(),N.Kc(6),N.Rb(),N.Sb(7,"div"),N.Sb(8,"label"),N.Kc(9,"QrCode:"),N.Rb(),N.Kc(10),N.Rb(),N.Sb(11,"div"),N.Sb(12,"label"),N.Kc(13,"Batch:"),N.Rb(),N.Kc(14),N.Rb(),N.Sb(15,"div"),N.Sb(16,"label"),N.Kc(17,"MFG:"),N.Rb(),N.Kc(18),N.hc(19,"date"),N.Rb(),N.Sb(20,"div"),N.Sb(21,"label"),N.Kc(22,"EXP:"),N.Rb(),N.Kc(23),N.hc(24,"date"),N.Rb(),N.Rb()),2&t){const t=N.gc(2);N.zb(2),N.mc("qrdata",null==t.data?null:t.data.code)("allowEmptyString",!0)("margin",1)("elementType","svg")("width",100)("errorCorrectionLevel","H"),N.zb(4),N.Mc(" ",null==t.data?null:t.data.glueName,""),N.zb(4),N.Mc(" ",null==t.data?null:t.data.code,""),N.zb(4),N.Mc(" ",null==t.chemicalA?null:t.chemicalA.batch,""),N.zb(4),N.Mc(" ",N.jc(19,11,null==t.data?null:t.data.createdTime,"yyyyMMdd HH:mm"),""),N.zb(5),N.Mc(" ",N.jc(24,14,null==t.data?null:t.data.expiredTime,"yyyyMMdd HH:mm"),"")}}function Xe(t,e){if(1&t&&(N.Sb(0,"div",15),N.Nb(1,"div",16),N.Ic(2,Ye,25,17,"div",17),N.Nb(3,"div",16),N.Rb()),2&t){const t=N.gc();N.zb(2),N.mc("ngIf",!t.isShow)}}function Ze(t,e){if(1&t&&(N.Sb(0,"div",15),N.Nb(1,"div",16),N.Sb(2,"div",18),N.Sb(3,"div",19),N.Nb(4,"qrcode",20),N.Rb(),N.Sb(5,"div"),N.Sb(6,"label"),N.Kc(7,"Name:"),N.Rb(),N.Kc(8),N.Rb(),N.Sb(9,"div"),N.Sb(10,"label"),N.Kc(11,"QrCode:"),N.Rb(),N.Kc(12),N.Rb(),N.Sb(13,"div"),N.Sb(14,"label"),N.Kc(15,"Batch:"),N.Rb(),N.Kc(16),N.Rb(),N.Sb(17,"div"),N.Sb(18,"label"),N.Kc(19,"MFG:"),N.Rb(),N.Kc(20),N.hc(21,"date"),N.Rb(),N.Sb(22,"div"),N.Sb(23,"label"),N.Kc(24,"EXP:"),N.Rb(),N.Kc(25),N.hc(26,"date"),N.Rb(),N.Rb(),N.Nb(27,"div",16),N.Rb()),2&t){const t=N.gc();N.zb(4),N.mc("qrdata",null==t.data?null:t.data.code)("allowEmptyString",!0)("margin",1)("elementType","svg")("width",100)("errorCorrectionLevel","H"),N.zb(4),N.Mc(" ",null==t.data?null:t.data.glueName,""),N.zb(4),N.Mc(" ",null==t.data?null:t.data.code,""),N.zb(4),N.Mc(" ",null==t.chemicalA?null:t.chemicalA.batch,""),N.zb(4),N.Mc(" ",N.jc(21,11,null==t.data?null:t.data.createdTime,"yyyyMMdd HH:mm"),""),N.zb(5),N.Mc(" ",N.jc(26,14,null==t.data?null:t.data.expiredTime,"yyyyMMdd HH:mm"),"")}}class ti{constructor(t,e,i,n,o,a,s){this.activeModal=t,this.todolistService=e,this.alertify=i,this.datePipe=n,this.ingredientService=o,this.abnormalService=a,this.makeGlueService=s,this.subject=new M.a,this.subscription=[],this.displayTextMethod={visibility:!1}}ngOnInit(){var t;const e=JSON.parse(localStorage.getItem("building")),i=JSON.parse(localStorage.getItem("level")),n=JSON.parse(localStorage.getItem("user")).User;this.role=i,this.user=n,this.building=e,this.checkQRCode(),this.isShow=0===this.value.mixingInfoID&&!this.value.glueName.includes(" + "),this.isShowQRCode=0===this.value.mixingInfoID&&!this.value.glueName.includes(" + "),this.chemicalA=null===(t=this.data)||void 0===t?void 0:t.mixingInfoDetails.filter(t=>"A"===t.position)[0]}ngOnDestroy(){this.subscription.forEach(t=>t.unsubscribe())}checkQRCode(){this.subscription.push(this.subject.pipe(Object(k.a)(500)).subscribe(t=>Object(R.a)(this,void 0,void 0,function*(){const e=yield this.validateQRCode(t);!1!==e.status&&this.makeGlueService.add({glueName:this.value.glueName,glueID:this.value.glueID,buildingID:this.building.id,mixBy:this.user.ID,estimatedStartTime:this.value.estimatedStartTime,estimatedFinishTime:this.value.estimatedFinishTime,details:[{amount:this.value.standardConsumption,ingredientID:e.ingredient.id,batch:t[1],mixingInfoID:0,position:"A"}]}).subscribe(t=>{this.alertify.success("Success!"),this.isShow=!1,this.data=t},t=>this.alertify.error(t))})))}validateQRCode(t){return Object(R.a)(this,void 0,void 0,function*(){const e=t.QRCode.split("-")||[],i=t.QRCode.match(/(\d+)-(\w+)-/g),n=t.QRCode.replace(i[0],"");if((i[0]+n).length!==t.QRCode.length)return this.alertify.warning("The QR Code is invalid!<br> M\xe3 QR kh\xf4ng h\u1ee3p l\u1ec7! Vui l\xf2ng th\u1eed l\u1ea1i m\xe3 kh\xe1c.",!0),{status:!1,ingredient:null};this.qrCode=n;const o=yield this.scanQRCode();return o.name!==this.value.glueName?(this.alertify.warning(`Please you should look for the chemical name "${this.value.glueName}"<br> Vui l\xf2ng qu\xe9t \u0111\xfang h\xf3a ch\u1ea5t "${this.value.glueName}"!`,!0),this.qrCode="",{status:!1,ingredient:null}):!0===(yield this.hasLock(o.name,e[1]))?(this.alertify.error("This chemical has been locked! <br> H\xf3a ch\u1ea5t n\xe0y \u0111\xe3 b\u1ecb kh\xf3a!",!0),this.qrCode="",{status:!1,ingredient:null}):{status:!0,ingredient:o}})}scanQRCode(){return this.ingredientService.scanQRCode(this.qrCode).toPromise()}hasLock(t,e){let i=this.building.name;return 1!==this.role.id&&2!==this.role.id||(i="E"),new Promise((n,o)=>{this.abnormalService.hasLock(t,i,e).subscribe(t=>{n(t)},t=>{o(!1)})})}onNgModelChangeScanQRCode(t){return Object(R.a)(this,void 0,void 0,function*(){this.subject.next({QRCode:t,ingredient:null})})}printData(){let t="";const e=document.getElementById("qrcode"),i="0001-01-01T00:00:00"===this.data.expiredTime?"N/A":this.datePipe.transform(new Date(this.data.expiredTime),"MMdd HH:mm");t+=`\n       <div class='content'>\n        <div class='qrcode'>\n         ${e.innerHTML}\n         </div>\n          <div class='info'>\n          <ul>\n              <li class='subInfoTo'>${this.data.glueName}</li>\n              <li class='subInfoNho' >MFG: ${this.datePipe.transform(new Date(this.data.createdTime),"MMdd HH:mm")}</li>\n              <li class='subInfoNho' >EXP: ${i}</li>\n          </ul>\n         </div>\n      </div>\n      `,this.configurePrint(t)}configurePrint(t){const e=window.open("","_blank","left=0,top=0,width=1000,height=900,toolbar=0,scrollbars=0,status=0");e.document.write(`\n    <html>\n      <head>\n      </head>\n      <style>\n        * {\n          box-sizing: border-box;\n          -moz-box-sizing: border-box;\n        }\n\n        .content {\n          page-break-after: always;\n          clear: both;\n        }\n\n        .content .qrcode {\n          float:left;\n          width: 110px;\n          margin-top: 10px;\n          padding: 0;\n          margin-left: 0px;\n        }\n\n        .content .info {\n          float:left;\n          list-style: none;\n          width: 190px;\n        }\n        .content .info ul {\n          float:left;\n          list-style: none;\n          padding: 0px;\n          margin: 0px;\n          margin-top: 20px;\n          font-weight: bold;\n          word-wrap: break-word;\n        }\n        .content .info ul .subInfoTo  {\n          font-size: 22px;\n          font-weight: bold;\n          width: 180px;\n          word-wrap: break-word;\n        }\n        .content .info ul .subInfoNho  {\n          font-size: 15px;\n          width: 180px;\n          word-wrap: break-word;\n        }\n\n        @page {\n          size: 2.65 x 1.20 inch;\n          page-break-after: always;\n          margin: 0;\n        }\n        @media print {\n          html, body {\n            width: 90mm;\n          }\n        }\n      </style>\n      <body onload="window.print(); window.close()">\n        ${t}\n      </body>\n    </html>\n    `),e.document.close(),this.finish()}finish(){this.todolistService.printGlue(this.data.id).subscribe(t=>{this.alertify.success("success",!0),this.activeModal.close(),this.todolistService.setValue(!1)})}}ti.\u0275fac=function(t){return new(t||ti)(N.Mb(l.a),N.Mb(bt.a),N.Mb(A.a),N.Mb(n.d),N.Mb(P.a),N.Mb(Ge.a),N.Mb(Qe.a))},ti.\u0275cmp=N.Gb({type:ti,selectors:[["app-print-glue"]],inputs:{data:"data",value:"value"},decls:16,vars:4,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","p-0"],["class","row py-2",4,"ngIf"],["class","row",4,"ngIf"],[1,"modal-footer","justify-content-between"],["type","button",1,"btn","btn-outline-dark",3,"click"],[1,"fa","fa-print"],[1,"row","py-2"],[1,"col-md-2"],[1,"col-md-8"],["class","form-control form-control-lg rounded-pill","autoselect","","placeholder","Scan QR Code","type","text",3,"ngModel","ngModelChange",4,"ngIf"],["autoselect","","placeholder","Scan QR Code","type","text",1,"form-control","form-control-lg","rounded-pill",3,"ngModel","ngModelChange"],[1,"row"],[1,"col-md-4"],["class","col-md-4 text-left",4,"ngIf"],[1,"col-md-4","text-left"],[1,"center"],["id","qrcode",3,"qrdata","allowEmptyString","margin","elementType","width","errorCorrectionLevel"]],template:function(t,e){1&t&&(N.Sb(0,"div",0),N.Sb(1,"h4",1),N.Kc(2),N.Rb(),N.Sb(3,"button",2),N.cc("click",function(){return e.activeModal.dismiss("Cross click")}),N.Sb(4,"span",3),N.Kc(5,"\xd7"),N.Rb(),N.Rb(),N.Rb(),N.Sb(6,"div",4),N.Ic(7,We,5,1,"div",5),N.Ic(8,Xe,4,1,"div",6),N.Ic(9,Ze,28,17,"div",6),N.Rb(),N.Sb(10,"div",7),N.Sb(11,"button",8),N.cc("click",function(){return e.activeModal.close("Close click")}),N.Kc(12,"Close"),N.Rb(),N.Sb(13,"button",8),N.cc("click",function(){return e.printData()}),N.Nb(14,"i",9),N.Kc(15," Print"),N.Rb(),N.Rb()),2&t&&(N.zb(2),N.Mc("Print glue name: ",null==e.value?null:e.value.glueName,""),N.zb(5),N.mc("ngIf",e.isShowQRCode),N.zb(1),N.mc("ngIf",e.isShowQRCode),N.zb(1),N.mc("ngIf",!1===e.isShowQRCode))},directives:[n.n,o.b,qe.a,o.g,o.j,I.a],pipes:[n.d],styles:[""]});class ei{constructor(t){this.http=t,this.baseUrl=ct.a.apiUrlEC}getAllSetting(){return this.http.get(this.baseUrl+"Setting/GetAllSetting",{})}getAllGlueType(){return this.http.get(this.baseUrl+"Setting/GetAllGlueType",{})}getSettingByBuilding(t){return this.http.get(this.baseUrl+"Setting/GetSettingByBuilding/"+t,{})}getMachineByBuilding(t){return this.http.get(this.baseUrl+"Setting/GetMachineByBuilding/"+t,{})}deleteSetting(t){return this.http.delete(this.baseUrl+"Setting/DeleteSetting/"+t,{})}deleteMachine(t){return this.http.delete(this.baseUrl+"Setting/DeleteMachine/"+t,{})}AddStir(t){return this.http.post(this.baseUrl+"Setting/Create",t)}addSetting(t){return this.http.post(this.baseUrl+"Setting/CreateSetting",t)}addMachine(t){return this.http.post(this.baseUrl+"Setting/CreateMachine",t)}updateStir(t){return this.http.put(this.baseUrl+"Setting/Update",t)}updateSetting(t){return this.http.put(this.baseUrl+"Setting/UpdateSetting",t)}updateMachine(t){return this.http.put(this.baseUrl+"Setting/UpdateMachine",t)}}ei.\u0275fac=function(t){return new(t||ei)(N.Zb(b.b))},ei.\u0275prov=N.Ib({token:ei,factory:ei.\u0275fac,providedIn:"root"});class ii{constructor(t){this.http=t,this.baseUrl=ct.a.apiUrlEC,this.ModalDispatchSource=new st.a(0),this.currentModalDispatch=this.ModalDispatchSource.asObservable()}add(t){return this.http.post(this.baseUrl+"Dispatch/Add",t)}update(t){return this.http.post(this.baseUrl+"Dispatch/Update",t)}updateAmount(t,e){return this.http.put(this.baseUrl+`Dispatch/updateAmount/${t}/${e}`,{})}addDispatch(t){return this.http.post(this.baseUrl+"Dispatch/Dispatch",t)}updateStartDispatchingTime(t){return this.http.put(this.baseUrl+"Dispatch/UpdateStartDispatchingTime/"+t,{})}}ii.\u0275fac=function(t){return new(t||ii)(N.Zb(b.b))},ii.\u0275prov=N.Ib({token:ii,factory:ii.\u0275fac,providedIn:"root"});class ni{constructor(t){this.http=t,this.baseUrl=ct.a.apiUrlEC,this.ModalPlanSource=new st.a(0),this.currentModalPlan=this.ModalPlanSource.asObservable()}TroubleShootingSearch(t,e){return this.http.get(this.baseUrl+`Plan/TroubleShootingSearch/${t}/${e}`)}GetBatchByIngredientID(t){return this.http.get(this.baseUrl+"Plan/GetBatchByIngredientID/"+t,{})}getBPFCByGlue(t){return this.http.post(this.baseUrl+"Plan/GetBPFCByGlue/",{glue:t})}getAll(){return this.http.get(this.baseUrl+"Plan/GetAll",{})}search(t,e,i){return this.http.get(`${this.baseUrl}Plan/Search/${t}/${e}/${i}`,{})}getAllPlanByDefaultRange(){return this.http.get(this.baseUrl+"Plan/GetAllPlanByDefaultRange",{})}getAllModalName(){return this.http.get(this.baseUrl+"ModelName/GetAll",{})}getAllLine(){return this.http.get(this.baseUrl+"Line/GetAll",{})}getAllGlue(){return this.http.get(this.baseUrl+"Glue/GetAll",{})}create(t){return this.http.post(this.baseUrl+"Plan/Create",t)}update(t){return this.http.put(this.baseUrl+"Plan/Update",t)}delete(t){return this.http.delete(this.baseUrl+"Plan/Delete/"+t)}achievementRate(t){return this.http.get(this.baseUrl+"Plan/AchievementRate/"+t)}deleteRange(t){return this.http.post(this.baseUrl+"Plan/DeleteRange",t)}getLines(t){return this.http.get(this.baseUrl+"Plan/getLines/"+t,{})}getModelNames(){return this.http.get(this.baseUrl+"Plan/GetModelNames",{})}getGlueByBuilding(t){return this.http.get(this.baseUrl+"Plan/GetGlueByBuilding/"+t)}getGlueByBuildingModelName(t,e){return this.http.get(`${this.baseUrl}Plan/getGlueByBuildingModelName/${t}/${e}`)}summary(t){return this.http.get(this.baseUrl+"Plan/summary/"+t)}consumptionByLineCase1(t,e,i){return this.http.post(this.baseUrl+"Plan/ConsumptionByLineCase1",{buildingID:t,startDate:e,endDate:i})}consumptionByLineCase2(t,e,i){return this.http.post(this.baseUrl+"Plan/ConsumptionByLineCase2",{buildingID:t,startDate:e,endDate:i})}reportConsumptionCase1(t,e,i){return this.http.post(this.baseUrl+"Plan/ReportConsumptionCase1",{buildingID:t,startDate:e,endDate:i},{responseType:"blob"})}reportConsumptionCase2(t,e,i){return this.http.post(this.baseUrl+"Plan/ReportConsumptionCase2",{buildingID:t,startDate:e,endDate:i},{responseType:"blob"})}dispatchGlue(t){return this.http.post(this.baseUrl+"Plan/DispatchGlue",t)}clonePlan(t){return this.http.post(this.baseUrl+"Plan/ClonePlan",t)}editDelivered(t,e){return this.http.get(`${this.baseUrl}Plan/EditDelivered/${t}/${e}`,{})}editQuantity(t,e){return this.http.get(`${this.baseUrl}Plan/EditQuantity/${t}/${e}`,{})}deleteDelivered(t){return this.http.delete(`${this.baseUrl}Plan/DeleteDelivered/${t}`,{})}getReport(t){return this.http.post(this.baseUrl+"Plan/GetReport",t,{responseType:"blob"})}getReportByBuilding(t){return this.http.post(this.baseUrl+"Plan/GetReportByBuilding",t,{responseType:"blob"})}getNewReportByBuilding(t){return this.http.post(this.baseUrl+"Plan/getNewReportByBuilding",t,{responseType:"blob"})}report(t){return this.http.get(t,{responseType:"arraybuffer"})}print(t){return this.http.post(this.baseUrl+"Plan/Print",t)}finish(t){return this.http.put(this.baseUrl+"Plan/Finish/"+t,{})}getStartTimeFromPeriod(t){return this.http.get(this.baseUrl+"Plan/GetStartTimeFromPeriod/"+t)}changeBPFC(t,e){return this.http.get(`${this.baseUrl}Plan/ChangeBPFC/${t}/${e}`)}online(t){return this.http.get(`${this.baseUrl}Plan/Online/${t}`)}offline(t){return this.http.get(`${this.baseUrl}Plan/Offline/${t}`)}exportExcel(t){return this.http.post(this.baseUrl+"Plan/ExportExcel",t,{responseType:"blob"})}}ni.\u0275fac=function(t){return new(t||ni)(N.Zb(b.b))},ni.\u0275prov=N.Ib({token:ni,factory:ni.\u0275fac,providedIn:"root"}),new b.e({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")});class oi{constructor(t){this.http=t,this.baseUrl=ct.a.apiUrlEC,this.data=new st.a(null)}addition(t,e,i,n){return this.http.get(`${this.baseUrl}ToDoList/addition/${t}/${e}/${i}/${n}`)}additionDispatch(t){return this.http.get(`${this.baseUrl}ToDoList/additionDispatch/${t}`)}setValue(t){this.data.next(t)}getValue(){return this.data.asObservable()}cancel(t){return this.http.post(this.baseUrl+"ToDoList/Cancel",t)}cancelRange(t){return this.http.post(this.baseUrl+"ToDoList/cancelRange",t)}done(t){return this.http.get(this.baseUrl+"ToDoList/Done/"+t,{})}todo(t){return this.http.get(this.baseUrl+"ToDoList/ToDo/"+t,{})}todoAddition(t){return this.http.get(this.baseUrl+"ToDoList/ToDoAddition/"+t,{})}dispatchAddition(t){return this.http.get(this.baseUrl+"ToDoList/dispatchAddition/"+t,{})}dispatchList(t){return this.http.get(this.baseUrl+"ToDoList/DispatchList/"+t,{})}delay(t){return this.http.get(this.baseUrl+"ToDoList/Delay/"+t,{})}printGlue(t){return this.http.get(this.baseUrl+"ToDoList/printGlue/"+t,{})}findPrintGlue(t){return this.http.get(this.baseUrl+"ToDoList/FindPrintGlue/"+t,{})}dispatch(t){return this.http.post(this.baseUrl+"ToDoList/Dispatch",t)}updateStartStirTimeByMixingInfoID(t){return this.http.put(this.baseUrl+"ToDoList/updateStartStirTimeByMixingInfoID/"+t,{})}updateFinishStirTimeByMixingInfoID(t){return this.http.put(this.baseUrl+"ToDoList/updateFinishStirTimeByMixingInfoID/"+t,{})}generateToDoList(t){return this.http.post(this.baseUrl+"ToDoList/GenerateToDoList",t)}generateDispatchList(t){return this.http.post(this.baseUrl+"ToDoList/GenerateDispatchList",t)}exportExcel(t){return this.http.get(`${this.baseUrl}ToDoList/ExportExcel/${t}`,{responseType:"blob"})}exportExcel2(t){return this.http.get(`${this.baseUrl}ToDoList/GetNewReport/${t}`,{responseType:"blob"})}getMixingDetail(t){return this.http.post(this.baseUrl+"ToDoList/GetMixingDetail",{glueName:t})}finishDispatch(t){return this.http.put(this.baseUrl+"ToDoList/FinishDispatch",t)}getDispatchDetail(t,e,i,n){return this.http.get(`${this.baseUrl}ToDoList/GetDispatchDetail/${t}/${e}/${i}/${n}`)}getMixingInfoHistory(t,e,i,n){return this.http.get(`${this.baseUrl}ToDoList/GetMixingInfoHistory/${t}/${e}/${i}/${n}`)}updateDispatchDetail(t){return this.http.put(this.baseUrl+"ToDoList/UpdateDispatchDetail",t)}getDispatchListDetail(t,e,i){return this.http.get(`${this.baseUrl}ToDoList/GetDispatchListDetail/${t}/${e}/${i}`)}printGlueDispatchList(t,e,i,n){return this.http.get(`${this.baseUrl}ToDoList/printGlueDispatchList/${t}/${e}/${i}/${n}`,{})}updateMixingInfoDispatchList(t,e,i,n){return this.http.get(`${this.baseUrl}ToDoList/UpdateMixingInfoDispatchList/${t}/${e}/${i}/${n}`,{})}addOvertime(t){return this.http.post(this.baseUrl+"ToDoList/AddOvertime",t)}removeOvertime(t){return this.http.post(this.baseUrl+"ToDoList/RemoveOvertime",t)}dispatchListDelay(t){return this.http.get(this.baseUrl+"ToDoList/DispatchListDelay/"+t,{})}MixedHistory(t){return this.http.get(`${this.baseUrl}ToDoList/MixedHistory/${t}`,{})}}oi.\u0275fac=function(t){return new(t||oi)(N.Zb(b.b))},oi.\u0275prov=N.Ib({token:oi,factory:oi.\u0275fac,providedIn:"root"});class ai{constructor(){this.$swal=Swal,this.Toast=Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,onOpen:t=>{t.addEventListener("mouseenter",Swal.stopTimer),t.addEventListener("mouseleave",Swal.resumeTimer)}})}confirm(t,e,i){Swal.fire({title:t,html:e,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then(t=>{t.value?i():t.dismiss===Swal.DismissReason.cancel&&Swal.fire("Cancelled","Your imaginary file is safe :)","error")})}confirm2(t,e,i,n){Swal.fire({title:t,html:e,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then(t=>{t.value?i():t.dismiss===Swal.DismissReason.cancel&&n()})}valid(t,e){return new Promise((i,n)=>{Swal.fire({title:t,text:e,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then(t=>{t.value?i(!0):t.dismiss===Swal.DismissReason.cancel&&n(!1)})})}validation(t,e){Swal.fire(t,e,"warning")}success(t,e){e?Swal.fire("Successfully!",t,"success"):this.Toast.fire({icon:"success",title:t})}error(t,e){e?Swal.fire("Error!",t,"error"):this.Toast.fire({icon:"error",title:t})}warning(t,e){e?Swal.fire("Warning!",t,"warning"):this.Toast.fire({icon:"warning",title:t})}message(t,e){e?Swal.fire("Info!",t,"info"):this.Toast.fire({icon:"info",title:t})}}ai.\u0275fac=function(t){return new(t||ai)},ai.\u0275prov=N.Ib({token:ai,factory:ai.\u0275fac,providedIn:"root"});const si=["dispatchGrid"];function ci(t,e){1&t&&(N.Sb(0,"span"),N.Kc(1),N.hc(2,"translate"),N.Rb()),2&t&&(N.zb(1),N.Lc(N.ic(2,1,"Line")))}function li(t,e){1&t&&N.Kc(0),2&t&&N.Mc(" ",e.$implicit.lineName," ")}function ri(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"Amount")," (g) ")}function di(t,e){1&t&&N.Kc(0),2&t&&N.Mc(" ",e.$implicit.amount," ")}function hi(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"Time")," ")}function ui(t,e){if(1&t&&(N.Kc(0),N.hc(1,"date")),2&t){const t=e.$implicit;N.Mc(" ",null===t.deliveryTime?"-":N.jc(1,1,t.deliveryTime,"HH:mm")," ")}}function gi(t,e){if(1&t&&(N.Kc(0),N.hc(1,"date")),2&t){const t=e.$implicit;N.Mc(" ",null===t.deliveryTime?"-":N.jc(1,1,t.deliveryTime,"HH:mm")," ")}}class bi{constructor(t,e,i,n,o,a){this.activeModal=t,this.settingService=e,this.dispatchService=i,this.planService=n,this.todolistService=o,this.alertify=a,this.fieldsLine={text:"line",value:"line"},this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!1,allowAdding:!1,allowDeleting:!1,mode:"Normal"},this.sortSettings={columns:[{field:"lineName",direction:"Ascending"}]}}ngOnInit(){this.isSingleGlue=!this.value.glueName.includes(" + "),this.toolbarOptions=["Edit","Cancel","Search"],this.title=this.value.glueName;const t=JSON.parse(localStorage.getItem("building")),e=JSON.parse(localStorage.getItem("level")),i=JSON.parse(localStorage.getItem("user")).User;this.role=e,this.user=i,this.building=t,this.value.glueName.includes(" + ")?(this.unitTitle="Actual Consumption",this.mixedConsumption=+(1e3*this.value.mixedConsumption).toFixed(0)):(this.unitTitle="Standard Consumption",this.mixedConsumption=+(1e3*this.value.standardConsumption).toFixed(0)),this.loadData(),this.startDispatchingTime=new Date,this.isShow=0===this.value.mixingInfoID&&!this.value.glueName.includes(" + ")}actionBegin(t){if("save"===t.requestType&&"edit"===t.action){const e=t.data;this.updateDispatchDetail({id:e.id,amount:e.amount,glueNameID:this.value.glueNameID,estimatedStartTime:this.value.estimatedStartTime,estimatedFinishTime:this.value.estimatedFinishTime,startTimeOfPeriod:this.value.startTimeOfPeriod,finishTimeOfPeriod:this.value.finishTimeOfPeriod,lineID:e.lineID})}}actionComplete(t){}toolbarClick(t){}loadData(){this.todolistService.getDispatchDetail(this.value.buildingID,this.value.glueNameID,this.value.estimatedStartTime,this.value.estimatedFinishTime).subscribe(t=>{this.data=t})}finishDispatch(){const t=this.data.map(t=>t.lineID);this.todolistService.finishDispatch({glueNameID:this.value.glueNameID,estimatedStartTime:this.value.estimatedStartTime,estimatedFinishTime:this.value.estimatedFinishTime,lines:t}).subscribe(t=>{this.todolistService.setValue(!0),this.alertify.success("Success"),this.activeModal.dismiss()})}updateDispatchDetail(t){this.todolistService.updateDispatchDetail(t).subscribe(t=>{this.loadData(),this.alertify.success("Success")},t=>{this.alertify.warning(t)})}updateStartDispatchingTime(t){this.dispatchService.updateStartDispatchingTime(t).subscribe(t=>{},t=>{this.alertify.warning(t)})}save(){this.finishDispatch()}}function pi(t,e){if(1&t){const t=N.Tb();N.Sb(0,"div",17),N.Sb(1,"div",18),N.Sb(2,"ejs-dropdownlist",19),N.cc("filtering",function(e){return N.Bc(t),N.gc().onFiltering(e)})("select",function(e){return N.Bc(t),N.gc().onSelect(e)})("ngModelChange",function(e){return N.Bc(t),N.gc().lastGlue=e}),N.Rb(),N.Rb(),N.Rb()}if(2&t){const t=N.gc();N.zb(2),N.mc("dataSource",t.glues)("fields",t.fields)("allowFiltering",!0)("ngModel",t.lastGlue)}}function mi(t,e){1&t&&N.Nb(0,"div",23)}function fi(t,e){if(1&t){const t=N.Tb();N.Sb(0,"input",26),N.cc("ngModelChange",function(e){return N.Bc(t),N.gc(3).qrCode=e})("ngModelChange",function(e){return N.Bc(t),N.gc(3).onNgModelChangeScanQRCode(e)}),N.Rb()}if(2&t){const t=N.gc(3);N.mc("ngModel",t.qrCode)}}function Si(t,e){if(1&t&&(N.Sb(0,"div",24),N.Ic(1,fi,1,1,"input",25),N.Rb()),2&t){const t=N.gc(2);N.zb(1),N.mc("ngIf",1==t.isSingleGlue)}}function vi(t,e){1&t&&N.Nb(0,"div",23)}function yi(t,e){if(1&t&&(N.Sb(0,"div",20),N.Ic(1,mi,1,0,"div",21),N.Ic(2,Si,2,1,"div",22),N.Ic(3,vi,1,0,"div",21),N.Rb()),2&t){const t=N.gc();N.zb(1),N.mc("ngIf",1==t.isHideScanQRCode),N.zb(1),N.mc("ngIf",1==t.isHideScanQRCode),N.zb(1),N.mc("ngIf",1==t.isHideScanQRCode)}}function Di(t,e){if(1&t&&N.Nb(0,"qrcode",27),2&t){const t=N.gc();N.mc("qrdata",null==t.data?null:t.data.code)("allowEmptyString",!0)("margin",1)("elementType","svg")("width",100)("errorCorrectionLevel","H")}}bi.\u0275fac=function(t){return new(t||bi)(N.Mb(l.a),N.Mb(ei),N.Mb(ii),N.Mb(ni),N.Mb(oi),N.Mb(ai))},bi.\u0275cmp=N.Gb({type:bi,selectors:[["app-dispatch-done-list"]],viewQuery:function(t,e){if(1&t&&N.Qc(si,!0),2&t){let t;N.xc(t=N.dc())&&(e.dispatchGrid=t.first)}},inputs:{value:"value",buildingSetting:"buildingSetting"},decls:33,vars:14,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","p-0"],["allowResizing","true","gridLines","Both",3,"dataSource","allowSelection","allowSorting","toolbar","sortSettings","editSettings","actionBegin","actionComplete","toolbarClick"],["dispatchGrid",""],["field","lineName","headerText","Line","textAlign","Center","width","100"],["headerTemplate",""],["editTemplate",""],["field","amount","headerText","Amount","textAlign","Center","width","100"],["template",""],["field","time","headerText","Time","textAlign","Center","width","100"],[1,"modal-footer","justify-content-center","d-flex"],["type","button",1,"btn","btn-warning",3,"click"],[1,"fa","fa-save"]],template:function(t,e){1&t&&(N.Sb(0,"div",0),N.Sb(1,"h4",1),N.Kc(2),N.hc(3,"translate"),N.Rb(),N.Sb(4,"button",2),N.cc("click",function(){return e.activeModal.dismiss("Cross click")}),N.Sb(5,"span",3),N.Kc(6,"\xd7"),N.Rb(),N.Rb(),N.Rb(),N.Sb(7,"div",4),N.Sb(8,"ejs-grid",5,6),N.cc("actionBegin",function(t){return e.actionBegin(t)})("actionComplete",function(t){return e.actionComplete(t)})("toolbarClick",function(t){return e.toolbarClick(t)}),N.Sb(10,"e-columns"),N.Sb(11,"e-column",7),N.Ic(12,ci,3,3,"ng-template",null,8,N.Jc),N.Ic(14,li,1,1,"ng-template",null,9,N.Jc),N.Rb(),N.Sb(16,"e-column",10),N.Ic(17,ri,2,3,"ng-template",null,8,N.Jc),N.Ic(19,di,1,1,"ng-template",null,11,N.Jc),N.Rb(),N.Sb(21,"e-column",12),N.Ic(22,hi,2,3,"ng-template",null,8,N.Jc),N.Ic(24,ui,2,4,"ng-template",null,11,N.Jc),N.Ic(26,gi,2,4,"ng-template",null,9,N.Jc),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Sb(28,"div",13),N.Sb(29,"button",14),N.cc("click",function(){return e.activeModal.close("Close click")}),N.Nb(30,"i",15),N.Kc(31),N.hc(32,"translate"),N.Rb(),N.Rb()),2&t&&(N.zb(2),N.Nc("",N.ic(3,10,"Dispatch")," ",e.title," "),N.zb(6),N.mc("dataSource",e.data)("allowSelection",!0)("allowSorting",!0)("allowSorting",!0)("toolbar",e.toolbarOptions)("sortSettings",e.sortSettings)("editSettings",e.editSettings),N.zb(23),N.Mc(" ",N.ic(32,12,"SAVE"),""))},directives:[v.j,d.d,C.d,C.b,v.e,v.b,d.c,C.c,C.a,v.d,v.a],pipes:[p.c,n.d],styles:[".e-grid[_ngcontent-%COMP%]   td.e-active[_ngcontent-%COMP%]{background:#6597ce!important;color:#000}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center}input.warning-focus[_ngcontent-%COMP%]{-webkit-animation:warning-frames .5s infinite;animation:warning-frames .5s infinite;color:#000}input.lock[_ngcontent-%COMP%]{pointer-events:none}.new[_ngcontent-%COMP%]{background-color:green}input[_ngcontent-%COMP%]{text-align:center}@-webkit-keyframes warning-frames{0%{background-color:#fade40}to{background-color:#e7f70c}}@keyframes warning-frames{0%{background-color:#fade40}to{background-color:#e7f70c}}.e-grid[_ngcontent-%COMP%]   .e-altrow[_ngcontent-%COMP%]{background-color:#d6d8db}"]});class Ci{constructor(t,e,i,n,o,a,s){this.activeModal=t,this.todolistService=e,this.alertify=i,this.datePipe=n,this.ingredientService=o,this.abnormalService=a,this.makeGlueService=s,this.introJS=ht(),this.subject=new M.a,this.subscription=[],this.displayTextMethod={visibility:!1},this.fields={text:"glueName",value:"id"},this.onFiltering=t=>{let e=new B.h;e=""!==t.text?e.where("name","contains",t.text,!0):e,t.updateData(this.glues,e)}}ngOnInit(){this.isHideScanQRCode=!0;const t=JSON.parse(localStorage.getItem("building")),e=JSON.parse(localStorage.getItem("level")),i=JSON.parse(localStorage.getItem("user")).User;this.role=e,this.user=i,this.building=t,this.getMixingInfoHistory(),this.checkQRCode(),0!==this.value.mixingInfoID&&setTimeout(()=>{this.getMixingInfoByID()},300),this.isSingleGlue=!this.value.glueName.includes(" + ")}getMixingInfoByID(){this.todolistService.findPrintGlue(this.value.mixingInfoID).subscribe(t=>{var e;this.data=t,this.chemicalA=null===(e=this.data)||void 0===e?void 0:e.mixingInfoDetails.filter(t=>"A"===t.position)[0],this.isHideScanQRCode=!1})}ngOnDestroy(){this.subscription.forEach(t=>t.unsubscribe())}checkQRCode(){this.subscription.push(this.subject.pipe(Object(k.a)(300)).subscribe(t=>Object(R.a)(this,void 0,void 0,function*(){const e=yield this.validateQRCode(t);!1!==e.status&&this.makeGlueService.add({glueName:this.value.glueName,glueID:this.value.glueID,buildingID:this.building.id,mixBy:this.user.ID,estimatedStartTime:this.value.estimatedStartTime,estimatedFinishTime:this.value.estimatedFinishTime,details:[{amount:this.value.standardConsumption,ingredientID:e.ingredient.id,batch:t[1],mixingInfoID:0,position:"A"}]}).subscribe(t=>{this.alertify.success("Success!"),this.data=t,this.todolistService.updateMixingInfoDispatchList(this.data.id,this.value.glueNameID,this.value.estimatedStartTime,this.value.estimatedFinishTime).subscribe(()=>{this.todolistService.setValue(!1)})},t=>this.alertify.error(t))})))}validateQRCode(t){return Object(R.a)(this,void 0,void 0,function*(){const e=t.QRCode.split("-")||[],i=t.QRCode.match(/(\d+)-(\w+)-/g),n=t.QRCode.replace(i[0],"");if((i[0]+n).length!==t.QRCode.length)return this.alertify.warning("The QR Code is invalid!<br> M\xe3 QR kh\xf4ng h\u1ee3p l\u1ec7! Vui l\xf2ng th\u1eed l\u1ea1i m\xe3 kh\xe1c.",!0),{status:!1,ingredient:null};this.qrCode=n;const o=yield this.scanQRCode();return o.name!==this.value.glueName?(this.alertify.warning(`Please you should look for the chemical name "${this.value.glueName}"<br> Vui l\xf2ng qu\xe9t \u0111\xfang h\xf3a ch\u1ea5t "${this.value.glueName}"!`,!0),this.qrCode="",{status:!1,ingredient:null}):!0===(yield this.hasLock(o.name,e[1]))?(this.alertify.error("This chemical has been locked! <br> H\xf3a ch\u1ea5t n\xe0y \u0111\xe3 b\u1ecb kh\xf3a!",!0),this.qrCode="",{status:!1,ingredient:null}):{status:!0,ingredient:o}})}scanQRCode(){return this.ingredientService.scanQRCode(this.qrCode).toPromise()}hasLock(t,e){let i=this.building.name;return 1!==this.role.id&&2!==this.role.id||(i="E"),new Promise((n,o)=>{this.abnormalService.hasLock(t,i,e).subscribe(t=>{n(t)},t=>{o(!1)})})}onNgModelChangeScanQRCode(t){return Object(R.a)(this,void 0,void 0,function*(){this.subject.next({QRCode:t,ingredient:null})})}printData(){let t="";const e=document.getElementById("qrcode"),i="0001-01-01T00:00:00"===this.data.expiredTime?"N/A":this.datePipe.transform(new Date(this.data.expiredTime),"MMdd HH:mm");t+=`\n       <div class='content'>\n        <div class='qrcode'>\n         ${e.innerHTML}\n         </div>\n          <div class='info'>\n          <ul>\n              <li class='subInfoTo'>${this.data.glueName}</li>\n              <li class='subInfoNho' >MFG: ${this.datePipe.transform(new Date(this.data.createdTime),"MMdd HH:mm")}</li>\n              <li class='subInfoNho' >EXP: ${i}</li>\n          </ul>\n         </div>\n      </div>\n      `,this.configurePrint(t)}configurePrint(t){const e=window.open("","_blank","left=0,top=0,width=1000,height=900,toolbar=0,scrollbars=0,status=0");e.document.write(`\n    <html>\n      <head>\n      </head>\n      <style>\n        * {\n          box-sizing: border-box;\n          -moz-box-sizing: border-box;\n        }\n\n        .content {\n          page-break-after: always;\n          clear: both;\n        }\n\n        .content .qrcode {\n          float:left;\n          width: 110px;\n          margin-top: 10px;\n          padding: 0;\n          margin-left: 0px;\n        }\n\n        .content .info {\n          float:left;\n          list-style: none;\n          width: 190px;\n        }\n        .content .info ul {\n          float:left;\n          list-style: none;\n          padding: 0px;\n          margin: 0px;\n          margin-top: 20px;\n          font-weight: bold;\n          word-wrap: break-word;\n        }\n        .content .info ul .subInfoTo  {\n          font-size: 22px;\n          font-weight: bold;\n          width: 180px;\n          word-wrap: break-word;\n        }\n        .content .info ul .subInfoNho  {\n          font-size: 15px;\n          width: 180px;\n          word-wrap: break-word;\n        }\n\n        @page {\n          size: 2.65 x 1.20 inch;\n          page-break-after: always;\n          margin: 0;\n        }\n        @media print {\n          html, body {\n            width: 90mm;\n          }\n        }\n      </style>\n      <body onload="window.print(); window.close()">\n        ${t}\n      </body>\n    </html>\n    `),e.document.close(),this.finish()}finish(){this.todolistService.printGlueDispatchList(this.value.glueName.includes("+")?this.lastGlue:this.data.id,this.value.glueNameID,this.value.estimatedStartTime,this.value.estimatedFinishTime).subscribe(t=>{this.alertify.success("success",!0),this.activeModal.close(),this.todolistService.setValue(!1)})}getMixingInfoHistory(){localStorage.getItem("buildingID"),this.todolistService.getMixingInfoHistory(this.value.buildingID,this.value.glueNameID,this.value.startTimeOfPeriod,this.value.finishTimeOfPeriod).subscribe(t=>{var e;this.glues=t.map(t=>({id:t.id,buildingID:t.buildingID,glueName:`${t.glueName} ( ${this.datePipe.transform(t.createdTime,"HH:mm")} )`,glueID:t.glueID,code:t.code,mixBy:t.mixBy,expiredTime:t.expiredTime,createdTime:t.createdTime,status:t.status,estimatedTime:t.estimatedTime,startTime:t.startTime,endTime:t.endTime,printTime:t.printTime,estimatedStartTime:t.estimatedStartTime,estimatedFinishTime:t.estimatedFinishTime,mixingInfoDetails:t.mixingInfoDetails})),this.lastGlue=null===(e=this.glues[0])||void 0===e?void 0:e.id,this.data=this.glues[0]})}onSelect(t){var e;this.data=t.itemData,this.chemicalA=null===(e=this.data)||void 0===e?void 0:e.mixingInfoDetails.filter(t=>"A"===t.position)[0]}startSteps(){let t;t=this.isSingleGlue?[{element:"#step1-li",intro:"B\u01b0\u1edbc 1: Qu\xe9t QR Code!"},{element:"#step2-li",intro:'B\u01b0\u1edbc 2: Nh\u1ea5n v\xe0o n\xfat "In"!'}]:[{element:"#step1-li",intro:"B\u01b0\u1edbc 1: Ch\u1ecdn keo \u0111\xe3 pha!"},{element:"#step2-li",intro:'B\u01b0\u1edbc 2: Nh\u1ea5n v\xe0o n\xfat "In"!'}],this.introJS.setOptions({steps:t,hidePrev:!0,hideNext:!1}).start()}}Ci.\u0275fac=function(t){return new(t||Ci)(N.Mb(l.a),N.Mb(bt.a),N.Mb(A.a),N.Mb(n.d),N.Mb(P.a),N.Mb(Ge.a),N.Mb(Qe.a))},Ci.\u0275cmp=N.Gb({type:Ci,selectors:[["app-print-glue-dispatch-list"]],inputs:{value:"value"},features:[N.yb([n.d])],decls:45,vars:15,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","p-0"],["class","row mb-2",4,"ngIf"],["class","row py-2",4,"ngIf"],[1,"row"],[1,"col-md-4"],[1,"col-md-4","text-left"],[1,"center"],["id","qrcode",3,"qrdata","allowEmptyString","margin","elementType","width","errorCorrectionLevel",4,"ngIf"],[1,"modal-footer","justify-content-between"],["type","button",1,"btn","btn-outline-dark",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["type","button","id","step2-li",1,"btn","btn-outline-dark",3,"click"],[1,"fa","fa-print"],[1,"row","mb-2"],["id","step1-li",1,"col-md-12"],["placeholder","Select a glue history",3,"dataSource","fields","allowFiltering","ngModel","filtering","select","ngModelChange"],[1,"row","py-2"],["class","col-md-2",4,"ngIf"],["class","col-md-8","id","step1-li",4,"ngIf"],[1,"col-md-2"],["id","step1-li",1,"col-md-8"],["class","form-control form-control-lg rounded-pill","autoselect","","placeholder","Scan QR Code","type","text",3,"ngModel","ngModelChange",4,"ngIf"],["autoselect","","placeholder","Scan QR Code","type","text",1,"form-control","form-control-lg","rounded-pill",3,"ngModel","ngModelChange"],["id","qrcode",3,"qrdata","allowEmptyString","margin","elementType","width","errorCorrectionLevel"]],template:function(t,e){1&t&&(N.Sb(0,"div",0),N.Sb(1,"h4",1),N.Kc(2),N.Rb(),N.Sb(3,"button",2),N.cc("click",function(){return e.activeModal.dismiss("Cross click")}),N.Sb(4,"span",3),N.Kc(5,"\xd7"),N.Rb(),N.Rb(),N.Rb(),N.Sb(6,"div",4),N.Ic(7,pi,3,4,"div",5),N.Ic(8,yi,4,3,"div",6),N.Sb(9,"div",7),N.Nb(10,"div",8),N.Sb(11,"div",9),N.Sb(12,"div",10),N.Ic(13,Di,1,6,"qrcode",11),N.Rb(),N.Sb(14,"div"),N.Sb(15,"label"),N.Kc(16,"Name:"),N.Rb(),N.Kc(17),N.Rb(),N.Sb(18,"div"),N.Sb(19,"label"),N.Kc(20,"QrCode:"),N.Rb(),N.Kc(21),N.Rb(),N.Sb(22,"div"),N.Sb(23,"label"),N.Kc(24,"Batch:"),N.Rb(),N.Kc(25),N.Rb(),N.Sb(26,"div"),N.Sb(27,"label"),N.Kc(28,"MFG:"),N.Rb(),N.Kc(29),N.hc(30,"date"),N.Rb(),N.Sb(31,"div"),N.Sb(32,"label"),N.Kc(33,"EXP:"),N.Rb(),N.Kc(34),N.hc(35,"date"),N.Rb(),N.Rb(),N.Nb(36,"div",8),N.Rb(),N.Rb(),N.Sb(37,"div",12),N.Sb(38,"button",13),N.cc("click",function(){return e.activeModal.close("Close click")}),N.Kc(39,"Close"),N.Rb(),N.Sb(40,"button",14),N.cc("click",function(){return e.startSteps()}),N.Kc(41,"H\u01b0\u1edbng d\u1eabn"),N.Rb(),N.Sb(42,"button",15),N.cc("click",function(){return e.printData()}),N.Nb(43,"i",16),N.Kc(44," Print"),N.Rb(),N.Rb()),2&t&&(N.zb(2),N.Mc("Print glue name: ",null==e.value?null:e.value.glueName,""),N.zb(5),N.mc("ngIf",0==e.isSingleGlue),N.zb(1),N.mc("ngIf",1==e.isSingleGlue),N.zb(5),N.mc("ngIf",void 0!==e.data),N.zb(4),N.Mc(" ",null==e.data?null:e.data.glueName,""),N.zb(4),N.Mc(" ",null==e.data?null:e.data.code,""),N.zb(4),N.Mc(" ",null==e.chemicalA?null:e.chemicalA.batch,""),N.zb(4),N.Mc(" ",N.jc(30,9,null==e.data?null:e.data.createdTime,"yyyyMMdd HH:mm"),""),N.zb(5),N.Mc(" ",N.jc(35,12,null==e.data?null:e.data.expiredTime,"yyyyMMdd HH:mm"),""))},directives:[n.n,c.c,o.g,o.j,o.b,qe.a,I.a],pipes:[n.d],styles:[""]});const Ti=["dispatchGrid"];function wi(t,e){1&t&&(N.Sb(0,"span"),N.Kc(1),N.hc(2,"translate"),N.Rb()),2&t&&(N.zb(1),N.Lc(N.ic(2,1,"Line")))}function Ii(t,e){1&t&&N.Kc(0),2&t&&N.Mc(" ",e.$implicit.lineName," ")}function xi(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"Amount")," (g) ")}function Ri(t,e){1&t&&N.Kc(0),2&t&&N.Mc(" ",e.$implicit.amount," ")}function Mi(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"Time")," ")}function ki(t,e){if(1&t&&(N.Kc(0),N.hc(1,"date")),2&t){const t=e.$implicit;N.Mc(" ",null===t.deliveryTime?"-":N.jc(1,1,t.deliveryTime,"HH:mm")," ")}}function Bi(t,e){if(1&t&&(N.Kc(0),N.hc(1,"date")),2&t){const t=e.$implicit;N.Mc(" ",null===t.deliveryTime?"-":N.jc(1,1,t.deliveryTime,"HH:mm")," ")}}let Ni=(()=>{class t{constructor(t,e,i,n,o,a){this.activeModal=t,this.settingService=e,this.dispatchService=i,this.planService=n,this.todolistService=o,this.alertify=a,this.fieldsLine={text:"line",value:"line"},this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!1,allowDeleting:!1,mode:"Normal"},this.sortSettings={columns:[{field:"lineName",direction:"Ascending"}]}}ngOnInit(){this.isSingleGlue=!this.value.glueName.includes(" + "),this.toolbarOptions=["Edit","Cancel","Search"],this.title=this.value.glueName;const t=JSON.parse(localStorage.getItem("building")),e=JSON.parse(localStorage.getItem("level")),i=JSON.parse(localStorage.getItem("user")).User;this.role=e,this.user=i,this.building=t,this.value.glueName.includes(" + ")?(this.unitTitle="Actual Consumption",this.mixedConsumption=+(1e3*this.value.mixedConsumption).toFixed(0)):(this.unitTitle="Standard Consumption",this.mixedConsumption=+(1e3*this.value.standardConsumption).toFixed(0)),this.loadData(),this.startDispatchingTime=new Date,this.isShow=0===this.value.mixingInfoID&&!this.value.glueName.includes(" + ")}actionBegin(t){if("save"===t.requestType&&"edit"===t.action){const e=t.data;this.updateDispatchDetail({id:e.id,amount:e.amount,glueNameID:this.value.glueNameID,estimatedStartTime:this.value.estimatedStartTime,estimatedFinishTime:this.value.estimatedFinishTime,startTimeOfPeriod:this.value.startTimeOfPeriod,finishTimeOfPeriod:this.value.finishTimeOfPeriod,lineID:e.lineID})}}actionComplete(t){}toolbarClick(t){}loadData(){this.todolistService.getDispatchDetail(this.value.buildingID,this.value.glueNameID,this.value.estimatedStartTime,this.value.estimatedFinishTime).subscribe(t=>{this.data=t})}finishDispatch(){const t=this.data.map(t=>t.lineID);this.todolistService.finishDispatch({glueNameID:this.value.glueNameID,estimatedStartTime:this.value.estimatedStartTime,estimatedFinishTime:this.value.estimatedFinishTime,lines:t}).subscribe(t=>{this.todolistService.setValue(!0),this.alertify.success("Success"),this.activeModal.dismiss()})}updateDispatchDetail(t){this.todolistService.updateDispatchDetail(t).subscribe(t=>{this.loadData(),this.alertify.success("Success")},t=>{this.alertify.warning(t)})}updateStartDispatchingTime(t){this.dispatchService.updateStartDispatchingTime(t).subscribe(t=>{},t=>{this.alertify.warning(t)})}save(){this.finishDispatch()}}return t.\u0275fac=function(e){return new(e||t)(N.Mb(l.a),N.Mb(ei),N.Mb(ii),N.Mb(ni),N.Mb(oi),N.Mb(ai))},t.\u0275cmp=N.Gb({type:t,selectors:[["app-dispatch"]],viewQuery:function(t,e){if(1&t&&N.Qc(Ti,!0),2&t){let t;N.xc(t=N.dc())&&(e.dispatchGrid=t.first)}},inputs:{value:"value",buildingSetting:"buildingSetting"},decls:37,vars:17,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","p-0"],["allowResizing","true","gridLines","Both",3,"dataSource","allowSelection","allowSorting","toolbar","sortSettings","editSettings","actionBegin","actionComplete","toolbarClick"],["dispatchGrid",""],["field","lineName","headerText","Line","textAlign","Center","width","100"],["headerTemplate",""],["editTemplate",""],["field","amount","headerText","Amount","textAlign","Center","width","100"],["template",""],["field","time","headerText","Time","textAlign","Center","width","100"],[1,"modal-footer","justify-content-center","d-flex"],["type","button",1,"btn","btn-warning",3,"click"],[1,"fa","fa-save"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fa","fa-check"]],template:function(t,e){1&t&&(N.Sb(0,"div",0),N.Sb(1,"h4",1),N.Kc(2),N.hc(3,"translate"),N.Rb(),N.Sb(4,"button",2),N.cc("click",function(){return e.activeModal.dismiss("Cross click")}),N.Sb(5,"span",3),N.Kc(6,"\xd7"),N.Rb(),N.Rb(),N.Rb(),N.Sb(7,"div",4),N.Sb(8,"ejs-grid",5,6),N.cc("actionBegin",function(t){return e.actionBegin(t)})("actionComplete",function(t){return e.actionComplete(t)})("toolbarClick",function(t){return e.toolbarClick(t)}),N.Sb(10,"e-columns"),N.Sb(11,"e-column",7),N.Ic(12,wi,3,3,"ng-template",null,8,N.Jc),N.Ic(14,Ii,1,1,"ng-template",null,9,N.Jc),N.Rb(),N.Sb(16,"e-column",10),N.Ic(17,xi,2,3,"ng-template",null,8,N.Jc),N.Ic(19,Ri,1,1,"ng-template",null,11,N.Jc),N.Rb(),N.Sb(21,"e-column",12),N.Ic(22,Mi,2,3,"ng-template",null,8,N.Jc),N.Ic(24,ki,2,4,"ng-template",null,11,N.Jc),N.Ic(26,Bi,2,4,"ng-template",null,9,N.Jc),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Sb(28,"div",13),N.Sb(29,"button",14),N.cc("click",function(){return e.activeModal.close("Close click")}),N.Nb(30,"i",15),N.Kc(31),N.hc(32,"translate"),N.Rb(),N.Sb(33,"button",16),N.cc("click",function(){return e.save()}),N.Nb(34,"i",17),N.Kc(35),N.hc(36,"translate"),N.Rb(),N.Rb()),2&t&&(N.zb(2),N.Nc("",N.ic(3,11,"Dispatch")," ",e.title," "),N.zb(6),N.mc("dataSource",e.data)("allowSelection",!0)("allowSorting",!0)("allowSorting",!0)("toolbar",e.toolbarOptions)("sortSettings",e.sortSettings)("editSettings",e.editSettings),N.zb(23),N.Mc(" ",N.ic(32,13,"SAVE"),""),N.zb(4),N.Mc(" ",N.ic(36,15,"Finish"),""))},directives:[v.j,d.d,C.d,C.b,v.e,v.b,d.c,C.c,C.a,v.d,v.a],pipes:[p.c,n.d],styles:[".e-grid[_ngcontent-%COMP%]   td.e-active[_ngcontent-%COMP%]{background:#6597ce!important;color:#000}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center}input.warning-focus[_ngcontent-%COMP%]{-webkit-animation:warning-frames .5s infinite;animation:warning-frames .5s infinite;color:#000}input.lock[_ngcontent-%COMP%]{pointer-events:none}.new[_ngcontent-%COMP%]{background-color:green}input[_ngcontent-%COMP%]{text-align:center}@-webkit-keyframes warning-frames{0%{background-color:#fade40}to{background-color:#e7f70c}}@keyframes warning-frames{0%{background-color:#fade40}to{background-color:#e7f70c}}.e-grid[_ngcontent-%COMP%]   .e-altrow[_ngcontent-%COMP%]{background-color:#d6d8db}"]}),t})();const Ai=["historyMixed"],Oi=["addition"],Pi=["additionDispatch"],Ei=["toolbar"],Li=["toolbarTodo"],_i=["toolbarDone"],Fi=["toolbarDelay"],ji=["toolbarDispatch"],Ki=["toolbarDispatchDelay"],$i=["gridEVAUV"],zi=["gridDone"],Hi=["gridAdditionDispatch"],Ui=["gridTodo"],Ji=["gridDelay"],Gi=["gridDispatch"],Qi=["gridDispatchDelay"],qi=["fullScreen"],Vi=["tooltip"];function Wi(t,e){if(1&t){const t=N.Tb();N.Sb(0,"button",32),N.cc("click",function(){return N.Bc(t),N.gc(2).openAddition()}),N.Nb(1,"i",33),N.Sb(2,"span",34),N.Kc(3),N.hc(4,"translate"),N.Rb(),N.Rb()}2&t&&(N.zb(3),N.Mc(" ",N.ic(4,1,"Addition")," "))}function Yi(t,e){1&t&&(N.Sb(0,"e-item",31),N.hc(1,"translate"),N.Ic(2,Wi,5,3,"ng-template",null,13,N.Jc),N.Rb()),2&t&&N.nc("tooltipText",N.ic(1,1,"Addition"))}function Xi(t,e){if(1&t){const t=N.Tb();N.Sb(0,"button",32),N.cc("click",function(){return N.Bc(t),N.gc().reloadPage()}),N.Nb(1,"i",35),N.Sb(2,"span",34),N.Kc(3),N.hc(4,"translate"),N.Rb(),N.Rb()}2&t&&(N.zb(3),N.Mc(" ",N.ic(4,1,"Refresh Todolist")," "))}function Zi(t,e){if(1&t){const t=N.Tb();N.Sb(0,"button",37),N.cc("click",function(){return N.Bc(t),N.gc(2).openFullscreen()}),N.Nb(1,"i",38),N.Sb(2,"span",34),N.Kc(3," FullScreen "),N.Rb(),N.Rb()}}function tn(t,e){if(1&t){const t=N.Tb();N.Sb(0,"button",37),N.cc("click",function(){return N.Bc(t),N.gc(2).closeFullscreen()}),N.Nb(1,"i",39),N.Sb(2,"span",34),N.Kc(3," CloseScreen "),N.Rb(),N.Rb()}}function en(t,e){if(1&t&&(N.Ic(0,Zi,4,0,"button",36),N.Ic(1,tn,4,0,"button",36)),2&t){const t=N.gc();N.mc("ngIf",t.hasShowFullScreen),N.zb(1),N.mc("ngIf",!t.hasShowFullScreen)}}function nn(t,e){if(1&t){const t=N.Tb();N.Sb(0,"ejs-dropdownlist",40),N.cc("filtering",function(e){return N.Bc(t),N.gc().onFilteringBuilding(e)})("change",function(e){return N.Bc(t),N.gc().onChangeBuilding(e)})("select",function(e){return N.Bc(t),N.gc().onSelectBuildingToDo(e)}),N.Rb()}if(2&t){const t=N.gc();N.mc("dataSource",t.buildings)("fields",t.fieldsBuildings)("allowFiltering",!0)("value",t.buildingID)}}function on(t,e){1&t&&N.Nb(0,"e-item",41),2&t&&N.oc("text"," ","EVA_UV"," ")}function an(t,e){if(1&t){const t=N.Tb();N.Sb(0,"div",42),N.Sb(1,"div",43),N.Sb(2,"input",44),N.cc("ngModelChange",function(e){return N.Bc(t),N.gc().glueName=e})("change",function(e){return N.Bc(t),N.gc().searchDone(e)}),N.Rb(),N.Nb(3,"span",45),N.Rb(),N.Rb()}if(2&t){const t=N.gc();N.zb(2),N.mc("ngModel",t.glueName)}}function sn(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"Supplier")," ")}function cn(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"Glue")," ")}function ln(t,e){if(1&t){const t=N.Tb();N.Sb(0,"ejs-tooltip",55,56),N.cc("beforeRender",function(i){N.Bc(t);const n=e.$implicit;return N.gc(2).onBeforeRender(i,n,n.index)}),N.Kc(2),N.Rb()}if(2&t){const t=e.$implicit;N.zb(2),N.Mc(" ",t.glueName," ")}}function rn(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"Line")," ")}function dn(t,e){1&t&&N.Kc(0),2&t&&N.Mc(" ",e.$implicit.lineNames.join(", ")," ")}function hn(t,e){1&t&&(N.Sb(0,"ejs-tooltip",57),N.hc(1,"translate"),N.Kc(2),N.hc(3,"translate"),N.Rb()),2&t&&(N.mc("content",N.ic(1,2,"EST_Tooltip")),N.zb(2),N.Mc(" ",N.ic(3,4,"EST")," "))}function un(t,e){1&t&&(N.Sb(0,"div"),N.Kc(1),N.hc(2,"translate"),N.Rb()),2&t&&(N.zb(1),N.Lc(N.ic(2,1,"Addition")))}function gn(t,e){if(1&t&&(N.Sb(0,"div"),N.Kc(1),N.hc(2,"date"),N.Rb()),2&t){const t=N.gc().$implicit;N.zb(1),N.Lc(N.jc(2,1,t.estimatedStartTime,"HH:mm"))}}function bn(t,e){if(1&t&&(N.Ic(0,un,3,3,"div",58),N.Ic(1,gn,3,4,"div",58)),2&t){const t=e.$implicit;N.mc("ngIf",t.abnormalStatus),N.zb(1),N.mc("ngIf",!t.abnormalStatus)}}function pn(t,e){1&t&&(N.Sb(0,"ejs-tooltip",57),N.hc(1,"translate"),N.Kc(2),N.hc(3,"translate"),N.Rb()),2&t&&(N.mc("content",N.ic(1,2,"EFT_Tooltip")),N.zb(2),N.Mc(" ",N.ic(3,4,"EFT")," "))}function mn(t,e){1&t&&(N.Sb(0,"div"),N.Kc(1),N.hc(2,"translate"),N.Rb()),2&t&&(N.zb(1),N.Lc(N.ic(2,1,"Addition")))}function fn(t,e){if(1&t&&(N.Sb(0,"div"),N.Kc(1),N.hc(2,"date"),N.Rb()),2&t){const t=N.gc().$implicit;N.zb(1),N.Lc(N.jc(2,1,t.estimatedFinishTime,"HH:mm"))}}function Sn(t,e){if(1&t&&(N.Ic(0,mn,3,3,"div",58),N.Ic(1,fn,3,4,"div",58)),2&t){const t=e.$implicit;N.mc("ngIf",t.abnormalStatus),N.zb(1),N.mc("ngIf",!t.abnormalStatus)}}function vn(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"Option")," ")}const yn=function(t,e){return{disabled:t,"cursor-pointer":e}};function Dn(t,e){if(1&t&&(N.Sb(0,"button",65),N.Nb(1,"i",66),N.Kc(2),N.hc(3,"translate"),N.Rb()),2&t){const t=N.gc(2).$implicit,e=N.gc(2);N.mc("ngClass",N.tc(5,yn,t.mixingInfoID>0,t.mixingInfoID>0))("routerLink",e.goToMixing(t)),N.zb(2),N.Mc(" ",N.ic(3,3,"MIXING")," ")}}function Cn(t,e){if(1&t){const t=N.Tb();N.Sb(0,"button",68),N.cc("click",function(){N.Bc(t);const e=N.gc(3).$implicit;return N.gc(2).goToStir(e)}),N.Nb(1,"i",69),N.Kc(2),N.hc(3,"translate"),N.Rb()}if(2&t){const t=N.gc(3).$implicit;N.mc("ngClass",N.tc(4,yn,null!==t.startStirTime||t.mixedConsumption<1&&null!=t.finishMixingTime,null!==t.startStirTime||t.mixedConsumption<1&&null!=t.finishMixingTime)),N.zb(2),N.Mc(" ",N.ic(3,2,"STIR")," ")}}function Tn(t,e){if(1&t&&(N.Sb(0,"div"),N.Ic(1,Cn,4,7,"button",67),N.Rb()),2&t){const t=N.gc(2).$implicit;N.zb(1),N.mc("ngIf",-1!==t.glueName.indexOf(" + ")&&null==t.finishMixingTime&&t.mixedConsumption>1||-1!==t.glueName.indexOf(" + ")&&null==t.finishMixingTime&&0==t.mixedConsumption||-1!==t.glueName.indexOf(" + ")&&null!==t.finishMixingTime&&t.mixedConsumption>1)}}function wn(t,e){if(1&t){const t=N.Tb();N.Sb(0,"div"),N.Sb(1,"button",70),N.cc("click",function(){N.Bc(t);const e=N.gc(2).$implicit;return N.gc(2).goToShake(e)}),N.Nb(2,"i",69),N.Kc(3),N.hc(4,"translate"),N.Rb(),N.Rb()}2&t&&(N.zb(3),N.Mc(" ",N.ic(4,1,"Shake")," "))}function In(t,e){if(1&t){const t=N.Tb();N.Sb(0,"div",60),N.Sb(1,"div",61),N.Ic(2,Dn,4,8,"button",62),N.Ic(3,Tn,2,1,"div",58),N.Ic(4,wn,5,3,"div",58),N.Sb(5,"button",63),N.cc("click",function(){N.Bc(t);const e=N.gc().$implicit;return N.gc(2).openPrintModal(e)}),N.Nb(6,"i",64),N.Kc(7),N.hc(8,"translate"),N.Rb(),N.Rb(),N.Rb()}if(2&t){const t=N.gc().$implicit,e=N.gc(2);N.zb(2),N.mc("ngIf",-1!==t.glueName.indexOf(" + ")),N.zb(1),N.mc("ngIf",t.kindID!==e.RUBBER),N.zb(1),N.mc("ngIf",t.kindID===e.RUBBER),N.zb(1),N.Eb("ml-1",-1!==t.glueName.indexOf(" + ")),N.zb(2),N.Mc(" ",N.ic(8,6,"Print")," ")}}function xn(t,e){if(1&t&&N.Ic(0,In,9,8,"div",59),2&t){const t=N.gc(2);N.mc("ngIf",t.isShowTab===t.TODO)}}function Rn(t,e){if(1&t){const t=N.Tb();N.Sb(0,"ejs-grid",46,47),N.cc("actionBegin",function(e){return N.Bc(t),N.gc().actionBegin(e)})("actionComplete",function(e){return N.Bc(t),N.gc().actionComplete(e)})("rowDataBound",function(e){return N.Bc(t),N.gc().rowDB(e)})("toolbarClick",function(e){return N.Bc(t),N.gc().toolbarClick(e)})("created",function(){return N.Bc(t),N.gc().createdTodoGrid()})("dataBound",function(){return N.Bc(t),N.gc().dataBound()})("recordDoubleClick",function(e){return N.Bc(t),N.gc().onDoubleClick(e)}),N.Sb(2,"e-columns"),N.Sb(3,"e-column",48),N.Ic(4,sn,2,3,"ng-template",null,49,N.Jc),N.Rb(),N.Sb(6,"e-column",50),N.Ic(7,cn,2,3,"ng-template",null,49,N.Jc),N.Ic(9,ln,3,1,"ng-template",null,13,N.Jc),N.Rb(),N.Sb(11,"e-column",51),N.Ic(12,rn,2,3,"ng-template",null,49,N.Jc),N.Ic(14,dn,1,1,"ng-template",null,13,N.Jc),N.Rb(),N.Sb(16,"e-column",52),N.Ic(17,hn,4,6,"ng-template",null,49,N.Jc),N.Ic(19,bn,2,2,"ng-template",null,13,N.Jc),N.Rb(),N.Sb(21,"e-column",53),N.Ic(22,pn,4,6,"ng-template",null,49,N.Jc),N.Ic(24,Sn,2,2,"ng-template",null,13,N.Jc),N.Rb(),N.Sb(26,"e-column",54),N.Ic(27,vn,2,3,"ng-template",null,49,N.Jc),N.Ic(29,xn,1,1,"ng-template",null,13,N.Jc),N.Rb(),N.Rb(),N.Rb()}if(2&t){const t=N.gc();N.mc("dataSource",t.data)("searchSettings",t.searchSettings)("allowExcelExport",!0)}}function Mn(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"Supplier")," ")}function kn(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"Glue")," ")}function Bn(t,e){if(1&t){const t=N.Tb();N.Sb(0,"ejs-tooltip",55,56),N.cc("beforeRender",function(i){N.Bc(t);const n=e.$implicit;return N.gc(2).onBeforeRender(i,n,n.index)}),N.Kc(2),N.Rb()}if(2&t){const t=e.$implicit;N.zb(2),N.Mc(" ",t.glueName," ")}}function Nn(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"Line")," ")}function An(t,e){1&t&&N.Kc(0),2&t&&N.Mc(" ",e.$implicit.lineNames.join(", ")," ")}function On(t,e){1&t&&(N.Sb(0,"ejs-tooltip",57),N.hc(1,"translate"),N.Kc(2),N.hc(3,"translate"),N.Rb()),2&t&&(N.mc("content",N.ic(1,2,"EST_Tooltip")),N.zb(2),N.Mc(" ",N.ic(3,4,"EST")," "))}function Pn(t,e){1&t&&(N.Sb(0,"ejs-tooltip",57),N.hc(1,"translate"),N.Kc(2),N.hc(3,"translate"),N.Rb()),2&t&&(N.mc("content",N.ic(1,2,"EFT_Tooltip")),N.zb(2),N.Mc(" ",N.ic(3,4,"EFT")," "))}function En(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"Option")," ")}function Ln(t,e){if(1&t){const t=N.Tb();N.Sb(0,"div",60),N.Sb(1,"div",61),N.Sb(2,"button",63),N.cc("click",function(){N.Bc(t);const i=e.$implicit;return N.gc(2).openPrintModalDispatchList(i)}),N.Nb(3,"i",64),N.Kc(4),N.hc(5,"translate"),N.Rb(),N.Sb(6,"button",73),N.cc("click",function(){N.Bc(t);const i=e.$implicit;return N.gc(2).openDispatchModal(i)}),N.Nb(7,"i",74),N.Kc(8),N.hc(9,"translate"),N.Rb(),N.Rb(),N.Rb()}if(2&t){const t=e.$implicit,i=N.gc(2);N.zb(4),N.Mc(" ",N.ic(5,3,"Print")," "),N.zb(2),N.mc("ngClass",i.lockDispatch(t)),N.zb(2),N.Mc(" ",N.ic(9,5,"Dispatch")," ")}}function _n(t,e){if(1&t){const t=N.Tb();N.Sb(0,"ejs-grid",71,72),N.cc("actionBegin",function(e){return N.Bc(t),N.gc().actionBegin(e)})("actionComplete",function(e){return N.Bc(t),N.gc().actionComplete(e)})("toolbarClick",function(e){return N.Bc(t),N.gc().toolbarClick(e)})("created",function(){return N.Bc(t),N.gc().createdDispatchGrid()})("dataBound",function(){return N.Bc(t),N.gc().dataBound()})("rowDataBound",function(e){return N.Bc(t),N.gc().rowDBDispatch(e)})("recordDoubleClick",function(e){return N.Bc(t),N.gc().onDoubleClick(e)}),N.Sb(2,"e-columns"),N.Sb(3,"e-column",48),N.Ic(4,Mn,2,3,"ng-template",null,49,N.Jc),N.Rb(),N.Sb(6,"e-column",50),N.Ic(7,kn,2,3,"ng-template",null,49,N.Jc),N.Ic(9,Bn,3,1,"ng-template",null,13,N.Jc),N.Rb(),N.Sb(11,"e-column",51),N.Ic(12,Nn,2,3,"ng-template",null,49,N.Jc),N.Ic(14,An,1,1,"ng-template",null,13,N.Jc),N.Rb(),N.Sb(16,"e-column",52),N.Ic(17,On,4,6,"ng-template",null,49,N.Jc),N.Rb(),N.Sb(19,"e-column",53),N.Ic(20,Pn,4,6,"ng-template",null,49,N.Jc),N.Rb(),N.Sb(22,"e-column",54),N.Ic(23,En,2,3,"ng-template",null,49,N.Jc),N.Ic(25,Ln,10,7,"ng-template",null,13,N.Jc),N.Rb(),N.Rb(),N.Rb()}if(2&t){const t=N.gc();N.mc("dataSource",t.dispatchData)("searchSettings",t.searchSettings)("allowExcelExport",!0)}}function Fn(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"Supplier")," ")}function jn(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"Glue")," ")}function Kn(t,e){if(1&t){const t=N.Tb();N.Sb(0,"ejs-tooltip",55,56),N.cc("beforeRender",function(i){N.Bc(t);const n=e.$implicit;return N.gc(2).onBeforeRender(i,n,n.index)}),N.Kc(2),N.Rb()}if(2&t){const t=e.$implicit;N.zb(2),N.Mc(" ",t.glueName," ")}}function $n(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"Line")," ")}function zn(t,e){1&t&&N.Kc(0),2&t&&N.Mc(" ",e.$implicit.lineNames.join(", ")," ")}function Hn(t,e){1&t&&(N.Sb(0,"ejs-tooltip",57),N.hc(1,"translate"),N.Kc(2),N.hc(3,"translate"),N.Rb()),2&t&&(N.mc("content",N.ic(1,2,"EST_Tooltip")),N.zb(2),N.Mc(" ",N.ic(3,4,"EST")," "))}function Un(t,e){1&t&&N.Kc(0," N/A ")}function Jn(t,e){1&t&&(N.Sb(0,"ejs-tooltip",57),N.hc(1,"translate"),N.Kc(2),N.hc(3,"translate"),N.Rb()),2&t&&(N.mc("content",N.ic(1,2,"EFT_Tooltip")),N.zb(2),N.Mc(" ",N.ic(3,4,"EFT")," "))}function Gn(t,e){1&t&&N.Kc(0," N/A ")}function Qn(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"Option")," ")}function qn(t,e){if(1&t){const t=N.Tb();N.Sb(0,"div",60),N.Sb(1,"div",61),N.Sb(2,"button",63),N.cc("click",function(){N.Bc(t);const i=e.$implicit;return N.gc(2).openSubpackage(i)}),N.Nb(3,"i",64),N.Kc(4),N.Rb(),N.Sb(5,"button",76),N.cc("click",function(){N.Bc(t);const i=e.$implicit;return N.gc(2).openDispatchEVAUV(i)}),N.Nb(6,"i",74),N.Kc(7),N.hc(8,"translate"),N.Rb(),N.Rb(),N.Rb()}2&t&&(N.zb(4),N.Mc(" ","Subpackage"," "),N.zb(3),N.Mc(" ",N.ic(8,2,"Dispatch")," "))}function Vn(t,e){if(1&t){const t=N.Tb();N.Sb(0,"ejs-grid",75,72),N.cc("actionBegin",function(e){return N.Bc(t),N.gc().actionBegin(e)})("actionComplete",function(e){return N.Bc(t),N.gc().actionComplete(e)})("toolbarClick",function(e){return N.Bc(t),N.gc().toolbarClick(e)})("created",function(){return N.Bc(t),N.gc().createdDispatchGrid()})("dataBound",function(){return N.Bc(t),N.gc().dataBound()})("rowDataBound",function(e){return N.Bc(t),N.gc().rowDBDispatch(e)})("recordDoubleClick",function(e){return N.Bc(t),N.gc().onDoubleClick(e)}),N.Sb(2,"e-columns"),N.Sb(3,"e-column",48),N.Ic(4,Fn,2,3,"ng-template",null,49,N.Jc),N.Rb(),N.Sb(6,"e-column",50),N.Ic(7,jn,2,3,"ng-template",null,49,N.Jc),N.Ic(9,Kn,3,1,"ng-template",null,13,N.Jc),N.Rb(),N.Sb(11,"e-column",51),N.Ic(12,$n,2,3,"ng-template",null,49,N.Jc),N.Ic(14,zn,1,1,"ng-template",null,13,N.Jc),N.Rb(),N.Sb(16,"e-column",52),N.Ic(17,Hn,4,6,"ng-template",null,49,N.Jc),N.Ic(19,Un,1,0,"ng-template",null,13,N.Jc),N.Rb(),N.Sb(21,"e-column",53),N.Ic(22,Jn,4,6,"ng-template",null,49,N.Jc),N.Ic(24,Gn,1,0,"ng-template",null,13,N.Jc),N.Rb(),N.Sb(26,"e-column",54),N.Ic(27,Qn,2,3,"ng-template",null,49,N.Jc),N.Ic(29,qn,9,4,"ng-template",null,13,N.Jc),N.Rb(),N.Rb(),N.Rb()}if(2&t){const t=N.gc();N.mc("dataSource",t.EVAUVData)("searchSettings",t.searchSettings)("allowExcelExport",!0)}}function Wn(t,e){1&t&&N.Kc(0),2&t&&N.Mc(" ","Job Type"," ")}function Yn(t,e){1&t&&N.Kc(0),2&t&&N.Mc(" ",1==e.$implicit.jobType?"To Do":"Dispatch"," ")}function Xn(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"Supplier")," ")}function Zn(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"Glue")," ")}function to(t,e){if(1&t){const t=N.Tb();N.Sb(0,"ejs-tooltip",55,56),N.cc("beforeRender",function(i){N.Bc(t);const n=e.$implicit;return N.gc(2).onBeforeRender(i,n,n.index)}),N.Kc(2),N.Rb()}if(2&t){const t=e.$implicit;N.zb(2),N.Mc(" ",t.glueName," ")}}function eo(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"Line")," ")}function io(t,e){1&t&&N.Kc(0),2&t&&N.Mc(" ",e.$implicit.lineNames.join(", ")," ")}function no(t,e){1&t&&(N.Sb(0,"ejs-tooltip",57),N.hc(1,"translate"),N.Kc(2),N.hc(3,"translate"),N.Rb()),2&t&&(N.mc("content",N.ic(1,2,"SMT_Tooltip")),N.zb(2),N.Mc(" ",N.ic(3,4,"SMT")," "))}function oo(t,e){if(1&t&&(N.Sb(0,"div"),N.Kc(1),N.hc(2,"date"),N.Rb()),2&t){const t=N.gc().$implicit;N.zb(1),N.Mc(" ",-1===t.glueName.indexOf(" + ")||null===t.startMixingTime||"0001-01-01T00:00:00"===t.startMixingTime?"N/A":N.jc(2,1,t.startMixingTime,"HH:mm")," ")}}function ao(t,e){1&t&&(N.Sb(0,"div"),N.Kc(1," - "),N.Rb())}function so(t,e){if(1&t&&(N.Ic(0,oo,3,4,"div",58),N.Ic(1,ao,2,0,"div",58)),2&t){const t=e.$implicit;N.mc("ngIf",1==t.jobType),N.zb(1),N.mc("ngIf",2==t.jobType)}}function co(t,e){1&t&&(N.Sb(0,"ejs-tooltip",57),N.hc(1,"translate"),N.Kc(2),N.hc(3,"translate"),N.Rb()),2&t&&(N.mc("content",N.ic(1,2,"FMT_Tooltip")),N.zb(2),N.Mc(" ",N.ic(3,4,"FMT")," "))}function lo(t,e){if(1&t&&(N.Sb(0,"div"),N.Kc(1),N.hc(2,"date"),N.Rb()),2&t){const t=N.gc().$implicit;N.zb(1),N.Mc(" ",-1===t.glueName.indexOf(" + ")||null===t.finishMixingTime||"0001-01-01T00:00:00"===t.finishMixingTime?"N/A":N.jc(2,1,t.finishMixingTime,"HH:mm")," ")}}function ro(t,e){1&t&&(N.Sb(0,"div"),N.Kc(1," - "),N.Rb())}function ho(t,e){if(1&t&&(N.Ic(0,lo,3,4,"div",58),N.Ic(1,ro,2,0,"div",58)),2&t){const t=e.$implicit;N.mc("ngIf",1==t.jobType),N.zb(1),N.mc("ngIf",2==t.jobType)}}function uo(t,e){1&t&&(N.Sb(0,"ejs-tooltip",57),N.hc(1,"translate"),N.Kc(2),N.hc(3,"translate"),N.Rb()),2&t&&(N.mc("content",N.ic(1,2,"SST_Tooltip")),N.zb(2),N.Mc(" ",N.ic(3,4,"SST")," "))}function go(t,e){1&t&&(N.Qb(0),N.Kc(1),N.hc(2,"translate"),N.Pb()),2&t&&(N.zb(1),N.Mc(" ",N.ic(2,1,"Manual")," "))}function bo(t,e){if(1&t&&(N.Qb(0),N.Kc(1),N.hc(2,"date"),N.Pb()),2&t){const t=N.gc(3).$implicit;N.zb(1),N.Mc(" ",N.jc(2,1,t.startStirTime,"HH:mm")," ")}}function po(t,e){if(1&t&&N.Ic(0,bo,3,4,"ng-container",92),2&t){N.gc();const t=N.yc(5),e=N.gc().$implicit;N.mc("ngIf",-1!==e.glueName.indexOf(" + ")&&null!==e.startStirTime&&null!==e.finishStirTime&&e.mixedConsumption>=1)("ngIfElse",t)}}function mo(t,e){1&t&&(N.Qb(0),N.Kc(1," Error "),N.Pb())}function fo(t,e){if(1&t&&N.Ic(0,mo,2,0,"ng-container",92),2&t){N.gc();const t=N.yc(7),e=N.gc().$implicit;N.mc("ngIf",-1!==e.glueName.indexOf(" + ")&&null===e.startStirTime&&e.mixedConsumption>=1)("ngIfElse",t)}}function So(t,e){1&t&&N.Kc(0," N/A ")}function vo(t,e){if(1&t&&(N.Sb(0,"div"),N.Ic(1,go,3,3,"ng-container",92),N.Ic(2,po,1,2,"ng-template",null,93,N.Jc),N.Ic(4,fo,1,2,"ng-template",null,94,N.Jc),N.Ic(6,So,1,0,"ng-template",null,95,N.Jc),N.Rb()),2&t){const t=N.yc(3),e=N.gc().$implicit;N.zb(1),N.mc("ngIf",-1!==e.glueName.indexOf(" + ")&&e.mixedConsumption<1)("ngIfElse",t)}}function yo(t,e){1&t&&(N.Sb(0,"div"),N.Kc(1," - "),N.Rb())}function Do(t,e){if(1&t&&(N.Ic(0,vo,8,2,"div",58),N.Ic(1,yo,2,0,"div",58)),2&t){const t=e.$implicit;N.mc("ngIf",1==t.jobType),N.zb(1),N.mc("ngIf",2==t.jobType)}}function Co(t,e){1&t&&(N.Sb(0,"ejs-tooltip",57),N.hc(1,"translate"),N.Kc(2),N.hc(3,"translate"),N.Rb()),2&t&&(N.mc("content",N.ic(1,2,"FST_Tooltip")),N.zb(2),N.Mc(" ",N.ic(3,4,"FST")," "))}function To(t,e){1&t&&(N.Qb(0),N.Kc(1),N.hc(2,"translate"),N.Pb()),2&t&&(N.zb(1),N.Mc(" ",N.ic(2,1,"Manual")," "))}function wo(t,e){if(1&t&&(N.Qb(0),N.Kc(1),N.hc(2,"date"),N.Pb()),2&t){const t=N.gc(3).$implicit;N.zb(1),N.Mc(" ",N.jc(2,1,t.finishStirTime,"HH:mm")," ")}}function Io(t,e){if(1&t&&N.Ic(0,wo,3,4,"ng-container",92),2&t){N.gc();const t=N.yc(5),e=N.gc().$implicit;N.mc("ngIf",-1!==e.glueName.indexOf(" + ")&&null!==e.startStirTime&&null!==e.finishStirTime&&e.mixedConsumption>=1)("ngIfElse",t)}}function xo(t,e){1&t&&(N.Qb(0),N.Kc(1," Error "),N.Pb())}function Ro(t,e){if(1&t&&N.Ic(0,xo,2,0,"ng-container",92),2&t){N.gc();const t=N.yc(7),e=N.gc().$implicit;N.mc("ngIf",-1!==e.glueName.indexOf(" + ")&&null===e.startStirTime&&e.mixedConsumption>=1)("ngIfElse",t)}}function Mo(t,e){1&t&&N.Kc(0," N/A ")}function ko(t,e){if(1&t&&(N.Sb(0,"div"),N.Ic(1,To,3,3,"ng-container",92),N.Ic(2,Io,1,2,"ng-template",null,93,N.Jc),N.Ic(4,Ro,1,2,"ng-template",null,94,N.Jc),N.Ic(6,Mo,1,0,"ng-template",null,95,N.Jc),N.Rb()),2&t){const t=N.yc(3),e=N.gc().$implicit;N.zb(1),N.mc("ngIf",-1!==e.glueName.indexOf(" + ")&&e.mixedConsumption<1)("ngIfElse",t)}}function Bo(t,e){1&t&&(N.Sb(0,"div"),N.Kc(1," - "),N.Rb())}function No(t,e){if(1&t&&(N.Ic(0,ko,8,2,"div",58),N.Ic(1,Bo,2,0,"div",58)),2&t){const t=e.$implicit;N.mc("ngIf",1==t.jobType),N.zb(1),N.mc("ngIf",2==t.jobType)}}function Ao(t,e){1&t&&(N.Sb(0,"ejs-tooltip",57),N.hc(1,"translate"),N.Kc(2),N.hc(3,"translate"),N.Rb()),2&t&&(N.mc("content",N.ic(1,2,"PT_Tooltip")),N.zb(2),N.Mc(" ",N.ic(3,4,"PT")," "))}function Oo(t,e){1&t&&(N.Sb(0,"ejs-tooltip",57),N.hc(1,"translate"),N.Kc(2),N.hc(3,"translate"),N.Rb()),2&t&&(N.mc("content",N.ic(1,2,"SDT_Tooltip")),N.zb(2),N.Mc(" ",N.ic(3,4,"SDT")," "))}function Po(t,e){1&t&&(N.Sb(0,"div"),N.Kc(1," - "),N.Rb())}function Eo(t,e){if(1&t&&(N.Sb(0,"div"),N.Kc(1),N.hc(2,"date"),N.Rb()),2&t){const t=N.gc().$implicit;N.zb(1),N.Mc(" ",null===t.finishDispatchingTime?"N/A":N.jc(2,1,t.finishDispatchingTime,"HH:mm")," ")}}function Lo(t,e){if(1&t&&(N.Ic(0,Po,2,0,"div",58),N.Ic(1,Eo,3,4,"div",58)),2&t){const t=e.$implicit;N.mc("ngIf",1==t.jobType),N.zb(1),N.mc("ngIf",2==t.jobType)}}function _o(t,e){1&t&&(N.Sb(0,"ejs-tooltip",96),N.Kc(1),N.hc(2,"translate"),N.Rb()),2&t&&(N.zb(1),N.Mc(" ",N.ic(2,1,"Std. Con.")," (kg) "))}function Fo(t,e){1&t&&(N.Sb(0,"div"),N.Kc(1," - "),N.Rb())}function jo(t,e){if(1&t&&(N.Sb(0,"div"),N.Kc(1),N.Rb()),2&t){const t=N.gc().$implicit;N.zb(1),N.Mc(" ",t.standardConsumption," ")}}function Ko(t,e){if(1&t&&(N.Ic(0,Fo,2,0,"div",58),N.Ic(1,jo,2,1,"div",58)),2&t){const t=e.$implicit;N.mc("ngIf",2==t.jobType),N.zb(1),N.mc("ngIf",1==t.jobType)}}function $o(t,e){1&t&&(N.Sb(0,"ejs-tooltip",97),N.Kc(1),N.hc(2,"translate"),N.Rb()),2&t&&(N.zb(1),N.Mc(" ",N.ic(2,1,"Mixed. Con."),"(kg) "))}function zo(t,e){1&t&&(N.Sb(0,"div"),N.Kc(1," - "),N.Rb())}function Ho(t,e){if(1&t&&(N.Sb(0,"div"),N.Kc(1),N.Rb()),2&t){const t=N.gc().$implicit;N.zb(1),N.Mc(" ",-1!==t.glueName.indexOf(" + ")?t.mixedConsumption+"":"N/A"," ")}}function Uo(t,e){if(1&t&&(N.Ic(0,zo,2,0,"div",58),N.Ic(1,Ho,2,1,"div",58)),2&t){const t=e.$implicit;N.mc("ngIf",2==t.jobType),N.zb(1),N.mc("ngIf",1==t.jobType)}}function Jo(t,e){1&t&&(N.Sb(0,"ejs-tooltip",98),N.Kc(1),N.hc(2,"translate"),N.Rb()),2&t&&(N.zb(1),N.Mc(" ",N.ic(2,1,"Delivered. Con."),"(kg) "))}function Go(t,e){1&t&&(N.Sb(0,"div"),N.Kc(1," - "),N.Rb())}function Qo(t,e){if(1&t&&(N.Sb(0,"div"),N.Kc(1),N.Rb()),2&t){const t=N.gc().$implicit;N.zb(1),N.Mc(" ",t.deliveredAmount," ")}}function qo(t,e){if(1&t&&(N.Ic(0,Go,2,0,"div",58),N.Ic(1,Qo,2,1,"div",58)),2&t){const t=e.$implicit;N.mc("ngIf",1==t.jobType),N.zb(1),N.mc("ngIf",2==t.jobType)}}function Vo(t,e){1&t&&(N.Sb(0,"ejs-tooltip",57),N.hc(1,"translate"),N.Kc(2),N.hc(3,"translate"),N.Rb()),2&t&&(N.mc("content",N.ic(1,2,"EST_Tooltip")),N.zb(2),N.Mc(" ",N.ic(3,4,"EST")," "))}function Wo(t,e){1&t&&(N.Sb(0,"ejs-tooltip",57),N.hc(1,"translate"),N.Kc(2),N.hc(3,"translate"),N.Rb()),2&t&&(N.mc("content",N.ic(1,2,"EFT_Tooltip")),N.zb(2),N.Mc(" ",N.ic(3,4,"EFT")," "))}function Yo(t,e){if(1&t){const t=N.Tb();N.Sb(0,"ejs-grid",77,78),N.cc("actionBegin",function(e){return N.Bc(t),N.gc().actionBegin(e)})("actionComplete",function(e){return N.Bc(t),N.gc().actionComplete(e)})("rowDataBound",function(e){return N.Bc(t),N.gc().rowDB(e)})("toolbarClick",function(e){return N.Bc(t),N.gc().toolbarClick(e)})("dataBound",function(){return N.Bc(t),N.gc().dataBoundDone()})("recordDoubleClick",function(e){return N.Bc(t),N.gc().onDoubleClickDone(e)}),N.Sb(2,"e-columns"),N.Sb(3,"e-column",79),N.Ic(4,Wn,1,1,"ng-template",null,49,N.Jc),N.Ic(6,Yn,1,1,"ng-template",null,13,N.Jc),N.Rb(),N.Sb(8,"e-column",48),N.Ic(9,Xn,2,3,"ng-template",null,49,N.Jc),N.Rb(),N.Sb(11,"e-column",50),N.Ic(12,Zn,2,3,"ng-template",null,49,N.Jc),N.Ic(14,to,3,1,"ng-template",null,13,N.Jc),N.Rb(),N.Sb(16,"e-column",80),N.Ic(17,eo,2,3,"ng-template",null,49,N.Jc),N.Ic(19,io,1,1,"ng-template",null,13,N.Jc),N.Rb(),N.Sb(21,"e-column",81),N.Ic(22,no,4,6,"ng-template",null,49,N.Jc),N.Ic(24,so,2,2,"ng-template",null,13,N.Jc),N.Rb(),N.Sb(26,"e-column",82),N.Ic(27,co,4,6,"ng-template",null,49,N.Jc),N.Ic(29,ho,2,2,"ng-template",null,13,N.Jc),N.Rb(),N.Sb(31,"e-column",83),N.Ic(32,uo,4,6,"ng-template",null,49,N.Jc),N.Ic(34,Do,2,2,"ng-template",null,13,N.Jc),N.Rb(),N.Sb(36,"e-column",84),N.Ic(37,Co,4,6,"ng-template",null,49,N.Jc),N.Ic(39,No,2,2,"ng-template",null,13,N.Jc),N.Rb(),N.Sb(41,"e-column",85),N.Ic(42,Ao,4,6,"ng-template",null,49,N.Jc),N.Rb(),N.Sb(44,"e-column",86),N.Ic(45,Oo,4,6,"ng-template",null,49,N.Jc),N.Ic(47,Lo,2,2,"ng-template",null,13,N.Jc),N.Rb(),N.Sb(49,"e-column",87),N.Ic(50,_o,3,3,"ng-template",null,49,N.Jc),N.Ic(52,Ko,2,2,"ng-template",null,13,N.Jc),N.Rb(),N.Sb(54,"e-column",88),N.Ic(55,$o,3,3,"ng-template",null,49,N.Jc),N.Ic(57,Uo,2,2,"ng-template",null,13,N.Jc),N.Rb(),N.Sb(59,"e-column",89),N.Ic(60,Jo,3,3,"ng-template",null,49,N.Jc),N.Ic(62,qo,2,2,"ng-template",null,13,N.Jc),N.Rb(),N.Sb(64,"e-column",90),N.Ic(65,Vo,4,6,"ng-template",null,49,N.Jc),N.Rb(),N.Sb(67,"e-column",91),N.Ic(68,Wo,4,6,"ng-template",null,49,N.Jc),N.Rb(),N.Rb(),N.Rb()}if(2&t){const t=N.gc();N.mc("dataSource",t.doneData)("searchSettings",t.searchSettings)("allowExcelExport",!0)}}function Xo(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"Glue")," ")}function Zo(t,e){if(1&t){const t=N.Tb();N.Sb(0,"ejs-dropdownlist",110,111),N.cc("filtering",function(e){return N.Bc(t),N.gc(2).onFiltering(e)})("select",function(e){return N.Bc(t),N.gc(2).onChangeGlue(e)}),N.hc(2,"translate"),N.Rb()}if(2&t){const t=N.gc(2);N.mc("dataSource",t.Glue)("placeholder",N.ic(2,4,"Select glue"))("fields",t.fieldsBPFC)("allowFiltering",!0)}}function ta(t,e){if(1&t){const t=N.Tb();N.Sb(0,"div",99),N.Sb(1,"h4",100),N.Kc(2,"Addition"),N.Rb(),N.Sb(3,"button",101),N.cc("click",function(){return e.$implicit.dismiss("Cross click")}),N.Sb(4,"span",102),N.Kc(5,"\xd7"),N.Rb(),N.Rb(),N.Rb(),N.Sb(6,"div",103),N.Sb(7,"ejs-grid",104,105),N.cc("actionBegin",function(e){return N.Bc(t),N.gc().actionBeginAddition(e)})("actionComplete",function(e){return N.Bc(t),N.gc().actionComplete(e)})("toolbarClick",function(e){return N.Bc(t),N.gc().toolbarClick(e)})("recordDoubleClick",function(e){return N.Bc(t),N.gc().onDoubleClick(e)}),N.Sb(9,"e-columns"),N.Sb(10,"e-column",106),N.Ic(11,Xo,2,3,"ng-template",null,49,N.Jc),N.Ic(13,Zo,3,6,"ng-template",null,107,N.Jc),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Sb(15,"div",108),N.Sb(16,"button",109),N.cc("click",function(){return e.$implicit.close("Close click")}),N.Kc(17," Close "),N.Rb(),N.Rb()}if(2&t){const t=N.gc();N.zb(7),N.mc("dataSource",t.dataAddition)("searchSettings",t.searchSettings)("allowExcelExport",!0)("toolbar",t.toolbarAddition)("sortSettings",t.sortSettings)("editSettings",t.editSettings)}}function ea(t,e){1&t&&(N.Sb(0,"span",119),N.Kc(1,"Chemical"),N.Rb())}function ia(t,e){if(1&t&&(N.Sb(0,"span",120),N.Kc(1),N.Rb()),2&t){const t=e.$implicit;N.zb(1),N.Lc(t.ingredient_Name)}}function na(t,e){1&t&&(N.Sb(0,"span",119),N.Kc(1,"Amount"),N.Rb())}function oa(t,e){if(1&t&&(N.Sb(0,"span",120),N.Kc(1),N.Rb()),2&t){const t=e.$implicit;N.zb(1),N.Lc(t.amount)}}function aa(t,e){1&t&&(N.Sb(0,"span",119),N.Kc(1,"Time"),N.Rb())}function sa(t,e){if(1&t&&(N.Sb(0,"span",120),N.Kc(1),N.hc(2,"date"),N.Rb()),2&t){const t=e.$implicit;N.zb(1),N.Lc(N.jc(2,1,t.time_Start,"HH:mm:ss"))}}function ca(t,e){if(1&t&&(N.Sb(0,"div",99),N.Sb(1,"h3",112),N.Kc(2),N.Rb(),N.Sb(3,"button",101),N.cc("click",function(){return e.$implicit.dismiss("Cross click")}),N.Sb(4,"span",102),N.Kc(5,"\xd7"),N.Rb(),N.Rb(),N.Rb(),N.Sb(6,"div",103),N.Sb(7,"ejs-grid",113,114),N.Sb(9,"e-columns"),N.Sb(10,"e-column",115),N.Ic(11,ea,2,0,"ng-template",null,49,N.Jc),N.Ic(13,ia,2,1,"ng-template",null,13,N.Jc),N.Rb(),N.Sb(15,"e-column",116),N.Ic(16,na,2,0,"ng-template",null,49,N.Jc),N.Ic(18,oa,2,1,"ng-template",null,13,N.Jc),N.Rb(),N.Sb(20,"e-column",117),N.Ic(21,aa,2,0,"ng-template",null,49,N.Jc),N.Ic(23,sa,3,4,"ng-template",null,13,N.Jc),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Sb(25,"div",108),N.Sb(26,"button",118),N.cc("click",function(){return e.$implicit.close("Close click")}),N.Kc(27," Close "),N.Rb(),N.Rb()),2&t){const t=N.gc();N.zb(2),N.Nc("Mix ",t.glueMix_name," - Total Amount: ",t.total_amount,"kg"),N.zb(5),N.mc("dataSource",t.dataHistoryMixed)("searchSettings",t.searchSettings)("sortSettings",t.sortSettings)}}function la(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"Glue")," ")}function ra(t,e){if(1&t){const t=N.Tb();N.Sb(0,"ejs-dropdownlist",124,125),N.cc("filtering",function(e){return N.Bc(t),N.gc(2).onFilteringGlueDispatch(e)})("select",function(e){return N.Bc(t),N.gc(2).onChangeGlueDispatch(e)}),N.hc(2,"translate"),N.Rb()}if(2&t){const t=N.gc(2);N.mc("dataSource",t.glueDispatchList)("value",t.glueNameIDDispatch)("placeholder",N.ic(2,5,"Select glue"))("fields",t.fieldsBPFC)("allowFiltering",!0)}}function da(t,e){if(1&t){const t=N.Tb();N.Sb(0,"div",99),N.Sb(1,"h4",100),N.Kc(2,"Addition"),N.Rb(),N.Sb(3,"button",101),N.cc("click",function(){return e.$implicit.dismiss("Cross click")}),N.Sb(4,"span",102),N.Kc(5,"\xd7"),N.Rb(),N.Rb(),N.Rb(),N.Sb(6,"div",103),N.Sb(7,"ejs-grid",121,122),N.cc("actionBegin",function(e){return N.Bc(t),N.gc().actionBeginAdditionDispatch(e)}),N.Sb(9,"e-columns"),N.Sb(10,"e-column",123),N.Ic(11,la,2,3,"ng-template",null,49,N.Jc),N.Ic(13,ra,3,7,"ng-template",null,107,N.Jc),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Sb(15,"div",108),N.Sb(16,"button",109),N.cc("click",function(){return e.$implicit.close("Close click")}),N.Kc(17," Close "),N.Rb(),N.Rb()}if(2&t){const t=N.gc();N.zb(7),N.mc("dataSource",t.dataAdditionDispatch)("searchSettings",t.searchSettings)("allowExcelExport",!0)("toolbar",t.toolbarAdditionDispatch)("editSettings",t.editSettings)}}let ha=(()=>{class t{constructor(t,e,i,n,o,a,s,c,l,r,d,h){this.planService=t,this.buildingService=e,this.bottomFactoryService=i,this.alertify=n,this.modalService=o,this.dataService=a,this.route=s,this.router=c,this.datePipe=l,this.authService=r,this.spinner=d,this.todolistService=h,this.Glue=[],this.dataAddition=[],this.dataAdditionDispatch=[],this.dataHistoryMixed=[],this.fieldsBPFC={text:"name",value:"name"},this.AddGlueNameID=0,this.AddGlueID=0,this.AddEstimatedStartTime=new Date,this.AddEstimatedFinishTime=new Date,this.startWorkingTime=new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDay(),7,0,0),this.finishWorkingTime=new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDay(),16,30,0),this.toolbarAddition=["Add","Cancel"],this.toolbarAdditionDispatch=["Add","Cancel"],this.total_amount=null,this.glueMix_name=null,this.searchSettings={hierarchyMode:"Parent"},this.fieldsBuildings={text:"name",value:"id"},this.subscription=[],this.glueName="",this.todoTotal=0,this.doneTotal=0,this.total=0,this.percentageOfDone=0,this.doneTotalDispatch=0,this.dispatchTotal=0,this.todoDispatchTotal=0,this.delayDispatchTotal=0,this.percentageOfDoneDispatch=0,this.hasShowFullScreen=!0,this.delayTotal=0,this.RUBBER=Je.RUBBER,this.TODO="todo",this.DONE="done",this.DELAY="delay",this.DISPATCH="dispatch",this.DISPATCH_DELAY="dispatchDelay",this.EVA_UV="EVA_UV",this.tabs=[this.TODO,this.DONE,this.DELAY,this.DISPATCH,this.DISPATCH_DELAY,this.EVA_UV],this.current_Date_Time=this.datePipe.transform(new Date,"HH:mm"),this.doneDispatchTotal=0,this.onFilteringBuilding=t=>{let e=new B.h;e=""!==t.text?e.where("name","contains",t.text,!0):e,t.updateData(this.buildings,e)},this.onFiltering=t=>{let e=new B.h;e=""!==t.text?e.where("name","contains",t.text,!0):e},this.onFilteringGlueDispatch=t=>{let e=new B.h;e=""!==t.text?e.where("name","contains",t.text,!0):e};const u=JSON.parse(localStorage.getItem("level"));this.role=u,this.building=JSON.parse(localStorage.getItem("building")),this.buildingID=+localStorage.getItem("buildingID")}fullscreenchange(t){}ngOnDestroy(){this.subscription.forEach(t=>t.unsubscribe()),He.a.state===Ue.b.Connected&&He.a.stop().then().catch(t=>console.log(t))}ngAfterViewInit(){}ngOnInit(){this.focusDone=this.TODO,this.isShowTab=this.TODO,this.hasCloseScreen=!1,this.IsAdmin=!1,this.checkRole(),this.onEventHub(),this.gridConfig(),this.subscription.push(this.todolistService.getValue().subscribe(t=>{null!==t&&(this.buildingID=this.building[0].id,this.loadData())})),this.onRouteChange()}onEventHub(){He.a.state===Ue.b.Connected&&(He.a.on("ReloadTodo",()=>{this.isShowTab===this.TODO&&(this.loadData(),console.log("Reload Todo",""))}),He.a.on("ReloadDispatch",()=>{this.isShowTab===this.DISPATCH&&(this.loadData(),console.log("Reload dispatch",""))}))}onRouteChange(){this.route.data.subscribe(t=>{void 0!==this.route.snapshot.params.glueName&&(this.glueName=this.route.snapshot.params.glueName.includes("%2B")?this.route.snapshot.params.glueName.replace(/\%2B/g,"+"):this.route.snapshot.params.glueName),0===this.buildingID&&(this.glueName="");const e=this.route.snapshot.params.tab;switch(e){case this.TODO:case this.DELAY:case this.DONE:case this.DISPATCH:case this.DISPATCH_DELAY:case this.EVA_UV:this.isShowTab=e,this.focusDone=e,this.loadData()}})}getBuilding(t){this.buildingService.getBuildings().subscribe(e=>Object(R.a)(this,void 0,void 0,function*(){this.buildings=e.filter(t=>2===t.level),t()}));const e=+JSON.parse(localStorage.getItem("user")).User.ID;this.authService.getBuildingUserByUserID(e).subscribe(e=>{this.buildings=e.data,t()})}cancelRange(){const t=this.gridTodo.getSelectedRecords().map(t=>({id:t.id,lineNames:t.lineNames}));this.todolistService.cancelRange(t).subscribe(t=>{this.alertify.success("X\xf3a th\xe0nh c\xf4ng! <br> Success!")})}cancel(t){this.alertify.confirm("Cancel","B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n h\u1ee7y keo n\xe0y kh\xf4ng? Are you sure you want to get rid of this data?",()=>{this.todolistService.cancel({id:t.id,lineNames:t.lineNames}).subscribe(t=>{this.todo(),this.alertify.success("X\xf3a th\xe0nh c\xf4ng! <br> Success!")})})}onChangeBuilding(t){this.buildingID=t.itemData.id,this.buildingName=t.itemData.name;const e=JSON.stringify([t.itemData]);localStorage.setItem("buildingID",t.itemData.id),localStorage.setItem("building",e),localStorage.setItem("isSTF",t.itemData.isSTF),this.isSTF=t.itemData.isSTF,this.building=[t.itemData],this.loadData()}onSelectBuildingToDo(t){this.buildingID=t.itemData.id,this.buildingName=t.itemData.name;const e=JSON.stringify([t.itemData]);localStorage.setItem("buildingID",t.itemData.id),localStorage.setItem("building",e),this.building=[t.itemData],localStorage.setItem("isSTF",t.itemData.isSTF),this.isSTF=t.itemData.isSTF,this.loadData()}onSelectBuildingDelay(t){this.buildingID=t.itemData.id,this.buildingName=t.itemData.name,localStorage.setItem("buildingID",t.itemData.id);const e=JSON.stringify([t.itemData]);localStorage.setItem("building",e),this.building=[t.itemData],this.loadData()}onSelectBuildingDone(t){this.buildingID=t.itemData.id,this.buildingName=t.itemData.name,localStorage.setItem("buildingID",t.itemData.id);const e=JSON.stringify([t.itemData]);localStorage.setItem("building",e),this.building=[t.itemData],this.loadData()}loadData(){if(this.isSTF=JSON.parse(localStorage.getItem("isSTF")),!0===this.isSTF)switch(this.isShowTab){case this.TODO:this.todoSTF();break;case this.DELAY:this.undoneSTF();break;case this.DONE:this.doneSTF();break;case this.DISPATCH_DELAY:this.dispatchListDelaySTF();break;case this.DISPATCH:this.dispatchListSTF();break;case this.EVA_UV:this.EVA_UVList()}else switch(this.isShowTab){case this.TODO:this.todo();break;case this.DELAY:this.delay();break;case this.DONE:this.done();break;case this.DISPATCH_DELAY:this.dispatchListDelay();break;case this.DISPATCH:this.dispatchList();break;case this.EVA_UV:this.EVA_UVList()}}isWorkerRole(){return 4===this.role.id}isDispatcherRole(){return 6===this.role.id}isAdminRole(){return 1===this.role.id}isStaffRole(){return 3===this.role.id}isSupervisorRole(){return 2===this.role.id}checkRole(){switch(this.role.id){case 1:case 2:case 3:case 4:this.IsAdmin=!0;const t=+localStorage.getItem("buildingID");this.building=JSON.parse(localStorage.getItem("building")),this.getBuilding(0===t?()=>{this.alertify.message("Please select a building!",!0)}:()=>{this.buildingID=t,this.isShowTab=this.TODO,this.focusDone=this.TODO,this.loadData(),this.todoAddition(),this.dispatchAddition()});break;case 6:this.building=JSON.parse(localStorage.getItem("building")),this.getBuilding(()=>{this.buildingID=this.building[0].id,this.isShowTab=this.DISPATCH,this.focusDone=this.DISPATCH,this.loadData(),this.todoAddition(),this.dispatchAddition()})}}EVA_UVList(){this.bottomFactoryService.EVAUVList(this.buildingID).subscribe(t=>{this.EVAUVData=t.data,this.todoTotal=t.todoTotal,this.doneTotal=t.doneTotal,this.total=t.total,this.delayTotal=t.delayTotal,this.percentageOfDone=t.percentageOfDone,this.dispatchTotal=t.dispatchTotal,this.todoDispatchTotal=t.todoDispatchTotal,this.delayDispatchTotal=t.delayDispatchTotal,this.doneDispatchTotal=t.doneDispatchTotal,this.percentageOfDoneDispatch=t.percentageOfDoneDispatch})}dispatchList(){this.todolistService.dispatchList(this.buildingID).subscribe(t=>{this.dispatchData=t.data,this.todoTotal=t.todoTotal,this.doneTotal=t.doneTotal,this.total=t.total,this.delayTotal=t.delayTotal,this.percentageOfDone=t.percentageOfDone,this.dispatchTotal=t.dispatchTotal,this.todoDispatchTotal=t.todoDispatchTotal,this.delayDispatchTotal=t.delayDispatchTotal,this.doneDispatchTotal=t.doneDispatchTotal,this.percentageOfDoneDispatch=t.percentageOfDoneDispatch})}dispatchListDelay(){this.todolistService.dispatchListDelay(this.buildingID).subscribe(t=>{this.dispatchData=t.data,this.todoTotal=t.todoTotal,this.doneTotal=t.doneTotal,this.total=t.total,this.delayTotal=t.delayTotal,this.percentageOfDone=t.percentageOfDone,this.dispatchTotal=t.dispatchTotal,this.todoDispatchTotal=t.todoDispatchTotal,this.delayDispatchTotal=t.delayDispatchTotal,this.doneDispatchTotal=t.doneDispatchTotal,this.percentageOfDoneDispatch=t.percentageOfDoneDispatch})}todo(){this.todolistService.todo(this.buildingID).subscribe(t=>{this.data=t.data,this.todoTotal=t.todoTotal,this.doneTotal=t.doneTotal,this.total=t.total,this.delayTotal=t.delayTotal,this.percentageOfDone=t.percentageOfDone,this.dispatchTotal=t.dispatchTotal,this.todoDispatchTotal=t.todoDispatchTotal,this.delayDispatchTotal=t.delayDispatchTotal,this.doneDispatchTotal=t.doneDispatchTotal,this.percentageOfDoneDispatch=t.percentageOfDoneDispatch})}todoAddition(){this.todolistService.todoAddition(this.buildingID).subscribe(t=>{this.Glue=t.data.map(t=>{if(!1===t.abnormalStatus)return{id:t.id,planID:t.planID,name:`${t.glueName} | ${t.lineNames.join(",")}`,glueID:t.glueID,glueNameID:t.glueNameID,supplier:t.supplier,estimatedStartTime:t.estimatedStartTime,estimatedFinishTime:t.estimatedFinishTime}})})}dispatchAddition(){this.todolistService.dispatchAddition(this.buildingID).subscribe(t=>{this.glueDispatchList=t.data.map(t=>({id:t.id,planID:t.planID,name:`${t.glueName} | ${t.lineNames.join(",")}`,glueID:t.glueID,glueNameID:t.glueNameID,supplier:t.supplier,estimatedStartTime:t.estimatedStartTime,estimatedFinishTime:t.estimatedFinishTime}))})}delay(){this.todolistService.delay(this.buildingID).subscribe(t=>{this.data=t.data,this.todoTotal=t.todoTotal,this.doneTotal=t.doneTotal,this.delayTotal=t.delayTotal,this.total=t.total,this.percentageOfDone=t.percentageOfDone,this.dispatchTotal=t.dispatchTotal,this.todoDispatchTotal=t.todoDispatchTotal,this.delayDispatchTotal=t.delayDispatchTotal,this.doneDispatchTotal=t.doneDispatchTotal,this.percentageOfDoneDispatch=t.percentageOfDoneDispatch})}done(){this.todolistService.done(this.buildingID).subscribe(t=>{this.doneData=t.data,this.todoTotal=t.todoTotal,this.doneTotal=t.doneTotal,this.delayTotal=t.delayTotal,this.total=t.total,this.percentageOfDone=t.percentageOfDone,this.dispatchTotal=t.dispatchTotal,this.todoDispatchTotal=t.todoDispatchTotal,this.doneDispatchTotal=t.doneDispatchTotal,this.delayDispatchTotal=t.delayDispatchTotal,this.percentageOfDoneDispatch=t.percentageOfDoneDispatch})}gridConfig(){this.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},this.sortSettings={},this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"},this.toolbarOptions=["Search"]}dataBoundDone(){this.gridDone.autoFitColumns()}dataBound(){}createdDispatchGrid(){void 0!==this.glueName&&this.gridDispatch.search(this.glueName)}createdTodoGrid(){void 0!==this.glueName&&this.gridTodo.search(this.glueName)}cancelBtnGridTodoClick(t){switch(this.glueName="",this.isShowTab){case this.TODO:case this.DELAY:this.gridTodo.searchSettings.key="";break;case this.DISPATCH:case this.DISPATCH_DELAY:this.gridDispatch.searchSettings.key="";break;case this.DONE:this.gridDone.searchSettings.key=""}}createdToolbar(){}createdTodo(){const t=window.location.pathname;for(const r of this.tabs){if(t.includes("-2/"+r)){this.focusDone=r,this.isShowTab=r;break}this.focusDone=this.TODO,this.isShowTab=this.TODO}console.log("oninit",this.isShowTab,this.focusDone);const e=this.toolbarTodo.element,i=document.createElement("span");i.className="e-clear-icon",i.id=e.id+"clear",i.onclick=this.cancelBtnGridTodoClick.bind(this),e.querySelector(".e-toolbar-item .e-input-group").appendChild(i);const n=this.toolbarTodo.element.querySelector("#todo"),o=this.toolbarTodo.element.querySelector("#delay"),a=this.toolbarTodo.element.querySelector("#delayDispatchList"),s=this.toolbarTodo.element.querySelector("#dispatch"),c=this.toolbarTodo.element.querySelector("#done"),l=this.toolbarTodo.element.querySelector("#eva_uv");switch(this.isShowTab){case this.TODO:null==n||n.classList.add("todo"),null==o||o.classList.remove("todo"),null==a||a.classList.remove("todo"),null==s||s.classList.remove("todo"),null==c||c.classList.remove("todo"),null==l||l.classList.remove("todo");break;case this.DELAY:null==o||o.classList.add("todo"),null==n||n.classList.remove("todo"),null==n||n.classList.remove("todo"),null==c||c.classList.remove("todo"),null==s||s.classList.remove("todo"),null==l||l.classList.remove("todo");break;case this.DISPATCH:null==s||s.classList.add("todo"),null==n||n.classList.remove("todo"),null==o||o.classList.remove("todo"),null==c||c.classList.remove("todo"),null==a||a.classList.remove("todo"),null==l||l.classList.remove("todo");break;case this.DISPATCH_DELAY:null==a||a.classList.add("todo"),null==n||n.classList.remove("todo"),null==o||o.classList.remove("todo"),null==c||c.classList.remove("todo"),null==s||s.classList.remove("todo"),null==l||l.classList.remove("todo");break;case this.DONE:null==c||c.classList.add("todo"),null==n||n.classList.remove("todo"),null==o||o.classList.remove("todo"),null==s||s.classList.remove("todo"),null==a||a.classList.remove("todo"),null==l||l.classList.remove("todo");break;case this.EVA_UV:null==l||l.classList.add("todo"),null==n||n.classList.remove("todo"),null==o||o.classList.remove("todo"),null==s||s.classList.remove("todo"),null==a||a.classList.remove("todo"),null==c||c.classList.remove("todo")}null!==n&&(n.onclick=()=>{null==n||n.classList.add("todo"),null==o||o.classList.remove("todo"),null==a||a.classList.remove("todo"),null==c||c.classList.remove("todo"),null==s||s.classList.remove("todo"),null==l||l.classList.remove("todo")}),null!==o&&(o.onclick=()=>{null==o||o.classList.add("todo"),null==n||n.classList.remove("todo"),null==n||n.classList.remove("todo"),null==c||c.classList.remove("todo"),null==s||s.classList.remove("todo"),null==l||l.classList.remove("todo")}),null!==s&&(s.onclick=()=>{null==s||s.classList.add("todo"),null==n||n.classList.remove("todo"),null==o||o.classList.remove("todo"),null==c||c.classList.remove("todo"),null==a||a.classList.remove("todo"),null==l||l.classList.remove("todo")}),null!==a&&(a.onclick=()=>{null==a||a.classList.add("todo"),null==n||n.classList.remove("todo"),null==o||o.classList.remove("todo"),null==c||c.classList.remove("todo"),null==s||s.classList.remove("todo"),null==l||l.classList.remove("todo")}),null!==c&&(c.onclick=()=>{null==c||c.classList.add("todo"),null==n||n.classList.remove("todo"),null==o||o.classList.remove("todo"),null==s||s.classList.remove("todo"),null==a||a.classList.remove("todo"),null==l||l.classList.remove("todo")}),null!==l&&(l.onclick=()=>{null==l||l.classList.add("todo"),null==n||n.classList.remove("todo"),null==o||o.classList.remove("todo"),null==a||a.classList.remove("todo"),null==c||c.classList.remove("todo"),null==s||s.classList.remove("todo")})}searchDone(t){this.focusDone===this.DONE?this.gridDone.search(this.glueName):this.focusDone===this.TODO||this.focusDone===this.DELAY?this.gridTodo.search(this.glueName):this.focusDone===this.DISPATCH||this.focusDone===this.DISPATCH_DELAY?this.gridDispatch.search(this.glueName):this.focusDone===this.EVA_UV&&this.gridEVAUV.search(this.glueName)}onClickToolbarTop(t){const e=t.originalEvent.target.closest("button");switch(this.glueName="",null==e?void 0:e.id){case"excelExport":this.spinner.show(),this.todolistService.exportExcel(this.buildingID).subscribe(t=>{new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});const e=window.URL.createObjectURL(t),i=document.createElement("a");i.href=e;const n=new Date;i.download=`${n.getFullYear()}${n.getMonth()}${n.getDay()}_DoneList.xlsx`,i.click(),this.spinner.hide()});break;case"excelExport2":this.spinner.show(),this.todolistService.exportExcel2(this.buildingID).subscribe(t=>{new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});const e=window.URL.createObjectURL(t),i=document.createElement("a");i.href=e;const n=new Date;i.download=`${n.getFullYear()}${n.getMonth()}${n.getDay()}_DoneList(new).xlsx`,i.click(),this.spinner.hide()})}}onClickToolbar(t){const e=t.originalEvent.target.closest("button");switch(this.glueName="",null==e?void 0:e.id){case"addition":this.openAddition();break;case"done":this.isShowTab=this.DONE,this.focusDone=this.DONE,this.done(),this.router.navigate([`/ec/execution/todolist-2/${this.DONE}/${this.glueName}`]);break;case"todo":this.isShowTab=this.TODO,this.focusDone=this.TODO,this.todo(),this.router.navigate([`/ec/execution/todolist-2/${this.TODO}/${this.glueName}`]);break;case"delay":this.isShowTab=this.DELAY,this.focusDone=this.DELAY,this.delay(),this.router.navigate([`/ec/execution/todolist-2/${this.DELAY}/${this.glueName}`]);break;case"delayDispatchList":this.isShowTab=this.DISPATCH_DELAY,this.focusDone=this.DISPATCH_DELAY,this.dispatchListDelay(),this.router.navigate([`/ec/execution/todolist-2/${this.DISPATCH_DELAY}/${this.glueName}`]);break;case"dispatch":this.isShowTab=this.DISPATCH,this.focusDone=this.DISPATCH,this.dispatchList(),this.router.navigate([`/ec/execution/todolist-2/${this.DISPATCH}/${this.glueName}`]);break;case"eva_uv":this.isShowTab=this.EVA_UV,this.focusDone=this.EVA_UV,this.EVA_UVList(),this.router.navigate([`/ec/execution/todolist-2/${this.EVA_UV}/${this.glueName}`]);break;case"excelExport":this.spinner.show(),this.todolistService.exportExcel(this.buildingID).subscribe(t=>{new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});const e=window.URL.createObjectURL(t),i=document.createElement("a");i.href=e,i.download="doneListReport.xlsx",i.click(),this.spinner.hide()});break;case"excelExport2":this.spinner.show(),this.todolistService.exportExcel2(this.buildingID).subscribe(t=>{new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});const e=window.URL.createObjectURL(t),i=document.createElement("a");i.href=e,i.download="report(new).xlsx",i.click(),this.spinner.hide()})}}toolbarClick(t){switch(t.item.id){case"Done":this.isShowTab=this.DONE,this.done();break;case"Undone":this.isShowTab=this.TODO,this.todo();break;case"Delay":this.isShowTab=this.DELAY,this.todo();break;case"Dispatch":this.isShowTab=this.DISPATCH,this.dispatchList()}}actionComplete(t){var e;"beginEdit"===t.requestType&&(null===(e=this.setFocus)||void 0===e?void 0:e.field)&&t.form.elements.namedItem("quantity").focus()}onDoubleClick(t){this.setFocus=t.column}rowDB(t){!0===t.data.abnormalStatus&&t.row.classList.add("bgcolor")}rowDBDispatch(t){const e=t.data;t.row.classList.add(!0===e.abnormalStatus?"color-code-abnormal":"color-code-"+e.colorCode)}rowDBDispatchDelay(t){const e=t.data;t.row.classList.add(!0===e.abnormalStatus?"color-code-abnormal":"color-code-"+e.colorCode)}onDoubleClickDone(t){"deliveredAmount"===t.column.field&&this.openDispatchModalDoneList(t.rowData),"mixedConsumption"===t.column.field&&this.openMixHistory(t.rowData)}openMixHistory(t){this.modalReference=this.modalService.open(this.historyMixed,{size:"lg",backdrop:"static",keyboard:!1}),this.todolistService.MixedHistory(t.mixingInfoID).subscribe(e=>{this.glueMix_name=t.glueName,this.total_amount=t.mixedConsumption,e.status&&(this.dataHistoryMixed=e.result)})}actionBegin(t){"save"===t.requestType&&"edit"===t.action&&(t.data.quantity!==t.previousData.quantity||(t.cancel=!0))}onBeforeRender(t,e,i){const n=this.tooltip.filter((t,e)=>e===+i)[0];n.content="Loading...",n.dataBind(),this.planService.getBPFCByGlue(e.glueName).subscribe(t=>{n.content=t.join("<br>"),n.dataBind()})}goToStir(t){null!==t.finishMixingTime?this.router.navigate([`/ec/execution/todolist-2/stir/${this.isShowTab}/${t.mixingInfoID}/${t.glueName}`]):this.alertify.warning("H\xe3y th\u1ef1c hi\u1ec7n b\u01b0\u1edbc tr\u1ed9n keo tr\u01b0\u1edbc!",!0)}goToShake(t){return this.router.navigate([`/ec/execution/todolist-2/shake/${this.isShowTab}/${t.mixingInfoID}`])}goToMixing(t){return[`/ec/execution/todolist-2/mixing/${this.isShowTab}/${t.glueID}/${t.estimatedStartTime}/${t.estimatedFinishTime}/${t.standardConsumption}`]}openDispatchModal(t){if(null===t.printTime&&t.glueName.includes(" + "))return void this.alertify.warning("H\xe3y th\u1ef1c hi\u1ec7n b\u01b0\u1edbc in keo tr\u01b0\u1edbc!",!0);if(0===t.mixingInfoID&&!t.glueName.includes(" + "))return void this.alertify.warning("H\xe3y th\u1ef1c hi\u1ec7n b\u01b0\u1edbc in keo tr\u01b0\u1edbc!<br> Please perform glue printing first!",!0);const e=this.modalService.open(Ni,{size:"xl",backdrop:"static",keyboard:!1});e.componentInstance.value=t,e.result.then(t=>{},t=>{this.todolistService.setValue(!0)})}openDispatchModalDoneList(t){if(null===t.printTime&&t.glueName.includes(" + "))return void this.alertify.warning("H\xe3y th\u1ef1c hi\u1ec7n b\u01b0\u1edbc in keo tr\u01b0\u1edbc!",!0);if(0===t.mixingInfoID&&!t.glueName.includes(" + "))return void this.alertify.warning("H\xe3y th\u1ef1c hi\u1ec7n b\u01b0\u1edbc in keo tr\u01b0\u1edbc!<br> Please perform glue printing first!",!0);const e=this.modalService.open(bi,{size:"xl",backdrop:"static",keyboard:!1});e.componentInstance.value=t,e.result.then(t=>{},t=>{this.todolistService.setValue(!0)})}openPrintModal(t){this.todolistService.findPrintGlue(t.mixingInfoID).subscribe(e=>{if(0===(null==e?void 0:e.id)&&t.glueName.includes(" + "))return void this.alertify.error("Please mixing this glue first!",!0);const i=this.modalService.open(ti,{size:"md",backdrop:"static",keyboard:!1});i.componentInstance.data=e,i.componentInstance.value=t,i.result.then(t=>{},t=>{})})}openPrintModalDispatchList(t){const e=this.modalService.open(Ci,{size:"md",backdrop:"static",keyboard:!1});e.componentInstance.value=t,e.result.then(t=>{},t=>{})}lockDispatch(t){return""}openFullscreen(){const t=this.divRef.nativeElement;t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen(),this.hasCloseScreen=!0,this.hasShowFullScreen=!1}closeFullscreen(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&window.top.document.msExitFullscreen(),this.hasCloseScreen=!1,this.hasShowFullScreen=!0}reloadPage(){this.router.navigateByUrl("/TodolistComponent",{skipLocationChange:!0}).then(()=>{this.router.navigate(["/ec/execution/todolist-2/"+this.isShowTab])})}onChangeGlue(t){this.AddGlueNameID=t.itemData.glueNameID,this.AddGlueID=t.itemData.glueID,this.AddEstimatedStartTime=t.itemData.estimatedStartTime,this.AddEstimatedFinishTime=t.itemData.estimatedFinishTime,this.startWorkingTime=new Date(t.itemData.estimatedStartTime),this.finishWorkingTime=new Date(t.itemData.estimatedFinishTime)}onChangeGlueDispatch(t){this.glueNameIDDispatch=t.itemData.glueNameID}actionBeginAddition(t){"save"===t.requestType&&this.todolistService.addition(this.AddGlueNameID,this.buildingID,this.AddEstimatedStartTime,this.AddEstimatedFinishTime).subscribe(e=>{e?(this.alertify.success(e.message),this.modalReference.dismiss(),this.loadData()):(this.alertify.error(e.message),t.cancel=!0)})}actionBeginAdditionDispatch(t){"save"===t.requestType&&this.todolistService.additionDispatch(this.glueNameIDDispatch).subscribe(()=>{this.alertify.success("Success!"),this.modalReference.dismiss(),this.dataAdditionDispatch=[],this.loadData()},e=>{this.alertify.error(e),t.cancel=!0,this.dataAdditionDispatch=[]})}openAddition(){this.modalReference=this.modalService.open(this.addition,{size:"lg",backdrop:"static",keyboard:!1})}openAdditionDispatch(){this.modalReference=this.modalService.open(this.additionDispatch,{size:"lg",backdrop:"static",keyboard:!1})}openDispatchEVAUV(t){const e=this.modalService.open(ze,{size:"lg",backdrop:"static",keyboard:!1});e.componentInstance.data=t,e.result.then(t=>{},t=>{})}openSubpackage(t){const e=this.modalService.open(Be.a,{size:"lg",backdrop:"static",keyboard:!1});e.componentInstance.data=t,e.result.then(t=>{},t=>{})}doneSTF(){this.bottomFactoryService.done(this.buildingID).subscribe(t=>{this.doneData=t.data,this.todoTotal=t.todoTotal,this.doneTotal=t.doneTotal,this.delayTotal=t.delayTotal,this.total=t.total,this.percentageOfDone=t.percentageOfDone,this.dispatchTotal=t.dispatchTotal,this.todoDispatchTotal=t.todoDispatchTotal,this.doneDispatchTotal=t.doneDispatchTotal,this.delayDispatchTotal=t.delayDispatchTotal,this.percentageOfDoneDispatch=t.percentageOfDoneDispatch})}todoSTF(){this.bottomFactoryService.todo(this.buildingID).subscribe(t=>{this.data=t.data,this.todoTotal=t.todoTotal,this.doneTotal=t.doneTotal,this.total=t.total,this.delayTotal=t.delayTotal,this.percentageOfDone=t.percentageOfDone,this.dispatchTotal=t.dispatchTotal,this.todoDispatchTotal=t.todoDispatchTotal,this.delayDispatchTotal=t.delayDispatchTotal,this.doneDispatchTotal=t.doneDispatchTotal,this.percentageOfDoneDispatch=t.percentageOfDoneDispatch})}undoneSTF(){this.bottomFactoryService.delay(this.buildingID).subscribe(t=>{this.data=t.data,this.todoTotal=t.todoTotal,this.doneTotal=t.doneTotal,this.delayTotal=t.delayTotal,this.total=t.total,this.percentageOfDone=t.percentageOfDone,this.dispatchTotal=t.dispatchTotal,this.todoDispatchTotal=t.todoDispatchTotal,this.delayDispatchTotal=t.delayDispatchTotal,this.doneDispatchTotal=t.doneDispatchTotal,this.percentageOfDoneDispatch=t.percentageOfDoneDispatch})}dispatchListSTF(){this.bottomFactoryService.dispatchList(this.buildingID).subscribe(t=>{this.dispatchData=t.data,this.todoTotal=t.todoTotal,this.doneTotal=t.doneTotal,this.total=t.total,this.delayTotal=t.delayTotal,this.percentageOfDone=t.percentageOfDone,this.dispatchTotal=t.dispatchTotal,this.todoDispatchTotal=t.todoDispatchTotal,this.delayDispatchTotal=t.delayDispatchTotal,this.doneDispatchTotal=t.doneDispatchTotal,this.percentageOfDoneDispatch=t.percentageOfDoneDispatch})}dispatchListDelaySTF(){this.bottomFactoryService.dispatchListDelay(this.buildingID).subscribe(t=>{this.dispatchData=t.data,this.todoTotal=t.todoTotal,this.doneTotal=t.doneTotal,this.total=t.total,this.delayTotal=t.delayTotal,this.percentageOfDone=t.percentageOfDone,this.dispatchTotal=t.dispatchTotal,this.todoDispatchTotal=t.todoDispatchTotal,this.delayDispatchTotal=t.delayDispatchTotal,this.doneDispatchTotal=t.doneDispatchTotal,this.percentageOfDoneDispatch=t.percentageOfDoneDispatch})}}return t.\u0275fac=function(e){return new(e||t)(N.Mb(gt.a),N.Mb(O.a),N.Mb(Ne.a),N.Mb(A.a),N.Mb(l.b),N.Mb(mt.a),N.Mb(x.a),N.Mb(x.c),N.Mb(n.d),N.Mb(pt.a),N.Mb(a.c),N.Mb(bt.a))},t.\u0275cmp=N.Gb({type:t,selectors:[["app-todolist"]],viewQuery:function(t,e){if(1&t&&(N.Gc(Ai,!0),N.Gc(Oi,!0),N.Gc(Pi,!0),N.Qc(Ei,!0),N.Qc(Li,!0),N.Qc(_i,!0),N.Qc(Fi,!0),N.Qc(ji,!0),N.Qc(Ki,!0),N.Qc($i,!0),N.Qc(zi,!0),N.Qc(Hi,!0),N.Qc(Ui,!0),N.Qc(Ji,!0),N.Qc(Gi,!0),N.Qc(Qi,!0),N.Qc(qi,!0),N.Qc(Vi,!0)),2&t){let t;N.xc(t=N.dc())&&(e.historyMixed=t.first),N.xc(t=N.dc())&&(e.addition=t.first),N.xc(t=N.dc())&&(e.additionDispatch=t.first),N.xc(t=N.dc())&&(e.toolbar=t.first),N.xc(t=N.dc())&&(e.toolbarTodo=t.first),N.xc(t=N.dc())&&(e.toolbarDone=t.first),N.xc(t=N.dc())&&(e.toolbarDelay=t.first),N.xc(t=N.dc())&&(e.toolbarDispatch=t.first),N.xc(t=N.dc())&&(e.toolbarDispatchDelay=t.first),N.xc(t=N.dc())&&(e.gridEVAUV=t.first),N.xc(t=N.dc())&&(e.gridDone=t.first),N.xc(t=N.dc())&&(e.gridAdditionDispatch=t.first),N.xc(t=N.dc())&&(e.gridTodo=t.first),N.xc(t=N.dc())&&(e.gridDelay=t.first),N.xc(t=N.dc())&&(e.gridDispatch=t.first),N.xc(t=N.dc())&&(e.gridDispatchDelay=t.first),N.xc(t=N.dc())&&(e.divRef=t.first),N.xc(t=N.dc())&&(e.tooltip=t)}},hostBindings:function(t,e){1&t&&N.cc("fullscreenchange",function(t){return e.fullscreenchange(t)})},features:[N.yb([n.d])],decls:60,vars:36,consts:[["type","square-jelly-box","size","medium",3,"fullScreen"],[1,"loading"],[1,"card"],["fullScreen",""],[1,"control-section","e-tbar-section"],[1,"e-sample-resize-container"],[3,"created","clicked"],["toolbar",""],["prefixIcon","fa fa-cut",3,"tooltipText",4,"ngIf"],["id","excelExport","prefixIcon","fa fa-file-excel-o",3,"text"],["id","excelExport2","prefixIcon","fa fa-file-excel-o",3,"text"],["type","Separator"],["prefixIcon","e-copy-icon tb-icons",3,"tooltipText"],["template",""],["prefixIcon","e-bold-icon tb-icons","tooltipText","Bold"],["toolbarTodo",""],["id","todo","prefixIcon","fa fa-tasks",3,"text"],["id","eva_uv","prefixIcon","fa fa-tasks",3,"text",4,"ngIf"],["id","delay","prefixIcon","fa fa-clock",3,"text"],["id","dispatch","prefixIcon","fa fa-check",3,"text"],["id","delayDispatchList","prefixIcon","fa fa-clock",3,"text"],["id","done","prefixIcon","fa fa-check",3,"text"],["align","right"],[1,"card-body","p-0"],["id","gridTodo","showColumnMenu","true","allowSorting","true","allowResizing","true","gridLines","Both","height","600",3,"dataSource","searchSettings","allowExcelExport","actionBegin","actionComplete","rowDataBound","toolbarClick","created","dataBound","recordDoubleClick",4,"ngIf"],["id","gridDispatch","showColumnMenu","true","allowSorting","true","allowResizing","true","gridLines","Both","height","600",3,"dataSource","searchSettings","allowExcelExport","actionBegin","actionComplete","toolbarClick","created","dataBound","rowDataBound","recordDoubleClick",4,"ngIf"],["id","gridEVAUV","showColumnMenu","true","allowSorting","true","allowResizing","true","gridLines","Both","height","600",3,"dataSource","searchSettings","allowExcelExport","actionBegin","actionComplete","toolbarClick","created","dataBound","rowDataBound","recordDoubleClick",4,"ngIf"],["id","gridDone","showColumnMenu","true","allowSorting","true","allowResizing","true","gridLines","Both","height","600",3,"dataSource","searchSettings","allowExcelExport","actionBegin","actionComplete","rowDataBound","toolbarClick","dataBound","recordDoubleClick",4,"ngIf"],["addition",""],["historyMixed",""],["additionDispatch",""],["prefixIcon","fa fa-cut",3,"tooltipText"],["type","button",1,"e-tbar-btn","e-tbtn-txt","e-control","e-btn","e-lib",3,"click"],[1,"e-btn-icon","e-icons","e-icon-left","fas","fa-plus"],[1,"e-tbar-btn-text"],[1,"e-btn-icon","e-icons","e-icon-left","fas","fa-refresh"],["class","e-tbar-btn e-tbtn-txt e-control e-btn e-lib",3,"click",4,"ngIf"],[1,"e-tbar-btn","e-tbtn-txt","e-control","e-btn","e-lib",3,"click"],[1,"e-btn-icon","e-icons","e-icon-left","fa","fa-expand-arrows-alt"],[1,"e-btn-icon","e-icons","e-icon-left","fas","fa-compress-arrows-alt"],["placeholder","Select a building",3,"dataSource","fields","allowFiltering","value","filtering","change","select"],["id","eva_uv","prefixIcon","fa fa-tasks",3,"text"],["aria-disabled","false","title","Search",1,"e-toolbar-item","e-search-wrapper","e-toolbar-right"],["role","search",1,"e-input-group","e-search"],["id","toolbar_searchbar","autocomplete","off","placeholder","Search",1,"e-input",2,"width","178px",3,"ngModel","ngModelChange","change"],["id","toolbar_searchbutton","tabindex","-1","title","Search","aria-label","search",1,"e-input-group-icon","fa","fa-search","e-icons"],["id","gridTodo","showColumnMenu","true","allowSorting","true","allowResizing","true","gridLines","Both","height","600",3,"dataSource","searchSettings","allowExcelExport","actionBegin","actionComplete","rowDataBound","toolbarClick","created","dataBound","recordDoubleClick"],["gridTodo",""],["field","supplier","headerText","Supplier","width","100","textAlign","Center"],["headerTemplate",""],["field","glueName","headerText","Glue","width","170","textAlign","Left"],["field","lines","headerText","Line","width","300","textAlign","Left"],["field","estimatedStartTime","type","date","format","HH:mm","headerText","EST","width","100","textAlign","Center"],["field","estimatedFinishTime","type","date","format","HH:mm","headerText","EFT","width","100","textAlign","Center"],["field","option","headerText","Option","width","220","textAlign","Center"],["position","RightCenter","content","loading...",1,"fix-css",3,"beforeRender"],["tooltip",""],[3,"content"],[4,"ngIf"],["style","text-align: left;",4,"ngIf"],[2,"text-align","left"],[1,"btn-group"],["type","button","class","btn btn-sm btn-success",3,"ngClass","routerLink",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fa","fa-print"],["type","button",1,"btn","btn-sm","btn-success",3,"ngClass","routerLink"],[1,"fa","fa-glass"],["type","button","class","btn btn-sm btn-warning ml-1",3,"ngClass","click",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-warning","ml-1",3,"ngClass","click"],[1,"fa","fa-fan"],["type","button",1,"btn","btn-sm","btn-warning","ml-1",3,"click"],["id","gridDispatch","showColumnMenu","true","allowSorting","true","allowResizing","true","gridLines","Both","height","600",3,"dataSource","searchSettings","allowExcelExport","actionBegin","actionComplete","toolbarClick","created","dataBound","rowDataBound","recordDoubleClick"],["gridDispatch",""],["type","button",1,"btn","btn-sm","btn-info","ml-1",3,"ngClass","click"],[1,"fas","fa-balance-scale"],["id","gridEVAUV","showColumnMenu","true","allowSorting","true","allowResizing","true","gridLines","Both","height","600",3,"dataSource","searchSettings","allowExcelExport","actionBegin","actionComplete","toolbarClick","created","dataBound","rowDataBound","recordDoubleClick"],["type","button",1,"btn","btn-sm","btn-info","ml-1",3,"click"],["id","gridDone","showColumnMenu","true","allowSorting","true","allowResizing","true","gridLines","Both","height","600",3,"dataSource","searchSettings","allowExcelExport","actionBegin","actionComplete","rowDataBound","toolbarClick","dataBound","recordDoubleClick"],["gridDone",""],["field","jobType","headerText","Job Type","width","100","textAlign","Center"],["field","lines","headerText","Line","width","170","textAlign","Left"],["field","startMixingTime","type","date","format","HH:mm","headerText","SMT","width","160","textAlign","Center"],["field","finishMixingTime","type","date","format","HH:mm","headerText","FMT","width","160","textAlign","Center"],["field","startStirTime","type","date","format","HH:mm","headerText","SST","width","160","textAlign","Center"],["field","finishStirTime","type","date","format","HH:mm","headerText","FST","width","160","textAlign","Center"],["field","printTime","type","date","format","HH:mm","headerText","PT","width","160","textAlign","Center"],["field","dispatchTime","type","date","format","HH:mm","headerText","SDT","width","160","textAlign","Center"],["field","standardConsumption","headerText","Std. Con.","width","100","textAlign","Center"],["field","mixedConsumption","headerText","Mixed. Con.","width","100","textAlign","Center"],["field","deliveredAmount","headerText","Delivered. Con.","width","100","textAlign","Center"],["field","estimatedStartTime","type","date","format","HH:mm","headerText","EST","width","160","textAlign","Center"],["field","estimatedFinishTime","type","date","format","HH:mm","headerText","EFT","width","160","textAlign","Center"],[4,"ngIf","ngIfElse"],["second",""],["third",""],["four",""],["content","Standard Consumption"],["content","Mixing Consumption"],["content","Delivered Consumption"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["showColumnMenu","true","allowSorting","true","allowResizing","true","gridLines","Both",3,"dataSource","searchSettings","allowExcelExport","toolbar","sortSettings","editSettings","actionBegin","actionComplete","toolbarClick","recordDoubleClick"],["gridAddition",""],["field","name","headerText","Glue Name","width","290","textAlign","Center"],["editTemplate",""],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["popupHeight","300px","popupWidth","450px",3,"dataSource","placeholder","fields","allowFiltering","filtering","select"],["bpfcDropdownlist",""],[1,"modal-title",2,"color","red"],["showColumnMenu","true","allowSorting","true","allowResizing","true","gridLines","Both",3,"dataSource","searchSettings","sortSettings"],["gridMixedHistory",""],["field","ingredient_Name","headerText","Chemical","width","200","textAlign","Center"],["field","amount","headerText","Amount","width","120","textAlign","Center"],["field","endTime","type","date","headerText","Time","width","120","textAlign","Center"],["type","button",1,"btn","btn-success",3,"click"],[2,"color","red","font-size","20px"],[2,"font-size","20px"],["showColumnMenu","true","allowSorting","true","allowResizing","true","gridLines","Both",3,"dataSource","searchSettings","allowExcelExport","toolbar","editSettings","actionBegin"],["gridAdditionDispatch",""],["field","bpfcName","headerText","Glue Name","width","290","textAlign","Center"],["popupHeight","300px","popupWidth","450px",3,"dataSource","value","placeholder","fields","allowFiltering","filtering","select"],["additionDispatchDropdownlist",""]],template:function(t,e){1&t&&(N.Sb(0,"ngx-spinner",0),N.Sb(1,"p",1),N.Kc(2,"Loading data..."),N.Rb(),N.Rb(),N.Sb(3,"div",2,3),N.Sb(5,"div",4),N.Sb(6,"div",5),N.Sb(7,"ejs-toolbar",6,7),N.cc("created",function(){return e.createdToolbar()})("clicked",function(t){return e.onClickToolbarTop(t)}),N.Sb(9,"e-items"),N.Ic(10,Yi,4,3,"e-item",8),N.Nb(11,"e-item",9),N.hc(12,"translate"),N.Nb(13,"e-item",10),N.hc(14,"translate"),N.Nb(15,"e-item",11),N.Sb(16,"e-item",12),N.hc(17,"translate"),N.Ic(18,Xi,5,3,"ng-template",null,13,N.Jc),N.Rb(),N.Sb(20,"e-item"),N.Ic(21,en,2,2,"ng-template",null,13,N.Jc),N.Rb(),N.Nb(23,"e-item",11),N.Sb(24,"e-item",14),N.Ic(25,nn,1,4,"ng-template",null,13,N.Jc),N.Rb(),N.Rb(),N.Rb(),N.Sb(27,"ejs-toolbar",6,15),N.cc("created",function(){return e.createdTodo()})("clicked",function(t){return e.onClickToolbar(t)}),N.Sb(29,"e-items"),N.Nb(30,"e-item",16),N.hc(31,"translate"),N.Ic(32,on,1,1,"e-item",17),N.Nb(33,"e-item",18),N.hc(34,"translate"),N.Nb(35,"e-item",11),N.Nb(36,"e-item",19),N.hc(37,"translate"),N.Nb(38,"e-item",20),N.hc(39,"translate"),N.Nb(40,"e-item",11),N.Nb(41,"e-item",21),N.hc(42,"translate"),N.Sb(43,"e-item",22),N.Ic(44,an,4,1,"ng-template",null,13,N.Jc),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Sb(46,"div",23),N.Ic(47,Rn,31,3,"ejs-grid",24),N.Rb(),N.Sb(48,"div",23),N.Ic(49,_n,27,3,"ejs-grid",25),N.Rb(),N.Sb(50,"div",23),N.Ic(51,Vn,31,3,"ejs-grid",26),N.Rb(),N.Sb(52,"div",23),N.Ic(53,Yo,70,3,"ejs-grid",27),N.Rb(),N.Rb(),N.Ic(54,ta,18,6,"ng-template",null,28,N.Jc),N.Ic(56,ca,28,5,"ng-template",null,29,N.Jc),N.Ic(58,da,18,5,"ng-template",null,30,N.Jc),N.Rb()),2&t&&(N.mc("fullScreen",!1),N.zb(10),N.mc("ngIf",e.isShowTab===e.TODO),N.zb(1),N.nc("text",N.ic(12,20,"Report")),N.zb(2),N.oc("text","",N.ic(14,22,"Report")," 2"),N.zb(3),N.nc("tooltipText",N.ic(17,24,"Refresh Todolist")),N.zb(14),N.pc("text"," ",N.ic(31,26,"Todo")," (",e.todoTotal,")"),N.zb(2),N.mc("ngIf",e.isSTF),N.zb(1),N.pc("text"," ",N.ic(34,28,"UNDONE")," (",e.delayTotal,")"),N.zb(3),N.pc("text","",N.ic(37,30,"Dispatch")," (",e.todoDispatchTotal,")"),N.zb(2),N.pc("text"," ",N.ic(39,32,"Delay")," (",e.delayDispatchTotal,")"),N.zb(3),N.pc("text"," ",N.ic(42,34,"Done")," (",e.doneTotal,")"),N.zb(6),N.mc("ngIf",e.isShowTab==e.TODO||e.isShowTab==e.DELAY),N.zb(2),N.mc("ngIf",e.isShowTab==e.DISPATCH||e.isShowTab==e.DISPATCH_DELAY),N.zb(2),N.mc("ngIf",e.isShowTab==e.EVA_UV),N.zb(2),N.mc("ngIf",e.isShowTab==e.DONE))},directives:[a.a,D.c,D.b,n.n,D.a,c.c,o.b,o.g,o.j,v.j,d.d,C.d,C.b,v.e,v.b,d.c,C.c,C.a,v.d,v.a,f.b,n.l,x.d],pipes:[p.c,n.d],styles:[".e-icons[_ngcontent-%COMP%]   .e-columnmenu[_ngcontent-%COMP%]{color:#fff}.e-tooltip-wrap[_ngcontent-%COMP%]   .e-tip-content[_ngcontent-%COMP%]{color:#fff;font-size:16px;font-weight:700}.e-headercelldiv[_ngcontent-%COMP%]{font-size:12px!important}.e-grid[_ngcontent-%COMP%]   .e-headercell[_ngcontent-%COMP%]   ejs-tooltip[_ngcontent-%COMP%]{font-weight:700!important}.cursor-pointer[_ngcontent-%COMP%]{pointer-events:none!important}.delay[_ngcontent-%COMP%], .dispatch[_ngcontent-%COMP%], .dispatch-delay[_ngcontent-%COMP%], .done[_ngcontent-%COMP%], .todo[_ngcontent-%COMP%]{background:#545b62!important;box-shadow:none!important;color:#f8f9fa!important}.delay[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], .dispatch-delay[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], .dispatch[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], .done[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], .todo[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#f8f9fa!important}#gridDone[_ngcontent-%COMP%] > .e-grid[_ngcontent-%COMP%]   .e-altrow[_ngcontent-%COMP%], #gridTodo[_ngcontent-%COMP%] > .e-grid[_ngcontent-%COMP%]   .e-altrow[_ngcontent-%COMP%]{background-color:#d6d8db!important}.color-code-0[_ngcontent-%COMP%]{background-color:#ddebf7}.color-code-1[_ngcontent-%COMP%]{background-color:#fff2cc}.color-code-2[_ngcontent-%COMP%]{background-color:#e2efda}.color-code-3[_ngcontent-%COMP%]{background-color:#c9c9c9}.color-code-4[_ngcontent-%COMP%]{background-color:#fce4d6}.color-code-5[_ngcontent-%COMP%], .color-code-6[_ngcontent-%COMP%]{background-color:#ffb6c1}.bgcolor[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .color-code-abnormal[_ngcontent-%COMP%]{background-color:#a5a549}"]}),t})();var ua=i("h9f+");const ga=["barcode"],ba=["grid"];function pa(t,e){if(1&t&&N.Nb(0,"ejs-qrcodegenerator",18,19),2&t){const t=e.$implicit,i=N.gc();N.mc("displayText",i.displayTextMethod)("value",t.code)}}function ma(t,e){1&t&&N.Kc(0),2&t&&N.Mc(" ",e.$implicit.realTotal," kg ")}function fa(t,e){if(1&t&&(N.Kc(0),N.hc(1,"date")),2&t){const t=e.$implicit;N.Mc(" ","0001-01-01T00:00:00"===t.expiredTime?"N/A":N.jc(1,1,t.expiredTime,"dd/MM/yyyy HH:mm")," ")}}let Sa=(()=>{class t{constructor(t,e,i,n,o,a){this.route=t,this.alertify=e,this.datePipe=i,this.buildingUserService=n,this.makeGlueService=o,this.spinner=a,this.toolbarOptions=["ExcelExport","Search","Print QR Code"],this.pageSettings={pageCount:20,pageSizes:!0,pageSize:5},this.displayTextMethod={visibility:!1}}ngOnInit(){const t=JSON.parse(localStorage.getItem("building"));this.building=t,this.filterSettings={type:"Excel"},this.onRouteChange()}onRouteChange(){this.route.data.subscribe(t=>{this.glueID=this.route.snapshot.params.glueID,this.getUsers()})}configurePrint(t){const e=window.open("","_blank","left=0,top=0,width=1000,height=900,toolbar=0,scrollbars=0,status=0");e.document.write(`\n    <html>\n      <head>\n      </head>\n      <style>\n        * {\n          box-sizing: border-box;\n          -moz-box-sizing: border-box;\n        }\n\n        .content {\n          page-break-after: always;\n          clear: both;\n        }\n\n        .content .qrcode {\n          float:left;\n          width: 100px;\n          margin-top: 10px;\n          padding: 0;\n          margin-left: 0px;\n        }\n\n        .content .info {\n          float:left;\n          list-style: none;\n          width: 200px;\n        }\n        .content .info ul {\n          float:left;\n          list-style: none;\n          padding: 0px;\n          margin: 0px;\n          margin-top: 20px;\n          font-weight: bold;\n          word-wrap: break-word;\n        }\n\n        @page {\n          size: 2.65 1.20 in;\n          page-break-after: always;\n          margin: 0;\n        }\n        @media print {\n          html, body {\n            width: 90mm; // Chi co nhan millimeter\n          }\n        }\n      </style>\n      <body onload="window.print(); window.close()">\n        ${t}\n      </body>\n    </html>\n    `),e.document.close()}printData(){const t=this.grid.getSelectedRecords();if(t.length>0){let e="";for(const i of t){let t;this.barcode.forEach(e=>{e.value===i.code&&(t=e.element)});const n="0001-01-01T00:00:00"===i.expiredTime?"N/A":this.datePipe.transform(new Date(i.expiredTime),"yyyyMMdd HH:mm");e+=`\n       <div class='content'>\n        <div class='qrcode'>\n         ${t.innerHTML}\n         </div>\n          <div class='info'>\n          <ul>\n              <li class='subInfo'>Name: ${i.glue}</li>\n              <li class='subInfo'>QR Code: ${i.code}</li>\n              <li class='subInfo'>Batch: ${i.batchA}</li>\n              <li class='subInfo'>MFG: ${this.datePipe.transform(new Date(i.createdTime),"yyyyMMdd HH:mm")}</li>\n              <li class='subInfo'>EXP: ${n}</li>\n          </ul>\n         </div>\n      </div>\n      `}this.configurePrint(e)}else this.alertify.warning("Please select some glue first!",!0)}getUsers(){this.spinner.show(),this.buildingUserService.getAllUsers(1,1e3).subscribe(t=>{const e=t.result.map(t=>({ID:t.ID,Username:t.Username,Email:t.Email}));this.users=e,this.getMixingInfoByGlueID(this.glueID)})}username(t){var e;return null===(e=this.users.find(e=>e.ID===t))||void 0===e?void 0:e.Username}getMixingInfoByGlueID(t){this.makeGlueService.getMixingInfoByGlueID(t,this.building.id).subscribe(t=>{this.data=t.map(t=>({code:t.code,createdTime:new Date(t.createdTime),expiredTime:t.expiredTime,glue:t.glue.name,mixBy:this.username(t.mixBy),realTotal:+parseFloat(t.realTotal).toFixed(3),batchA:t.batchA})),this.spinner.hide()})}count(t){return Number(t)+1}toolbarClick(t){switch(t.item.text){case"Excel Export":this.grid.excelExport();break;case"Print QR Code":this.printData()}}formatDate(t){const e=new Date(t);return e.toLocaleDateString()+" "+e.toLocaleTimeString()}}return t.\u0275fac=function(e){return new(e||t)(N.Mb(x.a),N.Mb(A.a),N.Mb(n.d),N.Mb(ua.a),N.Mb(Qe.a),N.Mb(a.c))},t.\u0275cmp=N.Gb({type:t,selectors:[["app-glue-history"]],viewQuery:function(t,e){if(1&t&&(N.Qc(ga,!0),N.Qc(ba,!0),N.Qc(ga,!0)),2&t){let t;N.xc(t=N.dc())&&(e.qrCode=t.first),N.xc(t=N.dc())&&(e.grid=t.first),N.xc(t=N.dc())&&(e.barcode=t)}},features:[N.yb([n.d])],decls:26,vars:7,consts:[["type","square-jelly-box","size","medium",3,"fullScreen"],[1,"loading"],[1,"row"],[1,"col-md-12"],[1,"card"],["height","450px","gridLines","Both","allowFiltering","true","showColumnMenu","true",3,"toolbar","dataSource","allowSorting","filterSettings","allowExcelExport","toolbarClick"],["grid",""],["type","checkbox","isPrimaryKey","true","width","60"],["field","code","headerText","QR Code","width","200","textAlign","Center"],["template",""],["field","glue","headerText","Glue Name","width","200","textAlign","Center"],["field","batchA","headerText","Batch","width","100","textAlign","Center"],["field","realTotal","headerText","Real Total","width","100","textAlign","Center"],["field","mixBy","headerText","Mix By","width","100","textAlign","Center"],["field","expiredTime","headerText","Expired Time","type","date","format","dd/MM/yyyy HH:mm","width","200","textAlign","Center"],["field","createdTime","headerText","Created Time","type","date","format","dd/MM/yyyy HH:mm","width","200","textAlign","Center"],[1,"card-footer"],[1,"float-right"],["width","100px","height","130px","mode","SVG",2,"display","block",3,"displayText","value"],["barcode",""]],template:function(t,e){1&t&&(N.Sb(0,"ngx-spinner",0),N.Sb(1,"p",1),N.Kc(2,"Loading data..."),N.Rb(),N.Rb(),N.Sb(3,"div",2),N.Sb(4,"div",3),N.Sb(5,"div",4),N.Sb(6,"ejs-grid",5,6),N.cc("toolbarClick",function(t){return e.toolbarClick(t)}),N.Sb(8,"e-columns"),N.Nb(9,"e-column",7),N.Sb(10,"e-column",8),N.Ic(11,pa,2,2,"ng-template",null,9,N.Jc),N.Rb(),N.Nb(13,"e-column",10),N.Nb(14,"e-column",11),N.Sb(15,"e-column",12),N.Ic(16,ma,1,1,"ng-template",null,9,N.Jc),N.Rb(),N.Nb(18,"e-column",13),N.Sb(19,"e-column",14),N.Ic(20,fa,2,4,"ng-template",null,9,N.Jc),N.Rb(),N.Nb(22,"e-column",15),N.Rb(),N.Rb(),N.Rb(),N.Sb(23,"div",16),N.Sb(24,"p",17),N.Kc(25),N.Rb(),N.Rb(),N.Rb(),N.Rb()),2&t&&(N.mc("fullScreen",!1),N.zb(6),N.mc("toolbar",e.toolbarOptions)("dataSource",e.data)("allowSorting",!0)("filterSettings",e.filterSettings)("allowExcelExport",!0),N.zb(19),N.Mc("",null==e.data?null:e.data.length," items"))},directives:[a.a,v.j,d.d,C.d,C.b,v.e,v.b,d.c,C.c,C.a,v.d,v.a,r.e],pipes:[n.d],styles:[""]}),t})(),va=(()=>{class t{constructor(t){this.http=t,this.baseUrl=ct.a.apiUrlEC,this.ModalNameSource=new st.a(0),this.currentModalName=this.ModalNameSource.asObservable()}getAllshake(){return this.http.get(this.baseUrl+"shake/GetAll",{})}getShakesByMixingInfoID(t){return this.http.get(this.baseUrl+"shake/GetShakesByMixingInfoID/"+t,{})}create(t){return this.http.post(this.baseUrl+"shake/Create",t)}update(t){return this.http.put(this.baseUrl+"shake/Update",t)}delete(t){return this.http.delete(this.baseUrl+"shake/Delete/"+t)}generateShakes(t){return this.http.get(this.baseUrl+"shake/GenerateShakes/"+t,{})}}return t.\u0275fac=function(e){return new(e||t)(N.Zb(b.b))},t.\u0275prov=N.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function ya(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"Glue Type")," ")}function Da(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"Standard Cycle")," ")}function Ca(t,e){if(1&t&&N.Kc(0),2&t){const t=e.$implicit;N.Mc(" ",0===t.standardCycle?"N/A":t.standardCycle," ")}}function Ta(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"Actual Cycle")," ")}function wa(t,e){if(1&t&&N.Kc(0),2&t){const t=e.$implicit;N.Mc(" ",0===t.actualCycle?"N/A":t.actualCycle," ")}}function Ia(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"Start Time")," ")}function xa(t,e){if(1&t&&(N.Kc(0),N.hc(1,"date")),2&t){const t=e.$implicit;N.Mc(" ",null===t.startTime?"N/A":N.jc(1,1,t.startTime,"HH:mm")," ")}}function Ra(t,e){1&t&&(N.Kc(0),N.hc(1,"date")),2&t&&N.Mc(" ",N.jc(1,1,e.$implicit.startTime,"HH:mm")," ")}function Ma(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"End Time")," ")}function ka(t,e){if(1&t&&(N.Kc(0),N.hc(1,"date")),2&t){const t=e.$implicit;N.Mc(" ",null===t.endTime?"N/A":N.jc(1,1,t.endTime,"HH:mm")," ")}}function Ba(t,e){1&t&&(N.Kc(0),N.hc(1,"date")),2&t&&N.Mc(" ",N.jc(1,1,e.$implicit.endTime,"HH:mm")," ")}function Na(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"Status")," ")}function Aa(t,e){1&t&&N.Kc(0),2&t&&N.Mc(" ",!0===e.$implicit.status?"pass":"Failed"," ")}let Oa=(()=>{class t{constructor(t,e,i,n){this.alertify=t,this.shakeService=e,this.route=i,this.router=n,this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"},this.option="Default"}ngOnInit(){this.onRouteChange()}onRouteChange(){this.route.data.subscribe(t=>{void 0!==this.route.snapshot.params.glueName&&(this.glueName=this.route.snapshot.params.glueName.includes("%2B")?this.route.snapshot.params.glueName.replace(/\%2B/g,"+"):this.route.snapshot.params.glueName),this.tab=this.route.snapshot.params.tab,this.mixingInfoID=this.route.snapshot.params.mixingInfoID,this.getShakesByMixingInfoID()})}finish(){}actionBegin(t){}getShakesByMixingInfoID(){this.shakeService.getShakesByMixingInfoID(this.mixingInfoID).subscribe(t=>{t.status?this.shakesData=t.data||[]:this.alertify.error(t.message)},t=>{this.alertify.error("L\u1ed7i m\u1ea1ng ho\u1eb7c m\xe1y ch\u1ee7 \u0111\xe3 b\u1ecb t\u1eaft!")})}back(){this.router.navigate(["/ec/execution/todolist-2/"+this.tab])}}return t.\u0275fac=function(e){return new(e||t)(N.Mb(A.a),N.Mb(va),N.Mb(x.a),N.Mb(x.c))},t.\u0275cmp=N.Gb({type:t,selectors:[["app-shake"]],decls:52,vars:12,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row","pt-2"],[1,"col-md-12"],["allowResizing","true","gridLines","Both",3,"dataSource","editSettings","actionBegin"],["grid",""],["field","chemicalType","headerText","Chemical Type","width","100","textAlign","Center"],["headerTemplate",""],["field","standardCycle","headerText","Standard Cycle","width","200","textAlign","Center"],["template",""],["field","actualCycle","headerText","Actual Cycle","width","200","textAlign","Center"],["field","startTime","headerText","Start Time","width","100","textAlign","Center"],["editTemplate",""],["field","endTime","headerText","End Time","width","100","textAlign","Center"],["field","status","headerText","Status","width","200","textAlign","Center"],[1,"text-center","my-1"],["type","button",1,"btn","btn-primary","rounded-pill",3,"click"],[1,"fa","fa-arrow-circle-left"],["type","button",1,"btn","btn-success","rounded-pill","ml-2",3,"click"],[1,"fas","fa-save"]],template:function(t,e){1&t&&(N.Sb(0,"div",0),N.Sb(1,"div",1),N.Sb(2,"h4"),N.Kc(3),N.hc(4,"translate"),N.Rb(),N.Rb(),N.Sb(5,"div",2),N.Sb(6,"div",3),N.Sb(7,"div",4),N.Sb(8,"ejs-grid",5,6),N.cc("actionBegin",function(t){return e.actionBegin(t)}),N.Sb(10,"e-columns"),N.Sb(11,"e-column",7),N.Ic(12,ya,2,3,"ng-template",null,8,N.Jc),N.Rb(),N.Sb(14,"e-column",9),N.Ic(15,Da,2,3,"ng-template",null,8,N.Jc),N.Ic(17,Ca,1,1,"ng-template",null,10,N.Jc),N.Rb(),N.Sb(19,"e-column",11),N.Ic(20,Ta,2,3,"ng-template",null,8,N.Jc),N.Ic(22,wa,1,1,"ng-template",null,10,N.Jc),N.Rb(),N.Sb(24,"e-column",12),N.Ic(25,Ia,2,3,"ng-template",null,8,N.Jc),N.Ic(27,xa,2,4,"ng-template",null,10,N.Jc),N.Ic(29,Ra,2,4,"ng-template",null,13,N.Jc),N.Rb(),N.Sb(31,"e-column",14),N.Ic(32,Ma,2,3,"ng-template",null,8,N.Jc),N.Ic(34,ka,2,4,"ng-template",null,10,N.Jc),N.Ic(36,Ba,2,4,"ng-template",null,13,N.Jc),N.Rb(),N.Sb(38,"e-column",15),N.Ic(39,Na,2,3,"ng-template",null,8,N.Jc),N.Ic(41,Aa,1,1,"ng-template",null,13,N.Jc),N.Rb(),N.Rb(),N.Rb(),N.Sb(43,"div",16),N.Sb(44,"button",17),N.cc("click",function(){return e.back()}),N.Nb(45,"i",18),N.Kc(46),N.hc(47,"translate"),N.Rb(),N.Sb(48,"button",19),N.cc("click",function(){return e.finish()}),N.Nb(49,"i",20),N.Kc(50),N.hc(51,"translate"),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Rb()),2&t&&(N.zb(3),N.Nc(" ",N.ic(4,6,"Shake")," ",e.glueName," "),N.zb(5),N.mc("dataSource",e.shakesData)("editSettings",e.editSettings),N.zb(38),N.Mc(" ",N.ic(47,8,"BACK")," "),N.zb(4),N.Mc(" ",N.ic(51,10,"FINISHED")," "))},directives:[v.j,d.d,C.d,C.b,v.e,v.b,d.c,C.c,C.a,v.d,v.a],pipes:[p.c,n.d],styles:[""]}),t})();var Pa=i("KLU1");new b.e({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")});let Ea=(()=>{class t{constructor(t){this.http=t,this.baseUrl=ct.a.apiUrlEC}getStirInfo(t){return this.http.get(`${this.baseUrl}Stir/GetStirInfo/${t}`)}getRPM(t){return this.http.get(`${this.baseUrl}Stir/GetRPM/${t}`)}getRPMByMachineCode(t,e,i){return this.http.get(`${this.baseUrl}Stir/GetRPMByMachineCode/${t}/${e}/${i}`)}getStirByMixingInfoID(t){return this.http.get(`${this.baseUrl}Stir/getStirByMixingInfoID/${t}`)}create(t){return this.http.post(this.baseUrl+"Stir/Create",t)}update(t){return this.http.put(this.baseUrl+"Stir/Update",t)}scanMachine(t,e){return this.http.get(`${this.baseUrl}Stir/scanMachine/${t}/${e}`,{})}updateStartScanTime(t){return this.http.put(`${this.baseUrl}Stir/UpdateStartScanTime/${t}`,{})}}return t.\u0275fac=function(e){return new(e||t)(N.Zb(b.b))},t.\u0275prov=N.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const La=["grid"];function _a(t,e){if(1&t&&(N.Sb(0,"div",20),N.Sb(1,"b",19),N.Kc(2),N.hc(3,"translate"),N.Rb(),N.Kc(4),N.hc(5,"date"),N.Rb()),2&t){const t=N.gc();N.zb(2),N.Mc("",N.ic(3,2,"Start Scan Time"),": "),N.zb(2),N.Mc(" ",N.jc(5,4,t.startScanTime,"HH:mm:ss")," ")}}function Fa(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"SEQ_LABEL")," ")}function ja(t,e){if(1&t&&(N.Sb(0,"span",19),N.Kc(1),N.hc(2,"translate"),N.Rb()),2&t){const t=e.$implicit,i=N.gc();N.zb(1),N.Nc(" ",N.ic(2,2,"SEQ_LABEL")," ",i.NO(t.index),"")}}function Ka(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"Glue Type")," ")}function $a(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"Standard Duration")," ")}function za(t,e){1&t&&N.Kc(0),2&t&&N.Mc("",e.$implicit.standardDuration," s")}function Ha(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"Actual Duration")," ")}function Ua(t,e){1&t&&N.Kc(0),2&t&&N.Mc("",e.$implicit.actualDuration," s")}function Ja(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"START_TIME_LABEL")," ")}function Ga(t,e){if(1&t&&(N.Kc(0),N.hc(1,"date")),2&t){const t=e.$implicit;N.Mc(" ","0001-01-01T00:00:00"!==t.startTime?N.jc(1,1,t.startTime,"hh:mm:ss"):"#N/A","")}}function Qa(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"END_TIME_LABEL")," ")}function qa(t,e){if(1&t&&(N.Kc(0),N.hc(1,"date")),2&t){const t=e.$implicit;N.Mc(" ","0001-01-01T00:00:00"!==t.endTime?N.jc(1,1,t.endTime,"hh:mm:ss"):"#N/A","")}}function Va(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"STATUS_LABEL_STIR")," ")}function Wa(t,e){if(1&t&&(N.Sb(0,"span"),N.Kc(1),N.Rb()),2&t){const t=e.$implicit;N.Bb(!0===t.status?"badge badge-success":"badge badge-danger"),N.zb(1),N.Lc(!0===t.status?"Pass":"fail")}}function Ya(t,e){1&t&&(N.Kc(0),N.hc(1,"translate")),2&t&&N.Mc(" ",N.ic(1,1,"OPTION")," ")}function Xa(t,e){if(1&t){const t=N.Tb();N.Sb(0,"div",36),N.Sb(1,"button",37),N.cc("click",function(){N.Bc(t);const e=N.gc().$implicit;return N.gc().confirmData(e)}),N.Nb(2,"i",38),N.Kc(3," Confirm"),N.Rb(),N.Rb()}if(2&t){const t=N.gc().$implicit,e=N.gc();N.zb(1),N.mc("disabled",t.mixingStatus===e.NA||t.mixingStatus===e.NOT_STIRRED_YET)}}function Za(t,e){if(1&t&&N.Ic(0,Xa,4,1,"div",35),2&t){const t=e.$implicit;N.mc("ngIf",!1===t.status&&0===t.actualDuration)}}function ts(t,e){1&t&&(N.Qb(0),N.Sb(1,"button",55),N.Kc(2),N.hc(3,"translate"),N.Rb(),N.Pb()),2&t&&(N.zb(2),N.Mc("",N.ic(3,1,"Ok"),"k"))}function es(t,e){1&t&&(N.Sb(0,"button",56),N.Kc(1),N.hc(2,"translate"),N.Rb()),2&t&&(N.zb(1),N.Lc(N.ic(2,1,"Invalid")))}function is(t,e){if(1&t){const t=N.Tb();N.Sb(0,"button",57),N.cc("click",function(){return N.Bc(t),N.gc(2).updateStir()}),N.Kc(1),N.hc(2,"translate"),N.Rb()}2&t&&(N.zb(1),N.Lc(N.ic(2,1,"Confirm")))}function ns(t,e){if(1&t){const t=N.Tb();N.Sb(0,"div",39),N.Sb(1,"h4",40),N.Nb(2,"i",41),N.Kc(3),N.hc(4,"translate"),N.Rb(),N.Sb(5,"button",42),N.cc("click",function(){return e.$implicit.dismiss("Cross click")}),N.Sb(6,"span",43),N.Kc(7,"\xd7"),N.Rb(),N.Rb(),N.Rb(),N.Sb(8,"div",44),N.Sb(9,"div",6),N.Sb(10,"div",45),N.Sb(11,"label"),N.Kc(12,"AVG RPM: "),N.Rb(),N.Rb(),N.Sb(13,"div",46),N.Nb(14,"input",47),N.Rb(),N.Rb(),N.Sb(15,"div",6),N.Sb(16,"div",45),N.Sb(17,"label"),N.Kc(18),N.hc(19,"translate"),N.Rb(),N.Rb(),N.Sb(20,"div",46),N.Sb(21,"input",48),N.cc("valueChange",function(e){return N.Bc(t),N.gc().totalMinutes=e}),N.Rb(),N.Rb(),N.Rb(),N.Sb(22,"div",6),N.Sb(23,"div",45),N.Sb(24,"label"),N.Kc(25),N.hc(26,"translate"),N.Rb(),N.Rb(),N.Sb(27,"div",46),N.Ic(28,ts,4,3,"ng-container",49),N.Ic(29,es,3,3,"ng-template",null,50,N.Jc),N.Rb(),N.Rb(),N.Sb(31,"div",6),N.Sb(32,"div",51),N.Ic(33,is,3,3,"button",52),N.Rb(),N.Rb(),N.Rb(),N.Sb(34,"div",53),N.Sb(35,"button",54),N.cc("click",function(){return e.$implicit.close("Close click")}),N.Kc(36,"Close"),N.Rb(),N.Rb()}if(2&t){const t=N.yc(30),e=N.gc();N.zb(3),N.Mc(" ",N.ic(4,8,"Stiring Information Details")," "),N.zb(11),N.mc("value",e.rpm),N.zb(4),N.Mc("",N.ic(19,10,"Minutes"),": "),N.zb(3),N.mc("value",e.totalMinutes),N.zb(4),N.Mc("",N.ic(26,12,"Status"),": "),N.zb(3),N.mc("ngIf",e.status)("ngIfElse",t),N.zb(5),N.mc("ngIf",0===e.stir.rpm)}}let os=(()=>{class t{constructor(t,e,i,n,o,a,s,c,l,r){this.route=t,this.modalService=e,this.alertify=i,this.datePipe=n,this.ingredientService=o,this.settingService=a,this.stirService=s,this.router=c,this.todolistService=l,this.translate=r,this.ADMIN=1,this.SUPERVISOR=2,this.STIRRED=1,this.NOT_STIRRED_YET=0,this.NA=2,this.filterSettings={type:"Excel"},this.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},this.toolbarOptions=["ExcelExport","Search"],this.value="",this.dateValue="",this.Envalue="",this.interval=1,this.customFormat="HH:mm:ss a",this.ingredients=[],this.timeStir=0,this.settingData=[],this.rpm=0,this.minutes=0,this.totalMinutes=0,this.stirData=[],this.standardRPM=0,this.duration=0,this.startScanTime=null,this.subject=new M.a,this.subscription=[]}ngOnDestroy(){this.subscription.forEach(t=>t.unsubscribe())}ngOnInit(){this.building=JSON.parse(localStorage.getItem("building")),this.role=JSON.parse(localStorage.getItem("level")),this.startStiringTime=new Date,this.getAllSetting(),this.onRouteChange(),this.checkQRCode()}checkQRCode(){this.subscription.push(this.subject.pipe(Object(k.a)(500)).subscribe(t=>Object(R.a)(this,void 0,void 0,function*(){try{this.stirData.every(t=>t.actualDuration>0);const e=t.QRCode,i=yield this.scanQrCode(e);this.qrCode=e;const n={id:0,glueName:this.glueName,settingID:i.id,mixingInfoID:this.mixingInfoID,startScanTime:new Date,startStiringTime:new Date};0===this.stirData.length?yield this.create(n):yield this.updateStartScanTime(this.mixingInfoID);const o=yield this.getStirByMixingInfoID(this.mixingInfoID);this.stirData=o,this.getStandardRPMAndDuration()}catch(e){this.alertify.error("QR Code invalid!",!0)}})))}onRouteChange(){this.route.data.subscribe(t=>{this.glueName=this.route.snapshot.params.glueName,this.mixingInfoID=this.route.snapshot.params.mixingInfoID,this.tab=this.route.snapshot.params.tab,this.loadData()})}toolbarClick(t){switch(t.item.text){case"ExcelExport":this.grid.excelExport()}}onChange(t,e,i){this.settingID=t.target.checked?+t.target.value:null;const n="0001-01-01T00:00:00",o=new Date,a=new Date;this.startStiringTime=new Date,a.setMinutes(o.getMinutes()+3);for(const s in this.glues)if(this.glues[s].id===e.id){if(0==+t.target.value){this.glues[s].startTime=n,this.glues[s].endTime=n,this.glues[s].settingID=t.target.checked?0:null;break}this.glues[s].startTime=t.target.checked?o:n,this.glues[s].endTime=t.target.checked?a:n,this.glues[s].settingID=this.settingID;break}this.grid.refresh()}getStirInfo(t){return this.stirService.getStirInfo(t).toPromise()}getRPM(t){return this.stirService.getRPM(t).toPromise()}getRPMByMachineCode(t,e,i){return this.stirService.getRPMByMachineCode(t,e,i).toPromise()}loadStir(){return Object(R.a)(this,void 0,void 0,function*(){try{const t=(yield this.getStirInfo(this.glueName)).map(t=>({id:t.id,stirID:t.stirID,glueName:t.glueName,qty:t.qty,createdTime:t.createdTime,mixingStatus:t.mixingStatus,startTime:t.startTime,endTime:t.endTime,settingID:t.settingID,status:t.status,totalMinutes:t.totalMinutes,rpm:t.rpm,setting:t.setting,glueType:t.glueType,machineType:t.machineType}));this.glues=t}catch(t){this.alertify.error(t+"")}})}loadRPM(t){return Object(R.a)(this,void 0,void 0,function*(){try{const e=yield this.getRPM(t);if(0===e.rpm)return this.alertify.warning("Kh\xf4ng t\xecm th\u1ea5y rpm trong kho\u1ea3n th\u1eddi gian n\xe0y!",!0),void this.modalReference.close();this.stir.stirID>0&&this.stir.rpm>0?(this.rpm=this.stir.rpm,this.minutes=this.stir.totalMinutes,this.totalMinutes=this.stir.totalMinutes):(this.rpm=e.rpm,this.minutes=e.minutes,this.totalMinutes=e.totalMinutes),this.status=this.rpm>=this.stir.setting.minRPM&&this.rpm<=this.stir.setting.maxRPM}catch(e){this.alertify.error(e+"")}})}loadRPMByMachineCode(t,e,i){return Object(R.a)(this,void 0,void 0,function*(){try{const n=yield this.getRPMByMachineCode(t,e,i);if(0===n.rpm)return this.alertify.warning("Can not find the RPM at this moment!!! <br> Kh\xf4ng t\xecm th\u1ea5y RPM trong kho\u1ea3n th\u1eddi gian n\xe0y!",!0),void this.modalReference.close();this.rpm=n.rpm,this.minutes=n.minutes,this.totalMinutes=n.totalMinutes}catch(n){this.alertify.error(n+"")}})}stirGlue(t){const e=new Date,i=new Date;this.startStiringTime=new Date,i.setMinutes(e.getMinutes()+3),this.finishStiringTime=new Date;const n=this.settingData.filter(e=>e.glueTypeID===t.glueType.id)[0],o={id:0,rpm:0,totalMinutes:0,status:!1,glueName:t.glueName,settingID:null==n?void 0:n.id,mixingInfoID:t.id,startTime:this.datePipe.transform(e,"yyyy-MM-dd HH:mm:ss"),endTime:this.datePipe.transform(i,"yyyy-MM-dd HH:mm:ss"),startStiringTime:this.startStiringTime,finishStiringTime:this.finishStiringTime};this.settingService.AddStir(o).subscribe(e=>{this.todolistService.updateStartStirTimeByMixingInfoID(t.id).subscribe(()=>{this.alertify.success("Success"),this.loadStir()},t=>{})})}confirm(t){this.todolistService.updateFinishStirTimeByMixingInfoID(t.id).subscribe(()=>{this.alertify.success("Success"),this.loadStir()},t=>{})}saveStir(t){if(null===t.settingID&&!1===t.x)return void this.alertify.warning("Please select glue type radio button first!!!<br> H\xe3y ch\u1ecdn lo\u1ea1i keo tr\u01b0\u1edbc!!!",!0);const e=new Date,i=new Date;this.startStiringTime=new Date,i.setMinutes(e.getMinutes()+3),this.finishStiringTime=new Date;const n={id:0,rpm:0,totalMinutes:0,status:this.status,glueName:t.glueName,settingID:0===t.settingID?null:t.settingID,mixingInfoID:t.id,startTime:this.datePipe.transform(e,"yyyy-MM-dd HH:mm:ss"),endTime:this.datePipe.transform(i,"yyyy-MM-dd HH:mm:ss"),startStiringTime:this.startStiringTime,finishStiringTime:this.finishStiringTime};this.settingService.AddStir(n).subscribe(t=>{this.alertify.success("Success"),this.loadStir()})}dataBound(){}updateStir(){this.settingService.updateStir({id:this.stir.stirID,rpm:this.rpm,totalMinutes:this.totalMinutes,status:this.status,glueName:this.stir.glueName,settingID:this.stir.settingID,mixingInfoID:this.stir.mixingInfoID,startTime:this.stir.startTime,endTime:this.stir.endTime}).subscribe(t=>{this.alertify.success("Success"),this.modalReference.close(),this.loadStir()})}getAllSetting(){let t=this.building.id;[this.ADMIN,this.SUPERVISOR].includes(this.role.id)&&(t=8);const e={building:null,buildingID:8,id:0,machineCode:"",machineType:"X",maxRPM:350,minRPM:250,name:null};this.settingService.getSettingByBuilding(t).subscribe(t=>{this.settingData=t,this.settingData.push(e)})}NO(t){return(this.grid.pageSettings.currentPage-1)*this.grid.pageSettings.pageSize+Number(t)+1}showModal(t,e){return Object(R.a)(this,void 0,void 0,function*(){this.stir=e,this.modalReference=this.modalService.open(t,{size:"lg"}),yield this.loadRPM(e.stirID)})}onNgModelChangeScanQRCode(t){return Object(R.a)(this,void 0,void 0,function*(){this.subject.next({QRCode:t,ingredient:null})})}onNgModelChangeScanQRCode2(t){return Object(R.a)(this,void 0,void 0,function*(){if(3===t.length)try{this.stirData.every(t=>t.actualDuration>0);const e=yield this.scanQrCode(t);this.qrCode=t;const i={id:0,glueName:this.glueName,settingID:e.id,mixingInfoID:this.mixingInfoID,startScanTime:new Date,startStiringTime:new Date};0===this.stirData.length?yield this.create(i):yield this.updateStartScanTime(this.mixingInfoID);const n=yield this.getStirByMixingInfoID(this.mixingInfoID);this.stirData=n,this.getStandardRPMAndDuration()}catch(e){this.alertify.error("QR Code invalid!",!0)}else this.alertify.warning("The QR Code is incorrect format <br> M\xe3 QR sai \u0111\u1ecbnh d\u1ea1ng c\u1ee7a h\u1ec7 th\u1ed1ng!",!0)})}confirmData(t){return Object(R.a)(this,void 0,void 0,function*(){if("0001-01-01T00:00:00"!==t.startScanTime){{const e=(new Date).getTime(),i=t.standardDuration>0?t.standardDuration:60*t.glueType.minutes,n=new Date(t.startScanTime);if(e<n.setSeconds(n.getSeconds()+i))return void this.alertify.error("The glue is stiring! <br> M\xe1y \u0111ang khu\u1ea5y keo b\u1ea1n \u01a1i!",!0)}try{const e={id:t.id,glueName:t.glueName,settingID:t.settingID,mixingInfoID:this.mixingInfoID,glueType:t.glueType,startScanTime:new Date,finishStiringTime:new Date},i=yield this.update(e),n=yield this.getStirByMixingInfoID(this.mixingInfoID);this.stirData=n,this.getStandardRPMAndDuration(),!0===i.status&&this.goToTodolist()}catch(e){this.alertify.error(e.toString())}}else this.alertify.error("Please scan the machine QR Code first! <br> H\xe3y qu\xe9t m\xe3 QR c\u1ee7a m\xe1y tr\u01b0\u1edbc!",!0)})}loadData(){return Object(R.a)(this,void 0,void 0,function*(){try{const t=yield this.getStirByMixingInfoID(this.mixingInfoID);this.stirData=t,this.getStandardRPMAndDuration()}catch(t){}})}getStandardRPMAndDuration(){if(this.stirData.length>0){this.standardRPM=this.stirData[0].glueType.rpm,this.duration=this.stirData[0].glueType.minutes;const t=this.stirData.filter(t=>0===t.actualDuration)[0];void 0!==t&&(this.startScanTime="0001-01-01T00:00:00"===(null==t?void 0:t.startScanTime)?null:null==t?void 0:t.startScanTime,console.log("start scan time",this.startScanTime))}else this.standardRPM=0,this.duration=0}updateStartScanTime(t){return this.stirService.updateStartScanTime(t).toPromise()}scanQrCode(t){return this.stirService.scanMachine(3===this.building.level?this.building.parentID:this.building.id,t).toPromise()}create(t){return this.stirService.create(t).toPromise()}update(t){return this.stirService.update(t).toPromise()}getStirByMixingInfoID(t){return this.stirService.getStirByMixingInfoID(t).toPromise()}goToTodolist(){return this.router.navigate([`/ec/execution/todolist-2/${this.tab}/${this.glueName}`])}}return t.\u0275fac=function(e){return new(e||t)(N.Mb(x.a),N.Mb(l.b),N.Mb(A.a),N.Mb(n.d),N.Mb(P.a),N.Mb(Pa.a),N.Mb(Ea),N.Mb(x.c),N.Mb(bt.a),N.Mb(p.d))},t.\u0275cmp=N.Gb({type:t,selectors:[["app-stir"]],viewQuery:function(t,e){if(1&t&&N.Qc(La,!0),2&t){let t;N.xc(t=N.dc())&&(e.grid=t.first)}},features:[N.yb([n.d])],decls:82,vars:33,consts:[[1,"card"],[1,"card-header"],[1,"card-tools"],["type","button","data-card-widget","collapse",1,"btn","btn-sm","btn-primary",3,"click"],[1,"fas","fa-reply"],[1,"card-body","p-0","my-3"],[1,"row"],[1,"col-md-12"],[1,"w3-container","w3-card-4","w3-text-black"],[1,"w3-center"],[1,"w3-row","w3-section"],[1,"w3-col",2,"width","100px"],["src","../../../../assets/img/gif/1981.gif","height","40px","width","80%","alt",""],[1,"w3-rest"],["name","qrcode","autofocusSearch","","type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"card-body","p-0"],[1,"text-center","text-danger"],[1,"d-inline-flex","mb-3"],[1,"p-2","mx-1"],[1,"font-weight-bold"],[1,"p-2","mr-1"],["class","p-2 mr-1",4,"ngIf"],["gridLines","Both","allowFiltering","true","allowPaging","true","allowResizing","true","showColumnMenu","true",3,"dataSource","allowSorting","allowExcelExport","filterSettings","pageSettings","toolbar","rowHeight","dataBound","toolbarClick"],["grid",""],["field","Seq.","textAlign","Center","headerText","Seq.","width","60"],["headerTemplate",""],["template",""],["field","glueType.title","textAlign","Center","headerText","Glue Type","width","100"],["field","standardDuration","textAlign","Center","headerText","DUR","width","130"],["field","actualDuration","textAlign","Center","headerText","Qty","width","130"],["field","startTime","textAlign","Center","type","dateTime","format","hh:mm:ss","headerText","Start Time","width","100"],["field","endTime","textAlign","Center","type","dateTime","format","hh:mm:ss","headerText","End Time","width","100"],["field","status","textAlign","Center","headerText","Status","width","110"],["field","option","textAlign","Center","headerText","Option","width","100"],["infoModal",""],["class","btn-group",4,"ngIf"],[1,"btn-group"],["type","button",1,"btn","btn-xs","btn-primary",3,"disabled","click"],[1,"fa","fa-check"],[1,"modal-header"],[1,"modal-title"],[1,"fas","fa-plus"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-md-3","mt-2"],[1,"col-md-8","mt-2"],["type","text","name","","disabled","","id","",1,"form-control","form-control-sm",3,"value"],["type","text","disabled","",1,"form-control","form-control-sm",3,"value","valueChange"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"col-md-12","mt-4","text-center"],["style","margin: 3px;","type","button","class","btn btn-success",3,"click",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-info","btn-sm",2,"margin","3px"],["type","button",1,"btn","btn-danger","btn-sm",2,"margin","3px"],["type","button",1,"btn","btn-success",2,"margin","3px",3,"click"]],template:function(t,e){1&t&&(N.Sb(0,"div",0),N.Sb(1,"div",1),N.Sb(2,"h3"),N.Kc(3),N.hc(4,"translate"),N.hc(5,"translate"),N.Rb(),N.Sb(6,"div",2),N.Sb(7,"button",3),N.cc("click",function(){return e.goToTodolist()}),N.Nb(8,"i",4),N.Kc(9),N.hc(10,"translate"),N.Rb(),N.Rb(),N.Rb(),N.Sb(11,"div",5),N.Sb(12,"div",6),N.Sb(13,"div",7),N.Sb(14,"form",8),N.Sb(15,"h2",9),N.Kc(16,"Scan QR Code"),N.Rb(),N.Sb(17,"div",10),N.Sb(18,"div",11),N.Nb(19,"img",12),N.Rb(),N.Sb(20,"div",13),N.Sb(21,"input",14),N.cc("ngModelChange",function(t){return e.onNgModelChangeScanQRCode(t)}),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Sb(22,"div",15),N.Sb(23,"h3",16),N.Kc(24),N.hc(25,"translate"),N.Rb(),N.Sb(26,"div",17),N.Sb(27,"div",18),N.Sb(28,"b",19),N.Kc(29),N.hc(30,"translate"),N.Rb(),N.Kc(31),N.Rb(),N.Sb(32,"div",20),N.Sb(33,"b",19),N.Kc(34),N.hc(35,"translate"),N.Rb(),N.Kc(36),N.hc(37,"translate"),N.Rb(),N.Ic(38,_a,6,7,"div",21),N.Rb(),N.Sb(39,"ejs-grid",22,23),N.cc("dataBound",function(){return e.dataBound()})("toolbarClick",function(t){return e.toolbarClick(t)}),N.Sb(41,"e-columns"),N.Sb(42,"e-column",24),N.Ic(43,Fa,2,3,"ng-template",null,25,N.Jc),N.Ic(45,ja,3,4,"ng-template",null,26,N.Jc),N.Rb(),N.Sb(47,"e-column",27),N.Ic(48,Ka,2,3,"ng-template",null,25,N.Jc),N.Rb(),N.Sb(50,"e-column",28),N.Ic(51,$a,2,3,"ng-template",null,25,N.Jc),N.Ic(53,za,1,1,"ng-template",null,26,N.Jc),N.Rb(),N.Sb(55,"e-column",29),N.Ic(56,Ha,2,3,"ng-template",null,25,N.Jc),N.Ic(58,Ua,1,1,"ng-template",null,26,N.Jc),N.Rb(),N.Sb(60,"e-column",30),N.Ic(61,Ja,2,3,"ng-template",null,25,N.Jc),N.Ic(63,Ga,2,4,"ng-template",null,26,N.Jc),N.Rb(),N.Sb(65,"e-column",31),N.Ic(66,Qa,2,3,"ng-template",null,25,N.Jc),N.Ic(68,qa,2,4,"ng-template",null,26,N.Jc),N.Rb(),N.Sb(70,"e-column",32),N.Ic(71,Va,2,3,"ng-template",null,25,N.Jc),N.Ic(73,Wa,2,3,"ng-template",null,26,N.Jc),N.Rb(),N.Sb(75,"e-column",33),N.Ic(76,Ya,2,3,"ng-template",null,25,N.Jc),N.Ic(78,Za,1,1,"ng-template",null,26,N.Jc),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Ic(80,ns,37,14,"ng-template",null,34,N.Jc)),2&t&&(N.zb(3),N.Nc("",N.ic(4,19,"EXECUTION")," - ",N.ic(5,21,"STIR"),""),N.zb(6),N.Mc(" ",N.ic(10,23,"BACK")," "),N.zb(12),N.mc("ngModel",e.qrCode),N.zb(3),N.Nc("",N.ic(25,25,"GLUE_NAME"),": ",e.glueName,""),N.zb(5),N.Mc("",N.ic(30,27,"Standard RPM"),":"),N.zb(2),N.Mc(" ",e.standardRPM,""),N.zb(3),N.Mc("",N.ic(35,29,"Duration"),":"),N.zb(2),N.Nc(" ",e.duration," ",N.ic(37,31,"minutes"),""),N.zb(2),N.mc("ngIf",null!==e.startScanTime),N.zb(1),N.mc("dataSource",e.stirData)("allowSorting",!0)("allowExcelExport",!0)("filterSettings",e.filterSettings)("pageSettings",e.pageSettings)("toolbar",e.toolbarOptions)("rowHeight",60))},directives:[o.p,o.h,o.i,o.b,E,o.g,o.j,n.n,v.j,d.d,C.d,C.b,v.e,v.b,d.c,C.c,C.a,v.d,v.a],pipes:[p.c,n.d],styles:[""],encapsulation:2}),t})(),as=(()=>{class t{constructor(){this.connectionUrl=ct.a.scalingHubLocal,this.counter=0,this.connect=()=>{this.startConnection()},this.close=()=>Object(R.a)(this,void 0,void 0,function*(){try{yield this.hubConnection.stop(),console.log("Mixing service stoped hub")}catch(t){console.log("Mixing service Cant not stop hub",t)}}),this.startConnection=()=>Object(R.a)(this,void 0,void 0,function*(){this.numberOfAttempts=this.numberOfAttempts+1,this.hubConnection=(new Ue.a).configureLogging(Ue.c.Error).withUrl(this.connectionUrl).build(),this.setSignalrClientMethods();try{yield this.hubConnection.start(),console.log("MixingService connected hub")}catch(t){alert("Kh\xf4ng th\u1ec3 k\u1ebft n\u1ed1i t\u1edbi c\xe2n! Vui l\xf2ng li\xean h\u1ec7 administrator!")}}),this.counter++,console.log(this.counter),this.numberOfAttempts=0,this.receiveAmount=new st.a(null)}ngOnDestroy(){console.log("Mixing Service destroy"),this.numberOfAttempts=0}offWeighingScale(){this.hubConnection.off("Welcom")}setSignalrClientMethods(){this.hubConnection.onreconnected(()=>{console.log("Mixing service Restarted signalr!")}),this.hubConnection.on("Welcom",(t,e,i)=>{this.receiveAmount.next({weighingScaleID:t,amount:e,unit:i})}),this.hubConnection.on("UserConnected",t=>{console.log("Mixing service",t)}),this.hubConnection.on("UserDisconnected",t=>{console.log("Mixing service UserDisconnected",t)})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=N.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function ss(t,e){1&t&&N.Nb(0,"img",48)}function cs(t,e){if(1&t){const t=N.Tb();N.Sb(0,"input",49),N.cc("ngModelChange",function(e){return N.Bc(t),N.gc().$implicit.scanCode=e})("ngModelChange",function(e){N.Bc(t);const i=N.gc().$implicit;return N.gc().onNgModelChangeScanQRCode(e,i)}),N.Rb()}if(2&t){const t=N.gc().$implicit,e=N.gc();N.Bb(t.info),N.mc("autofocus",t.scanStatus)("name",t.code)("ngModel",t.scanCode)("ngClass",e.lockClass(t))}}function ls(t,e){if(1&t){const t=N.Tb();N.Sb(0,"input",50),N.cc("ngModelChange",function(e){return N.Bc(t),N.gc().$implicit.scanCode=e})("ngModelChange",function(e){N.Bc(t);const i=N.gc().$implicit;return N.gc().onNgModelChangeScanQRCode(e,i)}),N.Rb()}if(2&t){const t=N.gc().$implicit,e=N.gc();N.Bb(t.info),N.mc("ngModel",t.scanCode)("name",t.code)("ngClass",e.lockClass(t))}}function rs(t,e){if(1&t){const t=N.Tb();N.Sb(0,"input",51),N.cc("keyup",function(e){N.Bc(t);const i=N.gc().$implicit;return N.gc().onKeyupExpected(i,e)}),N.Rb()}if(2&t){const t=N.gc().$implicit;N.Bb(t.info),N.Eb("lock","A"!==t.position),N.mc("value",t.expected)("autofocus",t.focusExpected)}}function ds(t,e){if(1&t){const t=N.Tb();N.Sb(0,"input",52),N.cc("keyup",function(e){N.Bc(t);const i=N.gc().$implicit;return N.gc().onKeyupExpected(i,e)}),N.Rb()}if(2&t){const t=N.gc().$implicit;N.Bb(t.info),N.mc("value",t.expected)}}function hs(t,e){if(1&t){const t=N.Tb();N.Sb(0,"input",53),N.cc("blur",function(){N.Bc(t);const e=N.gc().$implicit;return N.gc().onBlur(e)})("click",function(e){N.Bc(t);const i=N.gc().$implicit;return N.gc().onDblClicked(i,e)})("keyup",function(e){N.Bc(t);const i=N.gc().$implicit;return N.gc().onKeyupReal(i,e)}),N.Rb()}if(2&t){const t=N.gc().$implicit,e=N.gc();N.Bb(e.realClass(t)),N.Eb("lock",t.position),N.mc("value",t.real)("id",t.position)("autofocus",t.focusReal)}}function us(t,e){if(1&t){const t=N.Tb();N.Sb(0,"input",54),N.cc("blur",function(){N.Bc(t);const e=N.gc().$implicit;return N.gc().onBlur(e)})("click",function(e){N.Bc(t);const i=N.gc().$implicit;return N.gc().onDblClicked(i,e)})("keyup",function(e){N.Bc(t);const i=N.gc().$implicit;return N.gc().onKeyupReal(i,e)}),N.Rb()}if(2&t){const t=N.gc().$implicit,e=N.gc();N.Bb(e.realClass(t)),N.Eb("lock",t.position),N.mc("value",t.real)("id",t.position)}}function gs(t,e){if(1&t&&(N.Qb(0),N.Sb(1,"div",32),N.Sb(2,"div",33),N.Sb(3,"div",13),N.Sb(4,"div",34),N.Sb(5,"div",35),N.Ic(6,ss,1,0,"img",36),N.Rb(),N.Rb(),N.Sb(7,"div",37),N.Ic(8,cs,1,6,"input",38),N.Ic(9,ls,1,5,"ng-template",null,39,N.Jc),N.Rb(),N.Rb(),N.Rb(),N.Sb(11,"div",40),N.Nb(12,"input",41),N.Rb(),N.Sb(13,"div",22),N.Sb(14,"div",13),N.Sb(15,"div",42),N.Ic(16,rs,1,6,"input",43),N.Ic(17,ds,1,3,"ng-template",null,44,N.Jc),N.Rb(),N.Sb(19,"div",45),N.Ic(20,hs,1,7,"input",46),N.Ic(21,us,1,6,"ng-template",null,47,N.Jc),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Pb()),2&t){const t=e.$implicit,i=N.yc(10),n=N.yc(18),o=N.yc(22),a=N.gc();N.zb(6),N.mc("ngIf",a.showArrow(t)),N.zb(2),N.mc("ngIf",t.scanStatus)("ngIfElse",i),N.zb(4),N.Bb(t.info),N.Eb("lock",!0),N.mc("value",t.name+" ( "+t.percentage+"% )"),N.zb(4),N.mc("ngIf",t.focusExpected)("ngIfElse",n),N.zb(4),N.mc("ngIf",t.focusReal)("ngIfElse",o)}}function bs(t,e){1&t&&(N.Sb(0,"p",55),N.Kc(1),N.hc(2,"translate"),N.Rb()),2&t&&(N.zb(1),N.Lc(N.ic(2,1,"NOTE")))}const ps=(new Ue.a).withUrl("http://localhost:5001/scalingHub").withAutomaticReconnect([1e3,3e3,5e3,1e4,3e4]).build();let ms=(()=>{class t{constructor(t,e,i,n,o,a,s,c,l){this.route=t,this.alertify=e,this.ingredientService=i,this.makeGlueService=n,this.abnormalService=o,this.mixingService=a,this.router=s,this.settingService=c,this.todolistService=l,this.disabled=!0,this.unit="k",this.subject=new M.a,this.subscription=[],this.scaleStatus=!0,this.BUIDLING_ID=0,console.log("========Collapse========")}ngOnDestroy(){this.subscription.forEach(t=>t.unsubscribe()),this.offSignalr(),this.mixingService.numberOfAttempts=5,this.mixingService.close().then(t=>{console.log("Mixing service stopped connection")}).catch(t=>{console.log("Mixing service can not stopped connection",t)}),ps.stop().then(t=>{console.log("stopped connection")}).catch(t=>{})}ngOnInit(){this.mixingService.connect(),this.checkQRCode(),this.checkedSmallScale=!1;const t=JSON.parse(localStorage.getItem("building"));this.BUIDLING_ID=Number(JSON.parse(localStorage.getItem("buildingID")));const e=JSON.parse(localStorage.getItem("level"));this.role=e,this.building=t,this.buildingID=this.BUIDLING_ID,this.scalingKG="k",this.startTime=new Date,this.getScalingSetting(),this.onRouteChange()}start(){ps.start().then(()=>{ps.on("UserConnected",t=>{console.log("CONNECTION_WEIGHING_SCALE_HUB UserConnected",t)}),ps.on("UserDisconnected",t=>{console.log("CONNECTION_WEIGHING_SCALE_HUB UserDisconnected",t)}),console.log("Signalr CONNECTION_WEIGHING_SCALE_HUB connected")}).catch(t=>{setTimeout(()=>this.start(),5e3)})}onChangeScale(t){this.checkedSmallScale=!0,this.unit="g",this.scalingKG="g"}checkQRCode(){this.subscription.push(this.subject.pipe(Object(k.a)(500)).subscribe(t=>Object(R.a)(this,void 0,void 0,function*(){const e=t.QRCode,i=t.ingredient;this.ingredientsTamp=i,this.position=i.position;const n=e.split("-")||[],o=e.match(i.materialNO),a=e.match(/(\d+)-(\w+)-/g),s=e.replace(a[0],"");if(null===o)return this.alertify.warning("M\xe3 QR kh\xf4ng h\u1ee3p l\u1ec7!<br>The QR Code invalid!"),this.qrCode="",void this.errorScan();if(null!==o)try{if(s!==o[0])return this.alertify.warning(`M\xe3 QR kh\xf4ng h\u1ee3p l\u1ec7!<br>Please you should look for the chemical name "${i.name}"`),this.qrCode="",void this.errorScan();if(this.qrCode=o[0],this.qrCode!==i.materialNO)return this.alertify.warning(`M\xe3 QR kh\xf4ng h\u1ee3p l\u1ec7!<br>Please you should look for the chemical name "${i.name}"`),this.qrCode="",void this.errorScan();if("A"===i.position&&(this.stdcon="g"===this.scalingKG?1e3*this.stdcon:this.stdcon,this.changeExpected("A",this.stdcon),this.checkedSmallScale=!0,this.startTime=new Date),!0===(yield this.hasLock(i.name,this.building.name,n[1])))return this.alertify.error("H\xf3a ch\u1ea5t n\xe0y \u0111\xe3 b\u1ecb kh\xf3a!<br>This chemical has been locked!"),this.qrCode="",void this.errorScan();this.signal();const t=i.code,e=this.findIngredientCode(t);switch(this.setBatch(e,n[1]),e&&(this.changeInfo("success-scan",e.code),0===e.expected&&"A"===e.position?(this.changeFocusStatus(e.code,!1,!0),this.changeScanStatus(e.code,!1)):(this.changeScanStatus(e.code,!1),this.changeFocusStatus(t,!1,!1))),this.position){case"A":this.changeScanStatusByPosition("A",!1),this.changeScanStatusByPosition("B",!0);break;case"B":this.changeScanStatusByPosition("B",!1),this.changeScanStatusByPosition("C",!0);break;case"C":this.changeScanStatusByPosition("C",!1),this.mixingService.connect(),this.changeScanStatusByPosition("D",!0);break;case"D":this.changeScanStatusByPosition("D",!1),this.mixingService.connect(),this.changeScanStatusByPosition("E",!0);break;case"E":this.mixingService.connect(),this.changeScanStatusByPosition("H",!0)}}catch(c){console.log("tag",c),this.errorScan(),this.alertify.error("M\xe3 QR kh\xf4ng h\u1ee3p l\u1ec7!<br>Wrong Chemical!"),this.qrCode=""}})))}onRouteChange(){this.route.data.subscribe(t=>{this.glueID=this.route.snapshot.params.glueID,this.estimatedStartTime=this.route.snapshot.params.estimatedStartTime,this.estimatedFinishTime=this.route.snapshot.params.estimatedFinishTime,this.tab=this.route.snapshot.params.tab,this.stdcon=+this.route.snapshot.params.stdcon,this.getGlueWithIngredientByGlueID()})}getGlueWithIngredientByGlueID(){this.makeGlueService.getGlueWithIngredientByGlueID(this.glueID).subscribe(t=>{this.ingredients=t.ingredients.map(t=>({id:t.id,scanStatus:"A"===t.position,code:t.code,scanCode:"",materialNO:t.materialNO,name:t.name,percentage:t.percentage,position:t.position,allow:t.allow,expected:0,real:0,focusReal:!1,focusExpected:!1,valid:!1,info:"",batch:"",unit:"",time_start:new Date})),this.glueName=t.name,this.getMixingDetail()})}onNgModelChangeScanQRCode(t,e){return Object(R.a)(this,void 0,void 0,function*(){this.subject.next({QRCode:t,ingredient:e})})}scanQRCode(){return this.ingredientService.scanQRCode(this.qrCode).toPromise()}findIngredientCode(t){for(const e of this.ingredients)if(e.code===t)return e}setBatch(t,e){for(const i in this.ingredients)if(this.ingredients[i].id===t.id){this.ingredients[i].batch=e;break}}changeScanStatus(t,e){for(const i in this.ingredients)if(this.ingredients[i].code===t){this.ingredients[i].scanStatus=e;break}}changeFocusStatus(t,e,i){for(const n in this.ingredients)if(this.ingredients[n].code===t){this.ingredients[n].focusReal=e,this.ingredients[n].focusExpected=i;break}}changeValidStatus(t,e){for(const i in this.ingredients)if(this.ingredients[i].code===t){this.ingredients[i].valid=e;break}}changeScanStatusByPosition(t,e){this.position=t;for(const i in this.ingredients)if(this.ingredients[i].position===t){this.ingredients[i].scanStatus=e;break}}errorScan(){for(const t in this.ingredients)this.ingredients[t].scanStatus&&this.changeInfo("error-scan",this.ingredients[t].code)}changeInfo(t,e){for(const i in this.ingredients)if(this.ingredients[i].code===e){this.ingredients[i].info=t;break}}changeScanStatusFocus(t,e){for(const i in this.ingredients)if(this.ingredients[i].position===t){this.ingredients[i].scanStatus=e;break}}findIngredient(t){for(const e of this.ingredients)if(e.position===t)return e}calculatorIngredient(t,e){var i;return null!==(i=t*e/100*1e3)&&void 0!==i?i:0}toFixedIfNecessary(t,e){return+parseFloat(t).toFixed(e)}changeExpectedRange(t,e){var i,n;if(["A","B","C","D","E"].includes(e)){const o=parseFloat(t),a=this.calculatorIngredient(o,null===(i=this.findIngredient(e))||void 0===i?void 0:i.percentage);if("B"===e&&(this.B=a),"C"===e&&(this.C=a),"D"===e&&(this.D=a),"A"===e)return;const s=this.calculatorIngredient(a/1e3,null===(n=this.findIngredient(e))||void 0===n?void 0:n.allow),c=a-s,l=a+s,r=this.toFixedIfNecessary(c/1e3,3),d=this.toFixedIfNecessary(l/1e3,3),h=d>3?`${r}kg - ${d}kg`:` ${this.toFixedIfNecessary(c,1)}g - ${this.toFixedIfNecessary(l,1)}g `;if(0===s){const t=this.toFixedIfNecessary(a/1e3,3),i=t>3?t+"kg":` ${this.toFixedIfNecessary(1e3*t,1)}g`;this.changeExpected(e,i)}else this.changeExpected(e,h)}}changeExpected(t,e){for(const i in this.ingredients)if(this.ingredients[i].position===t){this.ingredients[i].expected=e;break}}changeActualByPosition(t,e,i){for(const n in this.ingredients)if(this.ingredients[n].position===t){this.ingredients[n].real=e,this.ingredients[n].unit=i,this.ingredients[n].time_start=new Date;break}}onBlur(t){for(const e in this.ingredients)this.ingredients[e].focusReal=this.ingredients[e].position===t.position;this.signal()}checkValidPosition(t,e){let i,n,o,a;const s="A"===t.position&&"g"===this.scalingKG?parseFloat(e)/1e3:parseFloat(e);if(0===t.allow)"g"!==("A"===t.position?this.stdcon:t.expected.replace(/[0-9|.]+/g,"").trim())?(i=parseFloat(t.expected),n=parseFloat(t.expected)):(o=parseFloat(t.expected),a=parseFloat(t.expected),i=parseFloat(t.expected)/1e3,n=parseFloat(t.expected)/1e3);else{const e=t.expected.split("-");"g"!==e[0].replace(/[0-9|.]+/g,"").trim()?(i=parseFloat(e[0]),n=parseFloat(e[1])):(o=parseFloat(e[0]),a=parseFloat(e[1]),i=parseFloat(e[0])/1e3,n=parseFloat(e[1])/1e3)}if("A"===t.position){const e=["A","B","C","D","E"];for(const t of e)this.changeExpectedRange(s,t);this.changeScanStatusFocus("A",!1),this.changeScanStatusFocus("B",!0),this.changeFocusStatus(t.code,!1,!1),1===this.ingredients.length&&(this.disabled=!1)}"B"===t.position&&(n>3?(this.scalingKG="k",s<=n&&s>=i?(this.changeScanStatusFocus("B",!1),this.changeScanStatusFocus("C",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),2===this.ingredients.length&&(this.disabled=!1)):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0))):(this.scalingKG="g",s<=a+5&&s>=o?(this.changeScanStatusFocus("B",!1),this.changeScanStatusFocus("C",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),2===this.ingredients.length&&(this.disabled=!1)):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0)))),"C"===t.position&&(n>3?(this.scalingKG="k",s<=n&&s>=i?(this.changeScanStatusFocus("C",!1),this.changeScanStatusFocus("D",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),3===this.ingredients.length&&(this.disabled=!1)):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0))):(this.scalingKG="g",s<=a+5&&s>=o?(this.changeScanStatusFocus("C",!1),this.changeScanStatusFocus("D",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),3===this.ingredients.length&&(this.disabled=!1)):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0)))),"D"===t.position&&(n>3?(this.scalingKG="k",s<=n&&s>=i?(this.changeScanStatusFocus("D",!1),this.changeScanStatusFocus("E",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),this.ingredients.length>=4&&(this.disabled=!1)):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0))):(this.scalingKG="g",s<=a+5&&s>=o?(this.changeScanStatusFocus("D",!1),this.changeScanStatusFocus("E",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),this.ingredients.length>=4&&(this.disabled=!1)):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0)))),"E"===t.position&&(n>3?(this.scalingKG="k",s<=n&&s>=i?(this.changeScanStatusFocus("D",!1),this.changeScanStatusFocus("E",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),this.ingredients.length>=4&&(this.disabled=!1)):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0))):(this.scalingKG="g",s<=a+5&&s>=o?(this.changeScanStatusFocus("D",!1),this.changeScanStatusFocus("E",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),this.ingredients.length>=4&&(this.disabled=!1)):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0)))),this.changeReal(t.code,+e)}offSignalr(){ps.off("Welcom"),this.mixingService.offWeighingScale()}onSignalr(){}changeScanStatusByLength(t,e){switch(t){case 2:this.offSignalr();break;case 3:"B"===e.position?(this.changeScanStatusByPosition("B",!1),this.changeScanStatusByPosition("C",!0),this.offSignalr()):(this.changeScanStatusByPosition("B",!1),this.changeScanStatusByPosition("C",!1),this.offSignalr());break;case 4:"B"===e.position?(this.changeScanStatusByPosition("B",!1),this.changeScanStatusByPosition("C",!0),this.offSignalr()):"C"===e.position?(this.changeScanStatusByPosition("C",!1),this.changeScanStatusByPosition("D",!0),this.offSignalr()):(this.changeScanStatusByPosition("C",!1),this.changeScanStatusByPosition("D",!1),this.offSignalr());break;case 5:"B"===e.position?(this.changeScanStatusByPosition("B",!1),this.changeScanStatusByPosition("C",!0),this.offSignalr()):"C"===e.position?(this.changeScanStatusByPosition("C",!1),this.changeScanStatusByPosition("D",!0),this.offSignalr()):"D"===e.position?(this.changeScanStatusByPosition("D",!1),this.changeScanStatusByPosition("E",!0),this.offSignalr()):(this.changeScanStatusByPosition("D",!1),this.changeScanStatusByPosition("E",!1),this.offSignalr())}}setActualByExpectedRange(t){var e,i;const n=this.ingredients[t];if(n.allow>0){const i=this.ingredients[t].expected.split("-"),o=parseFloat(i[0]),a=parseFloat(i[1]),s=this.ingredients[t].real;if(s>=o&&s<=a){const t=null!==(e=this.ingredients.length)&&void 0!==e?e:0;this.changeScanStatusByLength(t,n)}}else if(this.ingredients[t].real===+this.ingredients[t].expected){const t=null!==(i=this.ingredients.length)&&void 0!==i?i:0;this.changeScanStatusByLength(t,n)}}changeReal(t,e){for(const i in this.ingredients)if(this.ingredients[i].code===t){this.ingredients[i].real=this.toFixedIfNecessary(e,3);break}}startScalingHub(){ps.start().then(()=>{ps.on("Scaling Hub UserConnected",t=>{console.log("Scaling Hub UserConnected",t),this.signal()}),ps.on("Scaling Hub User Disconnected",t=>{console.log("Scaling Hub User Disconnected",t)}),console.log("Scaling Hub Signalr connected")}).catch(t=>{setTimeout(()=>this.startScalingHub(),5e3)})}signal(){this.mixingService.receiveAmount.subscribe(t=>{const e=t.unit,i=t.weighingScaleID,n=t.amount;if(e===this.scalingKG)switch(this.volume=parseFloat(n),this.unit=e,console.log("Unit",e,n,i),this.position){case"A":this.volumeA=this.volume;break;case"B":this.volumeB=this.volume,this.changeActualByPosition("A",this.volumeB,e),this.checkValidPosition(this.ingredientsTamp,this.volumeB);break;case"C":this.volumeC=this.volume,this.changeActualByPosition("B",this.volumeC,e),this.checkValidPosition(this.ingredientsTamp,this.volumeC);break;case"D":this.volumeD=this.volume,this.changeActualByPosition("C",this.volumeD,e),this.checkValidPosition(this.ingredientsTamp,this.volumeD);break;case"E":this.volumeE=this.volume,this.changeActualByPosition("D",this.volumeE,e),this.checkValidPosition(this.ingredientsTamp,this.volumeE);break;case"H":this.volumeH=this.volume,this.changeActualByPosition("E",this.volumeH,e),this.checkValidPosition(this.ingredientsTamp,this.volumeH)}})}showArrow(t){return"A"===t.position&&!0===t.scanStatus||"A"===t.position&&!1===t.scanStatus&&!0===t.focusExpected||"A"!==t.position&&!0===t.scanStatus}checkValidPositionForRealEvent(t,e){let i,n,o,a;const s=parseFloat(e.target.value),c=s;if(0===t.allow){const e=/^[0-9.]+[kg]+\s\+\s[0-9.]+[kg]+|(^[0-9.]+[kg]+)/g;"g"!==(null!=t.expected.toString().match(e)?t.expected.replace(/[0-9|.]+/g,"").trim():"k")?(i=parseFloat(t.expected),n=parseFloat(t.expected)):(o=parseFloat(t.expected),a=parseFloat(t.expected),i=parseFloat(t.expected)/1e3,n=parseFloat(t.expected)/1e3)}else{const e=t.expected.split("-");"g"!==e[0].replace(/[0-9|.]+/g,"").trim()?(i=parseFloat(e[0]),n=parseFloat(e[1])):(o=parseFloat(e[0]),a=parseFloat(e[1]),i=parseFloat(e[0])/1e3,n=parseFloat(e[1])/1e3)}if("A"===t.position){const e=["A","B","C","D","E"];for(const i of e)t.real="A"===i?c:t.real,this.changeExpectedRange(t.real,i);this.changeScanStatusFocus("A",!1),this.changeScanStatusFocus("B",!0),this.changeFocusStatus(t.code,!1,!1),1===this.ingredients.length&&(this.disabled=!1)}"B"===t.position&&(n>3?(this.scalingKG="k",c<=n&&c>=i?(this.changeScanStatusFocus("B",!1),this.changeScanStatusFocus("C",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),2===this.ingredients.length&&(this.disabled=!1)):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0))):(this.scalingKG="g",c<=a&&c>=o?(this.changeScanStatusFocus("B",!1),this.changeScanStatusFocus("C",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),2===this.ingredients.length&&(this.disabled=!1)):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0)))),"C"===t.position&&(n>3?(this.scalingKG="k",c<=n&&c>=i?(this.changeScanStatusFocus("C",!1),this.changeScanStatusFocus("D",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),3===this.ingredients.length&&(this.disabled=!1)):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0))):(this.scalingKG="g",c<=a&&c>=o?(this.changeScanStatusFocus("C",!1),this.changeScanStatusFocus("D",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),3===this.ingredients.length&&(this.disabled=!1)):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0)))),"D"===t.position&&(n>3?(this.scalingKG="k",c<=n&&c>=i?(this.changeScanStatusFocus("D",!1),this.changeScanStatusFocus("E",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),this.ingredients.length>=4&&(this.disabled=!1)):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0))):(this.scalingKG="g",c<=a&&c>=o?(this.changeScanStatusFocus("D",!1),this.changeScanStatusFocus("E",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),this.ingredients.length>=4&&(this.disabled=!1)):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0)))),"E"===t.position&&(n>3?(this.scalingKG="k",c<=n&&c>=i?(this.changeScanStatusFocus("D",!1),this.changeScanStatusFocus("E",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),this.ingredients.length>=4&&(this.disabled=!1)):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0))):(this.scalingKG="g",c<=a&&c>=o?(this.changeScanStatusFocus("D",!1),this.changeScanStatusFocus("E",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),this.ingredients.length>=4&&(this.disabled=!1)):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0)))),this.changeReal(t.code,s)}realClass(t){return t.info+(!0===t.valid?" warning-focus":"")}lockClass(t){return!0===t.scanCode?"":"lock"}onKeyupReal(t,e){13===e.keyCode&&this.checkValidPositionForRealEvent(t,e)}onDblClicked(t,e){""!==this.ingredients.filter(e=>e.position===t.position)[0].scanCode?(this.ingredients.forEach((t,e,i)=>{this.ingredients[e].scanStatus=!1}),t.focusReal=!0,this.offSignalr()):this.alertify.warning("H\xe3y qu\xe9t m\xe3 QR tr\u01b0\u1edbc!!!",!0)}onKeyupExpected(t,e){if(13===e.keyCode&&"A"===t.position){switch(this.changeExpected("A",e.target.value),t.position){case"A":this.changeScanStatusByPosition("B",!0);break;case"B":this.changeScanStatusByPosition("C",!0);break;case"C":this.changeScanStatusByPosition("D",!0);break;case"D":this.changeScanStatusByPosition("E",!0)}this.resetFocusExpectedAndActual()}}resetFocusExpectedAndActual(){let t;for(t=0;t<this.ingredients.length;t++)this.ingredients[t].focusReal=!1,this.ingredients[t].focusExpected=!1}back(){this.router.navigate(["/ec/execution/todolist-2/"+this.tab])}getScalingSetting(){this.buildingID=this.BUIDLING_ID,this.settingService.getMachineByBuilding(this.buildingID).subscribe(t=>{this.scalingSetting=t.map(t=>t.machineID)})}getMixingDetail(){this.todolistService.getMixingDetail(this.glueName).subscribe(t=>{this.detail=t})}reloadPage(){window.location.reload()}hasLock(t,e,i){let n=e;return this.IsAdmin&&(n=this.buildingName),new Promise((e,o)=>{this.abnormalService.hasLock(t,n,i).subscribe(t=>{e(t)},t=>{o(!1)})})}Finish(){if(this.IsAdmin)return void this.alertify.warning('Only the workers are able to press "Finished" button!<br> Ch\u1ec9 c\xf3 c\xf4ng nh\xe2n m\u1edbi \u0111\u01b0\u1ee3c nh\u1ea5n "Ho\xe0n Th\xe0nh!"',!0);this.endTime=new Date;const t=this.ingredients.map(t=>({amount:"g"===t.unit?t.real/1e3:t.real,ingredientID:t.id,batch:t.batch,mixingInfoID:0,position:t.position,time_start:t.time_start})),e={glueID:this.glueID,glueName:this.glueName,buildingID:this.BUIDLING_ID,mixBy:JSON.parse(localStorage.getItem("user")).User.ID,estimatedStartTime:this.estimatedStartTime,estimatedFinishTime:this.estimatedFinishTime,startTime:this.startTime.toISOString(),endTime:this.endTime.toISOString(),details:t};e&&this.makeGlueService.add(e).subscribe(t=>{this.todolistService.setValue(!1),this.back(),this.alertify.success("The Glue has been finished successfully")})}convertDate(t){const e=6e4*t.getTimezoneOffset();return new Date(Date.now()-e).toISOString().slice(0,-1)}}return t.\u0275fac=function(e){return new(e||t)(N.Mb(x.a),N.Mb(A.a),N.Mb(P.a),N.Mb(Qe.a),N.Mb(Ge.a),N.Mb(as),N.Mb(x.c),N.Mb(ei),N.Mb(oi))},t.\u0275cmp=N.Gb({type:t,selectors:[["app-mixing"]],features:[N.yb([as,qe.a])],decls:63,vars:46,consts:[[1,"row","mb-2"],[1,"col-md-12","mt-4","text-center"],[1,"pretty","p-svg","p-curve",2,"font-size","30px"],["value","small","type","checkbox","name","scale",3,"change"],[1,"state","p-success"],["viewBox","0 0 20 20",1,"svg","svg-icon"],["d","M7.629,14.566c0.125,0.125,0.291,0.188,0.456,0.188c0.164,0,0.329-0.062,0.456-0.188l8.219-8.221c0.252-0.252,0.252-0.659,0-0.911c-0.252-0.252-0.659-0.252-0.911,0l-7.764,7.763L4.152,9.267c-0.252-0.251-0.66-0.251-0.911,0c-0.252,0.252-0.252,0.66,0,0.911L7.629,14.566z",2,"stroke","white","fill","white"],[1,"card","my-height"],[1,"card-header"],[1,"card-tools"],["type","button",1,"btn","btn-sm","btn-primary",3,"click"],[1,"fas","fa-refresh"],[1,"card-body"],[1,"row"],[1,"col-md-12"],[1,"text-center","text-danger","font-weight-bold"],[1,"col-md-2","col-xl-2","text-center"],[1,"col-md-2"],["for","",1,"font-weight-bold","text-black"],[1,"col-md-10"],["for","",1,"font-weight-bold"],[1,"col-md-5","col-xl-5","text-center"],[1,"col-md-5"],[1,"col-md-8","text-center"],[1,"col-md-4","text-center"],[4,"ngFor","ngForOf"],[1,"text-center","mb-1"],["type","button",1,"btn","btn-primary","rounded-pill",3,"click"],[1,"fa","fa-arrow-circle-left"],["type","button",1,"btn","btn-success","rounded-pill","ml-2",3,"disabled","click"],[1,"fas","fa-save"],["class","text-center my-2 text-danger",4,"ngIf"],[1,"row","mb-1"],[1,"col-md-2","col-xl-2"],[1,"col-xl-2"],[1,"align-middle"],["src","../../../../assets/img/gif/arrow.gif","alt","",4,"ngIf"],[1,"col-xl-10"],["class","form-control form-control-lg rounded-pill","autoselect","","type","text",3,"autofocus","name","ngModel","class","ngClass","ngModelChange",4,"ngIf","ngIfElse"],["scanBlock",""],[1,"form-group","col-md-5","col-xl-5"],["type","text",1,"form-control","form-control-lg","rounded-pill","lock",3,"value"],[1,"col-md-8"],["class","form-control form-control-lg rounded-pill","type","text",3,"lock","value","autofocus","class","keyup",4,"ngIf","ngIfElse"],["expectedBlock",""],[1,"col-md-4"],["class","form-control form-control-lg rounded-pill mixing","data-toggle","tooltip","title","tooltip on second input!","autocomplete","off","type","text",3,"lock","value","id","class","autofocus","blur","click","keyup",4,"ngIf","ngIfElse"],["realElse",""],["src","../../../../assets/img/gif/arrow.gif","alt",""],["autoselect","","type","text",1,"form-control","form-control-lg","rounded-pill",3,"autofocus","name","ngModel","ngClass","ngModelChange"],["type","text",1,"form-control","form-control-lg","rounded-pill",3,"ngModel","name","ngClass","ngModelChange"],["type","text",1,"form-control","form-control-lg","rounded-pill",3,"value","autofocus","keyup"],["type","text",1,"form-control","form-control-lg","rounded-pill","lock",3,"value","keyup"],["data-toggle","tooltip","title","tooltip on second input!","autocomplete","off","type","text",1,"form-control","form-control-lg","rounded-pill","mixing",3,"value","id","autofocus","blur","click","keyup"],["data-toggle","tooltip","title","tooltip on second input!","autocomplete","off","type","text",1,"form-control","form-control-lg","rounded-pill","mixing",3,"value","id","blur","click","keyup"],[1,"text-center","my-2","text-danger"]],template:function(t,e){1&t&&(N.Sb(0,"div",0),N.Sb(1,"div",1),N.Sb(2,"div",2),N.Sb(3,"input",3),N.cc("change",function(t){return e.onChangeScale(t)}),N.Rb(),N.Sb(4,"div",4),N.fc(),N.Sb(5,"svg",5),N.Nb(6,"path",6),N.Rb(),N.ec(),N.Sb(7,"label"),N.Kc(8),N.hc(9,"translate"),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Sb(10,"div",7),N.Sb(11,"div",8),N.Sb(12,"div",9),N.Sb(13,"button",10),N.cc("click",function(){return e.reloadPage()}),N.Nb(14,"i",11),N.Kc(15),N.hc(16,"translate"),N.Rb(),N.Rb(),N.Rb(),N.Sb(17,"div",12),N.Sb(18,"div",13),N.Sb(19,"div",14),N.Sb(20,"h2",15),N.Kc(21),N.hc(22,"translate"),N.hc(23,"translate"),N.hc(24,"translate"),N.Rb(),N.Rb(),N.Rb(),N.Sb(25,"div",13),N.Sb(26,"div",14),N.Sb(27,"div",13),N.Sb(28,"div",16),N.Sb(29,"div",13),N.Sb(30,"div",17),N.Sb(31,"label",18),N.Kc(32),N.hc(33,"translate"),N.Rb(),N.Rb(),N.Sb(34,"div",19),N.Sb(35,"label",20),N.Kc(36),N.hc(37,"translate"),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Sb(38,"div",21),N.Sb(39,"label",20),N.Kc(40),N.hc(41,"translate"),N.Rb(),N.Rb(),N.Sb(42,"div",22),N.Sb(43,"div",13),N.Sb(44,"div",23),N.Sb(45,"label",20),N.Kc(46),N.hc(47,"translate"),N.Rb(),N.Rb(),N.Sb(48,"div",24),N.Sb(49,"label",20),N.Kc(50),N.hc(51,"translate"),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Rb(),N.Ic(52,gs,23,12,"ng-container",25),N.Sb(53,"div",26),N.Sb(54,"button",27),N.cc("click",function(){return e.back()}),N.Nb(55,"i",28),N.Kc(56),N.hc(57,"translate"),N.Rb(),N.Sb(58,"button",29),N.cc("click",function(){return e.Finish()}),N.Nb(59,"i",30),N.Kc(60),N.hc(61,"translate"),N.Rb(),N.Rb(),N.Ic(62,bs,3,3,"p",31),N.Rb(),N.Rb(),N.Rb(),N.Rb()),2&t&&(N.zb(2),N.Eb("lock",e.checkedSmallScale),N.zb(6),N.Lc(N.ic(9,22,"Small Scale")),N.zb(7),N.Mc(" ",N.ic(16,24,"Refresh")," "),N.zb(6),N.Pc(" ",N.ic(22,26,"GLUE_NAME"),": ",e.glueName," | ",N.ic(23,28,"Mixed. Con."),": ",null==e.detail?null:e.detail.mixedConsumption," | ",N.ic(24,30,"Delivered. Con."),": ",null==e.detail?null:e.detail.deliveryConsumption," "),N.zb(11),N.Lc(N.ic(33,32,"STEP")),N.zb(4),N.Lc(N.ic(37,34,"SCAN_QRCODE")),N.zb(4),N.Lc(N.ic(41,36,"INGREDIENT_NAME")),N.zb(6),N.Nc("",N.ic(47,38,"Std. Con.")," (","k"==e.unit?"kg":"g",") "),N.zb(4),N.Nc("",N.ic(51,40,"ACTUAL")," (","k"==e.unit?"kg":"g",")"),N.zb(2),N.mc("ngForOf",e.ingredients),N.zb(4),N.Mc(" ",N.ic(57,42,"BACK"),""),N.zb(2),N.mc("disabled",e.disabled),N.zb(2),N.Mc(" ",N.ic(61,44,"FINISHED"),""),N.zb(2),N.mc("ngIf",!e.disabled))},directives:[n.m,n.n,o.b,qe.a,o.g,o.j,n.l],pipes:[p.c],styles:[".my-align[_ngcontent-%COMP%]{vertical-align:middle!important;text-align:center!important;font-weight:700}.fix-css[_ngcontent-%COMP%]{font-weight:700!important;font-family:Source Sans Pro,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol!important}.real[_ngcontent-%COMP%]{background-color:#b8daff!important}input.error-scan[_ngcontent-%COMP%]{background-color:#dc3545}input.error-scan[_ngcontent-%COMP%], input.success-scan[_ngcontent-%COMP%]{width:100%;padding:12px 20px;box-sizing:border-box;border:none;border:none!important;color:#fff!important}input.success-scan[_ngcontent-%COMP%]{background-color:#3cbc8d;font-weight:700}.lock[_ngcontent-%COMP%]{pointer-events:none}input.warning-focus[_ngcontent-%COMP%]{-webkit-animation:warning-frames .5s infinite;animation:warning-frames .5s infinite;color:#000!important}input[_ngcontent-%COMP%]{text-align:center;font-size:50px!important;font-weight:700!important;height:calc(4.875rem + 2px)!important;border:1px solid #635e5e!important;color:#000!important}@-webkit-keyframes warning-frames{0%{background-color:#fade40}to{background-color:#e7f70c}}@keyframes warning-frames{0%{background-color:#fade40}to{background-color:#e7f70c}}input.summary[_ngcontent-%COMP%], input.summaryhide[_ngcontent-%COMP%]{border:none!important;padding:0!important}input.summary[_ngcontent-%COMP%]:focus{border-bottom:3px solid #dc3545!important;border-radius:0}.my-sticky[_ngcontent-%COMP%]{top:0;height:40px}.my-sticky[_ngcontent-%COMP%], .my-sticky-glue[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;z-index:997;background-color:#fff}.my-sticky-glue[_ngcontent-%COMP%]{left:72px}.my-sticky-top[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;top:45px;z-index:998;vertical-align:middle}.my-cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}@media only screen and (max-height:1024px){.my-height[_ngcontent-%COMP%]{min-height:868px;position:relative};}@media only screen and (max-height:978px){.my-height[_ngcontent-%COMP%]{min-height:788px;position:relative};}@media only screen and (min-height:1101px){.my-height[_ngcontent-%COMP%]{min-height:945px;position:relative};}@media only screen and (min-height:768px){.my-height[_ngcontent-%COMP%]{min-height:612px;position:relative};}@media only screen and (min-height:625px){.my-height[_ngcontent-%COMP%]{min-height:470px;position:relative};}@media only screen and (min-height:694px){.my-height[_ngcontent-%COMP%]{min-height:539px;position:relative};}@media only screen and (min-height:781px){.my-height[_ngcontent-%COMP%]{min-height:625px;position:relative};}.my-vertical[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;width:100%;transform:translate(-50%,-50%)}.my-bg-success[_ngcontent-%COMP%]{background-color:#c3e6cb}.my-bg-warning[_ngcontent-%COMP%]{background-color:#ffeeba}.my-bg-primary[_ngcontent-%COMP%]{background-color:#b8daff}"]}),t})();const fs=[{path:"",children:[{path:"todolist",data:{title:"todolist",breadcrumb:"Todolist"},children:[{path:"",component:ha},{path:"stir",component:os,data:{title:"Stir",breadcrumb:"Stir"}},{path:"stir/:glueName",component:os,data:{title:"Stir",breadcrumb:"Stir"}},{path:"history/:glueID",component:Sa,data:{title:"History",breadcrumb:"History"}}]},{path:"todolist-2",data:{title:"todolist-2",breadcrumb:"To Do List 2"},children:[{path:"",component:ha},{path:":tab",component:ha},{path:":tab/:glueName",component:ha},{path:";tab=:tab;glueName=:glueName",component:ha},{path:"stir",component:os,data:{title:"Stir",breadcrumb:"Stir"}},{path:"stir/:tab/:mixingInfoID/:glueName",component:os,data:{title:"Stir",breadcrumb:"Stir"}},{path:"mixing",component:ms,data:{title:"Mixing",breadcrumb:"Mixing"}},{path:"mixing/:tab/:glueID/:estimatedStartTime/:estimatedFinishTime/:stdcon",component:ms,data:{title:"Mixing",breadcrumb:"Mixing"}},{path:"shake",component:Oa,data:{title:"Shake",breadcrumb:"Shake"}},{path:"shake/:tab/:mixingInfoID",component:Oa,data:{title:"Shake",breadcrumb:"Shake"}},{path:"dispatch",component:Ni,data:{title:"dispatch",breadcrumb:"Dispatch"}},{path:"dispatch/:mixingInfoID",component:Ni,data:{title:"dispatch",breadcrumb:"Dispatch"}}]},{path:"workplan",component:ge,data:{title:"Workplan",breadcrumb:"Work Plan"}},{path:"output-quantity",component:ke,data:{title:"Output Quantity",breadcrumb:"Output Quantity"}},{path:"incoming",component:at,data:{title:"Stock",breadcrumb:"Stock"}}]}];let Ss,vs=(()=>{class t{}return t.\u0275mod=N.Kb({type:t}),t.\u0275inj=N.Jb({factory:function(e){return new(e||t)},imports:[[x.f.forChild(fs)],x.f]}),t})();function ys(t){return new m.a(t,"./assets/i18n/",".json")}const Ds=localStorage.getItem("lang");Object(y.bb)(i("2PVe"),i("GFvd"),i("GFWS"),i("0zpJ"),i("LRxf")),Object(y.bb)(i("2PVe"),i("oP7I"),i("Joj5"),i("3JeS"),i("LRxf")),Ss="vi"===Ds?Ds:"en";let Cs=(()=>{class t{constructor(){"vi"===Ds?(Ss="vi",setTimeout(()=>{y.p.load(i("+7Wi")),Object(y.nb)("vi")})):(Ss="en",setTimeout(()=>{y.p.load(i("oyrQ")),Object(y.nb)("en")}))}}return t.\u0275mod=N.Kb({type:t}),t.\u0275inj=N.Jb({factory:function(e){return new(e||t)},providers:[n.d],imports:[[I.b,h.c,n.b,o.c,vs,o.m,a.b,s.a,c.d,l.c,d.b,d.a,d.e,r.a,r.d,r.c,h.j,g.a,u.b,C.h,v.i,h.h,f.c,w.b,S.a,u.d,T.a,D.d,h.f,c.f,p.b.forChild({loader:{provide:p.a,useFactory:ys,deps:[b.b]},defaultLanguage:Ss})]]}),t})()}}]);