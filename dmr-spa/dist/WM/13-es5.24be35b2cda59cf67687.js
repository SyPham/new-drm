!function(){function t(t,i){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,i){if(!t)return;if("string"==typeof t)return e(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e(t,i)}(t))||i&&t&&"number"==typeof t.length){n&&(t=n);var a=0,o=function(){};return{s:o,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,s=!0,r=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){r=!0,c=t},f:function(){try{s||null==n.return||n.return()}finally{if(r)throw c}}}}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"R5/Y":function(t,e,i){var n;n=function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}var e=function(){var t={};return function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"introjs-stamp";return t[i]=t[i]||0,void 0===e[i]&&(e[i]=t[i]++),e[i]}}();function i(t,e,i){if(t)for(var n=0,a=t.length;n<a;n++)e(t[n],n);"function"==typeof i&&i()}var n=new function(){var t="introjs_event";this._id=function(t,i,n,a){return i+e(n)+(a?"_".concat(e(a)):"")},this.on=function(e,i,n,a,o){var c=this._id.apply(this,arguments),s=function(t){return n.call(a||e,t||window.event)};"addEventListener"in e?e.addEventListener(i,s,o):"attachEvent"in e&&e.attachEvent("on".concat(i),s),e[t]=e[t]||{},e[t][c]=s},this.off=function(e,i,n,a,o){var c=this._id.apply(this,arguments),s=e[t]&&e[t][c];s&&("removeEventListener"in e?e.removeEventListener(i,s,o):"detachEvent"in e&&e.detachEvent("on".concat(i),s),e[t][c]=null)}},a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function o(t,e){return t(e={exports:{}},e.exports),e.exports}var c=function(t){return t&&t.Math==Math&&t},s=c("object"==typeof globalThis&&globalThis)||c("object"==typeof window&&window)||c("object"==typeof self&&self)||c("object"==typeof a&&a)||function(){return this}()||Function("return this")(),r=function(t){try{return!!t()}catch(e){return!0}},l=!r(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),u={}.propertyIsEnumerable,d=Object.getOwnPropertyDescriptor,h={f:d&&!u.call({1:2},1)?function(t){var e=d(this,t);return!!e&&e.enumerable}:u},g=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},b={}.toString,f=function(t){return b.call(t).slice(8,-1)},p="".split,m=r(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==f(t)?p.call(t,""):Object(t)}:Object,v=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},S=function(t){return m(v(t))},y=function(t){return"object"==typeof t?null!==t:"function"==typeof t},k=function(t,e){if(!y(t))return t;var i,n;if(e&&"function"==typeof(i=t.toString)&&!y(n=i.call(t)))return n;if("function"==typeof(i=t.valueOf)&&!y(n=i.call(t)))return n;if(!e&&"function"==typeof(i=t.toString)&&!y(n=i.call(t)))return n;throw TypeError("Can't convert object to primitive value")},D={}.hasOwnProperty,x=function(t,e){return D.call(t,e)},C=s.document,w=y(C)&&y(C.createElement),I=function(t){return w?C.createElement(t):{}},T=!l&&!r(function(){return 7!=Object.defineProperty(I("div"),"a",{get:function(){return 7}}).a}),R=Object.getOwnPropertyDescriptor,M={f:l?R:function(t,e){if(t=S(t),e=k(e,!0),T)try{return R(t,e)}catch(i){}if(x(t,e))return g(!h.f.call(t,e),t[e])}},B=function(t){if(!y(t))throw TypeError(String(t)+" is not an object");return t},P=Object.defineProperty,O={f:l?P:function(t,e,i){if(B(t),e=k(e,!0),B(i),T)try{return P(t,e,i)}catch(n){}if("get"in i||"set"in i)throw TypeError("Accessors not supported");return"value"in i&&(t[e]=i.value),t}},A=l?function(t,e,i){return O.f(t,e,g(1,i))}:function(t,e,i){return t[e]=i,t},N=function(t,e){try{A(s,t,e)}catch(i){s[t]=e}return e},E=s["__core-js_shared__"]||N("__core-js_shared__",{}),F=Function.toString;"function"!=typeof E.inspectSource&&(E.inspectSource=function(t){return F.call(t)});var _,L,K,j=E.inspectSource,z=s.WeakMap,H="function"==typeof z&&/native code/.test(j(z)),U=o(function(t){(t.exports=function(t,e){return E[t]||(E[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.8.1",mode:"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})}),G=0,J=Math.random(),Q=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++G+J).toString(36)},$=U("keys"),V=function(t){return $[t]||($[t]=Q(t))},q={};if(H){var W=E.state||(E.state=new(0,s.WeakMap)),Y=W.get,X=W.has,Z=W.set;_=function(t,e){return e.facade=t,Z.call(W,t,e),e},L=function(t){return Y.call(W,t)||{}},K=function(t){return X.call(W,t)}}else{var tt=V("state");q[tt]=!0,_=function(t,e){return e.facade=t,A(t,tt,e),e},L=function(t){return x(t,tt)?t[tt]:{}},K=function(t){return x(t,tt)}}var et={set:_,get:L,has:K,enforce:function(t){return K(t)?L(t):_(t,{})},getterFor:function(t){return function(e){var i;if(!y(e)||(i=L(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return i}}},it=o(function(t){var e=et.get,i=et.enforce,n=String(String).split("String");(t.exports=function(t,e,a,o){var c,r=!!o&&!!o.unsafe,l=!!o&&!!o.enumerable,u=!!o&&!!o.noTargetGet;"function"==typeof a&&("string"!=typeof e||x(a,"name")||A(a,"name",e),(c=i(a)).source||(c.source=n.join("string"==typeof e?e:""))),t!==s?(r?!u&&t[e]&&(l=!0):delete t[e],l?t[e]=a:A(t,e,a)):l?t[e]=a:N(e,a)})(Function.prototype,"toString",function(){return"function"==typeof this&&e(this).source||j(this)})}),nt=s,at=function(t){return"function"==typeof t?t:void 0},ot=function(t,e){return arguments.length<2?at(nt[t])||at(s[t]):nt[t]&&nt[t][e]||s[t]&&s[t][e]},ct=Math.ceil,st=Math.floor,rt=function(t){return isNaN(t=+t)?0:(t>0?st:ct)(t)},lt=Math.min,ut=function(t){return t>0?lt(rt(t),9007199254740991):0},dt=Math.max,ht=Math.min,gt=function(t,e){var i=rt(t);return i<0?dt(i+e,0):ht(i,e)},bt=function(t){return function(e,i,n){var a,o=S(e),c=ut(o.length),s=gt(n,c);if(t&&i!=i){for(;c>s;)if((a=o[s++])!=a)return!0}else for(;c>s;s++)if((t||s in o)&&o[s]===i)return t||s||0;return!t&&-1}},ft={includes:bt(!0),indexOf:bt(!1)},pt=ft.indexOf,mt=function(t,e){var i,n=S(t),a=0,o=[];for(i in n)!x(q,i)&&x(n,i)&&o.push(i);for(;e.length>a;)x(n,i=e[a++])&&(~pt(o,i)||o.push(i));return o},vt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],St=vt.concat("length","prototype"),yt={f:Object.getOwnPropertyNames||function(t){return mt(t,St)}},kt={f:Object.getOwnPropertySymbols},Dt=ot("Reflect","ownKeys")||function(t){var e=yt.f(B(t)),i=kt.f;return i?e.concat(i(t)):e},xt=function(t,e){for(var i=Dt(e),n=O.f,a=M.f,o=0;o<i.length;o++){var c=i[o];x(t,c)||n(t,c,a(e,c))}},Ct=/#|\.prototype\./,wt=function(t,e){var i=Tt[It(t)];return i==Mt||i!=Rt&&("function"==typeof e?r(e):!!e)},It=wt.normalize=function(t){return String(t).replace(Ct,".").toLowerCase()},Tt=wt.data={},Rt=wt.NATIVE="N",Mt=wt.POLYFILL="P",Bt=wt,Pt=M.f,Ot=function(t,e){var i,n,a,o,c,r=t.target,l=t.global,u=t.stat;if(i=l?s:u?s[r]||N(r,{}):(s[r]||{}).prototype)for(n in e){if(o=e[n],a=t.noTargetGet?(c=Pt(i,n))&&c.value:i[n],!Bt(l?n:r+(u?".":"#")+n,t.forced)&&void 0!==a){if(typeof o==typeof a)continue;xt(o,a)}(t.sham||a&&a.sham)&&A(o,"sham",!0),it(i,n,o,t)}},At=function(){var t=B(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e};function Nt(t,e){return RegExp(t,e)}var Et,Ft,_t={UNSUPPORTED_Y:r(function(){var t=Nt("a","y");return t.lastIndex=2,null!=t.exec("abcd")}),BROKEN_CARET:r(function(){var t=Nt("^r","gy");return t.lastIndex=2,null!=t.exec("str")})},Lt=RegExp.prototype.exec,Kt=String.prototype.replace,jt=Lt,zt=(Ft=/b*/g,Lt.call(Et=/a/,"a"),Lt.call(Ft,"a"),0!==Et.lastIndex||0!==Ft.lastIndex),Ht=_t.UNSUPPORTED_Y||_t.BROKEN_CARET,Ut=void 0!==/()??/.exec("")[1];(zt||Ut||Ht)&&(jt=function(t){var e,i,n,a,o=this,c=Ht&&o.sticky,s=At.call(o),r=o.source,l=0,u=t;return c&&(-1===(s=s.replace("y","")).indexOf("g")&&(s+="g"),u=String(t).slice(o.lastIndex),o.lastIndex>0&&(!o.multiline||o.multiline&&"\n"!==t[o.lastIndex-1])&&(r="(?: "+r+")",u=" "+u,l++),i=new RegExp("^(?:"+r+")",s)),Ut&&(i=new RegExp("^"+r+"$(?!\\s)",s)),zt&&(e=o.lastIndex),n=Lt.call(c?i:o,u),c?n?(n.input=n.input.slice(l),n[0]=n[0].slice(l),n.index=o.lastIndex,o.lastIndex+=n[0].length):o.lastIndex=0:zt&&n&&(o.lastIndex=o.global?n.index+n[0].length:e),Ut&&n&&n.length>1&&Kt.call(n[0],i,function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(n[a]=void 0)}),n});var Gt=jt;Ot({target:"RegExp",proto:!0,forced:/./.exec!==Gt},{exec:Gt});var Jt=!!Object.getOwnPropertySymbols&&!r(function(){return!String(Symbol())}),Qt=Jt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,$t=U("wks"),Vt=s.Symbol,qt=Qt?Vt:Vt&&Vt.withoutSetter||Q,Wt=function(t){return x($t,t)||($t[t]=Jt&&x(Vt,t)?Vt[t]:qt("Symbol."+t)),$t[t]},Yt=Wt("species"),Xt=!r(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),Zt="$0"==="a".replace(/./,"$0"),te=Wt("replace"),ee=!!/./[te]&&""===/./[te]("a","$0"),ie=!r(function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var i="ab".split(t);return 2!==i.length||"a"!==i[0]||"b"!==i[1]}),ne=function(t,e,i,n){var a=Wt(t),o=!r(function(){var e={};return e[a]=function(){return 7},7!=""[t](e)}),c=o&&!r(function(){var e=!1,i=/a/;return"split"===t&&((i={}).constructor={},i.constructor[Yt]=function(){return i},i.flags="",i[a]=/./[a]),i.exec=function(){return e=!0,null},i[a](""),!e});if(!o||!c||"replace"===t&&(!Xt||!Zt||ee)||"split"===t&&!ie){var s=/./[a],l=i(a,""[t],function(t,e,i,n,a){return e.exec===Gt?o&&!a?{done:!0,value:s.call(e,i,n)}:{done:!0,value:t.call(i,e,n)}:{done:!1}},{REPLACE_KEEPS_$0:Zt,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:ee}),u=l[1];it(String.prototype,t,l[0]),it(RegExp.prototype,a,2==e?function(t,e){return u.call(t,this,e)}:function(t){return u.call(t,this)})}n&&A(RegExp.prototype[a],"sham",!0)},ae=function(t){return function(e,i){var n,a,o=String(v(e)),c=rt(i),s=o.length;return c<0||c>=s?t?"":void 0:(n=o.charCodeAt(c))<55296||n>56319||c+1===s||(a=o.charCodeAt(c+1))<56320||a>57343?t?o.charAt(c):n:t?o.slice(c,c+2):a-56320+(n-55296<<10)+65536}},oe=(ae(!1),ae(!0)),ce=function(t,e,i){return e+(i?oe(t,e).length:1)},se=function(t,e){var i=t.exec;if("function"==typeof i){var n=i.call(t,e);if("object"!=typeof n)throw TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==f(t))throw TypeError("RegExp#exec called on incompatible receiver");return Gt.call(t,e)};ne("match",1,function(t,e,i){return[function(e){var i=v(this),n=null==e?void 0:e[t];return void 0!==n?n.call(e,i):new RegExp(e)[t](String(i))},function(t){var n=i(e,t,this);if(n.done)return n.value;var a=B(t),o=String(this);if(!a.global)return se(a,o);var c=a.unicode;a.lastIndex=0;for(var s,r=[],l=0;null!==(s=se(a,o));){var u=String(s[0]);r[l]=u,""===u&&(a.lastIndex=ce(o,ut(a.lastIndex),c)),l++}return 0===l?null:r}]});var re,le,ue=Array.isArray||function(t){return"Array"==f(t)},de=function(t){return Object(v(t))},he=function(t,e,i){var n=k(e);n in t?O.f(t,n,g(0,i)):t[n]=i},ge=Wt("species"),be=function(t,e){var i;return ue(t)&&("function"!=typeof(i=t.constructor)||i!==Array&&!ue(i.prototype)?y(i)&&null===(i=i[ge])&&(i=void 0):i=void 0),new(void 0===i?Array:i)(0===e?0:e)},fe=ot("navigator","userAgent")||"",pe=s.process,me=pe&&pe.versions,ve=me&&me.v8;ve?le=(re=ve.split("."))[0]+re[1]:fe&&(!(re=fe.match(/Edge\/(\d+)/))||re[1]>=74)&&(re=fe.match(/Chrome\/(\d+)/))&&(le=re[1]);var Se=le&&+le,ye=Wt("species"),ke=function(t){return Se>=51||!r(function(){var e=[];return(e.constructor={})[ye]=function(){return{foo:1}},1!==e[t](Boolean).foo})},De=Wt("isConcatSpreadable"),xe=Se>=51||!r(function(){var t=[];return t[De]=!1,t.concat()[0]!==t}),Ce=ke("concat"),we=function(t){if(!y(t))return!1;var e=t[De];return void 0!==e?!!e:ue(t)};Ot({target:"Array",proto:!0,forced:!xe||!Ce},{concat:function(t){var e,i,n,a,o,c=de(this),s=be(c,0),r=0;for(e=-1,n=arguments.length;e<n;e++)if(we(o=-1===e?c:arguments[e])){if(r+(a=ut(o.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(i=0;i<a;i++,r++)i in o&&he(s,r,o[i])}else{if(r>=9007199254740991)throw TypeError("Maximum allowed index exceeded");he(s,r++,o)}return s.length=r,s}});var Ie={};Ie[Wt("toStringTag")]="z";var Te="[object z]"===String(Ie),Re=Wt("toStringTag"),Me="Arguments"==f(function(){return arguments}()),Be=Te?f:function(t){var e,i,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(i){}}(e=Object(t),Re))?i:Me?f(e):"Object"==(n=f(e))&&"function"==typeof e.callee?"Arguments":n};Te||it(Object.prototype,"toString",Te?{}.toString:function(){return"[object "+Be(this)+"]"},{unsafe:!0});var Pe=RegExp.prototype,Oe=Pe.toString;(r(function(){return"/a/b"!=Oe.call({source:"a",flags:"b"})})||"toString"!=Oe.name)&&it(RegExp.prototype,"toString",function(){var t=B(this),e=String(t.source),i=t.flags;return"/"+e+"/"+String(void 0===i&&t instanceof RegExp&&!("flags"in Pe)?At.call(t):i)},{unsafe:!0});var Ae=Wt("match"),Ne=function(t){var e;return y(t)&&(void 0!==(e=t[Ae])?!!e:"RegExp"==f(t))},Ee=Wt("species"),Fe=[].push,_e=Math.min,Le=!r(function(){return!RegExp(4294967295,"y")});function Ke(t,e){if(t instanceof SVGElement){var n=t.getAttribute("class")||"";n.match(e)||t.setAttribute("class","".concat(n," ").concat(e))}else void 0!==t.classList?i(e.split(" "),function(e){t.classList.add(e)}):t.className.match(e)||(t.className+=" ".concat(e))}function je(t,e){var i="";return t.currentStyle?i=t.currentStyle[e]:document.defaultView&&document.defaultView.getComputedStyle&&(i=document.defaultView.getComputedStyle(t,null).getPropertyValue(e)),i&&i.toLowerCase?i.toLowerCase():i}function ze(t){var e=t.element;if(this._options.scrollToElement){var i=function(t){var e=window.getComputedStyle(t),i="absolute"===e.position,n=/(auto|scroll)/;if("fixed"===e.position)return document.body;for(var a=t;a=a.parentElement;)if(e=window.getComputedStyle(a),(!i||"static"!==e.position)&&n.test(e.overflow+e.overflowY+e.overflowX))return a;return document.body}(e);i!==document.body&&(i.scrollTop=e.offsetTop-i.offsetTop)}}function He(){if(void 0!==window.innerWidth)return{width:window.innerWidth,height:window.innerHeight};var t=document.documentElement;return{width:t.clientWidth,height:t.clientHeight}}function Ue(t,e,i){var n,a=e.element;if("off"!==t&&this._options.scrollToElement&&(n="tooltip"===t?i.getBoundingClientRect():a.getBoundingClientRect(),!function(t){var e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom+80<=window.innerHeight&&e.right<=window.innerWidth}(a))){var o=He().height;n.bottom-(n.bottom-n.top)<0||a.clientHeight>o?window.scrollBy(0,n.top-(o/2-n.height/2)-this._options.scrollPadding):window.scrollBy(0,n.top-(o/2-n.height/2)+this._options.scrollPadding)}}function Ge(t){t.setAttribute("role","button"),t.tabIndex=0}function Je(t){var e=document.body,i=document.documentElement,n=window.pageYOffset||i.scrollTop||e.scrollTop,a=window.pageXOffset||i.scrollLeft||e.scrollLeft,o=t.getBoundingClientRect();return{top:o.top+n,width:o.width,height:o.height,left:o.left+a}}function Qe(t){var e=t.parentNode;return!(!e||"HTML"===e.nodeName)&&("fixed"===je(t,"position")||Qe(e))}ne("split",2,function(t,e,i){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,i){var n=String(v(this)),a=void 0===i?4294967295:i>>>0;if(0===a)return[];if(void 0===t)return[n];if(!Ne(t))return e.call(n,t,a);for(var o,c,s,r=[],l=0,u=new RegExp(t.source,(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":"")+"g");(o=Gt.call(u,n))&&!((c=u.lastIndex)>l&&(r.push(n.slice(l,o.index)),o.length>1&&o.index<n.length&&Fe.apply(r,o.slice(1)),s=o[0].length,l=c,r.length>=a));)u.lastIndex===o.index&&u.lastIndex++;return l===n.length?!s&&u.test("")||r.push(""):r.push(n.slice(l)),r.length>a?r.slice(0,a):r}:"0".split(void 0,0).length?function(t,i){return void 0===t&&0===i?[]:e.call(this,t,i)}:e,[function(e,i){var a=v(this),o=null==e?void 0:e[t];return void 0!==o?o.call(e,a,i):n.call(String(a),e,i)},function(t,a){var o=i(n,t,this,a,n!==e);if(o.done)return o.value;var c=B(t),s=String(this),r=function(t,e){var i,n=B(t).constructor;return void 0===n||null==(i=B(n)[Ee])?e:function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}(i)}(c,RegExp),l=c.unicode,u=new r(Le?c:"^(?:"+c.source+")",(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(Le?"y":"g")),d=void 0===a?4294967295:a>>>0;if(0===d)return[];if(0===s.length)return null===se(u,s)?[s]:[];for(var h=0,g=0,b=[];g<s.length;){u.lastIndex=Le?g:0;var f,p=se(u,Le?s:s.slice(g));if(null===p||(f=_e(ut(u.lastIndex+(Le?0:g)),s.length))===h)g=ce(s,g,l);else{if(b.push(s.slice(h,g)),b.length===d)return b;for(var m=1;m<=p.length-1;m++)if(b.push(p[m]),b.length===d)return b;g=h=f}}return b.push(s.slice(h)),b}]},!Le);var $e=Math.max,Ve=Math.min,qe=Math.floor,We=/\$([$&'`]|\d\d?|<[^>]*>)/g,Ye=/\$([$&'`]|\d\d?)/g;function Xe(t,e){if(t instanceof SVGElement){var i=t.getAttribute("class")||"";t.setAttribute("class",i.replace(e,"").replace(/^\s+|\s+$/g,""))}else t.className=t.className.replace(e,"").replace(/^\s+|\s+$/g,"")}function Ze(t,e){var i="";if(t.style.cssText&&(i+=t.style.cssText),"string"==typeof e)i+=e;else for(var n in e)i+="".concat(n,":").concat(e[n],";");t.style.cssText=i}function ti(t){if(t){if(!this._introItems[this._currentStep])return;var e=this._introItems[this._currentStep],i=Je(e.element),n=this._options.helperElementPadding;Qe(e.element)?Ke(t,"introjs-fixedTooltip"):Xe(t,"introjs-fixedTooltip"),"floating"===e.position&&(n=0),Ze(t,{width:"".concat(i.width+n,"px"),height:"".concat(i.height+n,"px"),top:"".concat(i.top-n/2,"px"),left:"".concat(i.left-n/2,"px")})}}ne("replace",2,function(t,e,i,n){var a=n.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,o=n.REPLACE_KEEPS_$0,c=a?"$":"$0";return[function(i,n){var a=v(this),o=null==i?void 0:i[t];return void 0!==o?o.call(i,a,n):e.call(String(a),i,n)},function(t,n){if(!a&&o||"string"==typeof n&&-1===n.indexOf(c)){var r=i(e,t,this,n);if(r.done)return r.value}var l=B(t),u=String(this),d="function"==typeof n;d||(n=String(n));var h=l.global;if(h){var g=l.unicode;l.lastIndex=0}for(var b=[];;){var f=se(l,u);if(null===f)break;if(b.push(f),!h)break;""===String(f[0])&&(l.lastIndex=ce(u,ut(l.lastIndex),g))}for(var p,m="",v=0,S=0;S<b.length;S++){f=b[S];for(var y=String(f[0]),k=$e(Ve(rt(f.index),u.length),0),D=[],x=1;x<f.length;x++)D.push(void 0===(p=f[x])?p:String(p));var C=f.groups;if(d){var w=[y].concat(D,k,u);void 0!==C&&w.push(C);var I=String(n.apply(void 0,w))}else I=s(y,u,k,D,C,n);k>=v&&(m+=u.slice(v,k)+I,v=k+y.length)}return m+u.slice(v)}];function s(t,i,n,a,o,c){var s=n+t.length,r=a.length,l=Ye;return void 0!==o&&(o=de(o),l=We),e.call(c,l,function(e,c){var l;switch(c.charAt(0)){case"$":return"$";case"&":return t;case"`":return i.slice(0,n);case"'":return i.slice(s);case"<":l=o[c.slice(1,-1)];break;default:var u=+c;if(0===u)return e;if(u>r){var d=qe(u/10);return 0===d?e:d<=r?void 0===a[d-1]?c.charAt(1):a[d-1]+c.charAt(1):e}l=a[u-1]}return void 0===l?"":l})}});var ei,ii=Object.keys||function(t){return mt(t,vt)},ni=l?Object.defineProperties:function(t,e){B(t);for(var i,n=ii(e),a=n.length,o=0;a>o;)O.f(t,i=n[o++],e[i]);return t},ai=ot("document","documentElement"),oi=V("IE_PROTO"),ci=function(){},si=function(t){return"<script>"+t+"<\/script>"},ri=function(){try{ei=document.domain&&new ActiveXObject("htmlfile")}catch(n){}var t,e;ri=ei?function(t){t.write(si("")),t.close();var e=t.parentWindow.Object;return t=null,e}(ei):((e=I("iframe")).style.display="none",ai.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(si("document.F=Object")),t.close(),t.F);for(var i=vt.length;i--;)delete ri.prototype[vt[i]];return ri()};q[oi]=!0;var li=Object.create||function(t,e){var i;return null!==t?(ci.prototype=B(t),i=new ci,ci.prototype=null,i[oi]=t):i=ri(),void 0===e?i:ni(i,e)},ui=Wt("unscopables"),di=Array.prototype;null==di[ui]&&O.f(di,ui,{configurable:!0,value:li(null)});var hi=Object.defineProperty,gi={},bi=function(t){throw t},fi=function(t,e){if(x(gi,t))return gi[t];e||(e={});var i=[][t],n=!!x(e,"ACCESSORS")&&e.ACCESSORS,a=x(e,0)?e[0]:bi,o=x(e,1)?e[1]:void 0;return gi[t]=!!i&&!r(function(){if(n&&!l)return!0;var t={length:-1};n?hi(t,1,{enumerable:!0,get:bi}):t[1]=1,i.call(t,a,o)})},pi=ft.includes;Ot({target:"Array",proto:!0,forced:!fi("indexOf",{ACCESSORS:!0,1:0})},{includes:function(t){return pi(this,t,arguments.length>1?arguments[1]:void 0)}}),di[ui].includes=!0;var mi,vi=ft.indexOf,Si=[].indexOf,yi=!!Si&&1/[1].indexOf(1,-0)<0,ki=!!(mi=[].indexOf)&&r(function(){mi.call(null,function(){throw 1},1)}),Di=fi("indexOf",{ACCESSORS:!0,1:0});Ot({target:"Array",proto:!0,forced:yi||!ki||!Di},{indexOf:function(t){return yi?Si.apply(this,arguments)||0:vi(this,t,arguments.length>1?arguments[1]:void 0)}});var xi=ke("slice"),Ci=fi("slice",{ACCESSORS:!0,0:0,1:2}),wi=Wt("species"),Ii=[].slice,Ti=Math.max;Ot({target:"Array",proto:!0,forced:!xi||!Ci},{slice:function(t,e){var i,n,a,o=S(this),c=ut(o.length),s=gt(t,c),r=gt(void 0===e?c:e,c);if(ue(o)&&("function"!=typeof(i=o.constructor)||i!==Array&&!ue(i.prototype)?y(i)&&null===(i=i[wi])&&(i=void 0):i=void 0,i===Array||void 0===i))return Ii.call(o,s,r);for(n=new(void 0===i?Array:i)(Ti(r-s,0)),a=0;s<r;s++,a++)s in o&&he(n,a,o[s]);return n.length=a,n}});var Ri=function(t){if(Ne(t))throw TypeError("The method doesn't accept regular expressions");return t},Mi=Wt("match");function Bi(t,e,i,n,a){return t.left+e+i.width>n.width?(a.left="".concat(n.width-i.width-t.left,"px"),!1):(a.left="".concat(e,"px"),!0)}function Pi(t,e,i,n){return t.left+t.width-e-i.width<0?(n.style.left="".concat(-t.left,"px"),!1):(n.style.right="".concat(e,"px"),!0)}Ot({target:"String",proto:!0,forced:!function(t){var e=/./;try{"/./".includes(e)}catch(i){try{return e[Mi]=!1,"/./".includes(e)}catch(n){}}return!1}()},{includes:function(t){return!!~String(v(this)).indexOf(Ri(t),arguments.length>1?arguments[1]:void 0)}});var Oi=ke("splice"),Ai=fi("splice",{ACCESSORS:!0,0:0,1:2}),Ni=Math.max,Ei=Math.min;function Fi(t,e){t.includes(e)&&t.splice(t.indexOf(e),1)}function _i(t,e,i){var n=this._options.positionPrecedence.slice(),a=He(),o=Je(e).height+10,c=Je(e).width+20,s=t.getBoundingClientRect(),r="floating";s.bottom+o>a.height&&Fi(n,"bottom"),s.top-o<0&&Fi(n,"top"),s.right+c>a.width&&Fi(n,"right"),s.left-c<0&&Fi(n,"left");var l,u,d=-1!==(u=(l=i||"").indexOf("-"))?l.substr(u):"";return i&&(i=i.split("-")[0]),n.length&&(r="auto"!==i&&n.includes(i)?i:n[0]),["top","bottom"].includes(r)&&(r+=function(t,e,i,n){var a=e/2,o=Math.min(i.width,window.screen.width),c=["-left-aligned","-middle-aligned","-right-aligned"];return o-t<e&&Fi(c,"-left-aligned"),(t<a||o-t<a)&&Fi(c,"-middle-aligned"),t<e&&Fi(c,"-right-aligned"),c.length?c.includes(n)?n:c[0]:"-middle-aligned"}(s.left,c,a,d)),r}function Li(t,e,i,n){var a,o,c,s,r;if(n=n||!1,e.style.top=null,e.style.right=null,e.style.bottom=null,e.style.left=null,e.style.marginLeft=null,e.style.marginTop=null,i.style.display="inherit",this._introItems[this._currentStep])switch(e.className="introjs-tooltip ".concat("string"==typeof(a=this._introItems[this._currentStep]).tooltipClass?a.tooltipClass:this._options.tooltipClass).replace(/^\s+|\s+$/g,""),e.setAttribute("role","dialog"),"floating"!==(r=this._introItems[this._currentStep].position)&&(r=_i.call(this,t,e,r)),c=Je(t),o=Je(e),s=He(),Ke(e,"introjs-".concat(r)),r){case"top-right-aligned":i.className="introjs-arrow bottom-right";var l=0;Pi(c,l,o,e),e.style.bottom="".concat(c.height+20,"px");break;case"top-middle-aligned":i.className="introjs-arrow bottom-middle";var u=c.width/2-o.width/2;n&&(u+=5),Pi(c,u,o,e)&&(e.style.right=null,Bi(c,u,o,s,e)),e.style.bottom="".concat(c.height+20,"px");break;case"top-left-aligned":case"top":i.className="introjs-arrow bottom",Bi(c,n?0:15,o,s,e),e.style.bottom="".concat(c.height+20,"px");break;case"right":e.style.left="".concat(c.width+20,"px"),c.top+o.height>s.height?(i.className="introjs-arrow left-bottom",e.style.top="-".concat(o.height-c.height-20,"px")):i.className="introjs-arrow left";break;case"left":n||!0!==this._options.showStepNumbers||(e.style.top="15px"),c.top+o.height>s.height?(e.style.top="-".concat(o.height-c.height-20,"px"),i.className="introjs-arrow right-bottom"):i.className="introjs-arrow right",e.style.right="".concat(c.width+20,"px");break;case"floating":i.style.display="none",e.style.left="50%",e.style.top="50%",e.style.marginLeft="-".concat(o.width/2,"px"),e.style.marginTop="-".concat(o.height/2,"px");break;case"bottom-right-aligned":i.className="introjs-arrow top-right",Pi(c,l=0,o,e),e.style.top="".concat(c.height+20,"px");break;case"bottom-middle-aligned":i.className="introjs-arrow top-middle",u=c.width/2-o.width/2,n&&(u+=5),Pi(c,u,o,e)&&(e.style.right=null,Bi(c,u,o,s,e)),e.style.top="".concat(c.height+20,"px");break;default:i.className="introjs-arrow top",Bi(c,0,o,s,e),e.style.top="".concat(c.height+20,"px")}}function Ki(){i(document.querySelectorAll(".introjs-showElement"),function(t){Xe(t,/introjs-[a-zA-Z]+/g)})}function ji(t,e){var i=document.createElement(t);e=e||{};var n=/^(?:role|data-|aria-)/;for(var a in e){var o=e[a];"style"===a?Ze(i,o):a.match(n)?i.setAttribute(a,o):i[a]=o}return i}function zi(t,e,i){if(i){var n=e.style.opacity||"1";Ze(e,{opacity:"0"}),window.setTimeout(function(){Ze(e,{opacity:n})},10)}t.appendChild(e)}function Hi(){return parseInt(this._currentStep+1,10)/this._introItems.length*100}function Ui(){var t=document.querySelector(".introjs-disableInteraction");null===t&&(t=ji("div",{className:"introjs-disableInteraction"}),this._targetElement.appendChild(t)),ti.call(this,t)}function Gi(t){var e=this;void 0!==this._introChangeCallback&&this._introChangeCallback.call(this,t.element);var n,a,o,c=this,s=document.querySelector(".introjs-helperLayer"),r=document.querySelector(".introjs-tooltipReferenceLayer"),l="introjs-helperLayer";if("string"==typeof t.highlightClass&&(l+=" ".concat(t.highlightClass)),"string"==typeof this._options.highlightClass&&(l+=" ".concat(this._options.highlightClass)),null!==s){var u=r.querySelector(".introjs-helperNumberLayer"),d=r.querySelector(".introjs-tooltiptext"),h=r.querySelector(".introjs-tooltip-title"),g=r.querySelector(".introjs-arrow"),b=r.querySelector(".introjs-tooltip");o=r.querySelector(".introjs-skipbutton"),a=r.querySelector(".introjs-prevbutton"),n=r.querySelector(".introjs-nextbutton"),s.className=l,b.style.opacity=0,b.style.display="none",ze.call(c,t),ti.call(c,s),ti.call(c,r),Ki(),c._lastShowElementTimer&&window.clearTimeout(c._lastShowElementTimer),c._lastShowElementTimer=window.setTimeout(function(){null!==u&&(u.innerHTML="".concat(t.step," of ").concat(e._introItems.length)),d.innerHTML=t.intro,h.innerHTML=t.title,b.style.display="block",Li.call(c,t.element,b,g),c._options.showBullets&&(r.querySelector(".introjs-bullets li > a.active").className="",r.querySelector('.introjs-bullets li > a[data-stepnumber="'.concat(t.step,'"]')).className="active"),r.querySelector(".introjs-progress .introjs-progressbar").style.cssText="width:".concat(Hi.call(c),"%;"),r.querySelector(".introjs-progress .introjs-progressbar").setAttribute("aria-valuenow",Hi.call(c)),b.style.opacity=1,(null!=n&&/introjs-donebutton/gi.test(n.className)||null!=n)&&n.focus(),Ue.call(c,t.scrollTo,t,d)},350)}else{var f=ji("div",{className:l}),p=ji("div",{className:"introjs-tooltipReferenceLayer"}),m=ji("div",{className:"introjs-arrow"}),v=ji("div",{className:"introjs-tooltip"}),S=ji("div",{className:"introjs-tooltiptext"}),y=ji("div",{className:"introjs-tooltip-header"}),k=ji("h1",{className:"introjs-tooltip-title"}),D=ji("div",{className:"introjs-bullets"}),x=ji("div"),C=ji("div");Ze(f,{"box-shadow":"0 0 1px 2px rgba(33, 33, 33, 0.8), rgba(33, 33, 33, ".concat(c._options.overlayOpacity.toString(),") 0 0 0 5000px")}),ze.call(c,t),ti.call(c,f),ti.call(c,p),zi(this._targetElement,f,!0),zi(this._targetElement,p),S.innerHTML=t.intro,k.innerHTML=t.title,!1===this._options.showBullets&&(D.style.display="none");var w=ji("ul");w.setAttribute("role","tablist");var I=function(){c.goToStep(this.getAttribute("data-stepnumber"))};i(this._introItems,function(e,i){var n=e.step,a=ji("li"),o=ji("a");a.setAttribute("role","presentation"),o.setAttribute("role","tab"),o.onclick=I,i===t.step-1&&(o.className="active"),Ge(o),o.innerHTML="&nbsp;",o.setAttribute("data-stepnumber",n),a.appendChild(o),w.appendChild(a)}),D.appendChild(w),x.className="introjs-progress",!1===this._options.showProgress&&(x.style.display="none");var T=ji("div",{className:"introjs-progressbar"});this._options.progressBarAdditionalClass&&(T.className+=" "+this._options.progressBarAdditionalClass),T.setAttribute("role","progress"),T.setAttribute("aria-valuemin",0),T.setAttribute("aria-valuemax",100),T.setAttribute("aria-valuenow",Hi.call(this)),T.style.cssText="width:".concat(Hi.call(this),"%;"),x.appendChild(T),C.className="introjs-tooltipbuttons",!1===this._options.showButtons&&(C.style.display="none"),y.appendChild(k),v.appendChild(y),v.appendChild(S),v.appendChild(D),v.appendChild(x);var R=ji("div");!0===this._options.showStepNumbers&&(R.className="introjs-helperNumberLayer",R.innerHTML="".concat(t.step," of ").concat(this._introItems.length),v.appendChild(R)),v.appendChild(m),p.appendChild(v),(n=ji("a")).onclick=function(){c._introItems.length-1!==c._currentStep?$i.call(c):/introjs-donebutton/gi.test(n.className)&&("function"==typeof c._introCompleteCallback&&c._introCompleteCallback.call(c),fn.call(c,c._targetElement))},Ge(n),n.innerHTML=this._options.nextLabel,(a=ji("a")).onclick=function(){0!==c._currentStep&&Vi.call(c)},Ge(a),a.innerHTML=this._options.prevLabel,Ge(o=ji("a",{className:"introjs-skipbutton"})),o.innerHTML=this._options.skipLabel,o.onclick=function(){c._introItems.length-1===c._currentStep&&"function"==typeof c._introCompleteCallback&&c._introCompleteCallback.call(c),"function"==typeof c._introSkipCallback&&c._introSkipCallback.call(c),fn.call(c,c._targetElement)},y.appendChild(o),this._introItems.length>1&&C.appendChild(a),C.appendChild(n),v.appendChild(C),Li.call(c,t.element,v,m),Ue.call(this,t.scrollTo,t,v)}var M=c._targetElement.querySelector(".introjs-disableInteraction");M&&M.parentNode.removeChild(M),t.disableInteraction&&Ui.call(c),0===this._currentStep&&this._introItems.length>1?(null!=n&&(n.className="".concat(this._options.buttonClass," introjs-nextbutton"),n.innerHTML=this._options.nextLabel),!0===this._options.hidePrev?(null!=a&&(a.className="".concat(this._options.buttonClass," introjs-prevbutton introjs-hidden")),null!=n&&Ke(n,"introjs-fullbutton")):null!=a&&(a.className="".concat(this._options.buttonClass," introjs-prevbutton introjs-disabled"))):this._introItems.length-1===this._currentStep||1===this._introItems.length?(null!=a&&(a.className="".concat(this._options.buttonClass," introjs-prevbutton")),!0===this._options.hideNext?(null!=n&&(n.className="".concat(this._options.buttonClass," introjs-nextbutton introjs-hidden")),null!=a&&Ke(a,"introjs-fullbutton")):null!=n&&(!0===this._options.nextToDone?(n.innerHTML=this._options.doneLabel,Ke(n,"".concat(this._options.buttonClass," introjs-nextbutton introjs-donebutton"))):n.className="".concat(this._options.buttonClass," introjs-nextbutton introjs-disabled"))):(null!=a&&(a.className="".concat(this._options.buttonClass," introjs-prevbutton")),null!=n&&(n.className="".concat(this._options.buttonClass," introjs-nextbutton"),n.innerHTML=this._options.nextLabel)),null!=a&&a.setAttribute("role","button"),null!=n&&n.setAttribute("role","button"),null!=o&&o.setAttribute("role","button"),null!=n&&n.focus(),function(t){var e=t.element;Ke(e,"introjs-showElement");var i=je(e,"position");"absolute"!==i&&"relative"!==i&&"sticky"!==i&&"fixed"!==i&&Ke(e,"introjs-relativePosition")}(t),void 0!==this._introAfterChangeCallback&&this._introAfterChangeCallback.call(this,t.element)}function Ji(t){this._currentStep=t-2,void 0!==this._introItems&&$i.call(this)}function Qi(t){this._currentStepNumber=t,void 0!==this._introItems&&$i.call(this)}function $i(){var t=this;this._direction="forward",void 0!==this._currentStepNumber&&i(this._introItems,function(e,i){e.step===t._currentStepNumber&&(t._currentStep=i-1,t._currentStepNumber=void 0)}),void 0===this._currentStep?this._currentStep=0:++this._currentStep;var e=this._introItems[this._currentStep],n=!0;return void 0!==this._introBeforeChangeCallback&&(n=this._introBeforeChangeCallback.call(this,e&&e.element)),!1===n?(--this._currentStep,!1):this._introItems.length<=this._currentStep?("function"==typeof this._introCompleteCallback&&this._introCompleteCallback.call(this),void fn.call(this,this._targetElement)):void Gi.call(this,e)}function Vi(){if(this._direction="backward",0===this._currentStep)return!1;--this._currentStep;var t=this._introItems[this._currentStep],e=!0;if(void 0!==this._introBeforeChangeCallback&&(e=this._introBeforeChangeCallback.call(this,t&&t.element)),!1===e)return++this._currentStep,!1;Gi.call(this,t)}function qi(){return this._currentStep}function Wi(t){var e=null===t.code?t.which:t.code;if(null===e&&(e=null===t.charCode?t.keyCode:t.charCode),"Escape"!==e&&27!==e||!0!==this._options.exitOnEsc){if("ArrowLeft"===e||37===e)Vi.call(this);else if("ArrowRight"===e||39===e)$i.call(this);else if("Enter"===e||"NumpadEnter"===e||13===e){var i=t.target||t.srcElement;i&&i.className.match("introjs-prevbutton")?Vi.call(this):i&&i.className.match("introjs-skipbutton")?(this._introItems.length-1===this._currentStep&&"function"==typeof this._introCompleteCallback&&this._introCompleteCallback.call(this),fn.call(this,this._targetElement)):i&&i.getAttribute("data-stepnumber")?i.click():$i.call(this),t.preventDefault?t.preventDefault():t.returnValue=!1}}else fn.call(this,this._targetElement)}function Yi(e){if(null===e||"object"!==t(e)||void 0!==e.nodeType)return e;var i={};for(var n in e)i[n]=void 0!==window.jQuery&&e[n]instanceof window.jQuery?e[n]:Yi(e[n]);return i}function Xi(t){var e=document.querySelector(".introjs-hints");return e?e.querySelectorAll(t):[]}function Zi(t){var e=Xi('.introjs-hint[data-step="'.concat(t,'"]'))[0];ln.call(this),e&&Ke(e,"introjs-hidehint"),void 0!==this._hintCloseCallback&&this._hintCloseCallback.call(this,t)}function tn(){var t=this;i(Xi(".introjs-hint"),function(e){Zi.call(t,e.getAttribute("data-step"))})}function en(){var t=this,e=Xi(".introjs-hint");e&&e.length?i(e,function(e){nn.call(t,e.getAttribute("data-step"))}):un.call(this,this._targetElement)}function nn(t){var e=Xi('.introjs-hint[data-step="'.concat(t,'"]'))[0];e&&Xe(e,/introjs-hidehint/g)}function an(){var t=this;i(Xi(".introjs-hint"),function(e){on.call(t,e.getAttribute("data-step"))})}function on(t){var e=Xi('.introjs-hint[data-step="'.concat(t,'"]'))[0];e&&e.parentNode.removeChild(e)}function cn(){var t=this,e=this,n=document.querySelector(".introjs-hints");null===n&&(n=ji("div",{className:"introjs-hints"})),i(this._introItems,function(i,a){if(!document.querySelector('.introjs-hint[data-step="'.concat(a,'"]'))){var o=ji("a",{className:"introjs-hint"});Ge(o),o.onclick=function(t){return function(i){var n=i||window.event;n.stopPropagation&&n.stopPropagation(),null!==n.cancelBubble&&(n.cancelBubble=!0),rn.call(e,t)}}(a),i.hintAnimation||Ke(o,"introjs-hint-no-anim"),Qe(i.element)&&Ke(o,"introjs-fixedhint");var c=ji("div",{className:"introjs-hint-dot"}),s=ji("div",{className:"introjs-hint-pulse"});o.appendChild(c),o.appendChild(s),o.setAttribute("data-step",a),i.targetElement=i.element,i.element=o,sn.call(t,i.hintPosition,o,i.targetElement),n.appendChild(o)}}),document.body.appendChild(n),void 0!==this._hintsAddedCallback&&this._hintsAddedCallback.call(this)}function sn(t,e,i){var n=e.style,a=Je.call(this,i);switch(t){default:case"top-left":n.left="".concat(a.left,"px"),n.top="".concat(a.top,"px");break;case"top-right":n.left="".concat(a.left+a.width-20,"px"),n.top="".concat(a.top,"px");break;case"bottom-left":n.left="".concat(a.left,"px"),n.top="".concat(a.top+a.height-20,"px");break;case"bottom-right":n.left="".concat(a.left+a.width-20,"px"),n.top="".concat(a.top+a.height-20,"px");break;case"middle-left":n.left="".concat(a.left,"px"),n.top="".concat(a.top+(a.height-20)/2,"px");break;case"middle-right":n.left="".concat(a.left+a.width-20,"px"),n.top="".concat(a.top+(a.height-20)/2,"px");break;case"middle-middle":n.left="".concat(a.left+(a.width-20)/2,"px"),n.top="".concat(a.top+(a.height-20)/2,"px");break;case"bottom-middle":n.left="".concat(a.left+(a.width-20)/2,"px"),n.top="".concat(a.top+a.height-20,"px");break;case"top-middle":n.left="".concat(a.left+(a.width-20)/2,"px"),n.top="".concat(a.top,"px")}}function rn(t){var e=document.querySelector('.introjs-hint[data-step="'.concat(t,'"]')),i=this._introItems[t];void 0!==this._hintClickCallback&&this._hintClickCallback.call(this,e,i,t);var n=ln.call(this);if(parseInt(n,10)!==t){var a=ji("div",{className:"introjs-tooltip"}),o=ji("div"),c=ji("div"),s=ji("div");a.onclick=function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},o.className="introjs-tooltiptext";var r=ji("p");r.innerHTML=i.hint;var l=ji("a");l.className=this._options.buttonClass,l.setAttribute("role","button"),l.innerHTML=this._options.hintButtonLabel,l.onclick=Zi.bind(this,t),o.appendChild(r),o.appendChild(l),c.className="introjs-arrow",a.appendChild(c),a.appendChild(o),this._currentStep=e.getAttribute("data-step"),s.className="introjs-tooltipReferenceLayer introjs-hintReference",s.setAttribute("data-step",e.getAttribute("data-step")),ti.call(this,s),s.appendChild(a),document.body.appendChild(s),Li.call(this,e,a,c,!0)}}function ln(){var t=document.querySelector(".introjs-hintReference");if(t){var e=t.getAttribute("data-step");return t.parentNode.removeChild(t),e}}function un(t){var e=this;if(this._introItems=[],this._options.hints)i(this._options.hints,function(t){var i=Yi(t);"string"==typeof i.element&&(i.element=document.querySelector(i.element)),i.hintPosition=i.hintPosition||e._options.hintPosition,i.hintAnimation=i.hintAnimation||e._options.hintAnimation,null!==i.element&&e._introItems.push(i)});else{var a=t.querySelectorAll("*[data-hint]");if(!a||!a.length)return!1;i(a,function(t){var i=t.getAttribute("data-hintanimation");i=i?"true"===i:e._options.hintAnimation,e._introItems.push({element:t,hint:t.getAttribute("data-hint"),hintPosition:t.getAttribute("data-hintposition")||e._options.hintPosition,hintAnimation:i,tooltipClass:t.getAttribute("data-tooltipclass"),position:t.getAttribute("data-position")||e._options.tooltipPosition})})}cn.call(this),n.on(document,"click",ln,this,!1),n.on(window,"resize",dn,this,!0)}function dn(){var t=this;i(this._introItems,function(e){var i=e.targetElement;void 0!==i&&sn.call(t,e.hintPosition,e.element,i)})}function hn(){if(ti.call(this,document.querySelector(".introjs-helperLayer")),ti.call(this,document.querySelector(".introjs-tooltipReferenceLayer")),ti.call(this,document.querySelector(".introjs-disableInteraction")),null!=this._currentStep){var t=document.querySelector(".introjs-arrow"),e=document.querySelector(".introjs-tooltip");Li.call(this,this._introItems[this._currentStep].element,e,t)}return dn.call(this),this}function gn(){hn.call(this)}function bn(t,e){if(t&&t.parentElement){var i=t.parentElement;e?(Ze(t,{opacity:"0"}),window.setTimeout(function(){i.removeChild(t)},500)):i.removeChild(t)}}function fn(t,e){var a=!0;if(void 0!==this._introBeforeExitCallback&&(a=this._introBeforeExitCallback.call(this)),e||!1!==a){var o=t.querySelectorAll(".introjs-overlay");o&&o.length&&i(o,function(t){return bn(t)}),bn(t.querySelector(".introjs-helperLayer"),!0),bn(t.querySelector(".introjs-tooltipReferenceLayer")),bn(t.querySelector(".introjs-disableInteraction")),bn(document.querySelector(".introjsFloatingElement")),Ki(),n.off(window,"keydown",Wi,this,!0),n.off(window,"resize",gn,this,!0),void 0!==this._introExitCallback&&this._introExitCallback.call(this),this._currentStep=void 0}}function pn(t){var e=ji("div",{className:"introjs-overlay"}),i=this;if(t.tagName&&"body"!==t.tagName.toLowerCase()){var n=Je(t);n&&Ze(e,{width:"".concat(n.width,"px"),height:"".concat(n.height,"px"),top:"".concat(n.top,"px"),left:"".concat(n.left,"px")})}else Ze(e,{top:0,bottom:0,left:0,right:0,position:"fixed"});return t.appendChild(e),!0===i._options.exitOnOverlayClick&&(Ze(e,{cursor:"pointer"}),e.onclick=function(){fn.call(i,t)}),!0}function mn(t,e){var a=this,o=t.querySelectorAll("*[data-intro]"),c=[];if(this._options.steps)i(this._options.steps,function(t){var e=Yi(t);if(e.step=c.length+1,e.title=e.title||"","string"==typeof e.element&&(e.element=document.querySelector(e.element)),null==e.element){var i=document.querySelector(".introjsFloatingElement");null===i&&(i=ji("div",{className:"introjsFloatingElement"}),document.body.appendChild(i)),e.element=i,e.position="floating"}e.scrollTo=e.scrollTo||a._options.scrollTo,void 0===e.disableInteraction&&(e.disableInteraction=a._options.disableInteraction),null!==e.element&&c.push(e)});else{var s;if(o.length<1)return!1;i(o,function(t){if((!e||t.getAttribute("data-intro-group")===e)&&"none"!==t.style.display){var i=parseInt(t.getAttribute("data-step"),10);s=t.hasAttribute("data-disable-interaction")?!!t.getAttribute("data-disable-interaction"):a._options.disableInteraction,i>0&&(c[i-1]={element:t,title:t.getAttribute("data-title")||"",intro:t.getAttribute("data-intro"),step:parseInt(t.getAttribute("data-step"),10),tooltipClass:t.getAttribute("data-tooltipclass"),highlightClass:t.getAttribute("data-highlightclass"),position:t.getAttribute("data-position")||a._options.tooltipPosition,scrollTo:t.getAttribute("data-scrollto")||a._options.scrollTo,disableInteraction:s})}});var r=0;i(o,function(t){if((!e||t.getAttribute("data-intro-group")===e)&&null===t.getAttribute("data-step")){for(;void 0!==c[r];)r++;s=t.hasAttribute("data-disable-interaction")?!!t.getAttribute("data-disable-interaction"):a._options.disableInteraction,c[r]={element:t,title:t.getAttribute("data-title")||"",intro:t.getAttribute("data-intro"),step:r+1,tooltipClass:t.getAttribute("data-tooltipclass"),highlightClass:t.getAttribute("data-highlightclass"),position:t.getAttribute("data-position")||a._options.tooltipPosition,scrollTo:t.getAttribute("data-scrollto")||a._options.scrollTo,disableInteraction:s}}})}for(var l=[],u=0;u<c.length;u++)c[u]&&l.push(c[u]);return(c=l).sort(function(t,e){return t.step-e.step}),this._introItems=c,pn.call(this,t)&&($i.call(this),this._options.keyboardNavigation&&n.on(window,"keydown",Wi,this,!0),n.on(window,"resize",gn,this,!0)),!1}function vn(t){this._targetElement=t,this._introItems=[],this._options={nextLabel:"Next",prevLabel:"Back",skipLabel:"\xd7",doneLabel:"Done",hidePrev:!1,hideNext:!1,nextToDone:!0,tooltipPosition:"bottom",tooltipClass:"",highlightClass:"",exitOnEsc:!0,exitOnOverlayClick:!0,showStepNumbers:!1,keyboardNavigation:!0,showButtons:!0,showBullets:!0,showProgress:!1,scrollToElement:!0,scrollTo:"element",scrollPadding:30,overlayOpacity:.5,positionPrecedence:["bottom","top","right","left"],disableInteraction:!1,helperElementPadding:10,hintPosition:"top-middle",hintButtonLabel:"Got it",hintAnimation:!0,buttonClass:"introjs-button",progressBarAdditionalClass:!1}}Ot({target:"Array",proto:!0,forced:!Oi||!Ai},{splice:function(t,e){var i,n,a,o,c,s,r=de(this),l=ut(r.length),u=gt(t,l),d=arguments.length;if(0===d?i=n=0:1===d?(i=0,n=l-u):(i=d-2,n=Ei(Ni(rt(e),0),l-u)),l+i-n>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(a=be(r,n),o=0;o<n;o++)(c=u+o)in r&&he(a,o,r[c]);if(a.length=n,i<n){for(o=u;o<l-n;o++)s=o+i,(c=o+n)in r?r[s]=r[c]:delete r[s];for(o=l;o>l-n+i;o--)delete r[o-1]}else if(i>n)for(o=l-n;o>u;o--)s=o+i-1,(c=o+n-1)in r?r[s]=r[c]:delete r[s];for(o=0;o<i;o++)r[o+u]=arguments[o+2];return r.length=l-n+i,a}});var Sn=function i(n){var a;if("object"===t(n))a=new vn(n);else if("string"==typeof n){var o=document.querySelector(n);if(!o)throw new Error("There is no element with given selector.");a=new vn(o)}else a=new vn(document.body);return i.instances[e(a,"introjs-instance")]=a,a};return Sn.version="3.2.1",Sn.instances={},Sn.fn=vn.prototype={clone:function(){return new vn(this)},setOption:function(t,e){return this._options[t]=e,this},setOptions:function(t){return this._options=function(t,e){var i,n={};for(i in t)n[i]=t[i];for(i in e)n[i]=e[i];return n}(this._options,t),this},start:function(t){return mn.call(this,this._targetElement,t),this},goToStep:function(t){return Ji.call(this,t),this},addStep:function(t){return this._options.steps||(this._options.steps=[]),this._options.steps.push(t),this},addSteps:function(t){if(t.length){for(var e=0;e<t.length;e++)this.addStep(t[e]);return this}},goToStepNumber:function(t){return Qi.call(this,t),this},nextStep:function(){return $i.call(this),this},previousStep:function(){return Vi.call(this),this},currentStep:function(){return qi.call(this)},exit:function(t){return fn.call(this,this._targetElement,t),this},refresh:function(){return hn.call(this),this},onbeforechange:function(t){if("function"!=typeof t)throw new Error("Provided callback for onbeforechange was not a function");return this._introBeforeChangeCallback=t,this},onchange:function(t){if("function"!=typeof t)throw new Error("Provided callback for onchange was not a function.");return this._introChangeCallback=t,this},onafterchange:function(t){if("function"!=typeof t)throw new Error("Provided callback for onafterchange was not a function");return this._introAfterChangeCallback=t,this},oncomplete:function(t){if("function"!=typeof t)throw new Error("Provided callback for oncomplete was not a function.");return this._introCompleteCallback=t,this},onhintsadded:function(t){if("function"!=typeof t)throw new Error("Provided callback for onhintsadded was not a function.");return this._hintsAddedCallback=t,this},onhintclick:function(t){if("function"!=typeof t)throw new Error("Provided callback for onhintclick was not a function.");return this._hintClickCallback=t,this},onhintclose:function(t){if("function"!=typeof t)throw new Error("Provided callback for onhintclose was not a function.");return this._hintCloseCallback=t,this},onexit:function(t){if("function"!=typeof t)throw new Error("Provided callback for onexit was not a function.");return this._introExitCallback=t,this},onskip:function(t){if("function"!=typeof t)throw new Error("Provided callback for onskip was not a function.");return this._introSkipCallback=t,this},onbeforeexit:function(t){if("function"!=typeof t)throw new Error("Provided callback for onbeforeexit was not a function.");return this._introBeforeExitCallback=t,this},addHints:function(){return un.call(this,this._targetElement),this},hideHint:function(t){return Zi.call(this,t),this},hideHints:function(){return tn.call(this),this},showHint:function(t){return nn.call(this,t),this},showHints:function(){return en.call(this),this},removeHints:function(){return an.call(this),this},removeHint:function(t){return on().call(this,t),this},showHintDialog:function(t){return rn.call(this,t),this}},Sn},t.exports=n()},poEM:function(e,n,o){"use strict";o.r(n),o.d(n,"HttpLoaderFactory",function(){return Is}),o.d(n,"ExecutionModule",function(){return Ms});var c,s=o("ofXK"),r=o("3Pt+"),l=o("JqCM"),u=o("ZOsW"),d=o("jcQU"),h=o("1kSV"),g=o("uF4Q"),b=o("0jTc"),f=o("SRvG"),p=o("ed8r"),m=o("QYJQ"),v=o("tk/3"),S=o("sYmb"),y=o("mqiu"),k=o("Pk9d"),D=o("cZdB"),x=o("GJ+o"),C=o("4SUy"),w=o("hXFv"),I=o("QUNt"),T=o("z+xu"),R=o("ZwAT"),M=o("0hV+"),B=o("tyNb"),P=o("mrSG"),O=o("XNiG"),A=o("Kj3r"),N=o("H552"),E=o("fXoL"),F=o("HJFG"),_=o("wsp1"),L=o("vrRs"),K=((c=function(){function t(e){i(this,t),this.host=e,this.subject=new O.a,this.subscription=[]}return a(t,[{key:"onFocus",value:function(){var t=this;setTimeout(function(){t.host.nativeElement.select()},300)}},{key:"onFocusout",value:function(){var t=this;setTimeout(function(){t.host.nativeElement.focus()},2e3)}},{key:"onChange",value:function(t){this.subject.next(t)}},{key:"ngAfterViewInit",value:function(){var t=this;setTimeout(function(){t.host.nativeElement.focus()},300)}},{key:"ngOnInit",value:function(){var t=this;this.subscription.push(this.subject.pipe(Object(A.a)(300)).subscribe(function(e){return Object(P.a)(t,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.host.nativeElement.select();case 1:case"end":return t.stop()}},t,this)}))}))}},{key:"ngOnDestroy",value:function(){this.subscription.forEach(function(t){return t.unsubscribe()})}},{key:"onKeydownHandler",value:function(t){t.preventDefault(),this.host.nativeElement.value=this.host.nativeElement.value+"    "}},{key:"onKeydownTabHandler",value:function(t){t.preventDefault(),this.host.nativeElement.value=this.host.nativeElement.value+"    "}}]),t}()).\u0275fac=function(t){return new(t||c)(E.Mb(E.l))},c.\u0275dir=E.Hb({type:c,selectors:[["","autofocusSearch",""]],hostBindings:function(t,e){1&t&&E.cc("focus",function(){return e.onFocus()})("focusout",function(){return e.onFocusout()})("ngModelChange",function(t){return e.onChange(t)})("keydown.enter",function(t){return e.onKeydownHandler(t)},!1,E.zc)("keydown.tab",function(t){return e.onKeydownTabHandler(t)},!1,E.zc)}}),c),j=["ddlelement"],z=["scanQRCode"],H=["grid"],U=["scanText"],G=["ingredientinfoGrid"];function J(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"TIME_LABEL")," ")}function Q(t,e){1&t&&(E.Kc(0),E.hc(1,"date")),2&t&&E.Mc(" ",E.jc(1,1,e.$implicit.createdTime,"dd MMM, yyyy , HH:mm")," ")}function V(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"SUPPLIER")," ")}function q(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"Material #")," ")}function W(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"INGREDIENT_LABEL")," ")}function Y(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"PRODUCTION_DATE_LABEL")," ")}function X(t,e){1&t&&(E.Kc(0),E.hc(1,"date")),2&t&&E.Mc(" ",E.jc(1,1,e.$implicit.manufacturingDate,"dd MMM, yyyy")," ")}function Z(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"BATCH_LABEL")," ")}function tt(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"EXPIRED_DATE_LABEL")," ")}function et(t,e){1&t&&(E.Kc(0),E.hc(1,"date")),2&t&&E.Mc(" ",E.jc(1,1,e.$implicit.expiredTime,"dd MMM, yyyy")," ")}function it(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"QTY_LABEL")," ")}function nt(t,e){1&t&&E.Kc(0),2&t&&E.Mc(" ",e.$implicit.qty," Kg ")}function at(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"STATUS_LABEL")," ")}function ot(t,e){1&t&&(E.Qb(0),E.Sb(1,"span",39),E.Kc(2),E.hc(3,"translate"),E.Rb(),E.Pb()),2&t&&(E.zb(2),E.Lc(E.ic(3,1,"OUTOFSTOCK_LABEL")))}function ct(t,e){1&t&&(E.Sb(0,"span",40),E.Kc(1),E.hc(2,"translate"),E.Rb()),2&t&&(E.zb(1),E.Lc(E.ic(2,1,"STOCKING_LABEL")))}function st(t,e){if(1&t&&(E.Ic(0,ot,4,3,"ng-container",37),E.Ic(1,ct,3,3,"ng-template",null,38,E.Jc)),2&t){var i=e.$implicit,n=E.yc(2);E.mc("ngIf",!0===i.status)("ngIfElse",n)}}function rt(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"OPTION")," ")}function lt(t,e){if(1&t){var i=E.Tb();E.Sb(0,"div",41),E.Sb(1,"button",42),E.cc("click",function(){E.Bc(i);var t=e.$implicit;return E.gc().delete(t)}),E.Nb(2,"i",43),E.Rb(),E.Rb()}}var ut,dt,ht,gt=((ut=function(){function e(t,n,a,o,c,s){var r=this;i(this,e),this.modalService=t,this.alertify=n,this.datePipe=a,this.buildingService=o,this.ingredientService=c,this.cdr=s,this.displayTextMethod={visibility:!1},this.pageSettings={pageCount:20,pageSizes:!0,pageSize:20},this.checkout=!1,this.checkin=!0,this.ingredients=[],this.test="form-control w3-light-grey",this.autofocus=!1,this.toolbarOptions=["Search"],this.filterSettings={type:"Excel"},this.subject=new O.a,this.subscription=[],this.fieldsBuildings={text:"name",value:"id"},this.buildingID=0,this.buildingName="",this.toggleColor=!0,this.onFilteringBuilding=function(t){var e=new N.h;e=""!==t.text?e.where("name","contains",t.text,!0):e,t.updateData(r.buildings,e)}}return a(e,[{key:"ngAfterViewInit",value:function(){this.cdr.detectChanges()}},{key:"ngOnDestroy",value:function(){this.subscription.forEach(function(t){return t.unsubscribe()})}},{key:"ngOnInit",value:function(){var t=this;this.getBuilding(function(){t.buildingID=+localStorage.getItem("buildingID"),0===t.buildingID&&t.alertify.warning("Vui l\xf2ng ch\u1ecdn t\xf2a nh\xe0 tr\u01b0\u1edbc!",!0)}),this.getAllIngredient(),this.checkQRCode()}},{key:"getBuilding",value:function(t){var e=this;this.buildingService.getBuildings().subscribe(function(i){return Object(P.a)(e,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.buildings=i.filter(function(t){return 2===t.level}),t();case 1:case"end":return e.stop()}},e,this)}))})}},{key:"onChangeBuilding",value:function(t){localStorage.setItem("buildingID",this.buildingID+""),this.buildingID=t.itemData.id,this.buildingName=t.itemData.name,this.getAllIngredientInfoByBuilding()}},{key:"NO",value:function(t){return(this.ingredientinfoGrid.pageSettings.currentPage-1)*this.ingredientinfoGrid.pageSettings.pageSize+Number(t)+1}},{key:"dataBound",value:function(){this.ingredientinfoGrid.autoFitColumns()}},{key:"OutputChange",value:function(t){this.checkin=!1,this.checkout=!0,this.getAllIngredientInfoOutputByBuilding()}},{key:"InputChange",value:function(t){this.checkin=!0,this.checkout=!1,this.getAllIngredientInfoByBuilding()}},{key:"toolbarClick",value:function(t){switch(t.item.text){case"Excel Export":this.grid.excelExport()}}},{key:"showPopupWindow",value:function(t,e){this.alertify.$swal.fire({html:"<div class='d-flex justify-content-center align-items-center' style='Width:100%; height: 400px;'>\n               <h1 style='font-size: 150px;' class='display-1 mb-3 align-self-center text-".concat(!0===this.toggleColor?"success":"danger"," font-weight-bold'> ").concat(t," | ").concat(e.name,"</h1>\n             </div>"),timer:2e3,showConfirmButton:!1,timerProgressBar:!0,width:"90%",icon:"success"}),this.toggleColor=!this.toggleColor}},{key:"checkQRCode",value:function(){var t=this;this.subscription.push(this.subject.pipe(Object(A.a)(500)).subscribe(function(e){return Object(P.a)(t,void 0,void 0,regeneratorRuntime.mark(function t(){var i,n,a,o,c,s,r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.QRCode.split("-"),i=e.QRCode.match(/(\d+)-(\w+)-/g),n=e.QRCode.replace(i[0],""),(a=JSON.parse(localStorage.getItem("building"))).name,[1,0].includes(a.level),o=this.findIngredientCode(n),!0===this.checkin?!0===this.checkCode?(c=JSON.parse(localStorage.getItem("user")).User.ID,this.ingredientService.scanQRCodeFromChemicalWareHouse(e.QRCode,this.buildingName,c).subscribe(function(t){if(!0===t){r.getAllIngredientInfoByBuilding();var e=r.findInputedIngredient(n);r.showPopupWindow(e,o)}})):this.alertify.error("Wrong Chemical!"):!0===this.checkCode?(s=JSON.parse(localStorage.getItem("user")).User.ID,this.ingredientService.scanQRCodeOutput(e.QRCode,this.buildingName,s).subscribe(function(t){if(!0===t){r.getAllIngredientInfoOutputByBuilding();var e=r.findOutputedIngredient(n);r.showPopupWindow(e,o)}else r.alertify.error(t.message)})):this.alertify.error("Wrong Chemical!");case 6:case"end":return t.stop()}},t,this)}))}))}},{key:"onNgModelChangeScanQRCode",value:function(t){return Object(P.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:0===this.buildingID?this.alertify.warning("Vui l\xf2ng ch\u1ecdn t\xf2a nh\xe0 tr\u01b0\u1edbc!",!0):this.subject.next({QRCode:t,ingredient:null});case 1:case"end":return e.stop()}},e,this)}))}},{key:"getIngredientInfo",value:function(){var t=this;this.ingredientService.getAllIngredientInfo().subscribe(function(e){t.data=e})}},{key:"getIngredientInfoOutput",value:function(){var t=this;this.ingredientService.getAllIngredientInfoOutput().subscribe(function(e){t.data=e})}},{key:"getAllIngredientInfoByBuilding",value:function(){var t=this;this.ingredientService.getAllIngredientInfoByBuilding(this.buildingName).subscribe(function(e){t.data=e})}},{key:"getAllIngredientInfoOutputByBuilding",value:function(){var t=this;this.ingredientService.getAllIngredientInfoOutputByBuilding(this.buildingName).subscribe(function(e){t.data=e})}},{key:"findIngredientCode",value:function(e){var i,n=t(this.ingredients);try{for(n.s();!(i=n.n()).done;){var a=i.value;if(a.materialNO===e)return this.checkCode=!0,a;this.checkCode=!1}}catch(o){n.e(o)}finally{n.f()}}},{key:"findInputedIngredient",value:function(t){var e=this.data.filter(function(e){return e.code===t&&!1===e.status}).length;return 0===e?1:e+1}},{key:"findOutputedIngredient",value:function(t){var e=this.data.filter(function(e){return e.code===t&&!0===e.status}).length;return 0===e?1:e+1}},{key:"getAllIngredient",value:function(){var t=this;this.ingredientService.getAllIngredient().subscribe(function(e){t.ingredients=e,console.log("Global Ingerdient: ",e)})}},{key:"ConvertClass",value:function(t){0!==t.length?this.test="form-control success-scan":(this.test="form-control error-scan",this.alertify.error("Wrong Chemical!"))}},{key:"delete",value:function(t){var e=this;this.ingredientService.deleteIngredientInfo(t.id,t.code,t.qty,t.batch).subscribe(function(){e.alertify.success("Delete Success!"),e.getIngredientInfo(),e.getIngredientInfoOutput()})}},{key:"confirm",value:function(){var t=this;this.alertify.confirm("Do you want confirm this","Do you want confirm this",function(){t.alertify.success("Confirm Success")})}}]),e}()).\u0275fac=function(t){return new(t||ut)(E.Mb(h.b),E.Mb(F.a),E.Mb(s.d),E.Mb(_.a),E.Mb(L.a),E.Mb(E.h))},ut.\u0275cmp=E.Gb({type:ut,selectors:[["app-incoming"]],viewQuery:function(t,e){var i;1&t&&(E.Qc(j,!0),E.Qc(z,!0),E.Qc(H,!0),E.Qc(U,!0),E.Qc(G,!0)),2&t&&(E.xc(i=E.dc())&&(e.dropDownListObject=i.first),E.xc(i=E.dc())&&(e.scanQRCodeElement=i.first),E.xc(i=E.dc())&&(e.grid=i.first),E.xc(i=E.dc())&&(e.scanText=i.first),E.xc(i=E.dc())&&(e.ingredientinfoGrid=i.first))},features:[E.yb([s.d])],decls:83,vars:21,consts:[[1,"card"],[1,"card-body"],[1,"row","mb-2"],[1,"col-md-12","d-flex","justify-content-center","align-items-center"],[1,"font-weight-bold","pr-3"],["placeholder","Select a building",3,"dataSource","fields","allowFiltering","value","filtering","change"],["ddlelement",""],[1,"row"],[1,"col-md-12"],[1,"w3-container","w3-card-4","w3-text-black"],[1,"w3-center"],[1,"w3-row","w3-section"],[1,"w3-col",2,"width","100px"],["src","../../../../assets/img/gif/1981.gif","height","40px","width","80%","alt",""],[1,"w3-rest"],["name","qrcode","autocomplete","off","autofocusSearch","","type","text",3,"ngClass","ngModel","ngModelChange"],[1,"col-md-12","mt-4","text-center"],[1,"pretty","p-icon","p-round",2,"font-size","30px"],["type","radio","checked","","name","icon_solid",3,"change"],[1,"state","p-success"],[1,"icon","mdi","mdi-check"],["type","radio","name","icon_solid",3,"change"],[1,"state","p-danger"],["allowResizing","true","allowFiltering","true","showColumnMenu","true","allowPaging","true","gridLines","Both",3,"dataSource","allowExcelExport","allowSorting","filterSettings","toolbar","pageSettings","dataBound","toolbarClick"],["ingredientinfoGrid",""],["field","createdTime","textAlign","Center","headerText","Time","width","150"],["headerTemplate",""],["template",""],["field","supplierName","textAlign","Center","headerText","Supplier","width","120"],["field","code","textAlign","Center","headerText","Material #","width","120"],["field","name","textAlign","Center","headerText","Ingredient","width","100"],["field","manufacturingDate","textAlign","Center","headerText","Production date","width","130"],["field","batch","textAlign","Center","headerText","Batch","width","100"],["field","expiredTime","textAlign","Center","headerText","Expired Date","width","130"],["field","qty","textAlign","Center","headerText","Recieve Qty (Kg)","width","130"],["field","status","textAlign","Center","headerText","Status","width","100"],["field","Option","textAlign","Center","headerText","Option","width","90"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"badge","badge-secondary"],[1,"badge","badge-success"],[1,"btn-group"],["type","button",1,"btn","btn-xs","btn-danger",3,"click"],[1,"fa","fa-trash"]],template:function(t,e){1&t&&(E.Sb(0,"div",0),E.Sb(1,"div",1),E.Sb(2,"div",2),E.Sb(3,"div",3),E.Sb(4,"h2",4),E.Kc(5),E.hc(6,"translate"),E.Rb(),E.Sb(7,"ejs-dropdownlist",5,6),E.cc("filtering",function(t){return e.onFilteringBuilding(t)})("change",function(t){return e.onChangeBuilding(t)}),E.Rb(),E.Rb(),E.Rb(),E.Sb(9,"div",7),E.Sb(10,"div",8),E.Sb(11,"form",9),E.Sb(12,"h2",10),E.Kc(13,"Scan QR Code"),E.Rb(),E.Sb(14,"div",11),E.Sb(15,"div",12),E.Nb(16,"img",13),E.Rb(),E.Sb(17,"div",14),E.Sb(18,"input",15),E.cc("ngModelChange",function(t){return e.onNgModelChangeScanQRCode(t)}),E.Rb(),E.Rb(),E.Sb(19,"div",7),E.Sb(20,"div",16),E.Sb(21,"div",17),E.Sb(22,"input",18),E.cc("change",function(t){return e.InputChange(t)}),E.Rb(),E.Sb(23,"div",19),E.Nb(24,"i",20),E.Sb(25,"label"),E.Kc(26),E.hc(27,"translate"),E.Rb(),E.Rb(),E.Rb(),E.Sb(28,"div",17),E.Sb(29,"input",21),E.cc("change",function(t){return e.OutputChange(t)}),E.Rb(),E.Sb(30,"div",22),E.Nb(31,"i",20),E.Sb(32,"label"),E.Kc(33),E.hc(34,"translate"),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Sb(35,"div",1),E.Sb(36,"div",7),E.Sb(37,"div",8),E.Sb(38,"ejs-grid",23,24),E.cc("dataBound",function(){return e.dataBound()})("toolbarClick",function(t){return e.toolbarClick(t)}),E.Sb(40,"e-columns"),E.Sb(41,"e-column",25),E.Ic(42,J,2,3,"ng-template",null,26,E.Jc),E.Ic(44,Q,2,4,"ng-template",null,27,E.Jc),E.Rb(),E.Sb(46,"e-column",28),E.Ic(47,V,2,3,"ng-template",null,26,E.Jc),E.Rb(),E.Sb(49,"e-column",29),E.Ic(50,q,2,3,"ng-template",null,26,E.Jc),E.Rb(),E.Sb(52,"e-column",30),E.Ic(53,W,2,3,"ng-template",null,26,E.Jc),E.Rb(),E.Sb(55,"e-column",31),E.Ic(56,Y,2,3,"ng-template",null,26,E.Jc),E.Ic(58,X,2,4,"ng-template",null,27,E.Jc),E.Rb(),E.Sb(60,"e-column",32),E.Ic(61,Z,2,3,"ng-template",null,26,E.Jc),E.Rb(),E.Sb(63,"e-column",33),E.Ic(64,tt,2,3,"ng-template",null,26,E.Jc),E.Ic(66,et,2,4,"ng-template",null,27,E.Jc),E.Rb(),E.Sb(68,"e-column",34),E.Ic(69,it,2,3,"ng-template",null,26,E.Jc),E.Ic(71,nt,1,1,"ng-template",null,27,E.Jc),E.Rb(),E.Sb(73,"e-column",35),E.Ic(74,at,2,3,"ng-template",null,26,E.Jc),E.Ic(76,st,3,2,"ng-template",null,27,E.Jc),E.Rb(),E.Sb(78,"e-column",36),E.Ic(79,rt,2,3,"ng-template",null,26,E.Jc),E.Ic(81,lt,3,0,"ng-template",null,27,E.Jc),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Rb()),2&t&&(E.zb(5),E.Mc("",E.ic(6,15,"Building"),":"),E.zb(2),E.mc("dataSource",e.buildings)("fields",e.fieldsBuildings)("allowFiltering",!0)("value",e.buildingID),E.zb(11),E.mc("ngClass",e.test)("ngModel",e.qrcodeChange),E.zb(8),E.Lc(E.ic(27,17,"INPUT_LABEL")),E.zb(7),E.Lc(E.ic(34,19,"OUTPUT_LABEL")),E.zb(5),E.mc("dataSource",e.data)("allowExcelExport",!0)("allowSorting",!0)("filterSettings",e.filterSettings)("toolbar",e.toolbarOptions)("pageSettings",e.pageSettings))},directives:[d.c,r.p,r.h,r.i,r.b,K,s.l,r.g,r.j,x.j,b.d,I.d,I.b,x.e,x.b,b.c,I.c,I.a,x.d,x.a,s.n],pipes:[S.c,s.d],styles:[".e-grid[_ngcontent-%COMP%]   .e-altrow[_ngcontent-%COMP%]{background-color:#d6d8db}"]}),ut),bt=o("2Vo4"),ft=o("AytR"),pt=((dt=function(){function t(e){i(this,t),this.http=e,this.baseUrl=ft.a.apiUrlEC,this.messageSource=new bt.a(0),this.info=new bt.a(null),this.currentMessage=this.messageSource.asObservable()}return a(t,[{key:"changeMessage",value:function(t){this.messageSource.next(t)}},{key:"setValue",value:function(t){this.info.next(t)}},{key:"getValue",value:function(){return this.info.asObservable()}},{key:"getAll",value:function(){return this.http.get(this.baseUrl+"Station/GetAll")}},{key:"getAllByPlanID",value:function(t){return this.http.get("".concat(this.baseUrl,"Station/GetAllByPlanID/").concat(t))}},{key:"create",value:function(t){return this.http.post(this.baseUrl+"Station/create",t)}},{key:"createRange",value:function(t){return this.http.post(this.baseUrl+"Station/AddRange",t)}},{key:"update",value:function(t){return this.http.put(this.baseUrl+"Station/update",t)}},{key:"updateRange",value:function(t){return this.http.post(this.baseUrl+"Station/updateRange",t)}},{key:"delete",value:function(t){return this.http.delete("".concat(this.baseUrl,"Station/Delete/").concat(t),{})}}]),t}()).\u0275fac=function(t){return new(t||dt)(E.Zb(v.b))},dt.\u0275prov=E.Ib({token:dt,factory:dt.\u0275fac,providedIn:"root"}),dt),mt=["grid"],vt=((ht=function(){function t(e,n,a){i(this,t),this.activeModal=e,this.alertify=n,this.stationSevice=a,this.toolbarOptions=["Edit","Cancel","Delete","Search"],this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"}}return a(t,[{key:"ngOnInit",value:function(){this.getAllByPlanID(),this.toolbarOptions=["Edit","Cancel","Delete","Search"]}},{key:"actionBegin",value:function(t){"edit"===t.action&&"save"===t.requestType&&this.update(t.data)}},{key:"actionComplete",value:function(t){}},{key:"toolbarClick",value:function(t){}},{key:"confirm",value:function(){this.activeModal.dismiss(),this.alertify.success("Updated successed!")}},{key:"getAllByPlanID",value:function(){var t=this;this.stationSevice.getAllByPlanID(this.plan.id||0).subscribe(function(e){t.data=e})}},{key:"createRange",value:function(t){var e=this;this.stationSevice.createRange(t).subscribe(function(t){e.alertify.success("Created successed!"),e.activeModal.dismiss(),e.stationSevice.setValue(!0)})}},{key:"update",value:function(t){var e=this;this.stationSevice.update(t).subscribe(function(t){e.stationSevice.setValue(!0)})}},{key:"updateRange",value:function(t){var e=this;this.stationSevice.updateRange(t).subscribe(function(t){e.alertify.success("Updated successed!"),e.activeModal.dismiss(),e.stationSevice.setValue(!0)})}},{key:"delete",value:function(){var t=this;this.stationSevice.delete(this.station.id).subscribe(function(e){t.alertify.success("delete successed!"),t.activeModal.dismiss(),t.stationSevice.setValue(!0)})}}]),t}()).\u0275fac=function(t){return new(t||ht)(E.Mb(h.a),E.Mb(F.a),E.Mb(pt))},ht.\u0275cmp=E.Gb({type:ht,selectors:[["app-station"]],viewQuery:function(t,e){var i;1&t&&E.Qc(mt,!0),2&t&&E.xc(i=E.dc())&&(e.grid=i.first)},inputs:{plan:"plan"},decls:19,vars:7,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","p-0"],["allowResizing","true","gridLines","Both",3,"dataSource","allowSelection","allowSorting","toolbar","editSettings","actionBegin","actionComplete","toolbarClick"],["grid",""],["field","glueName","headerText","Glue","textAlign","Center","width","120",3,"allowEditing"],["field","amount","headerText","Station","textAlign","Center","width","100"],[1,"modal-footer","justify-content-center","d-flex"],["type","button",1,"btn","btn-warning",3,"click"],[1,"fa","fa-remove"],["type","button",1,"btn","btn-success",3,"click"],[1,"fa","fa-check"]],template:function(t,e){1&t&&(E.Sb(0,"div",0),E.Sb(1,"h4",1),E.Kc(2,"Station"),E.Rb(),E.Sb(3,"button",2),E.cc("click",function(){return e.activeModal.dismiss("Cross click")}),E.Sb(4,"span",3),E.Kc(5,"\xd7"),E.Rb(),E.Rb(),E.Rb(),E.Sb(6,"div",4),E.Sb(7,"ejs-grid",5,6),E.cc("actionBegin",function(t){return e.actionBegin(t)})("actionComplete",function(t){return e.actionComplete(t)})("toolbarClick",function(t){return e.toolbarClick(t)}),E.Sb(9,"e-columns"),E.Nb(10,"e-column",7),E.Nb(11,"e-column",8),E.Rb(),E.Rb(),E.Rb(),E.Sb(12,"div",9),E.Sb(13,"button",10),E.cc("click",function(){return e.activeModal.close("Close click")}),E.Nb(14,"i",11),E.Kc(15," Close"),E.Rb(),E.Sb(16,"button",12),E.cc("click",function(){return e.confirm()}),E.Nb(17,"i",13),E.Kc(18," Confirm"),E.Rb(),E.Rb()),2&t&&(E.zb(7),E.mc("dataSource",e.data)("allowSelection",!0)("allowSorting",!0)("allowSorting",!0)("toolbar",e.toolbarOptions)("editSettings",e.editSettings),E.zb(3),E.mc("allowEditing",!1))},directives:[x.j,b.d,I.d,I.b,x.e,x.b,b.c,I.c,I.a,x.d,x.a],styles:[""]}),ht),St=o("R5/Y"),yt=o("iStF"),kt=o("0WEV"),Dt=o("XMGJ"),xt=o("j7qE"),Ct=o("KCoQ"),wt=o("t0UR"),It=["bpfcDropdownlist"],Tt=["cloneModal"],Rt=["stationModal"],Mt=["planForm"],Bt=["timepicker"],Pt=["grid"];function Ot(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"LINE_LABEL")," ")}function At(t,e){if(1&t){var i=E.Tb();E.Sb(0,"ejs-dropdownlist",37,38),E.cc("change",function(t){E.Bc(i);var n=e.$implicit;return E.gc().onChangeLine(t,n)}),E.hc(2,"translate"),E.Rb()}if(2&t){var n=e.$implicit,a=E.gc();E.mc("dataSource",a.lines)("placeholder",E.ic(2,5,"Select a line"))("value",n.buildingName)("fields",a.fieldsLine)("allowFiltering",!0)}}function Nt(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"BPFC_NAME_LABEL")," ")}function Et(t,e){if(1&t){var i=E.Tb();E.Sb(0,"ejs-dropdownlist",39,40),E.cc("filtering",function(t){return E.Bc(i),E.gc().onFiltering(t)})("change",function(t){E.Bc(i);var n=e.$implicit;return E.gc().onChangeBPFC(t,n)}),E.hc(2,"translate"),E.Rb()}if(2&t){var n=e.$implicit,a=E.gc();E.mc("dataSource",a.BPFCs)("value",n.bpfcName)("placeholder",E.ic(2,5,"Select a model"))("fields",a.fieldsBPFC)("allowFiltering",!0)}}function Ft(t,e){1&t&&E.Kc(0),2&t&&E.Mc(" ",e.$implicit.bpfcName||"#N/A"," ")}function _t(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"DUE_DATE_LABEL")," ")}function Lt(t,e){if(1&t){var i=E.Tb();E.Sb(0,"ejs-datepicker",41),E.cc("change",function(t){E.Bc(i);var n=e.$implicit;return E.gc().onChangeDueDateEdit(t,n)}),E.hc(1,"translate"),E.Rb()}2&t&&E.mc("value",e.$implicit.dueDate)("allowEdit",!1)("placeholder",E.ic(1,3,"Select a date"))}function Kt(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"Start Time")," ")}function jt(t,e){1&t&&(E.Kc(0),E.hc(1,"date")),2&t&&E.Mc(" ",E.jc(1,1,e.$implicit.startWorkingTime,"HH:mm")," ")}function zt(t,e){if(1&t&&(E.Kc(0),E.hc(1,"date")),2&t){var i=E.gc();E.Mc(" ",E.jc(1,1,i.period.startTime,"HH:mm")," ")}}function Ht(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"End Time")," ")}function Ut(t,e){if(1&t&&(E.Sb(0,"span"),E.Kc(1),E.hc(2,"date"),E.Rb()),2&t){var i=E.gc().$implicit;E.zb(1),E.Mc(" ",E.jc(2,1,i.updatedOffline,"HH:mm")," ")}}function Gt(t,e){if(1&t&&(E.Kc(0),E.hc(1,"date")),2&t){var i=E.gc().$implicit;E.Mc(" ",E.jc(1,1,i.finishWorkingTime,"HH:mm")," ")}}function Jt(t,e){if(1&t&&(E.Ic(0,Ut,3,4,"span",42),E.Ic(1,Gt,2,4,"ng-template",null,43,E.Jc)),2&t){var i=e.$implicit,n=E.yc(2);E.mc("ngIf",!0===i.isOffline)("ngIfElse",n)}}function Qt(t,e){1&t&&E.Kc(0," 16:30 ")}function $t(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"HOURLY_OUTPUT_LABEL")," ")}function Vt(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"Status")," ")}function qt(t,e){1&t&&E.Kc(0," N/A ")}function Wt(t,e){1&t&&(E.Sb(0,"span"),E.Nb(1,"i",45),E.Rb())}function Yt(t,e){1&t&&(E.Sb(0,"span"),E.Nb(1,"i",46),E.Rb())}function Xt(t,e){if(1&t&&(E.Ic(0,Wt,2,0,"span",44),E.Ic(1,Yt,2,0,"span",44)),2&t){var i=e.$implicit;E.mc("ngIf",i.isGenerate),E.zb(1),E.mc("ngIf",!i.isGenerate)}}function Zt(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"Created Date")," ")}function te(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"Updated Time")," ")}function ee(t,e){if(1&t&&(E.Kc(0),E.hc(1,"date")),2&t){var i=e.$implicit;E.Mc(" ",null===i.updatedTime?"N/A":E.jc(1,1,i.updatedTime,"MM-dd-yyyy HH:mm")," ")}}function ie(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"Updated Offline")," ")}function ne(t,e){if(1&t&&(E.Kc(0),E.hc(1,"date")),2&t){var i=e.$implicit;E.Mc(" ",null===i.updatedOffline?"N/A":E.jc(1,1,i.updatedOffline,"MM-dd-yyyy HH:mm")," ")}}function ae(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"Updated Overtime")," ")}function oe(t,e){if(1&t&&(E.Kc(0),E.hc(1,"date")),2&t){var i=e.$implicit;E.Mc(" ",null===i.updatedOvertime?"N/A":E.jc(1,1,i.updatedOvertime,"MM-dd-yyyy HH:mm")," ")}}function ce(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"Inactive")," ")}function se(t,e){if(1&t){var i=E.Tb();E.Sb(0,"ejs-switch",48,49),E.cc("change",function(t){E.Bc(i);var e=E.gc().$implicit;return E.gc().changeStopLine(t,e)}),E.hc(2,"translate"),E.hc(3,"translate"),E.Rb()}if(2&t){var n=E.gc().$implicit;E.nc("onLabel",E.ic(2,4,"Inactive")),E.nc("offLabel",E.ic(3,6,"")),E.mc("checked",n.isOffline)("disabled",n.isOffline)}}function re(t,e){1&t&&E.Ic(0,se,4,8,"ejs-switch",47),2&t&&E.mc("ngIf",e.$implicit.isGenerate)}function le(t,e){}function ue(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"Overtime/No Overtime")," ")}function de(t,e){if(1&t){var i=E.Tb();E.Sb(0,"ejs-switch",51,49),E.cc("change",function(t){E.Bc(i);var e=E.gc().$implicit;return E.gc().changeOvertime(t,e)}),E.hc(2,"translate"),E.hc(3,"translate"),E.Rb()}if(2&t){var n=E.gc().$implicit;E.nc("onLabel",E.ic(2,3,"Overtime")),E.nc("offLabel",E.ic(3,5,"No overtime")),E.mc("checked",n.isOvertime)}}function he(t,e){if(1&t&&E.Ic(0,de,4,7,"ejs-switch",50),2&t){var i=e.$implicit;E.mc("ngIf",!1===i.isOffline&&i.isGenerate&&0==i.isChangeBPFC)}}function ge(t,e){1&t&&E.Kc(0," Option ")}function be(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"Change BPFC")," ")}function fe(t,e){if(1&t){var i=E.Tb();E.Sb(0,"button",55),E.cc("click",function(){E.Bc(i);var t=E.gc().$implicit,e=E.gc(),n=E.yc(127);return e.openChangeBPFCModalComponent(n,t)}),E.Nb(1,"i",56),E.Rb()}}function pe(t,e){if(1&t){var i=E.Tb();E.Sb(0,"div",57),E.Sb(1,"button",58),E.cc("click",function(){E.Bc(i);var t=E.gc().$implicit;return E.gc().delete(t.id)}),E.Nb(2,"i",59),E.Rb(),E.Rb()}}function me(t,e){if(1&t&&(E.Sb(0,"div",52),E.Ic(1,fe,2,0,"button",53),E.Rb(),E.Ic(2,pe,3,0,"div",54)),2&t){var i=e.$implicit;E.zb(1),E.mc("ngIf",!1===i.isOffline&&i.isGenerate&&0==i.isChangeBPFC),E.zb(1),E.mc("ngIf",!1===i.isOffline&&0==i.isGenerate)}}function ve(t,e){1&t&&E.Kc(0," Option ")}function Se(t,e){if(1&t){var i=E.Tb();E.Sb(0,"div",60),E.Sb(1,"h4",61),E.Nb(2,"i",62),E.Kc(3," Clone Work Plan "),E.Rb(),E.Sb(4,"button",63),E.cc("click",function(){return e.$implicit.dismiss("Cross click")}),E.Sb(5,"span",64),E.Kc(6,"\xd7"),E.Rb(),E.Rb(),E.Rb(),E.Sb(7,"div",65),E.Sb(8,"div",7),E.Sb(9,"div",3),E.Sb(10,"div",66),E.Sb(11,"label",67),E.Kc(12,"DueDate"),E.Rb(),E.Sb(13,"span",68),E.Kc(14,"(*)"),E.Rb(),E.Sb(15,"ejs-datepicker",69),E.cc("change",function(t){return E.Bc(i),E.gc().onChangeDueDateClone(t)}),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Sb(16,"div",70),E.Sb(17,"button",71),E.cc("click",function(){return e.$implicit.close("Close click")}),E.Kc(18,"Close"),E.Rb(),E.Sb(19,"button",72),E.cc("click",function(){return E.Bc(i),E.gc().onClickClone()}),E.Kc(20,"Clone"),E.Rb(),E.Rb()}if(2&t){var n=E.gc();E.zb(15),E.mc("value",n.date)}}function ye(t,e){if(1&t){var i=E.Tb();E.Sb(0,"div",60),E.Sb(1,"h4",61),E.Nb(2,"i",62),E.Kc(3," Change BPFC "),E.Sb(4,"b",73),E.Kc(5),E.Rb(),E.Rb(),E.Sb(6,"button",63),E.cc("click",function(){return e.$implicit.dismiss("Cross click")}),E.Sb(7,"span",64),E.Kc(8,"\xd7"),E.Rb(),E.Rb(),E.Rb(),E.Sb(9,"div",65),E.Sb(10,"div",7),E.Sb(11,"div",3),E.Sb(12,"div",66),E.Sb(13,"ejs-dropdownlist",74,75),E.cc("ngModelChange",function(t){return E.Bc(i),E.gc().changebpfcID=t})("filtering",function(t){return E.Bc(i),E.gc().onFilteringChangeBPFCModal(t)})("created",function(){return E.Bc(i),E.gc().created()})("select",function(t){return E.Bc(i),E.gc().onChangeBPFCModal(t)}),E.hc(15,"translate"),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Sb(16,"div",70),E.Sb(17,"button",71),E.cc("click",function(){return e.$implicit.close("Close click")}),E.Kc(18),E.hc(19,"translate"),E.Rb(),E.Sb(20,"button",72),E.cc("click",function(){return E.Bc(i),E.gc().changeBPFC()}),E.Kc(21),E.hc(22,"translate"),E.Rb(),E.Rb()}if(2&t){var n=E.gc();E.zb(5),E.Mc("(L\u01b0u \xfd: Anh/Ch\u1ecb \u0111ang \u0111\u1ed5i gi\xe0y cho chuy\u1ec1n ",n.buildingNameForChangeModal,")"),E.zb(8),E.mc("dataSource",n.BPFCsForChangeModal)("ngModel",n.changebpfcID)("placeholder",E.ic(15,8,"Select a model"))("fields",n.fieldsBPFC)("allowFiltering",!0),E.zb(5),E.Lc(E.ic(19,10,"Close")),E.zb(3),E.Lc(E.ic(22,12,"Confirm"))}}var ke,De=((ke=function(){function e(t,n,a,o,c,s,r,l,u,h,g){var b=this;i(this,e),this.alertify=t,this.modalService=n,this.planService=a,this.todolistService=o,this.buildingService=c,this.stationSevice=s,this.authService=r,this.dataService=l,this.spinner=u,this.bPFCEstablishService=h,this.datePipe=g,this.introJS=St(),this.startTime={hour:7,minute:0},this.endTime={hour:16,minute:30},this.sortSettings={columns:[{field:"buildingName",direction:"Ascending"}]},this.bpfcID=0,this.data=[],this.searchSettings={hierarchyMode:"Parent"},this.modalPlan={id:0,buildingID:0,BPFCEstablishID:0,BPFCName:"",hourlyOutput:0,workingHour:0,dueDate:new Date,startWorkingTime:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDay(),7,0,0),finishWorkingTime:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDay(),16,30,0),startTime:{hour:7,minute:0},endTime:{hour:16,minute:30}},this.buildingNameForChangeModal="",this.textLine="Select a line name",this.fieldsGlue={text:"name",value:"name"},this.fieldsLine={text:"name",value:"name"},this.fieldsBPFC={text:"name",value:"name",tooltip:"name",itemCreated:function(t){Object(d.g)(t.item,b.queryString,!0,"Contains")}},this.fieldsBuildings={text:"name",value:"id"},this.startWorkingTimeParams={params:{value:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate(),7,30,0)}},this.finishWorkingTimeParams={params:{value:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate(),16,30,0)}},this.lineID=0,this.BPFCs=new Array,this.subscription=[],this.hourlyOutputRules={required:!0},this.numericParams={create:function(){return b.elem=document.createElement("input"),b.elem},read:function(){return b.elem.value},write:function(t){},params:{value:120,format:"####"}},this.lines=[],this.kindOfLine=0,this.bpfcKindData=[],this.bpfcDataSource=new Array,this.updateOnTimePercentage="",this.onFiltering=function(t){b.queryString=t.text;var e=new N.h;e=""!==t.text?e.where("name","contains",t.text,!0):e,t.updateData(b.BPFCs,e)},this.onFilteringBuilding=function(t){var e=new N.h;e=""!==t.text?e.where("name","contains",t.text,!0):e,t.updateData(b.buildings,e)},this.onFilteringChangeBPFCModal=function(t){var e=new N.h;e=""!==t.text?e.where("name","contains",t.text,!0):e,t.updateData(b.BPFCs,e)},this.gridConfig()}return a(e,[{key:"ngAfterViewInit",value:function(){}},{key:"ngOnInit",value:function(){this.buildingID=0,this.date=new Date,this.endDate=new Date,this.startDate=new Date,this.hasWorker=!1;var t=JSON.parse(localStorage.getItem("building")),e=JSON.parse(localStorage.getItem("level"));this.role=e,this.building=t,this.watch(),this.checkRole(),this.clearForm()}},{key:"onTimeChange",value:function(t){}},{key:"watch",value:function(){var t=this,e=this.stationSevice.getValue().subscribe(function(e){!0===e&&t.getAll()});this.subscription.push(e)}},{key:"checkRole",value:function(){var t=this;switch(this.role.id){case yt.a.ADMIN:case yt.a.SUPERVISOR:case yt.a.STAFF:case yt.a.WORKER:this.IsAdmin=!0;var e=+localStorage.getItem("buildingID");this.getBuilding(0===e?function(){t.alertify.message("Please select a building!",!0)}:function(){t.buildingID=e});break;case yt.a.DISPATCHER:this.building=JSON.parse(localStorage.getItem("building")),this.getBuilding(function(){t.buildingID=t.building[0].id})}}},{key:"ngOnDestroy",value:function(){localStorage.removeItem("isSTF"),this.subscription.forEach(function(t){return t.unsubscribe()})}},{key:"onChangeBuilding",value:function(t){console.clear(),this.buildingID=t.itemData.id,this.buildingName=t.itemData.name,this.isSTF=t.itemData.isSTF,localStorage.setItem("buildingID",t.itemData.id),localStorage.setItem("isSTF",t.itemData.isSTF),console.log("- Chon t\xf2a nh\xe0: ",this.buildingName),console.log("\u0110\xe2y l\xe0: "+(!0===this.isSTF?"X\u01b0\u1edfng \u0111\u1ebf":"Th\xe0nh h\xecnh")),this.getAll(),this.achievementRate(),this.getStartTimeFromPeriod(),this.getAllBPFC(),this.buildingID=void 0===this.buildingID?0:this.buildingID,this.getAllLine(this.buildingID)}},{key:"gridConfig",value:function(){var t=this;this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"},this.selectOptions={checkboxOnly:!0},this.pageSettings={pageCount:20,pageSizes:!0,pageSize:12},this.editparams={params:{popupHeight:"300px"}},this.toolbarOptions=["Add",{text:"Update",tooltipText:"Update",prefixIcon:"fa fa-tasks",id:"Update"},"Search",{text:"Export Excel",tooltipText:"Export Excel",prefixIcon:"e-btn-icon fa fa-file-excel-o e-icons e-icon-left",id:"exportExcel"},"ColumnChooser"],this.subscription.push(this.dataService.getValueLocale().subscribe(function(e){if("vi"!==e)if("en"!==e){var i=localStorage.getItem("lang");if("vi"===i)return void(t.toolbarOptions=["Add",{text:"C\u1eadp Nh\u1eadt",tooltipText:"C\u1eadp Nh\u1eadt",prefixIcon:"fa fa-tasks",id:"Update"},"Search",{text:"Export Excel",tooltipText:"Export Excel",prefixIcon:"e-btn-icon fa fa-file-excel-o e-icons e-icon-left",id:"exportExcel"},"ColumnChooser"]);if("en"===i)return void(t.toolbarOptions=["Add",{text:"Update",tooltipText:"Update",prefixIcon:"fa fa-tasks",id:"Update"},"Search",{text:"Export Excel",tooltipText:"Export Excel",prefixIcon:"e-btn-icon fa fa-file-excel-o e-icons e-icon-left",id:"exportExcel"},"ColumnChooser"])}else t.toolbarOptions=["Add",{text:"Update",tooltipText:"Update",prefixIcon:"fa fa-tasks",id:"Update"},"Search",{text:"Export Excel",tooltipText:"Export Excel",prefixIcon:"e-btn-icon fa fa-file-excel-o e-icons e-icon-left",id:"exportExcel"},"ColumnChooser"];else t.toolbarOptions=["Add",{text:"C\u1eadp Nh\u1eadt",tooltipText:"C\u1eadp Nh\u1eadt",prefixIcon:"fa fa-tasks",id:"Update"},"Search",{text:"Export Excel",tooltipText:"Export Excel",prefixIcon:"e-btn-icon fa fa-file-excel-o e-icons e-icon-left",id:"exportExcel"},"ColumnChooser"]}))}},{key:"count",value:function(t){return Number(t)+1}},{key:"onDoubleClick",value:function(t){this.setFocus=t.column}},{key:"getBuildingWorker",value:function(t){var e=this,i=+JSON.parse(localStorage.getItem("user")).User.ID;this.authService.getBuildingUserByUserID(i).subscribe(function(i){e.buildings=i.data,t()})}},{key:"getBuilding",value:function(t){var e=this,i=+JSON.parse(localStorage.getItem("user")).User.ID;this.authService.getBuildingUserByUserID(i).subscribe(function(i){e.buildings=i.data,t()})}},{key:"achievementRate",value:function(){var t=this;this.planService.achievementRate(this.buildingID).subscribe(function(e){t.updateOnTimePercentage=e.data})}},{key:"getAllLine",value:function(t){var e=this;this.planService.getLines(t).subscribe(function(t){e.lines=t,console.log("L\u1ea5y t\u1ea5t c\u1ea3 c\xe1c chuy\u1ec1n theo t\xf2a nh\xe0: ",e.buildingName)})}},{key:"onChangeLine",value:function(t,e){var i,n,a=this;if(this.lineID=(null===(i=t.itemData)||void 0===i?void 0:i.id)||0,this.kindOfLine=(null===(n=t.itemData)||void 0===n?void 0:n.kindID)||0,this.isSTF?(this.BPFCs=this.bpfcDataSource.filter(function(t){return t.kinds.includes(a.kindOfLine)&&"STF"===t.artProcess}),this.bpfcDropdownlist.refresh()):(this.BPFCs=this.bpfcDataSource.filter(function(t){return"STF"!==t.artProcess}),this.bpfcDropdownlist.refresh()),e.isGenerate&&e.buildingID!==this.lineID)return this.lineID=e.buildingID,this.grid.refresh(),void this.alertify.warning("Kh\xf4ng \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt chuy\u1ec1n cho k\u1ebf ho\u1ea1ch l\xe0m vi\u1ec7c n\xe0y! <br>\n        L\xfd Do: K\u1ebf ho\u1ea1ch l\xe0m vi\u1ec7c n\xe0y \u0111\xe3 t\u1ea1o danh s\xe1ch vi\u1ec7c l\xe0m r\u1ed3i! ",!0)}},{key:"onChangeDueDateEdit",value:function(t,e){var i;if(this.dueDate=null===(i=t.value)||void 0===i?void 0:i.toDateString(),e.isGenerate&&e.buildingID!==this.lineID)return this.lineID=e.buildingID,this.grid.refresh(),void this.alertify.warning("Kh\xf4ng \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt ng\xe0y th\u1ef1c thi cho k\u1ebf ho\u1ea1ch l\xe0m vi\u1ec7c n\xe0y! <br>\n        L\xfd Do: K\u1ebf ho\u1ea1ch l\xe0m vi\u1ec7c n\xe0y \u0111\xe3 t\u1ea1o danh s\xe1ch vi\u1ec7c l\xe0m r\u1ed3i! ",!0)}},{key:"onChangeDueDateClone",value:function(t){this.date=t.value}},{key:"onChangeBPFC",value:function(t,e){var i,n;if(this.bpfcID=(null===(i=t.itemData)||void 0===i?void 0:i.id)||0,this.bpfcKindData=(null===(n=t.itemData)||void 0===n?void 0:n.kinds)||[],this.isSTF&&this.validateKind(),e.isGenerate&&e.bpfcEstablishID!==this.bpfcID)return this.alertify.warning("Kh\xf4ng \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt BPFC cho k\u1ebf ho\u1ea1ch l\xe0m vi\u1ec7c n\xe0y! <br>\n        L\xfd Do: K\u1ebf ho\u1ea1ch l\xe0m vi\u1ec7c n\xe0y \u0111\xe3 t\u1ea1o danh s\xe1ch vi\u1ec7c l\xe0m r\u1ed3i!\n        ",!0),this.bpfcID=e.bpfcEstablishID,void this.grid.refresh()}},{key:"actionComplete",value:function(t){}},{key:"convertTimeToDatetime",value:function(t){return(new Date).toDateString()+" ".concat(t.hour,":").concat(t.minute)}},{key:"convertDatetimeToTime",value:function(t){var e=t;return{hour:e.getHours(),minute:e.getMinutes()}}},{key:"dataBound",value:function(){this.grid.autoFitColumns()}},{key:"rowDataBound",value:function(t){}},{key:"onChangeStartTime",value:function(t){}},{key:"onChangeEndTime",value:function(t){}},{key:"actionBegin",value:function(t){var e,i=this;if("beginEdit"===t.requestType){var n=t.rowData;!0===t.rowData.isOffline&&(t.cancel=!0),this.clearForm(),this.modalPlan.finishWorkingTime=n.finishWorkingTime,this.modalPlan.startWorkingTime=n.startWorkingTime,this.dueDate=n.dueDate,this.modalPlan.startTime={hour:this.modalPlan.startWorkingTime.getHours(),minute:this.modalPlan.startWorkingTime.getMinutes()},this.modalPlan.endTime={hour:this.modalPlan.finishWorkingTime.getHours(),minute:this.modalPlan.finishWorkingTime.getMinutes()}}if("cancel"===t.requestType&&(this.clearForm(),this.grid.refresh()),"save"===t.requestType){if("edit"===t.action){var a=t.previousData,o=t.data;if(t.data.isGenerate&&a.hourlyOutput!==o.hourlyOutput)return this.alertify.warning("Kh\xf4ng \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt s\u1ea3n l\u01b0\u1ee3ng h\xe0ng gi\u1edd cho k\u1ebf ho\u1ea1ch l\xe0m vi\u1ec7c n\xe0y! <br>\n            L\xfd Do: K\u1ebf ho\u1ea1ch l\xe0m vi\u1ec7c n\xe0y \u0111\xe3 t\u1ea1o danh s\xe1ch vi\u1ec7c l\xe0m r\u1ed3i!",!0),void this.grid.refresh();this.modalPlan.id=t.data.id||0,this.modalPlan.buildingID=null!==(e=this.lineID)&&void 0!==e?e:t.data.buildingID,this.modalPlan.dueDate=this.dueDate,this.modalPlan.workingHour=t.data.workingHour,this.modalPlan.BPFCEstablishID=t.data.bpfcEstablishID,this.modalPlan.BPFCName=t.data.bpfcName,this.modalPlan.hourlyOutput=t.data.hourlyOutput,this.modalPlan.startTime={hour:this.modalPlan.startWorkingTime.getHours(),minute:this.modalPlan.startWorkingTime.getMinutes()},this.modalPlan.endTime={hour:this.modalPlan.finishWorkingTime.getHours(),minute:this.modalPlan.finishWorkingTime.getMinutes()},this.planService.update(this.modalPlan).subscribe(function(t){i.alertify.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng! <br>Updated succeeded!"),i.clearForm(),i.getAll()},function(t){i.alertify.error(t,!0),i.grid.refresh(),i.getAll(),i.clearForm()}),console.clear(),console.log("\u0110\xe3 ch\u1ec9nh s\u1eeda th\xe0nh c\xf4ng k\u1ebf ho\u1ea1ch l\xe0m vi\u1ec7c!")}"add"===t.action&&(t.data.hourlyOutput=120,this.modalPlan.buildingID=this.lineID,this.modalPlan.dueDate=this.dueDate,this.modalPlan.workingHour=t.data.workingHour||0,this.modalPlan.BPFCEstablishID=this.bpfcID,this.modalPlan.BPFCName=t.data.bpfcName,this.modalPlan.hourlyOutput=t.data.hourlyOutput||0,this.modalPlan.startTime={hour:this.modalPlan.startWorkingTime.getHours(),minute:this.modalPlan.startWorkingTime.getMinutes()},this.modalPlan.endTime={hour:this.modalPlan.finishWorkingTime.getHours(),minute:this.modalPlan.finishWorkingTime.getMinutes()},this.planService.create(this.modalPlan).subscribe(function(t){t?(i.alertify.success("T\u1ea1o th\xe0nh c\xf4ng!<br>Created succeeded!"),i.getAll(),i.clearForm()):(i.alertify.warning("D\u1eef li\u1ec7u \u0111\xe3 t\u1ed3n t\u1ea1i! <br>This plan has already existed!!!"),i.getAll(),i.clearForm())},function(t){i.alertify.error(t,!0),i.grid.refresh(),i.getAll(),i.clearForm()}),console.clear(),console.log("\u0110\xe3 th\xeam m\u1edbi th\xe0nh c\xf4ng k\u1ebf ho\u1ea1ch l\xe0m vi\u1ec7c!"))}}},{key:"clearForm",value:function(){this.modalPlan={id:0,buildingID:0,BPFCEstablishID:0,BPFCName:"",hourlyOutput:0,workingHour:0,dueDate:new Date,startWorkingTime:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDay(),7,0,0),finishWorkingTime:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDay(),16,30,0),startTime:{hour:7,minute:0},endTime:{hour:16,minute:30}},this.startTime={hour:7,minute:0},this.endTime={hour:16,minute:30},this.bpfcID=0,this.hourlyOutput=0,this.workHour=0,this.dueDate=new Date,this.queryString=""}},{key:"validForm",value:function(){return[this.bpfcID].every(function(t){return t>0})}},{key:"onChangeWorkingHour",value:function(t){this.workHour=t}},{key:"onChangeHourlyOutput",value:function(t){this.hourlyOutput=t}},{key:"openaddModalPlan",value:function(t){this.modalReference=this.modalService.open(t)}},{key:"actionFailure",value:function(t){console.log(t.error)}},{key:"getAllBPFC",value:function(){var t=this;this.bPFCEstablishService.filterByApprovedStatus().subscribe(function(e){if(console.log("N\u1ebfu l\xe0 th\xe0nh h\xecnh th\xec ch\u1ec9 l\u1ea5y nh\u1eefng m\u1eabu gi\u1ea7y c\u1ee7a th\xe0nh h\xecnh, ng\u01b0\u1ee3c l\u1ea1i l\u1ea5y c\u1ee7a x\u01b0\u1edfng \u0111\u1ebf!"),t.bpfcDataSource=e.map(function(t){return{id:t.id,artProcess:t.artProcess,glues:t.glues,kinds:t.kinds,name:"".concat(t.modelName," - ").concat(t.modelNo," - ").concat(t.articleNo," - ").concat(t.artProcess)}}),t.isSTF=JSON.parse(localStorage.getItem("isSTF")),t.isSTF){var i=e.filter(function(t){return"STF"===t.artProcess}).map(function(t){return{id:t.id,artProcess:t.artProcess,glues:t.glues,kinds:t.kinds,name:"".concat(t.modelName," - ").concat(t.modelNo," - ").concat(t.articleNo," - ").concat(t.artProcess)}});t.BPFCs=Object.assign([],i),t.BPFCsForChangeModal=Object.assign([],i)}else{var n=e.filter(function(t){return"STF"!==t.artProcess}).map(function(t){return{id:t.id,artProcess:t.artProcess,glues:t.glues,kinds:t.kinds,name:"".concat(t.modelName," - ").concat(t.modelNo," - ").concat(t.articleNo," - ").concat(t.artProcess)}});t.BPFCs=Object.assign([],n),t.BPFCsForChangeModal=Object.assign([],n)}console.log("L\u1ea5y danh s\xe1ch m\u1eabu gi\xe0y: ",t.BPFCs.length)})}},{key:"getStartTimeFromPeriod",value:function(){var t=this;this.planService.getStartTimeFromPeriod(this.buildingID).subscribe(function(e){!0===e.status?(t.period=e.data,console.log("Nh\u1eefng d\u1eef li\u1ec7u c\u1ea7n thi\u1ebft cho vi\u1ec7c t\u1ea1o k\u1ebf ho\u1ea1ch l\xe0m vi\u1ec7c: "),console.log("L\u1ea5y th\u1eddi gian b\u1eaft \u0111\u1ea7u tr\u1ed9n keo \u0111\u1ea7u ti\xean trong ng\xe0y!")):t.alertify.warning(e.message)},function(e){return t.alertify.warning(e.message)})}},{key:"getAll",value:function(){var t=this;this.planService.search(this.buildingID,this.startDate.toDateString(),this.endDate.toDateString()).subscribe(function(e){t.data=e.map(function(t){return{id:t.id,bpfcName:"".concat(t.modelName," - ").concat(t.modelNoName," - ").concat(t.articleName," - ").concat(t.processName),dueDate:t.dueDate,createdDate:t.createdDate,hourlyOutput:t.hourlyOutput,buildingName:t.buildingName,buildingID:t.buildingID,startWorkingTime:new Date(t.startWorkingTime),finishWorkingTime:new Date(t.finishWorkingTime),startTime:t.startTime,endTime:t.endTime,isChangeBPFC:t.isChangeBPFC,bpfcEstablishID:t.bpfcEstablishID,glues:t.glues||[],lineKind:t.lineKind,isGenerate:t.isGenerate,isOvertime:t.isOvertime,isOffline:t.isOffline,updatedTime:t.updatedTime,updatedOffline:t.updatedOffline,updatedOvertime:t.updatedOvertime,isShowOvertimeOption:t.isShowOvertimeOption}}),t.data=t.data||[],console.log("L\u1ea5y t\u1ea5t c\u1ea3 k\u1ebf ho\u1ea1ch l\xe0m vi\u1ec7c c\u1ee7a t\xf2a nh\xe0 : ",t.buildingName)})}},{key:"deleteRange",value:function(t){var e=this;this.alertify.confirm("Delete Plan <br> X\xf3a k\u1ebf ho\u1ea1c l\xe0m vi\u1ec7c","Are you sure you want to delete this Plans ?<br> B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a kh\xf4ng?",function(){e.planService.deleteRange(t).subscribe(function(){e.getAll(),e.alertify.success("X\xf3a th\xe0nh c\xf4ng! <br>Plans has been deleted")},function(t){e.alertify.error("X\xf3a th\u1ea5t b\u1ea1i! <br>Failed to delete the Model Name")})})}},{key:"delete",value:function(t){var e=this;this.alertify.confirm("Delete Plan <br> X\xf3a k\u1ebf ho\u1ea1c l\xe0m vi\u1ec7c","Are you sure you want to delete this Plans ?<br> B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a kh\xf4ng?",function(){e.planService.deleteRange([t]).subscribe(function(){e.getAll(),e.alertify.success("X\xf3a th\xe0nh c\xf4ng! <br>Plans has been deleted")},function(t){e.alertify.error("X\xf3a th\u1ea5t b\u1ea1i! <br>Failed to delete the Model Name")})})}},{key:"openModal",value:function(t){var e=this.grid.getSelectedRecords();0!==e.length?(this.plansSelected=e.map(function(t){return{id:t.id,bpfcEstablishID:t.bpfcEstablishID,hourlyOutput:t.hourlyOutput,dueDate:t.dueDate,buildingID:t.buildingID}}),this.modalReference=this.modalService.open(t)):this.alertify.warning("H\xe3y ch\u1ecdn 1 ho\u1eb7c nhi\u1ec1u d\xf2ng \u0111\u1ec3 nh\xe2n b\u1ea3n!<br>Please select the plan!",!0)}},{key:"openCloneModal",value:function(t){this.modalReference=this.modalService.open(this.cloneModal),this.plansSelected=[{id:t.id,bpfcEstablishID:t.bpfcEstablishID,hourlyOutput:t.hourlyOutput,dueDate:t.dueDate,buildingID:t.buildingID}]}},{key:"toolbarClick",value:function(t){var e=this;switch(t.item.id){case"Clone":this.openModal(this.cloneModal);break;case"Update":this.generateTodolist();break;case"exportExcel":this.spinner.show();var i=this.data.map(function(t){return t.id});this.planService.exportExcel({plans:i,buildingID:this.buildingID}).subscribe(function(t){new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});var i=window.URL.createObjectURL(t),n=document.createElement("a");n.href=i,n.download="report.xlsx",n.click(),e.spinner.hide()},function(t){e.spinner.hide(),e.alertify.error("Server error!")})}}},{key:"onClickClone",value:function(){var t=this;this.plansSelected.map(function(e){e.dueDate=t.date}),this.planService.clonePlan(this.plansSelected).subscribe(function(e){e?(t.alertify.success("Nh\xe2n b\u1ea3n th\xe0nh c\xf4ng! <br>Successfully!"),t.startDate=t.date,t.endDate=t.date,t.getAll(),t.modalService.dismissAll()):(t.alertify.warning("D\u1eef li\u1ec7u n\xe0y \u0111\xe3 t\u1ed3n t\u1ea1i!<br>The plans have already existed!"),t.modalService.dismissAll())})}},{key:"search",value:function(t,e){var i=this;this.planService.search(this.buildingID,t.toDateString(),e.toDateString()).subscribe(function(t){i.data=t.map(function(t){return{id:t.id,bpfcName:"".concat(t.modelName," - ").concat(t.modelNoName," - ").concat(t.articleName," - ").concat(t.processName),dueDate:t.dueDate,createdDate:t.createdDate,hourlyOutput:t.hourlyOutput,buildingName:t.buildingName,buildingID:t.buildingID,startWorkingTime:new Date(t.startWorkingTime),finishWorkingTime:new Date(t.finishWorkingTime),startTime:t.startTime,endTime:t.endTime,isChangeBPFC:t.isChangeBPFC,bpfcEstablishID:t.bpfcEstablishID,glues:t.glues||[],lineKind:t.lineKind,isGenerate:t.isGenerate,isOvertime:t.isOvertime,isOffline:t.isOffline,updatedTime:t.updatedTime,updatedOffline:t.updatedOffline,updatedOvertime:t.updatedOvertime,isShowOvertimeOption:t.isShowOvertimeOption}})})}},{key:"changeStopLine",value:function(t,e){var i=this,n=e.id;t.checked?this.offline(n,function(){i.grid.refresh()}):this.online(n,function(){i.grid.refresh()})}},{key:"changeOvertime",value:function(t,e){var i=this,n=[e.id];t.checked?this.addOvertime(n,function(){i.grid.refresh()}):this.removeOvertime(n,function(){i.grid.refresh()})}},{key:"onClickDefault",value:function(){this.startDate=new Date,this.endDate=new Date,this.getAll()}},{key:"startDateOnchange",value:function(t){this.startDate=t.value,this.search(this.startDate,this.endDate)}},{key:"endDateOnchange",value:function(t){this.endDate=t.value,this.search(this.startDate,this.endDate)}},{key:"tooltipContext",value:function(e){if(e){var i,n=["1","2","3","4","5","6","7","8","9","10"],a=[],o=t(e);try{for(o.s();!(i=o.n()).done;){var c=i.value;n.includes(c)||a.push(c)}}catch(s){o.e(s)}finally{o.f()}return a.join("<br>")}return""}},{key:"tooltip",value:function(t){"bpfcName"===t.column.field&&new k.a({content:this.tooltipContext(t.data.glues)},t.cell),"buildingName"===t.column.field&&new k.a({content:t.data.lineKind},t.cell)}},{key:"onClickFilter",value:function(){this.search(this.startDate,this.endDate)}},{key:"generateTodolist",value:function(){var t=this,e=this.grid.dataSource.filter(function(t){return!1===t.isGenerate});if(0!==e.length){var i=e.map(function(t){return t.id});this.todolistService.generateToDoList(i).subscribe(function(e){e.status?(t.alertify.success("T\u1ea1o nhi\u1ec7m v\u1ee5 th\xe0nh c\xf4ng!<br>Success!",!0),t.getAll()):t.alertify.error(e.message,!0)},function(e){return t.alertify.error(e,!0)})}else this.alertify.warning("T\u1ea5t c\u1ea3 c\xe1c k\u1ebf ho\u1ea1ch l\xe0m vi\u1ec7c \u0111\xe3 \u0111\u01b0\u1ee3c t\u1ea1o nhi\u1ec7m v\u1ee5!<br>\n      All work plans have been created with tasks !",!0)}},{key:"generateDispatchList",value:function(){var t=this,e=this.grid.dataSource.filter(function(t){return!1===t.isGenerate});if(0!==e.length){var i=e.map(function(t){return t.id});this.todolistService.generateDispatchList(i).subscribe(function(e){e.status?(t.alertify.success("T\u1ea1o nhi\u1ec7m v\u1ee5 th\xe0nh c\xf4ng!<br>Success!",!0),t.getAll()):t.alertify.error(e.message,!0)},function(e){return t.alertify.error(e,!0)})}else this.alertify.warning("T\u1ea5t c\u1ea3 c\xe1c k\u1ebf ho\u1ea1ch l\xe0m vi\u1ec7c \u0111\xe3 \u0111\u01b0\u1ee3c t\u1ea1o nhi\u1ec7m v\u1ee5!<br>\n      All work plans have been created with tasks !",!0)}},{key:"changeBPFC",value:function(){var t=this;this.planService.changeBPFC(this.planID,this.changebpfcID).subscribe(function(){t.alertify.success("T\u1ea1o nhi\u1ec7m v\u1ee5 th\xe0nh c\xf4ng!<br>Success!",!0),t.getAll(),t.modalReference.dismiss()},function(e){return t.alertify.error(e,!0)})}},{key:"online",value:function(t,e){var i=this;this.alertify.confirm2("Open Line! <br>M\u1edf l\u1ea1i nh\xe9!","Are you sure you want to open line of this Plans ?<br> B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n m\u1edf l\u1ea1i chuy\u1ec1n kh\xf4ng?",function(){i.planService.online(t).subscribe(function(){i.alertify.success("Th\xe0nh c\xf4ng!<br>Success!",!0),i.getAll()},function(t){return i.alertify.error(t,!0)})},function(){e()})}},{key:"offline",value:function(t,e){var i=this;this.alertify.confirm2("Stop Line! <br>  Ng\u01b0ng chuy\u1ec1n kh\xf4ng!","Are you sure you want to stop line of this Plans ?<br> B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n ng\u01b0ng chuy\u1ec1n kh\xf4ng?",function(){i.planService.offline(t).subscribe(function(){i.alertify.success("Th\xe0nh c\xf4ng!<br>Success!",!0),i.getAll()},function(t){return i.alertify.error(t,!0)})},function(){e()})}},{key:"openStationComponent",value:function(t){var e=this.modalService.open(vt,{size:"lg",backdrop:"static",keyboard:!1});e.componentInstance.plan=t,e.result.then(function(t){},function(t){})}},{key:"openChangeBPFCModalComponent",value:function(t,e){this.planID=e.id,this.buildingNameForChangeModal=e.buildingName,this.modalReference=this.modalService.open(t,{size:"lg"}),this.modalReference.result.then(function(t){},function(t){})}},{key:"onChangeBPFCModal",value:function(t){this.changebpfcID=t.itemData.id}},{key:"startSteps",value:function(){this.introJS.setOptions({steps:[{element:".step1-li",intro:"B\u01b0\u1edbc 1: Ch\u1ecdn v\xe0o n\xfat \u0111\u1ed5i m\xe3 BPFC!"},{element:".step2-li",intro:"B\u01b0\u1edbc 2: Ch\u1ecdn 1 BPFC kh\xe1c!"}],hidePrev:!0,hideNext:!1}).start()}},{key:"created",value:function(){this.getAllBPFCForChangeModal()}},{key:"getAllBPFCForChangeModal",value:function(){}},{key:"addOvertime",value:function(t,e){var i=this;this.alertify.confirm2("Add Overtime! <br> C\xe0i \u0111\u1eb7t gi\u1edd t\u0103ng ca!","Are you sure you want to add overtime of this Plans ?<br> B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n c\xe0i \u0111\u1eb7t gi\u1edd \u0103n ca kh\xf4ng?",function(){i.todolistService.addOvertime(t).subscribe(function(t){!0===t.status?(i.getAll(),i.alertify.success(t.message)):i.alertify.error(t.message)},function(t){i.alertify.error("L\u1ed7i m\xe1y ch\u1ee7!")})},function(){e()})}},{key:"removeOvertime",value:function(t,e){var i=this;this.alertify.confirm2("remove overtime of this plan <br> X\xf3a gi\u1edd t\u0103ng ca c\u1ee7a k\u1ebf ho\u1ea1c l\xe0m vi\u1ec7c","Are you sure you want to remove overtime of this Plans ?<br> B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n h\u1ee7y gi\u1edd t\u0103ng c\u1ea3 c\u1ee7a k\u1ebf ho\u1ea1ch l\xe0m vi\u1ec7c n\xe0y kh\xf4ng?",function(){i.todolistService.removeOvertime(t).subscribe(function(t){!0===t.status?(i.getAll(),i.alertify.success(t.message)):i.alertify.error(t.message)},function(t){i.alertify.error("L\u1ed7i m\xe1y ch\u1ee7!")})},function(){e()})}},{key:"validateKind",value:function(){0===this.lineID&&(this.alertify.warning("Vui l\xf2ng ch\u1ecdn chuy\u1ec1n tr\u01b0\u1edbc!",!0),this.bpfcID=0,this.bpfcDropdownlist.clear()),!1===this.bpfcKindData.includes(this.kindOfLine)&&(this.alertify.warning("Nh\u1eefng h\xf3a ch\u1ea5t trong BPFC hi\u1ec7n t\u1ea1i kh\xf4ng c\xf3 ch\u1ee9a kind n\xe0o c\u1ee7a chuy\u1ec1n hi\u1ec7n t\u1ea1i! Vui l\xf2ng ch\u1ecdn l\u1ea1i!",!0),this.bpfcID=0,this.bpfcDropdownlist.clear())}}]),e}()).\u0275fac=function(t){return new(t||ke)(E.Mb(F.a),E.Mb(h.b),E.Mb(kt.a),E.Mb(Dt.a),E.Mb(_.a),E.Mb(pt),E.Mb(xt.a),E.Mb(Ct.a),E.Mb(l.c),E.Mb(wt.a),E.Mb(s.d))},ke.\u0275cmp=E.Gb({type:ke,selectors:[["app-plan"]],viewQuery:function(t,e){var i;1&t&&(E.Qc(It,!0),E.Qc(Tt,!0),E.Qc(Rt,!0),E.Qc(Mt,!0),E.Qc(Bt,!0),E.Qc(Pt,!0)),2&t&&(E.xc(i=E.dc())&&(e.bpfcDropdownlist=i.first),E.xc(i=E.dc())&&(e.cloneModal=i.first),E.xc(i=E.dc())&&(e.stationModal=i.first),E.xc(i=E.dc())&&(e.orderForm=i.first),E.xc(i=E.dc())&&(e.startTimepicker=i.first),E.xc(i=E.dc())&&(e.grid=i.first))},features:[E.yb([s.d,x.m,x.f,x.h])],decls:128,vars:74,consts:[["type","square-jelly-box","size","medium",3,"fullScreen"],[1,"loading"],[1,"row","pt-2"],[1,"col-md-12"],[1,"card"],[1,"card-body","table-responsive","p-0"],[1,"row","my-3"],[1,"row"],[1,"col-md-12","d-flex","justify-content-start","align-items-center"],[1,"font-weight-bold","px-3"],[1,"pr-3",3,"value","ngModel","change","ngModelChange"],[1,"font-weight-bold","pr-3"],["placeholder","Select a building",1,"pr-3",3,"dataSource","fields","allowFiltering","value","filtering","change"],[1,"btn","btn-sm","btn-default",3,"click"],[1,"fa","fa-times"],[1,"font-weight-bold","px-3","text-danger"],["showColumnMenu","true","allowPaging","true","allowSorting","true","allowResizing","true","gridLines","Both",3,"dataSource","searchSettings","allowExcelExport","showColumnChooser","toolbar","selectionSettings","sortSettings","pageSettings","editSettings","actionBegin","actionComplete","rowDataBound","dataBound","queryCellInfo","actionFailure","toolbarClick","recordDoubleClick"],["grid",""],["field","buildingName","width","92","textAlign","Center",3,"headerText"],["headerTemplate",""],["editTemplate",""],["field","bpfcName","width","344","textAlign","Center",3,"headerText"],["template",""],["field","dueDate","type","date","format","MM-dd-yyyy","width","138","textAlign","Center",3,"headerText"],["field","startTime","isPrimaryKey","true","type","date","width","95","textAlign","Center",3,"headerText"],["field","endTime","isPrimaryKey","true","type","date","width","100","textAlign","Center",3,"headerText"],["field","hourlyOutput","editType","numericedit","format","####","width","115","textAlign","Center",3,"headerText"],["field","isGenerate","width","110","textAlign","Center",3,"headerText"],["field","createdDate","type","date","format","MM-dd-yyyy HH:mm","width","138","textAlign","Center",3,"visible","headerText"],["field","updatedTime","type","date","format","MM-dd-yyyy HH:mm","width","138","textAlign","Center",3,"visible","headerText"],["field","updatedOffline","type","date","format","MM-dd-yyyy HH:mm","width","138","textAlign","Center",3,"visible","headerText"],["field","updatedOvertime","type","date","format","MM-dd-yyyy HH:mm","width","138","textAlign","Center",3,"visible","headerText"],["field","Inactive","type","date","format","MM-dd-yyyy HH:mm","width","138","textAlign","Center",3,"headerText"],["field","Overtime/No Overtime","textAlign","Center","width","136",3,"headerText"],["field","Change BPFC","textAlign","Center","width","120",3,"headerText"],["cloneModal",""],["changeBPFCModal",""],["id","buildingNameDropdownlist","popupHeight","200px","popupWidth","250px",3,"dataSource","placeholder","value","fields","allowFiltering","change"],["buildingNameDropdownlist",""],["id","bpfcDropdownlist","popupHeight","300px","popupWidth","450px",3,"dataSource","value","placeholder","fields","allowFiltering","filtering","change"],["bpfcDropdownlist",""],["format","MM-dd-yyyy",3,"value","allowEdit","placeholder","change"],[4,"ngIf","ngIfElse"],["elseOffline",""],[4,"ngIf"],[1,"fa","fa-check",2,"color","green"],[1,"fa","fa-times",2,"color","red"],["cssClass","custom-stop-line","style","width: 80px; ",3,"onLabel","offLabel","checked","disabled","change",4,"ngIf"],["cssClass","custom-stop-line",2,"width","80px",3,"onLabel","offLabel","checked","disabled","change"],["switch",""],["cssClass","custom-overtime","style","width: 80px; ",3,"onLabel","offLabel","checked","change",4,"ngIf"],["cssClass","custom-overtime",2,"width","80px",3,"onLabel","offLabel","checked","change"],[1,"btn-group"],["type","button","class","btn btn-xs btn-primary step1-li",3,"click",4,"ngIf"],["class","btn-group ml-1",4,"ngIf"],["type","button",1,"btn","btn-xs","btn-primary","step1-li",3,"click"],[1,"fas","fa-arrows-alt-h"],[1,"btn-group","ml-1"],["type","button",1,"btn","btn-xs","btn-danger",3,"click"],[1,"fa","fa-trash"],[1,"modal-header"],[1,"modal-title"],[1,"fas","fa-plus"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group"],["for","Name"],[2,"color","red"],["format","MM-dd-yyyy",3,"value","change"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"text-danger"],["popupHeight","300px","popupWidth","450px",3,"dataSource","ngModel","placeholder","fields","allowFiltering","ngModelChange","filtering","created","select"],["changeBPFCDroupdownlist",""]],template:function(t,e){1&t&&(E.Sb(0,"ngx-spinner",0),E.Sb(1,"p",1),E.Kc(2,"Loading data..."),E.Rb(),E.Rb(),E.Sb(3,"div",2),E.Sb(4,"div",3),E.Sb(5,"div",4),E.Sb(6,"div",5),E.Sb(7,"div",6),E.Sb(8,"div",3),E.Sb(9,"div",7),E.Sb(10,"div",8),E.Sb(11,"div",9),E.Kc(12),E.hc(13,"translate"),E.Rb(),E.Sb(14,"ejs-datepicker",10),E.cc("change",function(t){return e.startDateOnchange(t)})("ngModelChange",function(t){return e.startDate=t}),E.Rb(),E.Sb(15,"div",11),E.Kc(16),E.hc(17,"translate"),E.Rb(),E.Sb(18,"ejs-datepicker",10),E.cc("change",function(t){return e.endDateOnchange(t)})("ngModelChange",function(t){return e.endDate=t}),E.Rb(),E.Sb(19,"div",11),E.Kc(20),E.hc(21,"translate"),E.Rb(),E.Sb(22,"ejs-dropdownlist",12),E.cc("filtering",function(t){return e.onFilteringBuilding(t)})("change",function(t){return e.onChangeBuilding(t)}),E.Rb(),E.Sb(23,"button",13),E.cc("click",function(){return e.onClickDefault()}),E.Nb(24,"i",14),E.Rb(),E.Sb(25,"h4",15),E.Kc(26),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Sb(27,"ejs-grid",16,17),E.cc("actionBegin",function(t){return e.actionBegin(t)})("actionComplete",function(t){return e.actionComplete(t)})("rowDataBound",function(t){return e.rowDataBound(t)})("dataBound",function(){return e.dataBound()})("queryCellInfo",function(t){return e.tooltip(t)})("actionFailure",function(t){return e.actionFailure(t)})("toolbarClick",function(t){return e.toolbarClick(t)})("recordDoubleClick",function(t){return e.onDoubleClick(t)}),E.Sb(29,"e-columns"),E.Sb(30,"e-column",18),E.hc(31,"translate"),E.Ic(32,Ot,2,3,"ng-template",null,19,E.Jc),E.Ic(34,At,3,7,"ng-template",null,20,E.Jc),E.Rb(),E.Sb(36,"e-column",21),E.hc(37,"translate"),E.Ic(38,Nt,2,3,"ng-template",null,19,E.Jc),E.Ic(40,Et,3,7,"ng-template",null,20,E.Jc),E.Ic(42,Ft,1,1,"ng-template",null,22,E.Jc),E.Rb(),E.Sb(44,"e-column",23),E.hc(45,"translate"),E.Ic(46,_t,2,3,"ng-template",null,19,E.Jc),E.Ic(48,Lt,2,5,"ng-template",null,20,E.Jc),E.Rb(),E.Sb(50,"e-column",24),E.hc(51,"translate"),E.Ic(52,Kt,2,3,"ng-template",null,19,E.Jc),E.Ic(54,jt,2,4,"ng-template",null,22,E.Jc),E.Ic(56,zt,2,4,"ng-template",null,20,E.Jc),E.Rb(),E.Sb(58,"e-column",25),E.hc(59,"translate"),E.Ic(60,Ht,2,3,"ng-template",null,19,E.Jc),E.Ic(62,Jt,3,2,"ng-template",null,22,E.Jc),E.Ic(64,Qt,1,0,"ng-template",null,20,E.Jc),E.Rb(),E.Sb(66,"e-column",26),E.hc(67,"translate"),E.Ic(68,$t,2,3,"ng-template",null,19,E.Jc),E.Rb(),E.Sb(70,"e-column",27),E.hc(71,"translate"),E.Ic(72,Vt,2,3,"ng-template",null,19,E.Jc),E.Ic(74,qt,1,0,"ng-template",null,20,E.Jc),E.Ic(76,Xt,2,2,"ng-template",null,22,E.Jc),E.Rb(),E.Sb(78,"e-column",28),E.hc(79,"translate"),E.Ic(80,Zt,2,3,"ng-template",null,19,E.Jc),E.Rb(),E.Sb(82,"e-column",29),E.hc(83,"translate"),E.Ic(84,te,2,3,"ng-template",null,19,E.Jc),E.Ic(86,ee,2,4,"ng-template",null,22,E.Jc),E.Rb(),E.Sb(88,"e-column",30),E.hc(89,"translate"),E.Ic(90,ie,2,3,"ng-template",null,19,E.Jc),E.Ic(92,ne,2,4,"ng-template",null,22,E.Jc),E.Rb(),E.Sb(94,"e-column",31),E.hc(95,"translate"),E.Ic(96,ae,2,3,"ng-template",null,19,E.Jc),E.Ic(98,oe,2,4,"ng-template",null,22,E.Jc),E.Rb(),E.Sb(100,"e-column",32),E.hc(101,"translate"),E.Ic(102,ce,2,3,"ng-template",null,19,E.Jc),E.Ic(104,re,1,1,"ng-template",null,22,E.Jc),E.Ic(106,le,0,0,"ng-template",null,20,E.Jc),E.Rb(),E.Sb(108,"e-column",33),E.hc(109,"translate"),E.Ic(110,ue,2,3,"ng-template",null,19,E.Jc),E.Ic(112,he,1,1,"ng-template",null,22,E.Jc),E.Ic(114,ge,1,0,"ng-template",null,20,E.Jc),E.Rb(),E.Sb(116,"e-column",34),E.hc(117,"translate"),E.Ic(118,be,2,3,"ng-template",null,19,E.Jc),E.Ic(120,me,3,2,"ng-template",null,22,E.Jc),E.Ic(122,ve,1,0,"ng-template",null,20,E.Jc),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Ic(124,Se,21,1,"ng-template",null,35,E.Jc),E.Ic(126,ye,23,14,"ng-template",null,36,E.Jc)),2&t&&(E.mc("fullScreen",!1),E.zb(12),E.Mc("",E.ic(13,40,"Start Time"),":"),E.zb(2),E.mc("value",e.startDate)("ngModel",e.startDate),E.zb(2),E.Mc("",E.ic(17,42,"End Time"),":"),E.zb(2),E.mc("value",e.endDate)("ngModel",e.endDate),E.zb(2),E.Mc("",E.ic(21,44,"Building"),":"),E.zb(2),E.mc("dataSource",e.buildings)("fields",e.fieldsBuildings)("allowFiltering",!0)("value",e.buildingID),E.zb(4),E.Lc(e.updateOnTimePercentage),E.zb(1),E.mc("dataSource",e.data)("searchSettings",e.searchSettings)("allowExcelExport",!0)("showColumnChooser",!0)("toolbar",e.toolbarOptions)("selectionSettings",e.selectOptions)("sortSettings",e.sortSettings)("pageSettings",e.pageSettings)("editSettings",e.editSettings),E.zb(3),E.nc("headerText",E.ic(31,46,"LINE_LABEL")),E.zb(6),E.nc("headerText",E.ic(37,48,"BPFC_NAME_LABEL")),E.zb(8),E.nc("headerText",E.ic(45,50,"DUE_DATE_LABEL")),E.zb(6),E.nc("headerText",E.ic(51,52,"Start Time")),E.zb(8),E.nc("headerText",E.ic(59,54,"End Time")),E.zb(8),E.nc("headerText",E.ic(67,56,"HOURLY_OUTPUT_LABEL")),E.zb(4),E.nc("headerText",E.ic(71,58,"Status")),E.zb(8),E.nc("headerText",E.ic(79,60,"Created Date")),E.mc("visible",!1),E.zb(4),E.nc("headerText",E.ic(83,62,"Updated Time")),E.mc("visible",!1),E.zb(6),E.nc("headerText",E.ic(89,64,"Updated Offline")),E.mc("visible",!1),E.zb(6),E.nc("headerText",E.ic(95,66,"Updated Overtime")),E.mc("visible",!1),E.zb(6),E.nc("headerText",E.ic(101,68,"Inactive")),E.zb(8),E.nc("headerText",E.ic(109,70,"Overtime/No Overtime")),E.zb(8),E.oc("headerText"," ",E.ic(117,72,"Change BPFC"),""))},directives:[l.a,p.a,r.g,r.j,d.c,x.j,b.d,I.d,I.b,x.e,x.b,b.c,I.c,I.a,x.d,x.a,s.n,f.i],pipes:[S.c,s.d],styles:[".disablecheckbox[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}.e-grid[_ngcontent-%COMP%]   .e-altrow[_ngcontent-%COMP%]{background-color:#d6d8db}.e-switch-wrapper.custom-stop-line[_ngcontent-%COMP%]   .e-switch-inner.e-switch-active[_ngcontent-%COMP%], .e-switch-wrapper.custom-stop-line[_ngcontent-%COMP%]   .e-switch-inner.e-switch-active[_ngcontent-%COMP%]   .e-switch-on[_ngcontent-%COMP%], .e-switch-wrapper.custom-stop-line[_ngcontent-%COMP%]:hover   .e-switch-inner.e-switch-active[_ngcontent-%COMP%]   .e-switch-on[_ngcontent-%COMP%]{background-color:#dc3545!important;border-color:#dc3545!important;font-weight:500;font-size:10px}.e-switch-wrapper.custom-stop-line[_ngcontent-%COMP%]{width:42px;height:24px}.e-switch-wrapper.custom-stop-line[_ngcontent-%COMP%]   .e-switch-handle[_ngcontent-%COMP%]{width:20px;height:20px}.e-switch-wrapper.custom-stop-line[_ngcontent-%COMP%]   .e-switch-handle.e-switch-active[_ngcontent-%COMP%]{margin-left:-22px}.e-switch-wrapper.custom-overtime[_ngcontent-%COMP%]   .e-switch-inner.e-switch-active[_ngcontent-%COMP%], .e-switch-wrapper.custom-overtime[_ngcontent-%COMP%]   .e-switch-inner.e-switch-active[_ngcontent-%COMP%]   .e-switch-on[_ngcontent-%COMP%], .e-switch-wrapper.custom-overtime[_ngcontent-%COMP%]:hover   .e-switch-inner.e-switch-active[_ngcontent-%COMP%]   .e-switch-on[_ngcontent-%COMP%]{background-color:#ffc107!important;border-color:#ffc107!important;color:#000;font-weight:500;font-size:10px}.e-switch-wrapper.custom-overtime[_ngcontent-%COMP%]{width:42px;height:24px}.e-switch-wrapper.custom-overtime[_ngcontent-%COMP%]   .e-switch-handle[_ngcontent-%COMP%]{width:20px;height:20px}.e-switch-wrapper.custom-overtime[_ngcontent-%COMP%]   .e-switch-handle.e-switch-active[_ngcontent-%COMP%]{margin-left:-22px}"]}),ke),xe=["cloneModal"],Ce=["planForm"],we=["grid"];function Ie(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"LINE_LABEL")," ")}function Te(t,e){1&t&&E.Kc(0),2&t&&E.Mc(" ",e.$implicit.buildingName," ")}function Re(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"BPFC_NAME_LABEL")," ")}function Me(t,e){1&t&&E.Kc(0),2&t&&E.Mc(" ",e.$implicit.bpfcName," ")}function Be(t,e){if(1&t&&(E.Sb(0,"ejs-tooltip",25),E.Kc(1),E.Rb()),2&t){var i=e.$implicit,n=E.gc();E.mc("content",n.tooltip(i.glues)),E.zb(1),E.Mc(" ",i.bpfcName||"#N/A"," ")}}function Pe(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"OUTPUT_QUANTITY")," ")}function Oe(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"DUE_DATE_LABEL")," ")}function Ae(t,e){1&t&&(E.Kc(0),E.hc(1,"date")),2&t&&E.Mc(" ",E.jc(1,1,e.$implicit.dueDate,"dd MMM, yyyy")," ")}function Ne(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"UPDATE_TIME")," ")}function Ee(t,e){if(1&t&&(E.Kc(0),E.hc(1,"date")),2&t){var i=e.$implicit;E.Mc(" ",0===i.quantity?"-":E.jc(1,1,i.createdDate,"dd MMM, yyyy HH:mm")," ")}}function Fe(t,e){if(1&t&&(E.Kc(0),E.hc(1,"date")),2&t){var i=e.$implicit;E.Mc(" ",0===i.quantity?"-":E.jc(1,1,i.createdDate,"dd MMM, yyyy HH:mm")," ")}}function _e(t,e){if(1&t){var i=E.Tb();E.Sb(0,"div",26),E.Sb(1,"h4",27),E.Nb(2,"i",28),E.Kc(3," Clone Work Plan "),E.Rb(),E.Sb(4,"button",29),E.cc("click",function(){return e.$implicit.dismiss("Cross click")}),E.Sb(5,"span",30),E.Kc(6,"\xd7"),E.Rb(),E.Rb(),E.Rb(),E.Sb(7,"div",31),E.Sb(8,"div",32),E.Sb(9,"div",3),E.Sb(10,"div",33),E.Sb(11,"label",34),E.Kc(12,"DueDate"),E.Rb(),E.Sb(13,"span",35),E.Kc(14,"(*)"),E.Rb(),E.Sb(15,"ejs-datepicker",36),E.cc("change",function(t){return E.Bc(i),E.gc().onChangeDueDateClone(t)}),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Sb(16,"div",37),E.Sb(17,"button",38),E.cc("click",function(){return e.$implicit.close("Close click")}),E.Kc(18,"Close"),E.Rb(),E.Sb(19,"button",39),E.cc("click",function(){return E.Bc(i),E.gc().onClickClone()}),E.Kc(20,"Clone"),E.Rb(),E.Rb()}if(2&t){var n=E.gc();E.zb(15),E.mc("value",n.date)}}var Le,Ke=((Le=function(){function t(e,n,a,o,c,s,r,l,u){var d=this;i(this,t),this.alertify=e,this.modalService=n,this.planService=a,this.bPFCEstablishService=o,this.authService=c,this.datePipe=s,this.buildingService=r,this.dataService=l,this.spinner=u,this.startDate=new Date,this.endDate=new Date,this.date=new Date,this.searchSettings={hierarchyMode:"Parent"},this.modalPlan={id:0,buildingID:0,BPFCEstablishID:0,BPFCName:"",hourlyOutput:0,workingHour:0,dueDate:new Date,startWorkingTime:new Date,finishWorkingTime:new Date,startTime:{hour:7,minute:0},endTime:{hour:16,minute:30}},this.textLine="Select a line name",this.fieldsGlue={text:"name",value:"name"},this.fieldsLine={text:"name",value:"name"},this.fieldsBPFC={text:"name",value:"name"},this.fieldsBuildings={text:"name",value:"id"},this.subscription=[],this.onFilteringBuilding=function(t){var e=new N.h;e=""!==t.text?e.where("name","contains",t.text,!0):e,t.updateData(d.buildings,e)}}return a(t,[{key:"ngOnInit",value:function(){this.date=new Date,this.endDate=new Date,this.endDate=new Date;var t=JSON.parse(localStorage.getItem("building")),e=JSON.parse(localStorage.getItem("level"));this.role=e,this.building=t,this.gridConfig(),this.checkRole(),this.getAllBPFC(),this.ClearForm()}},{key:"gridConfig",value:function(){this.pageSettings={pageCount:20,pageSizes:!0,pageSize:12},this.sortSettings={columns:[{field:"dueDate",direction:"Ascending"}]},this.editparams={params:{popupHeight:"300px"}},this.hasWorker=!0,this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"},this.toolbarOptions=["Cancel","Search"]}},{key:"count",value:function(t){return Number(t)+1}},{key:"getAllLine",value:function(t){var e=this;this.planService.getLines(t).subscribe(function(t){e.buildingName=t})}},{key:"created",value:function(){}},{key:"onChangeBuilding",value:function(t){this.buildingID=t.itemData.id}},{key:"getBuilding",value:function(t){var e=this;this.buildingService.getBuildings().subscribe(function(i){e.buildings=i.filter(function(t){return 2===t.level}),t()})}},{key:"onSelectBuilding",value:function(t){this.buildingID=t.itemData.id,this.buildingName=t.itemData.name,localStorage.setItem("buildingID",t.itemData.id),this.getAll()}},{key:"checkRole",value:function(){var t=this;switch(this.role.id){case 1:case 2:case 3:case 4:this.IsAdmin=!0;var e=+localStorage.getItem("buildingID");this.getBuilding(0===e?function(){t.alertify.message("Please select a building!",!0)}:function(){t.buildingID=e,t.getAll(),t.getAllLine(t.buildingID)});break;case 6:this.building=JSON.parse(localStorage.getItem("building")),this.getBuilding(function(){t.buildingID=t.building[0].id,t.getAll(),t.getAllLine(t.buildingID)})}}},{key:"getReport",value:function(t){var e=this;this.spinner.show(),this.planService.getReport(t).subscribe(function(t){new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});var i=window.URL.createObjectURL(t),n=document.createElement("a");n.href=i,n.download="report.xlsx",n.click(),e.spinner.hide()},function(t){e.alertify.error("Ch\u1ec9 \u0111\u01b0\u1ee3c xu\u1ea5t d\u1eef li\u1ec7u b\xe1o c\xe1o trong 30 ng\xe0y!!!<br>\n        The report data can only be exported for 30 days !!!",!0),e.spinner.hide()})}},{key:"downLoadFile",value:function(t,e){var i=new Blob([t],{type:e}),n=window.URL.createObjectURL(i),a=window.open(n);a&&!a.closed&&void 0!==a.closed||this.alertify.error("Please disable your Pop-up blocker and try again."),this.spinner.hide()}},{key:"onChangeBuildingNameEdit",value:function(t){this.buildingNameEdit=t.itemData.id}},{key:"onChangeDueDateEdit",value:function(t){this.dueDate=t.value.toDateString()}},{key:"onChangeDueDateClone",value:function(t){this.date=t.value}},{key:"onChangeBPFCEdit",value:function(t){this.bpfcEdit=t.itemData.id}},{key:"actionComplete",value:function(t){var e;"beginEdit"===t.requestType&&(null===(e=this.setFocus)||void 0===e?void 0:e.field)&&t.form.elements.namedItem("quantity").focus()}},{key:"onDoubleClick",value:function(t){this.setFocus=t.column}},{key:"actionBegin",value:function(t){var e=this;"cancel"===t.requestType&&this.ClearForm(),"save"===t.requestType&&"edit"===t.action&&(t.data.quantity!==t.previousData.quantity?this.planService.editQuantity(t.data.id||0,t.data.quantity).subscribe(function(t){e.alertify.success("Updated succeeded!"),e.ClearForm(),e.getAll()}):t.cancel=!0)}},{key:"ClearForm",value:function(){this.bpfcEdit=0,this.hourlyOutput=0,this.workHour=0,this.dueDate=new Date}},{key:"validForm",value:function(){return[this.bpfcEdit].every(function(t){return t>0})}},{key:"onChangeWorkingHour",value:function(t){this.workHour=t}},{key:"onChangeHourlyOutput",value:function(t){this.hourlyOutput=t}},{key:"rowSelected",value:function(t){}},{key:"openaddModalPlan",value:function(t){this.modalReference=this.modalService.open(t)}},{key:"getAllBPFC",value:function(){var t=this;this.bPFCEstablishService.filterByApprovedStatus().subscribe(function(e){t.BPFCs=e.map(function(t){return{id:t.id,name:"".concat(t.modelName," - ").concat(t.modelNo," - ").concat(t.articleNo," - ").concat(t.artProcess)}})})}},{key:"getAll",value:function(){var t=this;this.planService.search(this.buildingID,this.startDate.toDateString(),this.endDate.toDateString()).subscribe(function(e){t.data=e.map(function(t){return{id:t.id,bpfcName:"".concat(t.modelName," - ").concat(t.modelNoName," - ").concat(t.articleName," - ").concat(t.processName),dueDate:t.dueDate,createdDate:t.createdDate,workingHour:t.workingHour,hourlyOutput:t.hourlyOutput,buildingName:t.buildingName,buildingID:t.buildingID,quantity:t.quantity,bpfcEstablishID:t.bpfcEstablishID,glues:t.glues||[]}})})}},{key:"deleteRange",value:function(t){var e=this;this.alertify.confirm("Delete Plan","Are you sure you want to delete this Plans ?",function(){e.planService.deleteRange(t).subscribe(function(){e.getAll(),e.alertify.success("Plans has been deleted")},function(t){e.alertify.error("Failed to delete the Modal Name")})})}},{key:"openModal",value:function(t){var e=this.grid.getSelectedRecords();0!==e.length?(this.plansSelected=e.map(function(t){return{id:0,bpfcEstablishID:t.bpfcEstablishID,workingHour:t.workingHour,hourlyOutput:t.hourlyOutput,dueDate:t.dueDate,buildingID:t.buildingID}}),this.modalReference=this.modalService.open(t)):this.alertify.warning("Please select the plan")}},{key:"toolbarClick",value:function(t){switch(t.item.text){case"Clone":this.openModal(this.cloneModal);break;case"Delete Range":if(0===this.grid.getSelectedRecords().length)this.alertify.warning("Please select the plans!!");else{var e=this.grid.getSelectedRecords().map(function(t){return t.id});console.log("Delete Range",e),this.deleteRange(e)}break;case"Excel Export":this.getReport({startDate:this.startDate,endDate:this.endDate})}}},{key:"onClickClone",value:function(){var t=this;this.plansSelected.map(function(e){e.dueDate=t.date}),this.planService.clonePlan(this.plansSelected).subscribe(function(e){e?(t.alertify.success("Successfully!"),t.startDate=t.date,t.endDate=t.date,t.getAll(),t.modalService.dismissAll()):(t.alertify.warning("the plans have already existed!"),t.modalService.dismissAll())})}},{key:"search",value:function(){var t=this;this.planService.search(this.buildingID,this.startDate.toDateString(),this.endDate.toDateString()).subscribe(function(e){t.data=e.map(function(t){return{id:t.id,bpfcName:"".concat(t.modelName," - ").concat(t.modelNoName," - ").concat(t.articleName," - ").concat(t.processName),dueDate:t.dueDate,createdDate:t.createdDate,workingHour:t.workingHour,hourlyOutput:t.hourlyOutput,buildingName:t.buildingName,buildingID:t.buildingID,bpfcEstablishID:t.bpfcEstablishID,quantity:t.quantity,glues:t.glues||[]}})})}},{key:"onClickDefault",value:function(){this.startDate=new Date,this.endDate=new Date,this.getAll()}},{key:"startDateOnchange",value:function(t){this.startDate=t.value,this.search()}},{key:"endDateOnchange",value:function(t){this.endDate=t.value,this.search()}},{key:"tooltip",value:function(t){return t?t.join("<br>"):""}},{key:"editQuantity",value:function(t,e){this.planService.editQuantity(t,e)}},{key:"onClickFilter",value:function(){this.search()}}]),t}()).\u0275fac=function(t){return new(t||Le)(E.Mb(F.a),E.Mb(h.b),E.Mb(kt.a),E.Mb(wt.a),E.Mb(xt.a),E.Mb(s.d),E.Mb(_.a),E.Mb(Ct.a),E.Mb(l.c))},Le.\u0275cmp=E.Gb({type:Le,selectors:[["app-plan-output-quantity"]],viewQuery:function(t,e){var i;1&t&&(E.Qc(xe,!0),E.Qc(Ce,!0),E.Qc(we,!0)),2&t&&(E.xc(i=E.dc())&&(e.cloneModal=i.first),E.xc(i=E.dc())&&(e.orderForm=i.first),E.xc(i=E.dc())&&(e.grid=i.first))},decls:55,vars:23,consts:[["type","square-jelly-box","size","medium",3,"fullScreen"],[1,"loading"],[1,"row","pt-2"],[1,"col-md-12"],[1,"card"],[1,"card-body","table-responsive","p-0"],[1,"row","my-3"],[1,"col-md-12","col-md-12","d-flex","justify-content-start","align-items-center"],[1,"font-weight-bold","px-3"],[1,"pr-3",3,"value","change"],[1,"font-weight-bold","pr-3"],["placeholder","Select a building",1,"pr-3",3,"dataSource","fields","allowFiltering","ngModel","ngModelChange","filtering","change","select"],[1,"btn","btn-sm","btn-default",3,"click"],[1,"fa","fa-times"],["showColumnMenu","true","allowPaging","true","allowSorting","true","allowResizing","true","gridLines","Both",3,"dataSource","searchSettings","allowExcelExport","sortSettings","toolbar","pageSettings","editSettings","actionBegin","created","actionComplete","recordDoubleClick","rowSelected","toolbarClick"],["grid",""],["field","buildingName","headerText","Line","width","100","textAlign","Center"],["headerTemplate",""],["editTemplate",""],["field","bpfcName","headerText","BPFC Name","width","290","textAlign","Center"],["template",""],["field","quantity","headerText","Quantity","width","170","textAlign","Center"],["field","dueDate","type","date","format","dd MMM, yyyy","headerText","Due Date","width","160","textAlign","Center"],["field","createdDate","isPrimaryKey","true","type","date","format","dd MMM, yyyy HH:mm","headerText","Created Date","width","200","textAlign","Center"],["cloneModal",""],[3,"content"],[1,"modal-header"],[1,"modal-title"],[1,"fas","fa-plus"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row"],[1,"form-group"],["for","Name"],[2,"color","red"],["format","dd MMM, yyyy",3,"value","change"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["type","submit",1,"btn","btn-primary",3,"click"]],template:function(t,e){1&t&&(E.Sb(0,"ngx-spinner",0),E.Sb(1,"p",1),E.Kc(2,"Loading data..."),E.Rb(),E.Rb(),E.Sb(3,"div",2),E.Sb(4,"div",3),E.Sb(5,"div",4),E.Sb(6,"div",5),E.Sb(7,"div",6),E.Sb(8,"div",7),E.Sb(9,"div",8),E.Kc(10),E.hc(11,"translate"),E.Rb(),E.Sb(12,"ejs-datepicker",9),E.cc("change",function(t){return e.startDateOnchange(t)}),E.Rb(),E.Sb(13,"div",10),E.Kc(14),E.hc(15,"translate"),E.Rb(),E.Sb(16,"ejs-datepicker",9),E.cc("change",function(t){return e.endDateOnchange(t)}),E.Rb(),E.Sb(17,"div",10),E.Kc(18),E.hc(19,"translate"),E.Rb(),E.Sb(20,"ejs-dropdownlist",11),E.cc("ngModelChange",function(t){return e.buildingID=t})("filtering",function(t){return e.onFilteringBuilding(t)})("change",function(t){return e.onChangeBuilding(t)})("select",function(t){return e.onSelectBuilding(t)}),E.Rb(),E.Sb(21,"button",12),E.cc("click",function(){return e.onClickDefault()}),E.Nb(22,"i",13),E.Rb(),E.Rb(),E.Rb(),E.Sb(23,"ejs-grid",14,15),E.cc("actionBegin",function(t){return e.actionBegin(t)})("created",function(){return e.created()})("actionComplete",function(t){return e.actionComplete(t)})("recordDoubleClick",function(t){return e.onDoubleClick(t)})("rowSelected",function(t){return e.rowSelected(t)})("toolbarClick",function(t){return e.toolbarClick(t)}),E.Sb(25,"e-columns"),E.Sb(26,"e-column",16),E.Ic(27,Ie,2,3,"ng-template",null,17,E.Jc),E.Ic(29,Te,1,1,"ng-template",null,18,E.Jc),E.Rb(),E.Sb(31,"e-column",19),E.Ic(32,Re,2,3,"ng-template",null,17,E.Jc),E.Ic(34,Me,1,1,"ng-template",null,18,E.Jc),E.Ic(36,Be,2,2,"ng-template",null,20,E.Jc),E.Rb(),E.Sb(38,"e-column",21),E.Ic(39,Pe,2,3,"ng-template",null,17,E.Jc),E.Rb(),E.Sb(41,"e-column",22),E.Ic(42,Oe,2,3,"ng-template",null,17,E.Jc),E.Ic(44,Ae,2,4,"ng-template",null,18,E.Jc),E.Rb(),E.Sb(46,"e-column",23),E.Ic(47,Ne,2,3,"ng-template",null,17,E.Jc),E.Ic(49,Ee,2,4,"ng-template",null,18,E.Jc),E.Ic(51,Fe,2,4,"ng-template",null,20,E.Jc),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Ic(53,_e,21,1,"ng-template",null,24,E.Jc)),2&t&&(E.mc("fullScreen",!1),E.zb(10),E.Mc("",E.ic(11,17,"Start Time"),":"),E.zb(2),E.mc("value",e.startDate),E.zb(2),E.Mc("",E.ic(15,19,"End Time"),":"),E.zb(2),E.mc("value",e.endDate),E.zb(2),E.Mc("",E.ic(19,21,"Building"),":"),E.zb(2),E.mc("dataSource",e.buildings)("fields",e.fieldsBuildings)("allowFiltering",!0)("ngModel",e.buildingID),E.zb(3),E.mc("dataSource",e.data)("searchSettings",e.searchSettings)("allowExcelExport",!0)("sortSettings",e.sortSettings)("toolbar",e.toolbarOptions)("pageSettings",e.pageSettings)("editSettings",e.editSettings))},directives:[l.a,p.a,d.c,r.g,r.j,x.j,b.d,I.d,I.b,x.e,x.b,b.c,I.c,I.a,x.d,x.a,k.b],pipes:[S.c,s.d],styles:[""]}),Le),je=o("YW37"),ze=o("pwR+");function He(t,e){if(1&t&&(E.Sb(0,"span"),E.Sb(1,"span",27),E.Sb(2,"span",28),E.Kc(3),E.Rb(),E.Kc(4),E.Rb(),E.Rb()),2&t){var i=e.$implicit;E.zb(3),E.Mc("",null==i?null:i.name,":"),E.zb(1),E.Mc(" ",null==i?null:i.amountTotal,"G")}}function Ue(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"Line")," ")}function Ge(t,e){if(1&t){var i=E.Tb();E.Sb(0,"ejs-dropdownlist",29),E.cc("change",function(t){return E.Bc(i),E.gc().onChangeLine(t)}),E.Rb()}if(2&t){var n=E.gc();E.mc("dataSource",n.lineNames)("value",n.lineItem)}}function Je(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"Remaining Amount")," ")}function Qe(t,e){if(1&t&&E.Kc(0),2&t){var i=e.$implicit;E.Mc(" ",null===i.remainingAmount?"N/A":i.remainingAmount," ")}}function $e(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"Dispatch Amount")," ")}function Ve(t,e){1&t&&E.Kc(0),2&t&&E.Mc(" ",e.$implicit.amount," ")}function qe(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"Time")," ")}function We(t,e){1&t&&(E.Kc(0),E.hc(1,"date")),2&t&&E.Mc(" ",E.jc(1,1,e.$implicit.createdTime,"HH:mm")," ")}function Ye(t,e){1&t&&(E.Kc(0),E.hc(1,"date")),2&t&&E.Mc(" ",E.jc(1,1,e.$implicit.createdTime,"HH:mm")," ")}var Xe,Ze=((Xe=function(){function t(e,n,a,o){i(this,t),this.activeModal=e,this.alertify=n,this.datePipe=a,this.bottomFactoryService=o,this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"},this.toolbarOptions=["Add","Edit","Cancel","Search"],this.option="Default",this.lines=[]}return a(t,[{key:"ngOnInit",value:function(){this.lineNames=this.data.lineNames,this.objForGet={buildingID:this.data.buildingID,glueNameID:this.data.glueNameID,mixingInfoID:this.data.mixingInfoID},this.getAllDispatch()}},{key:"toolbarClick",value:function(t){this.isEditing=!1,this.lineItem=""}},{key:"recordDoubleClick",value:function(t){this.isEditing=!0}},{key:"actionBegin",value:function(t){var e=this;if("beginEdit"===t.requestType&&(this.lineItem=t.rowData.building.name),"save"===t.requestType&&"edit"===t.action){var i=t.data;if(i.amount-i.remainingAmount<0)return this.alertify.warning("Vui l\xf2ng nh\u1eadp KL c\xf2n l\u1ea1i nh\u1ecf h\u01a1n ho\u1eb7c b\u1eb1ng kh\u1ed1i l\u01b0\u1ee3ng!"),void(t.cancel=!0);if(i.amount-i.remainingAmount==0)return this.alertify.warning("Vui l\xf2ng nh\u1eadp s\u1ed1 l\u01b0\u1ee3ng c\xf2n l\u1ea1i b\u1eb1ng 0.!"),void(t.cancel=!0);this.bottomFactoryService.updateDispatch({iD:i.id,remaningAmount:i.remainingAmount}).subscribe(function(){e.alertify.success("Th\xe0nh C\xf4ng!"),e.getAllDispatch()},function(t){e.alertify.warning("L\u1ed7i m\xe1y ch\u1ee7! Vui l\xf2ng li\xean h\u1ec7 Lab-Team!")})}}},{key:"onChangeLine",value:function(t){console.log("onchangeline",t.itemData.value),this.obj={mixingInfoID:this.data.mixingInfoID,lineName:t.itemData.value,glueNameID:this.data.glueNameID,option:this.option,buildingID:this.data.buildingID,estimatedStartTime:this.data.estimatedStartTime,estimatedFinishTime:this.data.estimatedFinishTime},this.addDispatch(),console.log("onchangeline",this.obj)}},{key:"onChangeReset",value:function(t){console.log("onChangeReset",this.option)}},{key:"onChangeDefault",value:function(t){console.log("onChangeDefault",this.option)}},{key:"getAllDispatch",value:function(){var t=this;this.bottomFactoryService.getAllDispatch(this.objForGet).subscribe(function(e){t.dispatchData=e.dispatches,t.lines=e.lines},function(t){})}},{key:"addDispatch",value:function(){var t=this;this.bottomFactoryService.addDispatch(this.obj).subscribe(function(e){t.option="Default",t.lineItem="",t.getAllDispatch()},function(e){t.alertify.warning(e),t.getAllDispatch()})}}]),t}()).\u0275fac=function(t){return new(t||Xe)(E.Mb(h.a),E.Mb(F.a),E.Mb(s.d),E.Mb(ze.a))},Xe.\u0275cmp=E.Gb({type:Xe,selectors:[["app-dispatchEVAUV"]],inputs:{data:"data"},features:[E.yb([s.d])],decls:53,vars:13,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","p-2"],[1,"row","pt-2"],[1,"col-md-12"],[1,"my-2"],[1,"d-flex","justify-content-start","align-items-center",2,"height","50px","box-shadow","0 4px 10px 0 rgb(0 0 0 / 20%), 0 4px 20px 0 rgb(0 0 0 / 19%)"],[1,"pretty","p-default","p-smooth","p-bigger","ml-2"],["type","radio","value","Default","name","radio",3,"ngModel","ngModelChange","change"],[1,"state","p-success"],[1,"pretty","p-default","p-smooth","p-bigger"],["type","radio","value","Reset","name","radio",3,"ngModel","ngModelChange","change"],[4,"ngFor","ngForOf"],["allowResizing","true","gridLines","Both",3,"dataSource","editSettings","toolbar","actionBegin","recordDoubleClick","toolbarClick"],["grid",""],["field","building.name","headerText","Name","width","100","textAlign","Center"],["headerTemplate",""],["editTemplate",""],["field","remainingAmount","headerText","Remaining Amount","width","200","textAlign","Center"],["template",""],["field","amount","headerText","Dispatch Amount","width","200","textAlign","Center"],["field","createdTime","headerText","Time","width","100","textAlign","Center"],[1,"modal-footer","justify-content-center","d-flex"],["type","button",1,"btn","btn-warning",3,"click"],[1,"fa","fa-save"],[1,"mx-2"],[1,"font-weight-bold"],["id","reportOption",3,"dataSource","value","change"]],template:function(t,e){1&t&&(E.Sb(0,"div",0),E.Sb(1,"h4",1),E.Kc(2),E.hc(3,"translate"),E.Rb(),E.Sb(4,"button",2),E.cc("click",function(){return e.activeModal.dismiss("Cross click")}),E.Sb(5,"span",3),E.Kc(6,"\xd7"),E.Rb(),E.Rb(),E.Rb(),E.Sb(7,"div",4),E.Sb(8,"div",5),E.Sb(9,"div",6),E.Sb(10,"div",7),E.Sb(11,"div",8),E.Sb(12,"div",9),E.Sb(13,"input",10),E.cc("ngModelChange",function(t){return e.option=t})("change",function(t){return e.onChangeDefault(t)}),E.Rb(),E.Sb(14,"div",11),E.Sb(15,"label"),E.Kc(16,"Default"),E.Rb(),E.Rb(),E.Rb(),E.Sb(17,"div",12),E.Sb(18,"input",13),E.cc("ngModelChange",function(t){return e.option=t})("change",function(t){return e.onChangeReset(t)}),E.Rb(),E.Sb(19,"div",11),E.Sb(20,"label"),E.Kc(21,"Reset"),E.Rb(),E.Rb(),E.Rb(),E.Ic(22,He,5,2,"span",14),E.Rb(),E.Rb(),E.Sb(23,"ejs-grid",15,16),E.cc("actionBegin",function(t){return e.actionBegin(t)})("recordDoubleClick",function(t){return e.recordDoubleClick(t)})("toolbarClick",function(t){return e.toolbarClick(t)}),E.Sb(25,"e-columns"),E.Sb(26,"e-column",17),E.Ic(27,Ue,2,3,"ng-template",null,18,E.Jc),E.Ic(29,Ge,1,2,"ng-template",null,19,E.Jc),E.Rb(),E.Sb(31,"e-column",20),E.Ic(32,Je,2,3,"ng-template",null,18,E.Jc),E.Ic(34,Qe,1,1,"ng-template",null,21,E.Jc),E.Rb(),E.Sb(36,"e-column",22),E.Ic(37,$e,2,3,"ng-template",null,18,E.Jc),E.Ic(39,Ve,1,1,"ng-template",null,19,E.Jc),E.Rb(),E.Sb(41,"e-column",23),E.Ic(42,qe,2,3,"ng-template",null,18,E.Jc),E.Ic(44,We,2,4,"ng-template",null,21,E.Jc),E.Ic(46,Ye,2,4,"ng-template",null,19,E.Jc),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Sb(48,"div",24),E.Sb(49,"button",25),E.cc("click",function(){return e.activeModal.close("Close click")}),E.Nb(50,"i",26),E.Kc(51),E.hc(52,"translate"),E.Rb(),E.Rb()),2&t&&(E.zb(2),E.Nc("",E.ic(3,9,"Dispatch")," ",e.data.glueName," "),E.zb(11),E.mc("ngModel",e.option),E.zb(5),E.mc("ngModel",e.option),E.zb(4),E.mc("ngForOf",e.lines),E.zb(1),E.mc("dataSource",e.dispatchData)("editSettings",e.editSettings)("toolbar",e.toolbarOptions),E.zb(28),E.Mc(" ",E.ic(52,11,"SAVE"),""))},directives:[r.l,r.b,r.g,r.j,s.m,x.j,b.d,I.d,I.b,x.e,x.b,b.c,I.c,I.a,x.d,x.a,d.c],pipes:[S.c,s.d],styles:[""]}),Xe),ti=o("kK9S"),ei=o("6HpG"),ii=function(t){return t[t.EVA_UV=1]="EVA_UV",t[t.ATTACHING=2]="ATTACHING",t[t.RUBBER=3]="RUBBER",t}({}),ni=o("1AaR"),ai=o("0go6"),oi=o("KOup");function ci(t,e){if(1&t){var i=E.Tb();E.Sb(0,"input",14),E.cc("ngModelChange",function(t){return E.Bc(i),E.gc(2).qrCode=t})("ngModelChange",function(t){return E.Bc(i),E.gc(2).onNgModelChangeScanQRCode(t)}),E.Rb()}if(2&t){var n=E.gc(2);E.mc("ngModel",n.qrCode)}}function si(t,e){if(1&t&&(E.Sb(0,"div",10),E.Nb(1,"div",11),E.Sb(2,"div",12),E.Ic(3,ci,1,1,"input",13),E.Rb(),E.Nb(4,"div",11),E.Rb()),2&t){var i=E.gc();E.zb(3),E.mc("ngIf",i.isShow)}}function ri(t,e){if(1&t&&(E.Sb(0,"div",18),E.Sb(1,"div",19),E.Nb(2,"qrcode",20),E.Rb(),E.Sb(3,"div"),E.Sb(4,"label"),E.Kc(5,"Name:"),E.Rb(),E.Kc(6),E.Rb(),E.Sb(7,"div"),E.Sb(8,"label"),E.Kc(9,"QrCode:"),E.Rb(),E.Kc(10),E.Rb(),E.Sb(11,"div"),E.Sb(12,"label"),E.Kc(13,"Batch:"),E.Rb(),E.Kc(14),E.Rb(),E.Sb(15,"div"),E.Sb(16,"label"),E.Kc(17,"MFG:"),E.Rb(),E.Kc(18),E.hc(19,"date"),E.Rb(),E.Sb(20,"div"),E.Sb(21,"label"),E.Kc(22,"EXP:"),E.Rb(),E.Kc(23),E.hc(24,"date"),E.Rb(),E.Rb()),2&t){var i=E.gc(2);E.zb(2),E.mc("qrdata",null==i.data?null:i.data.code)("allowEmptyString",!0)("margin",1)("elementType","svg")("width",100)("errorCorrectionLevel","H"),E.zb(4),E.Mc(" ",null==i.data?null:i.data.glueName,""),E.zb(4),E.Mc(" ",null==i.data?null:i.data.code,""),E.zb(4),E.Mc(" ",null==i.chemicalA?null:i.chemicalA.batch,""),E.zb(4),E.Mc(" ",E.jc(19,11,null==i.data?null:i.data.createdTime,"yyyyMMdd HH:mm"),""),E.zb(5),E.Mc(" ",E.jc(24,14,null==i.data?null:i.data.expiredTime,"yyyyMMdd HH:mm"),"")}}function li(t,e){if(1&t&&(E.Sb(0,"div",15),E.Nb(1,"div",16),E.Ic(2,ri,25,17,"div",17),E.Nb(3,"div",16),E.Rb()),2&t){var i=E.gc();E.zb(2),E.mc("ngIf",!i.isShow)}}function ui(t,e){if(1&t&&(E.Sb(0,"div",15),E.Nb(1,"div",16),E.Sb(2,"div",18),E.Sb(3,"div",19),E.Nb(4,"qrcode",20),E.Rb(),E.Sb(5,"div"),E.Sb(6,"label"),E.Kc(7,"Name:"),E.Rb(),E.Kc(8),E.Rb(),E.Sb(9,"div"),E.Sb(10,"label"),E.Kc(11,"QrCode:"),E.Rb(),E.Kc(12),E.Rb(),E.Sb(13,"div"),E.Sb(14,"label"),E.Kc(15,"Batch:"),E.Rb(),E.Kc(16),E.Rb(),E.Sb(17,"div"),E.Sb(18,"label"),E.Kc(19,"MFG:"),E.Rb(),E.Kc(20),E.hc(21,"date"),E.Rb(),E.Sb(22,"div"),E.Sb(23,"label"),E.Kc(24,"EXP:"),E.Rb(),E.Kc(25),E.hc(26,"date"),E.Rb(),E.Rb(),E.Nb(27,"div",16),E.Rb()),2&t){var i=E.gc();E.zb(4),E.mc("qrdata",null==i.data?null:i.data.code)("allowEmptyString",!0)("margin",1)("elementType","svg")("width",100)("errorCorrectionLevel","H"),E.zb(4),E.Mc(" ",null==i.data?null:i.data.glueName,""),E.zb(4),E.Mc(" ",null==i.data?null:i.data.code,""),E.zb(4),E.Mc(" ",null==i.chemicalA?null:i.chemicalA.batch,""),E.zb(4),E.Mc(" ",E.jc(21,11,null==i.data?null:i.data.createdTime,"yyyyMMdd HH:mm"),""),E.zb(5),E.Mc(" ",E.jc(26,14,null==i.data?null:i.data.expiredTime,"yyyyMMdd HH:mm"),"")}}var di=function(){function t(e,n,a,o,c,s,r){i(this,t),this.activeModal=e,this.todolistService=n,this.alertify=a,this.datePipe=o,this.ingredientService=c,this.abnormalService=s,this.makeGlueService=r,this.subject=new O.a,this.subscription=[],this.displayTextMethod={visibility:!1}}return a(t,[{key:"ngOnInit",value:function(){var t,e=JSON.parse(localStorage.getItem("building")),i=JSON.parse(localStorage.getItem("level")),n=JSON.parse(localStorage.getItem("user")).User;this.role=i,this.user=n,this.building=e,this.checkQRCode(),this.isShow=0===this.value.mixingInfoID&&!this.value.glueName.includes(" + "),this.isShowQRCode=0===this.value.mixingInfoID&&!this.value.glueName.includes(" + "),this.chemicalA=null===(t=this.data)||void 0===t?void 0:t.mixingInfoDetails.filter(function(t){return"A"===t.position})[0]}},{key:"ngOnDestroy",value:function(){this.subscription.forEach(function(t){return t.unsubscribe()})}},{key:"checkQRCode",value:function(){var t=this;this.subscription.push(this.subject.pipe(Object(A.a)(500)).subscribe(function(e){return Object(P.a)(t,void 0,void 0,regeneratorRuntime.mark(function t(){var i,n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.validateQRCode(e);case 2:!1!==(i=t.sent).status&&this.makeGlueService.add({glueName:this.value.glueName,glueID:this.value.glueID,buildingID:this.building.id,mixBy:this.user.ID,estimatedStartTime:this.value.estimatedStartTime,estimatedFinishTime:this.value.estimatedFinishTime,details:[{amount:this.value.standardConsumption,ingredientID:i.ingredient.id,batch:e[1],mixingInfoID:0,position:"A"}]}).subscribe(function(t){n.alertify.success("Success!"),n.isShow=!1,n.data=t},function(t){return n.alertify.error(t)});case 4:case"end":return t.stop()}},t,this)}))}))}},{key:"validateQRCode",value:function(t){return Object(P.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var i,n,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.QRCode.split("-")||[],n=t.QRCode.match(/(\d+)-(\w+)-/g),a=t.QRCode.replace(n[0],""),(n[0]+a).length===t.QRCode.length){e.next=3;break}return e.abrupt("return",(this.alertify.warning("The QR Code is invalid!<br> M\xe3 QR kh\xf4ng h\u1ee3p l\u1ec7! Vui l\xf2ng th\u1eed l\u1ea1i m\xe3 kh\xe1c.",!0),{status:!1,ingredient:null}));case 3:return this.qrCode=a,e.next=6,this.scanQRCode();case 6:if((o=e.sent).name===this.value.glueName){e.next=11;break}e.t0=(this.alertify.warning('Please you should look for the chemical name "'.concat(this.value.glueName,'"<br> Vui l\xf2ng qu\xe9t \u0111\xfang h\xf3a ch\u1ea5t "').concat(this.value.glueName,'"!'),!0),this.qrCode="",{status:!1,ingredient:null}),e.next=21;break;case 11:return e.t1=!0,e.next=14,this.hasLock(o.name,i[1]);case 14:if(e.t2=e.sent,e.t1!==e.t2){e.next=19;break}e.t3=(this.alertify.error("This chemical has been locked! <br> H\xf3a ch\u1ea5t n\xe0y \u0111\xe3 b\u1ecb kh\xf3a!",!0),this.qrCode="",{status:!1,ingredient:null}),e.next=20;break;case 19:e.t3={status:!0,ingredient:o};case 20:e.t0=e.t3;case 21:return e.abrupt("return",e.t0);case 22:case"end":return e.stop()}},e,this)}))}},{key:"scanQRCode",value:function(){return this.ingredientService.scanQRCode(this.qrCode).toPromise()}},{key:"hasLock",value:function(t,e){var i=this,n=this.building.name;return 1!==this.role.id&&2!==this.role.id||(n="E"),new Promise(function(a,o){i.abnormalService.hasLock(t,n,e).subscribe(function(t){a(t)},function(t){o(!1)})})}},{key:"onNgModelChangeScanQRCode",value:function(t){return Object(P.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.subject.next({QRCode:t,ingredient:null});case 1:case"end":return e.stop()}},e,this)}))}},{key:"printData",value:function(){var t="",e=document.getElementById("qrcode"),i="0001-01-01T00:00:00"===this.data.expiredTime?"N/A":this.datePipe.transform(new Date(this.data.expiredTime),"MMdd HH:mm");t+="\n       <div class='content'>\n        <div class='qrcode'>\n         ".concat(e.innerHTML,"\n         </div>\n          <div class='info'>\n          <ul>\n              <li class='subInfoTo'>").concat(this.data.glueName,"</li>\n              <li class='subInfoNho' >MFG: ").concat(this.datePipe.transform(new Date(this.data.createdTime),"MMdd HH:mm"),"</li>\n              <li class='subInfoNho' >EXP: ").concat(i,"</li>\n          </ul>\n         </div>\n      </div>\n      "),this.configurePrint(t)}},{key:"configurePrint",value:function(t){var e=window.open("","_blank","left=0,top=0,width=1000,height=900,toolbar=0,scrollbars=0,status=0");e.document.write('\n    <html>\n      <head>\n      </head>\n      <style>\n        * {\n          box-sizing: border-box;\n          -moz-box-sizing: border-box;\n        }\n\n        .content {\n          page-break-after: always;\n          clear: both;\n        }\n\n        .content .qrcode {\n          float:left;\n          width: 110px;\n          margin-top: 10px;\n          padding: 0;\n          margin-left: 0px;\n        }\n\n        .content .info {\n          float:left;\n          list-style: none;\n          width: 190px;\n        }\n        .content .info ul {\n          float:left;\n          list-style: none;\n          padding: 0px;\n          margin: 0px;\n          margin-top: 20px;\n          font-weight: bold;\n          word-wrap: break-word;\n        }\n        .content .info ul .subInfoTo  {\n          font-size: 22px;\n          font-weight: bold;\n          width: 180px;\n          word-wrap: break-word;\n        }\n        .content .info ul .subInfoNho  {\n          font-size: 15px;\n          width: 180px;\n          word-wrap: break-word;\n        }\n\n        @page {\n          size: 2.65 x 1.20 inch;\n          page-break-after: always;\n          margin: 0;\n        }\n        @media print {\n          html, body {\n            width: 90mm;\n          }\n        }\n      </style>\n      <body onload="window.print(); window.close()">\n        '.concat(t,"\n      </body>\n    </html>\n    ")),e.document.close(),this.finish()}},{key:"finish",value:function(){var t=this;this.todolistService.printGlue(this.data.id).subscribe(function(e){t.alertify.success("success",!0),t.activeModal.close(),t.todolistService.setValue(!1)})}}]),t}();di.\u0275fac=function(t){return new(t||di)(E.Mb(h.a),E.Mb(Dt.a),E.Mb(F.a),E.Mb(s.d),E.Mb(L.a),E.Mb(ni.a),E.Mb(ai.a))},di.\u0275cmp=E.Gb({type:di,selectors:[["app-print-glue"]],inputs:{data:"data",value:"value"},decls:16,vars:4,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","p-0"],["class","row py-2",4,"ngIf"],["class","row",4,"ngIf"],[1,"modal-footer","justify-content-between"],["type","button",1,"btn","btn-outline-dark",3,"click"],[1,"fa","fa-print"],[1,"row","py-2"],[1,"col-md-2"],[1,"col-md-8"],["class","form-control form-control-lg rounded-pill","autoselect","","placeholder","Scan QR Code","type","text",3,"ngModel","ngModelChange",4,"ngIf"],["autoselect","","placeholder","Scan QR Code","type","text",1,"form-control","form-control-lg","rounded-pill",3,"ngModel","ngModelChange"],[1,"row"],[1,"col-md-4"],["class","col-md-4 text-left",4,"ngIf"],[1,"col-md-4","text-left"],[1,"center"],["id","qrcode",3,"qrdata","allowEmptyString","margin","elementType","width","errorCorrectionLevel"]],template:function(t,e){1&t&&(E.Sb(0,"div",0),E.Sb(1,"h4",1),E.Kc(2),E.Rb(),E.Sb(3,"button",2),E.cc("click",function(){return e.activeModal.dismiss("Cross click")}),E.Sb(4,"span",3),E.Kc(5,"\xd7"),E.Rb(),E.Rb(),E.Rb(),E.Sb(6,"div",4),E.Ic(7,si,5,1,"div",5),E.Ic(8,li,4,1,"div",6),E.Ic(9,ui,28,17,"div",6),E.Rb(),E.Sb(10,"div",7),E.Sb(11,"button",8),E.cc("click",function(){return e.activeModal.close("Close click")}),E.Kc(12,"Close"),E.Rb(),E.Sb(13,"button",8),E.cc("click",function(){return e.printData()}),E.Nb(14,"i",9),E.Kc(15," Print"),E.Rb(),E.Rb()),2&t&&(E.zb(2),E.Mc("Print glue name: ",null==e.value?null:e.value.glueName,""),E.zb(5),E.mc("ngIf",e.isShowQRCode),E.zb(1),E.mc("ngIf",e.isShowQRCode),E.zb(1),E.mc("ngIf",!1===e.isShowQRCode))},directives:[s.n,r.b,oi.a,r.g,r.j,M.a],pipes:[s.d],styles:[""]});var hi=function(){function t(e){i(this,t),this.http=e,this.baseUrl=ft.a.apiUrlEC}return a(t,[{key:"getAllSetting",value:function(){return this.http.get(this.baseUrl+"Setting/GetAllSetting",{})}},{key:"getAllGlueType",value:function(){return this.http.get(this.baseUrl+"Setting/GetAllGlueType",{})}},{key:"getSettingByBuilding",value:function(t){return this.http.get(this.baseUrl+"Setting/GetSettingByBuilding/"+t,{})}},{key:"getMachineByBuilding",value:function(t){return this.http.get(this.baseUrl+"Setting/GetMachineByBuilding/"+t,{})}},{key:"deleteSetting",value:function(t){return this.http.delete(this.baseUrl+"Setting/DeleteSetting/"+t,{})}},{key:"deleteMachine",value:function(t){return this.http.delete(this.baseUrl+"Setting/DeleteMachine/"+t,{})}},{key:"AddStir",value:function(t){return this.http.post(this.baseUrl+"Setting/Create",t)}},{key:"addSetting",value:function(t){return this.http.post(this.baseUrl+"Setting/CreateSetting",t)}},{key:"addMachine",value:function(t){return this.http.post(this.baseUrl+"Setting/CreateMachine",t)}},{key:"updateStir",value:function(t){return this.http.put(this.baseUrl+"Setting/Update",t)}},{key:"updateSetting",value:function(t){return this.http.put(this.baseUrl+"Setting/UpdateSetting",t)}},{key:"updateMachine",value:function(t){return this.http.put(this.baseUrl+"Setting/UpdateMachine",t)}}]),t}();hi.\u0275fac=function(t){return new(t||hi)(E.Zb(v.b))},hi.\u0275prov=E.Ib({token:hi,factory:hi.\u0275fac,providedIn:"root"});var gi=function(){function t(e){i(this,t),this.http=e,this.baseUrl=ft.a.apiUrlEC,this.ModalDispatchSource=new bt.a(0),this.currentModalDispatch=this.ModalDispatchSource.asObservable()}return a(t,[{key:"add",value:function(t){return this.http.post(this.baseUrl+"Dispatch/Add",t)}},{key:"update",value:function(t){return this.http.post(this.baseUrl+"Dispatch/Update",t)}},{key:"updateAmount",value:function(t,e){return this.http.put(this.baseUrl+"Dispatch/updateAmount/".concat(t,"/").concat(e),{})}},{key:"addDispatch",value:function(t){return this.http.post(this.baseUrl+"Dispatch/Dispatch",t)}},{key:"updateStartDispatchingTime",value:function(t){return this.http.put(this.baseUrl+"Dispatch/UpdateStartDispatchingTime/"+t,{})}}]),t}();gi.\u0275fac=function(t){return new(t||gi)(E.Zb(v.b))},gi.\u0275prov=E.Ib({token:gi,factory:gi.\u0275fac,providedIn:"root"});var bi=function(){function t(e){i(this,t),this.http=e,this.baseUrl=ft.a.apiUrlEC,this.ModalPlanSource=new bt.a(0),this.currentModalPlan=this.ModalPlanSource.asObservable()}return a(t,[{key:"TroubleShootingSearch",value:function(t,e){return this.http.get(this.baseUrl+"Plan/TroubleShootingSearch/".concat(t,"/").concat(e))}},{key:"GetBatchByIngredientID",value:function(t){return this.http.get(this.baseUrl+"Plan/GetBatchByIngredientID/"+t,{})}},{key:"getBPFCByGlue",value:function(t){return this.http.post(this.baseUrl+"Plan/GetBPFCByGlue/",{glue:t})}},{key:"getAll",value:function(){return this.http.get(this.baseUrl+"Plan/GetAll",{})}},{key:"search",value:function(t,e,i){return this.http.get("".concat(this.baseUrl,"Plan/Search/").concat(t,"/").concat(e,"/").concat(i),{})}},{key:"getAllPlanByDefaultRange",value:function(){return this.http.get(this.baseUrl+"Plan/GetAllPlanByDefaultRange",{})}},{key:"getAllModalName",value:function(){return this.http.get(this.baseUrl+"ModelName/GetAll",{})}},{key:"getAllLine",value:function(){return this.http.get(this.baseUrl+"Line/GetAll",{})}},{key:"getAllGlue",value:function(){return this.http.get(this.baseUrl+"Glue/GetAll",{})}},{key:"create",value:function(t){return this.http.post(this.baseUrl+"Plan/Create",t)}},{key:"update",value:function(t){return this.http.put(this.baseUrl+"Plan/Update",t)}},{key:"delete",value:function(t){return this.http.delete(this.baseUrl+"Plan/Delete/"+t)}},{key:"achievementRate",value:function(t){return this.http.get(this.baseUrl+"Plan/AchievementRate/"+t)}},{key:"deleteRange",value:function(t){return this.http.post(this.baseUrl+"Plan/DeleteRange",t)}},{key:"getLines",value:function(t){return this.http.get(this.baseUrl+"Plan/getLines/"+t,{})}},{key:"getModelNames",value:function(){return this.http.get(this.baseUrl+"Plan/GetModelNames",{})}},{key:"getGlueByBuilding",value:function(t){return this.http.get(this.baseUrl+"Plan/GetGlueByBuilding/"+t)}},{key:"getGlueByBuildingModelName",value:function(t,e){return this.http.get("".concat(this.baseUrl,"Plan/getGlueByBuildingModelName/").concat(t,"/").concat(e))}},{key:"summary",value:function(t){return this.http.get(this.baseUrl+"Plan/summary/"+t)}},{key:"consumptionByLineCase1",value:function(t,e,i){return this.http.post(this.baseUrl+"Plan/ConsumptionByLineCase1",{buildingID:t,startDate:e,endDate:i})}},{key:"consumptionByLineCase2",value:function(t,e,i){return this.http.post(this.baseUrl+"Plan/ConsumptionByLineCase2",{buildingID:t,startDate:e,endDate:i})}},{key:"reportConsumptionCase1",value:function(t,e,i){return this.http.post(this.baseUrl+"Plan/ReportConsumptionCase1",{buildingID:t,startDate:e,endDate:i},{responseType:"blob"})}},{key:"reportConsumptionCase2",value:function(t,e,i){return this.http.post(this.baseUrl+"Plan/ReportConsumptionCase2",{buildingID:t,startDate:e,endDate:i},{responseType:"blob"})}},{key:"dispatchGlue",value:function(t){return this.http.post(this.baseUrl+"Plan/DispatchGlue",t)}},{key:"clonePlan",value:function(t){return this.http.post(this.baseUrl+"Plan/ClonePlan",t)}},{key:"editDelivered",value:function(t,e){return this.http.get("".concat(this.baseUrl,"Plan/EditDelivered/").concat(t,"/").concat(e),{})}},{key:"editQuantity",value:function(t,e){return this.http.get("".concat(this.baseUrl,"Plan/EditQuantity/").concat(t,"/").concat(e),{})}},{key:"deleteDelivered",value:function(t){return this.http.delete("".concat(this.baseUrl,"Plan/DeleteDelivered/").concat(t),{})}},{key:"getReport",value:function(t){return this.http.post(this.baseUrl+"Plan/GetReport",t,{responseType:"blob"})}},{key:"getReportByBuilding",value:function(t){return this.http.post(this.baseUrl+"Plan/GetReportByBuilding",t,{responseType:"blob"})}},{key:"getNewReportByBuilding",value:function(t){return this.http.post(this.baseUrl+"Plan/getNewReportByBuilding",t,{responseType:"blob"})}},{key:"report",value:function(t){return this.http.get(t,{responseType:"arraybuffer"})}},{key:"print",value:function(t){return this.http.post(this.baseUrl+"Plan/Print",t)}},{key:"finish",value:function(t){return this.http.put(this.baseUrl+"Plan/Finish/"+t,{})}},{key:"getStartTimeFromPeriod",value:function(t){return this.http.get(this.baseUrl+"Plan/GetStartTimeFromPeriod/"+t)}},{key:"changeBPFC",value:function(t,e){return this.http.get("".concat(this.baseUrl,"Plan/ChangeBPFC/").concat(t,"/").concat(e))}},{key:"online",value:function(t){return this.http.get("".concat(this.baseUrl,"Plan/Online/").concat(t))}},{key:"offline",value:function(t){return this.http.get("".concat(this.baseUrl,"Plan/Offline/").concat(t))}},{key:"exportExcel",value:function(t){return this.http.post(this.baseUrl+"Plan/ExportExcel",t,{responseType:"blob"})}}]),t}();bi.\u0275fac=function(t){return new(t||bi)(E.Zb(v.b))},bi.\u0275prov=E.Ib({token:bi,factory:bi.\u0275fac,providedIn:"root"}),new v.e({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")});var fi=function(){function t(e){i(this,t),this.http=e,this.baseUrl=ft.a.apiUrlEC,this.data=new bt.a(null)}return a(t,[{key:"addition",value:function(t,e,i,n){return this.http.get("".concat(this.baseUrl,"ToDoList/addition/").concat(t,"/").concat(e,"/").concat(i,"/").concat(n))}},{key:"additionDispatch",value:function(t){return this.http.get("".concat(this.baseUrl,"ToDoList/additionDispatch/").concat(t))}},{key:"setValue",value:function(t){this.data.next(t)}},{key:"getValue",value:function(){return this.data.asObservable()}},{key:"cancel",value:function(t){return this.http.post(this.baseUrl+"ToDoList/Cancel",t)}},{key:"cancelRange",value:function(t){return this.http.post(this.baseUrl+"ToDoList/cancelRange",t)}},{key:"done",value:function(t){return this.http.get(this.baseUrl+"ToDoList/Done/"+t,{})}},{key:"todo",value:function(t){return this.http.get(this.baseUrl+"ToDoList/ToDo/"+t,{})}},{key:"todoAddition",value:function(t){return this.http.get(this.baseUrl+"ToDoList/ToDoAddition/"+t,{})}},{key:"dispatchAddition",value:function(t){return this.http.get(this.baseUrl+"ToDoList/dispatchAddition/"+t,{})}},{key:"dispatchList",value:function(t){return this.http.get(this.baseUrl+"ToDoList/DispatchList/"+t,{})}},{key:"delay",value:function(t){return this.http.get(this.baseUrl+"ToDoList/Delay/"+t,{})}},{key:"printGlue",value:function(t){return this.http.get(this.baseUrl+"ToDoList/printGlue/"+t,{})}},{key:"findPrintGlue",value:function(t){return this.http.get(this.baseUrl+"ToDoList/FindPrintGlue/"+t,{})}},{key:"dispatch",value:function(t){return this.http.post(this.baseUrl+"ToDoList/Dispatch",t)}},{key:"updateStartStirTimeByMixingInfoID",value:function(t){return this.http.put(this.baseUrl+"ToDoList/updateStartStirTimeByMixingInfoID/"+t,{})}},{key:"updateFinishStirTimeByMixingInfoID",value:function(t){return this.http.put(this.baseUrl+"ToDoList/updateFinishStirTimeByMixingInfoID/"+t,{})}},{key:"generateToDoList",value:function(t){return this.http.post(this.baseUrl+"ToDoList/GenerateToDoList",t)}},{key:"generateDispatchList",value:function(t){return this.http.post(this.baseUrl+"ToDoList/GenerateDispatchList",t)}},{key:"exportExcel",value:function(t){return this.http.get("".concat(this.baseUrl,"ToDoList/ExportExcel/").concat(t),{responseType:"blob"})}},{key:"exportExcel2",value:function(t){return this.http.get("".concat(this.baseUrl,"ToDoList/GetNewReport/").concat(t),{responseType:"blob"})}},{key:"getMixingDetail",value:function(t){return this.http.post(this.baseUrl+"ToDoList/GetMixingDetail",{glueName:t})}},{key:"finishDispatch",value:function(t){return this.http.put(this.baseUrl+"ToDoList/FinishDispatch",t)}},{key:"getDispatchDetail",value:function(t,e,i,n){return this.http.get("".concat(this.baseUrl,"ToDoList/GetDispatchDetail/").concat(t,"/").concat(e,"/").concat(i,"/").concat(n))}},{key:"getMixingInfoHistory",value:function(t,e,i,n){return this.http.get("".concat(this.baseUrl,"ToDoList/GetMixingInfoHistory/").concat(t,"/").concat(e,"/").concat(i,"/").concat(n))}},{key:"updateDispatchDetail",value:function(t){return this.http.put(this.baseUrl+"ToDoList/UpdateDispatchDetail",t)}},{key:"getDispatchListDetail",value:function(t,e,i){return this.http.get("".concat(this.baseUrl,"ToDoList/GetDispatchListDetail/").concat(t,"/").concat(e,"/").concat(i))}},{key:"printGlueDispatchList",value:function(t,e,i,n){return this.http.get("".concat(this.baseUrl,"ToDoList/printGlueDispatchList/").concat(t,"/").concat(e,"/").concat(i,"/").concat(n),{})}},{key:"updateMixingInfoDispatchList",value:function(t,e,i,n){return this.http.get("".concat(this.baseUrl,"ToDoList/UpdateMixingInfoDispatchList/").concat(t,"/").concat(e,"/").concat(i,"/").concat(n),{})}},{key:"addOvertime",value:function(t){return this.http.post(this.baseUrl+"ToDoList/AddOvertime",t)}},{key:"removeOvertime",value:function(t){return this.http.post(this.baseUrl+"ToDoList/RemoveOvertime",t)}},{key:"dispatchListDelay",value:function(t){return this.http.get(this.baseUrl+"ToDoList/DispatchListDelay/"+t,{})}},{key:"MixedHistory",value:function(t){return this.http.get("".concat(this.baseUrl,"ToDoList/MixedHistory/").concat(t),{})}}]),t}();fi.\u0275fac=function(t){return new(t||fi)(E.Zb(v.b))},fi.\u0275prov=E.Ib({token:fi,factory:fi.\u0275fac,providedIn:"root"});var pi=function(){function t(){i(this,t),this.$swal=Swal,this.Toast=Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,onOpen:function(t){t.addEventListener("mouseenter",Swal.stopTimer),t.addEventListener("mouseleave",Swal.resumeTimer)}})}return a(t,[{key:"confirm",value:function(t,e,i){Swal.fire({title:t,html:e,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then(function(t){t.value?i():t.dismiss===Swal.DismissReason.cancel&&Swal.fire("Cancelled","Your imaginary file is safe :)","error")})}},{key:"confirm2",value:function(t,e,i,n){Swal.fire({title:t,html:e,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then(function(t){t.value?i():t.dismiss===Swal.DismissReason.cancel&&n()})}},{key:"valid",value:function(t,e){return new Promise(function(i,n){Swal.fire({title:t,text:e,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then(function(t){t.value?i(!0):t.dismiss===Swal.DismissReason.cancel&&n(!1)})})}},{key:"validation",value:function(t,e){Swal.fire(t,e,"warning")}},{key:"success",value:function(t,e){e?Swal.fire("Successfully!",t,"success"):this.Toast.fire({icon:"success",title:t})}},{key:"error",value:function(t,e){e?Swal.fire("Error!",t,"error"):this.Toast.fire({icon:"error",title:t})}},{key:"warning",value:function(t,e){e?Swal.fire("Warning!",t,"warning"):this.Toast.fire({icon:"warning",title:t})}},{key:"message",value:function(t,e){e?Swal.fire("Info!",t,"info"):this.Toast.fire({icon:"info",title:t})}}]),t}();pi.\u0275fac=function(t){return new(t||pi)},pi.\u0275prov=E.Ib({token:pi,factory:pi.\u0275fac,providedIn:"root"});var mi=["dispatchGrid"];function vi(t,e){1&t&&(E.Sb(0,"span"),E.Kc(1),E.hc(2,"translate"),E.Rb()),2&t&&(E.zb(1),E.Lc(E.ic(2,1,"Line")))}function Si(t,e){1&t&&E.Kc(0),2&t&&E.Mc(" ",e.$implicit.lineName," ")}function yi(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"Amount")," (g) ")}function ki(t,e){1&t&&E.Kc(0),2&t&&E.Mc(" ",e.$implicit.amount," ")}function Di(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"Time")," ")}function xi(t,e){if(1&t&&(E.Kc(0),E.hc(1,"date")),2&t){var i=e.$implicit;E.Mc(" ",null===i.deliveryTime?"-":E.jc(1,1,i.deliveryTime,"HH:mm")," ")}}function Ci(t,e){if(1&t&&(E.Kc(0),E.hc(1,"date")),2&t){var i=e.$implicit;E.Mc(" ",null===i.deliveryTime?"-":E.jc(1,1,i.deliveryTime,"HH:mm")," ")}}var wi=function(){function t(e,n,a,o,c,s){i(this,t),this.activeModal=e,this.settingService=n,this.dispatchService=a,this.planService=o,this.todolistService=c,this.alertify=s,this.fieldsLine={text:"line",value:"line"},this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!1,allowAdding:!1,allowDeleting:!1,mode:"Normal"},this.sortSettings={columns:[{field:"lineName",direction:"Ascending"}]}}return a(t,[{key:"ngOnInit",value:function(){this.isSingleGlue=!this.value.glueName.includes(" + "),this.toolbarOptions=["Edit","Cancel","Search"],this.title=this.value.glueName;var t=JSON.parse(localStorage.getItem("building")),e=JSON.parse(localStorage.getItem("level")),i=JSON.parse(localStorage.getItem("user")).User;this.role=e,this.user=i,this.building=t,this.value.glueName.includes(" + ")?(this.unitTitle="Actual Consumption",this.mixedConsumption=+(1e3*this.value.mixedConsumption).toFixed(0)):(this.unitTitle="Standard Consumption",this.mixedConsumption=+(1e3*this.value.standardConsumption).toFixed(0)),this.loadData(),this.startDispatchingTime=new Date,this.isShow=0===this.value.mixingInfoID&&!this.value.glueName.includes(" + ")}},{key:"actionBegin",value:function(t){if("save"===t.requestType&&"edit"===t.action){var e=t.data;this.updateDispatchDetail({id:e.id,amount:e.amount,glueNameID:this.value.glueNameID,estimatedStartTime:this.value.estimatedStartTime,estimatedFinishTime:this.value.estimatedFinishTime,startTimeOfPeriod:this.value.startTimeOfPeriod,finishTimeOfPeriod:this.value.finishTimeOfPeriod,lineID:e.lineID})}}},{key:"actionComplete",value:function(t){}},{key:"toolbarClick",value:function(t){}},{key:"loadData",value:function(){var t=this;this.todolistService.getDispatchDetail(this.value.buildingID,this.value.glueNameID,this.value.estimatedStartTime,this.value.estimatedFinishTime).subscribe(function(e){t.data=e})}},{key:"finishDispatch",value:function(){var t=this,e=this.data.map(function(t){return t.lineID});this.todolistService.finishDispatch({glueNameID:this.value.glueNameID,estimatedStartTime:this.value.estimatedStartTime,estimatedFinishTime:this.value.estimatedFinishTime,lines:e}).subscribe(function(e){t.todolistService.setValue(!0),t.alertify.success("Success"),t.activeModal.dismiss()})}},{key:"updateDispatchDetail",value:function(t){var e=this;this.todolistService.updateDispatchDetail(t).subscribe(function(t){e.loadData(),e.alertify.success("Success")},function(t){e.alertify.warning(t)})}},{key:"updateStartDispatchingTime",value:function(t){var e=this;this.dispatchService.updateStartDispatchingTime(t).subscribe(function(t){},function(t){e.alertify.warning(t)})}},{key:"save",value:function(){this.finishDispatch()}}]),t}();function Ii(t,e){if(1&t){var i=E.Tb();E.Sb(0,"div",17),E.Sb(1,"div",18),E.Sb(2,"ejs-dropdownlist",19),E.cc("filtering",function(t){return E.Bc(i),E.gc().onFiltering(t)})("select",function(t){return E.Bc(i),E.gc().onSelect(t)})("ngModelChange",function(t){return E.Bc(i),E.gc().lastGlue=t}),E.Rb(),E.Rb(),E.Rb()}if(2&t){var n=E.gc();E.zb(2),E.mc("dataSource",n.glues)("fields",n.fields)("allowFiltering",!0)("ngModel",n.lastGlue)}}function Ti(t,e){1&t&&E.Nb(0,"div",23)}function Ri(t,e){if(1&t){var i=E.Tb();E.Sb(0,"input",26),E.cc("ngModelChange",function(t){return E.Bc(i),E.gc(3).qrCode=t})("ngModelChange",function(t){return E.Bc(i),E.gc(3).onNgModelChangeScanQRCode(t)}),E.Rb()}if(2&t){var n=E.gc(3);E.mc("ngModel",n.qrCode)}}function Mi(t,e){if(1&t&&(E.Sb(0,"div",24),E.Ic(1,Ri,1,1,"input",25),E.Rb()),2&t){var i=E.gc(2);E.zb(1),E.mc("ngIf",1==i.isSingleGlue)}}function Bi(t,e){1&t&&E.Nb(0,"div",23)}function Pi(t,e){if(1&t&&(E.Sb(0,"div",20),E.Ic(1,Ti,1,0,"div",21),E.Ic(2,Mi,2,1,"div",22),E.Ic(3,Bi,1,0,"div",21),E.Rb()),2&t){var i=E.gc();E.zb(1),E.mc("ngIf",1==i.isHideScanQRCode),E.zb(1),E.mc("ngIf",1==i.isHideScanQRCode),E.zb(1),E.mc("ngIf",1==i.isHideScanQRCode)}}function Oi(t,e){if(1&t&&E.Nb(0,"qrcode",27),2&t){var i=E.gc();E.mc("qrdata",null==i.data?null:i.data.code)("allowEmptyString",!0)("margin",1)("elementType","svg")("width",100)("errorCorrectionLevel","H")}}wi.\u0275fac=function(t){return new(t||wi)(E.Mb(h.a),E.Mb(hi),E.Mb(gi),E.Mb(bi),E.Mb(fi),E.Mb(pi))},wi.\u0275cmp=E.Gb({type:wi,selectors:[["app-dispatch-done-list"]],viewQuery:function(t,e){var i;(1&t&&E.Qc(mi,!0),2&t)&&(E.xc(i=E.dc())&&(e.dispatchGrid=i.first))},inputs:{value:"value",buildingSetting:"buildingSetting"},decls:33,vars:14,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","p-0"],["allowResizing","true","gridLines","Both",3,"dataSource","allowSelection","allowSorting","toolbar","sortSettings","editSettings","actionBegin","actionComplete","toolbarClick"],["dispatchGrid",""],["field","lineName","headerText","Line","textAlign","Center","width","100"],["headerTemplate",""],["editTemplate",""],["field","amount","headerText","Amount","textAlign","Center","width","100"],["template",""],["field","time","headerText","Time","textAlign","Center","width","100"],[1,"modal-footer","justify-content-center","d-flex"],["type","button",1,"btn","btn-warning",3,"click"],[1,"fa","fa-save"]],template:function(t,e){1&t&&(E.Sb(0,"div",0),E.Sb(1,"h4",1),E.Kc(2),E.hc(3,"translate"),E.Rb(),E.Sb(4,"button",2),E.cc("click",function(){return e.activeModal.dismiss("Cross click")}),E.Sb(5,"span",3),E.Kc(6,"\xd7"),E.Rb(),E.Rb(),E.Rb(),E.Sb(7,"div",4),E.Sb(8,"ejs-grid",5,6),E.cc("actionBegin",function(t){return e.actionBegin(t)})("actionComplete",function(t){return e.actionComplete(t)})("toolbarClick",function(t){return e.toolbarClick(t)}),E.Sb(10,"e-columns"),E.Sb(11,"e-column",7),E.Ic(12,vi,3,3,"ng-template",null,8,E.Jc),E.Ic(14,Si,1,1,"ng-template",null,9,E.Jc),E.Rb(),E.Sb(16,"e-column",10),E.Ic(17,yi,2,3,"ng-template",null,8,E.Jc),E.Ic(19,ki,1,1,"ng-template",null,11,E.Jc),E.Rb(),E.Sb(21,"e-column",12),E.Ic(22,Di,2,3,"ng-template",null,8,E.Jc),E.Ic(24,xi,2,4,"ng-template",null,11,E.Jc),E.Ic(26,Ci,2,4,"ng-template",null,9,E.Jc),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Sb(28,"div",13),E.Sb(29,"button",14),E.cc("click",function(){return e.activeModal.close("Close click")}),E.Nb(30,"i",15),E.Kc(31),E.hc(32,"translate"),E.Rb(),E.Rb()),2&t&&(E.zb(2),E.Nc("",E.ic(3,10,"Dispatch")," ",e.title," "),E.zb(6),E.mc("dataSource",e.data)("allowSelection",!0)("allowSorting",!0)("allowSorting",!0)("toolbar",e.toolbarOptions)("sortSettings",e.sortSettings)("editSettings",e.editSettings),E.zb(23),E.Mc(" ",E.ic(32,12,"SAVE"),""))},directives:[x.j,b.d,I.d,I.b,x.e,x.b,b.c,I.c,I.a,x.d,x.a],pipes:[S.c,s.d],styles:[".e-grid[_ngcontent-%COMP%]   td.e-active[_ngcontent-%COMP%]{background:#6597ce!important;color:#000}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center}input.warning-focus[_ngcontent-%COMP%]{-webkit-animation:warning-frames .5s infinite;animation:warning-frames .5s infinite;color:#000}input.lock[_ngcontent-%COMP%]{pointer-events:none}.new[_ngcontent-%COMP%]{background-color:green}input[_ngcontent-%COMP%]{text-align:center}@-webkit-keyframes warning-frames{0%{background-color:#fade40}to{background-color:#e7f70c}}@keyframes warning-frames{0%{background-color:#fade40}to{background-color:#e7f70c}}.e-grid[_ngcontent-%COMP%]   .e-altrow[_ngcontent-%COMP%]{background-color:#d6d8db}"]});var Ai=function(){function t(e,n,a,o,c,s,r){var l=this;i(this,t),this.activeModal=e,this.todolistService=n,this.alertify=a,this.datePipe=o,this.ingredientService=c,this.abnormalService=s,this.makeGlueService=r,this.introJS=St(),this.subject=new O.a,this.subscription=[],this.displayTextMethod={visibility:!1},this.fields={text:"glueName",value:"id"},this.onFiltering=function(t){var e=new N.h;e=""!==t.text?e.where("name","contains",t.text,!0):e,t.updateData(l.glues,e)}}return a(t,[{key:"ngOnInit",value:function(){var t=this;this.isHideScanQRCode=!0;var e=JSON.parse(localStorage.getItem("building")),i=JSON.parse(localStorage.getItem("level")),n=JSON.parse(localStorage.getItem("user")).User;this.role=i,this.user=n,this.building=e,this.getMixingInfoHistory(),this.checkQRCode(),0!==this.value.mixingInfoID&&setTimeout(function(){t.getMixingInfoByID()},300),this.isSingleGlue=!this.value.glueName.includes(" + ")}},{key:"getMixingInfoByID",value:function(){var t=this;this.todolistService.findPrintGlue(this.value.mixingInfoID).subscribe(function(e){var i;t.data=e,t.chemicalA=null===(i=t.data)||void 0===i?void 0:i.mixingInfoDetails.filter(function(t){return"A"===t.position})[0],t.isHideScanQRCode=!1})}},{key:"ngOnDestroy",value:function(){this.subscription.forEach(function(t){return t.unsubscribe()})}},{key:"checkQRCode",value:function(){var t=this;this.subscription.push(this.subject.pipe(Object(A.a)(300)).subscribe(function(e){return Object(P.a)(t,void 0,void 0,regeneratorRuntime.mark(function t(){var i,n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.validateQRCode(e);case 2:!1!==(i=t.sent).status&&this.makeGlueService.add({glueName:this.value.glueName,glueID:this.value.glueID,buildingID:this.building.id,mixBy:this.user.ID,estimatedStartTime:this.value.estimatedStartTime,estimatedFinishTime:this.value.estimatedFinishTime,details:[{amount:this.value.standardConsumption,ingredientID:i.ingredient.id,batch:e[1],mixingInfoID:0,position:"A"}]}).subscribe(function(t){n.alertify.success("Success!"),n.data=t,n.todolistService.updateMixingInfoDispatchList(n.data.id,n.value.glueNameID,n.value.estimatedStartTime,n.value.estimatedFinishTime).subscribe(function(){n.todolistService.setValue(!1)})},function(t){return n.alertify.error(t)});case 4:case"end":return t.stop()}},t,this)}))}))}},{key:"validateQRCode",value:function(t){return Object(P.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var i,n,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.QRCode.split("-")||[],n=t.QRCode.match(/(\d+)-(\w+)-/g),a=t.QRCode.replace(n[0],""),(n[0]+a).length===t.QRCode.length){e.next=3;break}return e.abrupt("return",(this.alertify.warning("The QR Code is invalid!<br> M\xe3 QR kh\xf4ng h\u1ee3p l\u1ec7! Vui l\xf2ng th\u1eed l\u1ea1i m\xe3 kh\xe1c.",!0),{status:!1,ingredient:null}));case 3:return this.qrCode=a,e.next=6,this.scanQRCode();case 6:if((o=e.sent).name===this.value.glueName){e.next=11;break}e.t0=(this.alertify.warning('Please you should look for the chemical name "'.concat(this.value.glueName,'"<br> Vui l\xf2ng qu\xe9t \u0111\xfang h\xf3a ch\u1ea5t "').concat(this.value.glueName,'"!'),!0),this.qrCode="",{status:!1,ingredient:null}),e.next=21;break;case 11:return e.t1=!0,e.next=14,this.hasLock(o.name,i[1]);case 14:if(e.t2=e.sent,e.t1!==e.t2){e.next=19;break}e.t3=(this.alertify.error("This chemical has been locked! <br> H\xf3a ch\u1ea5t n\xe0y \u0111\xe3 b\u1ecb kh\xf3a!",!0),this.qrCode="",{status:!1,ingredient:null}),e.next=20;break;case 19:e.t3={status:!0,ingredient:o};case 20:e.t0=e.t3;case 21:return e.abrupt("return",e.t0);case 22:case"end":return e.stop()}},e,this)}))}},{key:"scanQRCode",value:function(){return this.ingredientService.scanQRCode(this.qrCode).toPromise()}},{key:"hasLock",value:function(t,e){var i=this,n=this.building.name;return 1!==this.role.id&&2!==this.role.id||(n="E"),new Promise(function(a,o){i.abnormalService.hasLock(t,n,e).subscribe(function(t){a(t)},function(t){o(!1)})})}},{key:"onNgModelChangeScanQRCode",value:function(t){return Object(P.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.subject.next({QRCode:t,ingredient:null});case 1:case"end":return e.stop()}},e,this)}))}},{key:"printData",value:function(){var t="",e=document.getElementById("qrcode"),i="0001-01-01T00:00:00"===this.data.expiredTime?"N/A":this.datePipe.transform(new Date(this.data.expiredTime),"MMdd HH:mm");t+="\n       <div class='content'>\n        <div class='qrcode'>\n         ".concat(e.innerHTML,"\n         </div>\n          <div class='info'>\n          <ul>\n              <li class='subInfoTo'>").concat(this.data.glueName,"</li>\n              <li class='subInfoNho' >MFG: ").concat(this.datePipe.transform(new Date(this.data.createdTime),"MMdd HH:mm"),"</li>\n              <li class='subInfoNho' >EXP: ").concat(i,"</li>\n          </ul>\n         </div>\n      </div>\n      "),this.configurePrint(t)}},{key:"configurePrint",value:function(t){var e=window.open("","_blank","left=0,top=0,width=1000,height=900,toolbar=0,scrollbars=0,status=0");e.document.write('\n    <html>\n      <head>\n      </head>\n      <style>\n        * {\n          box-sizing: border-box;\n          -moz-box-sizing: border-box;\n        }\n\n        .content {\n          page-break-after: always;\n          clear: both;\n        }\n\n        .content .qrcode {\n          float:left;\n          width: 110px;\n          margin-top: 10px;\n          padding: 0;\n          margin-left: 0px;\n        }\n\n        .content .info {\n          float:left;\n          list-style: none;\n          width: 190px;\n        }\n        .content .info ul {\n          float:left;\n          list-style: none;\n          padding: 0px;\n          margin: 0px;\n          margin-top: 20px;\n          font-weight: bold;\n          word-wrap: break-word;\n        }\n        .content .info ul .subInfoTo  {\n          font-size: 22px;\n          font-weight: bold;\n          width: 180px;\n          word-wrap: break-word;\n        }\n        .content .info ul .subInfoNho  {\n          font-size: 15px;\n          width: 180px;\n          word-wrap: break-word;\n        }\n\n        @page {\n          size: 2.65 x 1.20 inch;\n          page-break-after: always;\n          margin: 0;\n        }\n        @media print {\n          html, body {\n            width: 90mm;\n          }\n        }\n      </style>\n      <body onload="window.print(); window.close()">\n        '.concat(t,"\n      </body>\n    </html>\n    ")),e.document.close(),this.finish()}},{key:"finish",value:function(){var t=this;this.todolistService.printGlueDispatchList(this.value.glueName.includes("+")?this.lastGlue:this.data.id,this.value.glueNameID,this.value.estimatedStartTime,this.value.estimatedFinishTime).subscribe(function(e){t.alertify.success("success",!0),t.activeModal.close(),t.todolistService.setValue(!1)})}},{key:"getMixingInfoHistory",value:function(){var t=this;localStorage.getItem("buildingID"),this.todolistService.getMixingInfoHistory(this.value.buildingID,this.value.glueNameID,this.value.startTimeOfPeriod,this.value.finishTimeOfPeriod).subscribe(function(e){var i;t.glues=e.map(function(e){return{id:e.id,buildingID:e.buildingID,glueName:"".concat(e.glueName," ( ").concat(t.datePipe.transform(e.createdTime,"HH:mm")," )"),glueID:e.glueID,code:e.code,mixBy:e.mixBy,expiredTime:e.expiredTime,createdTime:e.createdTime,status:e.status,estimatedTime:e.estimatedTime,startTime:e.startTime,endTime:e.endTime,printTime:e.printTime,estimatedStartTime:e.estimatedStartTime,estimatedFinishTime:e.estimatedFinishTime,mixingInfoDetails:e.mixingInfoDetails}}),t.lastGlue=null===(i=t.glues[0])||void 0===i?void 0:i.id,t.data=t.glues[0]})}},{key:"onSelect",value:function(t){var e;this.data=t.itemData,this.chemicalA=null===(e=this.data)||void 0===e?void 0:e.mixingInfoDetails.filter(function(t){return"A"===t.position})[0]}},{key:"startSteps",value:function(){var t;t=this.isSingleGlue?[{element:"#step1-li",intro:"B\u01b0\u1edbc 1: Qu\xe9t QR Code!"},{element:"#step2-li",intro:'B\u01b0\u1edbc 2: Nh\u1ea5n v\xe0o n\xfat "In"!'}]:[{element:"#step1-li",intro:"B\u01b0\u1edbc 1: Ch\u1ecdn keo \u0111\xe3 pha!"},{element:"#step2-li",intro:'B\u01b0\u1edbc 2: Nh\u1ea5n v\xe0o n\xfat "In"!'}],this.introJS.setOptions({steps:t,hidePrev:!0,hideNext:!1}).start()}}]),t}();Ai.\u0275fac=function(t){return new(t||Ai)(E.Mb(h.a),E.Mb(Dt.a),E.Mb(F.a),E.Mb(s.d),E.Mb(L.a),E.Mb(ni.a),E.Mb(ai.a))},Ai.\u0275cmp=E.Gb({type:Ai,selectors:[["app-print-glue-dispatch-list"]],inputs:{value:"value"},features:[E.yb([s.d])],decls:45,vars:15,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","p-0"],["class","row mb-2",4,"ngIf"],["class","row py-2",4,"ngIf"],[1,"row"],[1,"col-md-4"],[1,"col-md-4","text-left"],[1,"center"],["id","qrcode",3,"qrdata","allowEmptyString","margin","elementType","width","errorCorrectionLevel",4,"ngIf"],[1,"modal-footer","justify-content-between"],["type","button",1,"btn","btn-outline-dark",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["type","button","id","step2-li",1,"btn","btn-outline-dark",3,"click"],[1,"fa","fa-print"],[1,"row","mb-2"],["id","step1-li",1,"col-md-12"],["placeholder","Select a glue history",3,"dataSource","fields","allowFiltering","ngModel","filtering","select","ngModelChange"],[1,"row","py-2"],["class","col-md-2",4,"ngIf"],["class","col-md-8","id","step1-li",4,"ngIf"],[1,"col-md-2"],["id","step1-li",1,"col-md-8"],["class","form-control form-control-lg rounded-pill","autoselect","","placeholder","Scan QR Code","type","text",3,"ngModel","ngModelChange",4,"ngIf"],["autoselect","","placeholder","Scan QR Code","type","text",1,"form-control","form-control-lg","rounded-pill",3,"ngModel","ngModelChange"],["id","qrcode",3,"qrdata","allowEmptyString","margin","elementType","width","errorCorrectionLevel"]],template:function(t,e){1&t&&(E.Sb(0,"div",0),E.Sb(1,"h4",1),E.Kc(2),E.Rb(),E.Sb(3,"button",2),E.cc("click",function(){return e.activeModal.dismiss("Cross click")}),E.Sb(4,"span",3),E.Kc(5,"\xd7"),E.Rb(),E.Rb(),E.Rb(),E.Sb(6,"div",4),E.Ic(7,Ii,3,4,"div",5),E.Ic(8,Pi,4,3,"div",6),E.Sb(9,"div",7),E.Nb(10,"div",8),E.Sb(11,"div",9),E.Sb(12,"div",10),E.Ic(13,Oi,1,6,"qrcode",11),E.Rb(),E.Sb(14,"div"),E.Sb(15,"label"),E.Kc(16,"Name:"),E.Rb(),E.Kc(17),E.Rb(),E.Sb(18,"div"),E.Sb(19,"label"),E.Kc(20,"QrCode:"),E.Rb(),E.Kc(21),E.Rb(),E.Sb(22,"div"),E.Sb(23,"label"),E.Kc(24,"Batch:"),E.Rb(),E.Kc(25),E.Rb(),E.Sb(26,"div"),E.Sb(27,"label"),E.Kc(28,"MFG:"),E.Rb(),E.Kc(29),E.hc(30,"date"),E.Rb(),E.Sb(31,"div"),E.Sb(32,"label"),E.Kc(33,"EXP:"),E.Rb(),E.Kc(34),E.hc(35,"date"),E.Rb(),E.Rb(),E.Nb(36,"div",8),E.Rb(),E.Rb(),E.Sb(37,"div",12),E.Sb(38,"button",13),E.cc("click",function(){return e.activeModal.close("Close click")}),E.Kc(39,"Close"),E.Rb(),E.Sb(40,"button",14),E.cc("click",function(){return e.startSteps()}),E.Kc(41,"H\u01b0\u1edbng d\u1eabn"),E.Rb(),E.Sb(42,"button",15),E.cc("click",function(){return e.printData()}),E.Nb(43,"i",16),E.Kc(44," Print"),E.Rb(),E.Rb()),2&t&&(E.zb(2),E.Mc("Print glue name: ",null==e.value?null:e.value.glueName,""),E.zb(5),E.mc("ngIf",0==e.isSingleGlue),E.zb(1),E.mc("ngIf",1==e.isSingleGlue),E.zb(5),E.mc("ngIf",void 0!==e.data),E.zb(4),E.Mc(" ",null==e.data?null:e.data.glueName,""),E.zb(4),E.Mc(" ",null==e.data?null:e.data.code,""),E.zb(4),E.Mc(" ",null==e.chemicalA?null:e.chemicalA.batch,""),E.zb(4),E.Mc(" ",E.jc(30,9,null==e.data?null:e.data.createdTime,"yyyyMMdd HH:mm"),""),E.zb(5),E.Mc(" ",E.jc(35,12,null==e.data?null:e.data.expiredTime,"yyyyMMdd HH:mm"),""))},directives:[s.n,d.c,r.g,r.j,r.b,oi.a,M.a],pipes:[s.d],styles:[""]});var Ni=["dispatchGrid"];function Ei(t,e){1&t&&(E.Sb(0,"span"),E.Kc(1),E.hc(2,"translate"),E.Rb()),2&t&&(E.zb(1),E.Lc(E.ic(2,1,"Line")))}function Fi(t,e){1&t&&E.Kc(0),2&t&&E.Mc(" ",e.$implicit.lineName," ")}function _i(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"Amount")," (g) ")}function Li(t,e){1&t&&E.Kc(0),2&t&&E.Mc(" ",e.$implicit.amount," ")}function Ki(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"Time")," ")}function ji(t,e){if(1&t&&(E.Kc(0),E.hc(1,"date")),2&t){var i=e.$implicit;E.Mc(" ",null===i.deliveryTime?"-":E.jc(1,1,i.deliveryTime,"HH:mm")," ")}}function zi(t,e){if(1&t&&(E.Kc(0),E.hc(1,"date")),2&t){var i=e.$implicit;E.Mc(" ",null===i.deliveryTime?"-":E.jc(1,1,i.deliveryTime,"HH:mm")," ")}}var Hi,Ui=((Hi=function(){function t(e,n,a,o,c,s){i(this,t),this.activeModal=e,this.settingService=n,this.dispatchService=a,this.planService=o,this.todolistService=c,this.alertify=s,this.fieldsLine={text:"line",value:"line"},this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!1,allowDeleting:!1,mode:"Normal"},this.sortSettings={columns:[{field:"lineName",direction:"Ascending"}]}}return a(t,[{key:"ngOnInit",value:function(){this.isSingleGlue=!this.value.glueName.includes(" + "),this.toolbarOptions=["Edit","Cancel","Search"],this.title=this.value.glueName;var t=JSON.parse(localStorage.getItem("building")),e=JSON.parse(localStorage.getItem("level")),i=JSON.parse(localStorage.getItem("user")).User;this.role=e,this.user=i,this.building=t,this.value.glueName.includes(" + ")?(this.unitTitle="Actual Consumption",this.mixedConsumption=+(1e3*this.value.mixedConsumption).toFixed(0)):(this.unitTitle="Standard Consumption",this.mixedConsumption=+(1e3*this.value.standardConsumption).toFixed(0)),this.loadData(),this.startDispatchingTime=new Date,this.isShow=0===this.value.mixingInfoID&&!this.value.glueName.includes(" + ")}},{key:"actionBegin",value:function(t){if("save"===t.requestType&&"edit"===t.action){var e=t.data;this.updateDispatchDetail({id:e.id,amount:e.amount,glueNameID:this.value.glueNameID,estimatedStartTime:this.value.estimatedStartTime,estimatedFinishTime:this.value.estimatedFinishTime,startTimeOfPeriod:this.value.startTimeOfPeriod,finishTimeOfPeriod:this.value.finishTimeOfPeriod,lineID:e.lineID})}}},{key:"actionComplete",value:function(t){}},{key:"toolbarClick",value:function(t){}},{key:"loadData",value:function(){var t=this;this.todolistService.getDispatchDetail(this.value.buildingID,this.value.glueNameID,this.value.estimatedStartTime,this.value.estimatedFinishTime).subscribe(function(e){t.data=e})}},{key:"finishDispatch",value:function(){var t=this,e=this.data.map(function(t){return t.lineID});this.todolistService.finishDispatch({glueNameID:this.value.glueNameID,estimatedStartTime:this.value.estimatedStartTime,estimatedFinishTime:this.value.estimatedFinishTime,lines:e}).subscribe(function(e){t.todolistService.setValue(!0),t.alertify.success("Success"),t.activeModal.dismiss()})}},{key:"updateDispatchDetail",value:function(t){var e=this;this.todolistService.updateDispatchDetail(t).subscribe(function(t){e.loadData(),e.alertify.success("Success")},function(t){e.alertify.warning(t)})}},{key:"updateStartDispatchingTime",value:function(t){var e=this;this.dispatchService.updateStartDispatchingTime(t).subscribe(function(t){},function(t){e.alertify.warning(t)})}},{key:"save",value:function(){this.finishDispatch()}}]),t}()).\u0275fac=function(t){return new(t||Hi)(E.Mb(h.a),E.Mb(hi),E.Mb(gi),E.Mb(bi),E.Mb(fi),E.Mb(pi))},Hi.\u0275cmp=E.Gb({type:Hi,selectors:[["app-dispatch"]],viewQuery:function(t,e){var i;1&t&&E.Qc(Ni,!0),2&t&&E.xc(i=E.dc())&&(e.dispatchGrid=i.first)},inputs:{value:"value",buildingSetting:"buildingSetting"},decls:37,vars:17,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","p-0"],["allowResizing","true","gridLines","Both",3,"dataSource","allowSelection","allowSorting","toolbar","sortSettings","editSettings","actionBegin","actionComplete","toolbarClick"],["dispatchGrid",""],["field","lineName","headerText","Line","textAlign","Center","width","100"],["headerTemplate",""],["editTemplate",""],["field","amount","headerText","Amount","textAlign","Center","width","100"],["template",""],["field","time","headerText","Time","textAlign","Center","width","100"],[1,"modal-footer","justify-content-center","d-flex"],["type","button",1,"btn","btn-warning",3,"click"],[1,"fa","fa-save"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fa","fa-check"]],template:function(t,e){1&t&&(E.Sb(0,"div",0),E.Sb(1,"h4",1),E.Kc(2),E.hc(3,"translate"),E.Rb(),E.Sb(4,"button",2),E.cc("click",function(){return e.activeModal.dismiss("Cross click")}),E.Sb(5,"span",3),E.Kc(6,"\xd7"),E.Rb(),E.Rb(),E.Rb(),E.Sb(7,"div",4),E.Sb(8,"ejs-grid",5,6),E.cc("actionBegin",function(t){return e.actionBegin(t)})("actionComplete",function(t){return e.actionComplete(t)})("toolbarClick",function(t){return e.toolbarClick(t)}),E.Sb(10,"e-columns"),E.Sb(11,"e-column",7),E.Ic(12,Ei,3,3,"ng-template",null,8,E.Jc),E.Ic(14,Fi,1,1,"ng-template",null,9,E.Jc),E.Rb(),E.Sb(16,"e-column",10),E.Ic(17,_i,2,3,"ng-template",null,8,E.Jc),E.Ic(19,Li,1,1,"ng-template",null,11,E.Jc),E.Rb(),E.Sb(21,"e-column",12),E.Ic(22,Ki,2,3,"ng-template",null,8,E.Jc),E.Ic(24,ji,2,4,"ng-template",null,11,E.Jc),E.Ic(26,zi,2,4,"ng-template",null,9,E.Jc),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Sb(28,"div",13),E.Sb(29,"button",14),E.cc("click",function(){return e.activeModal.close("Close click")}),E.Nb(30,"i",15),E.Kc(31),E.hc(32,"translate"),E.Rb(),E.Sb(33,"button",16),E.cc("click",function(){return e.save()}),E.Nb(34,"i",17),E.Kc(35),E.hc(36,"translate"),E.Rb(),E.Rb()),2&t&&(E.zb(2),E.Nc("",E.ic(3,11,"Dispatch")," ",e.title," "),E.zb(6),E.mc("dataSource",e.data)("allowSelection",!0)("allowSorting",!0)("allowSorting",!0)("toolbar",e.toolbarOptions)("sortSettings",e.sortSettings)("editSettings",e.editSettings),E.zb(23),E.Mc(" ",E.ic(32,13,"SAVE"),""),E.zb(4),E.Mc(" ",E.ic(36,15,"Finish"),""))},directives:[x.j,b.d,I.d,I.b,x.e,x.b,b.c,I.c,I.a,x.d,x.a],pipes:[S.c,s.d],styles:[".e-grid[_ngcontent-%COMP%]   td.e-active[_ngcontent-%COMP%]{background:#6597ce!important;color:#000}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center}input.warning-focus[_ngcontent-%COMP%]{-webkit-animation:warning-frames .5s infinite;animation:warning-frames .5s infinite;color:#000}input.lock[_ngcontent-%COMP%]{pointer-events:none}.new[_ngcontent-%COMP%]{background-color:green}input[_ngcontent-%COMP%]{text-align:center}@-webkit-keyframes warning-frames{0%{background-color:#fade40}to{background-color:#e7f70c}}@keyframes warning-frames{0%{background-color:#fade40}to{background-color:#e7f70c}}.e-grid[_ngcontent-%COMP%]   .e-altrow[_ngcontent-%COMP%]{background-color:#d6d8db}"]}),Hi),Gi=["historyMixed"],Ji=["addition"],Qi=["additionDispatch"],$i=["toolbar"],Vi=["toolbarTodo"],qi=["toolbarDone"],Wi=["toolbarDelay"],Yi=["toolbarDispatch"],Xi=["toolbarDispatchDelay"],Zi=["gridEVAUV"],tn=["gridDone"],en=["gridAdditionDispatch"],nn=["gridTodo"],an=["gridDelay"],on=["gridDispatch"],cn=["gridDispatchDelay"],sn=["fullScreen"],rn=["tooltip"];function ln(t,e){if(1&t){var i=E.Tb();E.Sb(0,"button",32),E.cc("click",function(){return E.Bc(i),E.gc(2).openAddition()}),E.Nb(1,"i",33),E.Sb(2,"span",34),E.Kc(3),E.hc(4,"translate"),E.Rb(),E.Rb()}2&t&&(E.zb(3),E.Mc(" ",E.ic(4,1,"Addition")," "))}function un(t,e){1&t&&(E.Sb(0,"e-item",31),E.hc(1,"translate"),E.Ic(2,ln,5,3,"ng-template",null,13,E.Jc),E.Rb()),2&t&&E.nc("tooltipText",E.ic(1,1,"Addition"))}function dn(t,e){if(1&t){var i=E.Tb();E.Sb(0,"button",32),E.cc("click",function(){return E.Bc(i),E.gc().reloadPage()}),E.Nb(1,"i",35),E.Sb(2,"span",34),E.Kc(3),E.hc(4,"translate"),E.Rb(),E.Rb()}2&t&&(E.zb(3),E.Mc(" ",E.ic(4,1,"Refresh Todolist")," "))}function hn(t,e){if(1&t){var i=E.Tb();E.Sb(0,"button",37),E.cc("click",function(){return E.Bc(i),E.gc(2).openFullscreen()}),E.Nb(1,"i",38),E.Sb(2,"span",34),E.Kc(3," FullScreen "),E.Rb(),E.Rb()}}function gn(t,e){if(1&t){var i=E.Tb();E.Sb(0,"button",37),E.cc("click",function(){return E.Bc(i),E.gc(2).closeFullscreen()}),E.Nb(1,"i",39),E.Sb(2,"span",34),E.Kc(3," CloseScreen "),E.Rb(),E.Rb()}}function bn(t,e){if(1&t&&(E.Ic(0,hn,4,0,"button",36),E.Ic(1,gn,4,0,"button",36)),2&t){var i=E.gc();E.mc("ngIf",i.hasShowFullScreen),E.zb(1),E.mc("ngIf",!i.hasShowFullScreen)}}function fn(t,e){if(1&t){var i=E.Tb();E.Sb(0,"ejs-dropdownlist",40),E.cc("filtering",function(t){return E.Bc(i),E.gc().onFilteringBuilding(t)})("change",function(t){return E.Bc(i),E.gc().onChangeBuilding(t)})("select",function(t){return E.Bc(i),E.gc().onSelectBuildingToDo(t)}),E.Rb()}if(2&t){var n=E.gc();E.mc("dataSource",n.buildings)("fields",n.fieldsBuildings)("allowFiltering",!0)("value",n.buildingID)}}function pn(t,e){1&t&&E.Nb(0,"e-item",41),2&t&&E.oc("text"," ","EVA_UV"," ")}function mn(t,e){if(1&t){var i=E.Tb();E.Sb(0,"div",42),E.Sb(1,"div",43),E.Sb(2,"input",44),E.cc("ngModelChange",function(t){return E.Bc(i),E.gc().glueName=t})("change",function(t){return E.Bc(i),E.gc().searchDone(t)}),E.Rb(),E.Nb(3,"span",45),E.Rb(),E.Rb()}if(2&t){var n=E.gc();E.zb(2),E.mc("ngModel",n.glueName)}}function vn(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"Supplier")," ")}function Sn(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"Glue")," ")}function yn(t,e){if(1&t){var i=E.Tb();E.Sb(0,"ejs-tooltip",55,56),E.cc("beforeRender",function(t){E.Bc(i);var n=e.$implicit;return E.gc(2).onBeforeRender(t,n,n.index)}),E.Kc(2),E.Rb()}if(2&t){var n=e.$implicit;E.zb(2),E.Mc(" ",n.glueName," ")}}function kn(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"Line")," ")}function Dn(t,e){1&t&&E.Kc(0),2&t&&E.Mc(" ",e.$implicit.lineNames.join(", ")," ")}function xn(t,e){1&t&&(E.Sb(0,"ejs-tooltip",57),E.hc(1,"translate"),E.Kc(2),E.hc(3,"translate"),E.Rb()),2&t&&(E.mc("content",E.ic(1,2,"EST_Tooltip")),E.zb(2),E.Mc(" ",E.ic(3,4,"EST")," "))}function Cn(t,e){1&t&&(E.Sb(0,"div"),E.Kc(1),E.hc(2,"translate"),E.Rb()),2&t&&(E.zb(1),E.Lc(E.ic(2,1,"Addition")))}function wn(t,e){if(1&t&&(E.Sb(0,"div"),E.Kc(1),E.hc(2,"date"),E.Rb()),2&t){var i=E.gc().$implicit;E.zb(1),E.Lc(E.jc(2,1,i.estimatedStartTime,"HH:mm"))}}function In(t,e){if(1&t&&(E.Ic(0,Cn,3,3,"div",58),E.Ic(1,wn,3,4,"div",58)),2&t){var i=e.$implicit;E.mc("ngIf",i.abnormalStatus),E.zb(1),E.mc("ngIf",!i.abnormalStatus)}}function Tn(t,e){1&t&&(E.Sb(0,"ejs-tooltip",57),E.hc(1,"translate"),E.Kc(2),E.hc(3,"translate"),E.Rb()),2&t&&(E.mc("content",E.ic(1,2,"EFT_Tooltip")),E.zb(2),E.Mc(" ",E.ic(3,4,"EFT")," "))}function Rn(t,e){1&t&&(E.Sb(0,"div"),E.Kc(1),E.hc(2,"translate"),E.Rb()),2&t&&(E.zb(1),E.Lc(E.ic(2,1,"Addition")))}function Mn(t,e){if(1&t&&(E.Sb(0,"div"),E.Kc(1),E.hc(2,"date"),E.Rb()),2&t){var i=E.gc().$implicit;E.zb(1),E.Lc(E.jc(2,1,i.estimatedFinishTime,"HH:mm"))}}function Bn(t,e){if(1&t&&(E.Ic(0,Rn,3,3,"div",58),E.Ic(1,Mn,3,4,"div",58)),2&t){var i=e.$implicit;E.mc("ngIf",i.abnormalStatus),E.zb(1),E.mc("ngIf",!i.abnormalStatus)}}function Pn(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"Option")," ")}var On=function(t,e){return{disabled:t,"cursor-pointer":e}};function An(t,e){if(1&t&&(E.Sb(0,"button",65),E.Nb(1,"i",66),E.Kc(2),E.hc(3,"translate"),E.Rb()),2&t){var i=E.gc(2).$implicit,n=E.gc(2);E.mc("ngClass",E.tc(5,On,i.mixingInfoID>0,i.mixingInfoID>0))("routerLink",n.goToMixing(i)),E.zb(2),E.Mc(" ",E.ic(3,3,"MIXING")," ")}}function Nn(t,e){if(1&t){var i=E.Tb();E.Sb(0,"button",68),E.cc("click",function(){E.Bc(i);var t=E.gc(3).$implicit;return E.gc(2).goToStir(t)}),E.Nb(1,"i",69),E.Kc(2),E.hc(3,"translate"),E.Rb()}if(2&t){var n=E.gc(3).$implicit;E.mc("ngClass",E.tc(4,On,null!==n.startStirTime||n.mixedConsumption<1&&null!=n.finishMixingTime,null!==n.startStirTime||n.mixedConsumption<1&&null!=n.finishMixingTime)),E.zb(2),E.Mc(" ",E.ic(3,2,"STIR")," ")}}function En(t,e){if(1&t&&(E.Sb(0,"div"),E.Ic(1,Nn,4,7,"button",67),E.Rb()),2&t){var i=E.gc(2).$implicit;E.zb(1),E.mc("ngIf",-1!==i.glueName.indexOf(" + ")&&null==i.finishMixingTime&&i.mixedConsumption>1||-1!==i.glueName.indexOf(" + ")&&null==i.finishMixingTime&&0==i.mixedConsumption||-1!==i.glueName.indexOf(" + ")&&null!==i.finishMixingTime&&i.mixedConsumption>1)}}function Fn(t,e){if(1&t){var i=E.Tb();E.Sb(0,"div"),E.Sb(1,"button",70),E.cc("click",function(){E.Bc(i);var t=E.gc(2).$implicit;return E.gc(2).goToShake(t)}),E.Nb(2,"i",69),E.Kc(3),E.hc(4,"translate"),E.Rb(),E.Rb()}2&t&&(E.zb(3),E.Mc(" ",E.ic(4,1,"Shake")," "))}function _n(t,e){if(1&t){var i=E.Tb();E.Sb(0,"div",60),E.Sb(1,"div",61),E.Ic(2,An,4,8,"button",62),E.Ic(3,En,2,1,"div",58),E.Ic(4,Fn,5,3,"div",58),E.Sb(5,"button",63),E.cc("click",function(){E.Bc(i);var t=E.gc().$implicit;return E.gc(2).openPrintModal(t)}),E.Nb(6,"i",64),E.Kc(7),E.hc(8,"translate"),E.Rb(),E.Rb(),E.Rb()}if(2&t){var n=E.gc().$implicit,a=E.gc(2);E.zb(2),E.mc("ngIf",-1!==n.glueName.indexOf(" + ")),E.zb(1),E.mc("ngIf",n.kindID!==a.RUBBER),E.zb(1),E.mc("ngIf",n.kindID===a.RUBBER),E.zb(1),E.Eb("ml-1",-1!==n.glueName.indexOf(" + ")),E.zb(2),E.Mc(" ",E.ic(8,6,"Print")," ")}}function Ln(t,e){if(1&t&&E.Ic(0,_n,9,8,"div",59),2&t){var i=E.gc(2);E.mc("ngIf",i.isShowTab===i.TODO)}}function Kn(t,e){if(1&t){var i=E.Tb();E.Sb(0,"ejs-grid",46,47),E.cc("actionBegin",function(t){return E.Bc(i),E.gc().actionBegin(t)})("actionComplete",function(t){return E.Bc(i),E.gc().actionComplete(t)})("rowDataBound",function(t){return E.Bc(i),E.gc().rowDB(t)})("toolbarClick",function(t){return E.Bc(i),E.gc().toolbarClick(t)})("created",function(){return E.Bc(i),E.gc().createdTodoGrid()})("dataBound",function(){return E.Bc(i),E.gc().dataBound()})("recordDoubleClick",function(t){return E.Bc(i),E.gc().onDoubleClick(t)}),E.Sb(2,"e-columns"),E.Sb(3,"e-column",48),E.Ic(4,vn,2,3,"ng-template",null,49,E.Jc),E.Rb(),E.Sb(6,"e-column",50),E.Ic(7,Sn,2,3,"ng-template",null,49,E.Jc),E.Ic(9,yn,3,1,"ng-template",null,13,E.Jc),E.Rb(),E.Sb(11,"e-column",51),E.Ic(12,kn,2,3,"ng-template",null,49,E.Jc),E.Ic(14,Dn,1,1,"ng-template",null,13,E.Jc),E.Rb(),E.Sb(16,"e-column",52),E.Ic(17,xn,4,6,"ng-template",null,49,E.Jc),E.Ic(19,In,2,2,"ng-template",null,13,E.Jc),E.Rb(),E.Sb(21,"e-column",53),E.Ic(22,Tn,4,6,"ng-template",null,49,E.Jc),E.Ic(24,Bn,2,2,"ng-template",null,13,E.Jc),E.Rb(),E.Sb(26,"e-column",54),E.Ic(27,Pn,2,3,"ng-template",null,49,E.Jc),E.Ic(29,Ln,1,1,"ng-template",null,13,E.Jc),E.Rb(),E.Rb(),E.Rb()}if(2&t){var n=E.gc();E.mc("dataSource",n.data)("searchSettings",n.searchSettings)("allowExcelExport",!0)}}function jn(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"Supplier")," ")}function zn(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"Glue")," ")}function Hn(t,e){if(1&t){var i=E.Tb();E.Sb(0,"ejs-tooltip",55,56),E.cc("beforeRender",function(t){E.Bc(i);var n=e.$implicit;return E.gc(2).onBeforeRender(t,n,n.index)}),E.Kc(2),E.Rb()}if(2&t){var n=e.$implicit;E.zb(2),E.Mc(" ",n.glueName," ")}}function Un(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"Line")," ")}function Gn(t,e){1&t&&E.Kc(0),2&t&&E.Mc(" ",e.$implicit.lineNames.join(", ")," ")}function Jn(t,e){1&t&&(E.Sb(0,"ejs-tooltip",57),E.hc(1,"translate"),E.Kc(2),E.hc(3,"translate"),E.Rb()),2&t&&(E.mc("content",E.ic(1,2,"EST_Tooltip")),E.zb(2),E.Mc(" ",E.ic(3,4,"EST")," "))}function Qn(t,e){1&t&&(E.Sb(0,"ejs-tooltip",57),E.hc(1,"translate"),E.Kc(2),E.hc(3,"translate"),E.Rb()),2&t&&(E.mc("content",E.ic(1,2,"EFT_Tooltip")),E.zb(2),E.Mc(" ",E.ic(3,4,"EFT")," "))}function $n(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"Option")," ")}function Vn(t,e){if(1&t){var i=E.Tb();E.Sb(0,"div",60),E.Sb(1,"div",61),E.Sb(2,"button",63),E.cc("click",function(){E.Bc(i);var t=e.$implicit;return E.gc(2).openPrintModalDispatchList(t)}),E.Nb(3,"i",64),E.Kc(4),E.hc(5,"translate"),E.Rb(),E.Sb(6,"button",73),E.cc("click",function(){E.Bc(i);var t=e.$implicit;return E.gc(2).openDispatchModal(t)}),E.Nb(7,"i",74),E.Kc(8),E.hc(9,"translate"),E.Rb(),E.Rb(),E.Rb()}if(2&t){var n=e.$implicit,a=E.gc(2);E.zb(4),E.Mc(" ",E.ic(5,3,"Print")," "),E.zb(2),E.mc("ngClass",a.lockDispatch(n)),E.zb(2),E.Mc(" ",E.ic(9,5,"Dispatch")," ")}}function qn(t,e){if(1&t){var i=E.Tb();E.Sb(0,"ejs-grid",71,72),E.cc("actionBegin",function(t){return E.Bc(i),E.gc().actionBegin(t)})("actionComplete",function(t){return E.Bc(i),E.gc().actionComplete(t)})("toolbarClick",function(t){return E.Bc(i),E.gc().toolbarClick(t)})("created",function(){return E.Bc(i),E.gc().createdDispatchGrid()})("dataBound",function(){return E.Bc(i),E.gc().dataBound()})("rowDataBound",function(t){return E.Bc(i),E.gc().rowDBDispatch(t)})("recordDoubleClick",function(t){return E.Bc(i),E.gc().onDoubleClick(t)}),E.Sb(2,"e-columns"),E.Sb(3,"e-column",48),E.Ic(4,jn,2,3,"ng-template",null,49,E.Jc),E.Rb(),E.Sb(6,"e-column",50),E.Ic(7,zn,2,3,"ng-template",null,49,E.Jc),E.Ic(9,Hn,3,1,"ng-template",null,13,E.Jc),E.Rb(),E.Sb(11,"e-column",51),E.Ic(12,Un,2,3,"ng-template",null,49,E.Jc),E.Ic(14,Gn,1,1,"ng-template",null,13,E.Jc),E.Rb(),E.Sb(16,"e-column",52),E.Ic(17,Jn,4,6,"ng-template",null,49,E.Jc),E.Rb(),E.Sb(19,"e-column",53),E.Ic(20,Qn,4,6,"ng-template",null,49,E.Jc),E.Rb(),E.Sb(22,"e-column",54),E.Ic(23,$n,2,3,"ng-template",null,49,E.Jc),E.Ic(25,Vn,10,7,"ng-template",null,13,E.Jc),E.Rb(),E.Rb(),E.Rb()}if(2&t){var n=E.gc();E.mc("dataSource",n.dispatchData)("searchSettings",n.searchSettings)("allowExcelExport",!0)}}function Wn(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"Supplier")," ")}function Yn(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"Glue")," ")}function Xn(t,e){if(1&t){var i=E.Tb();E.Sb(0,"ejs-tooltip",55,56),E.cc("beforeRender",function(t){E.Bc(i);var n=e.$implicit;return E.gc(2).onBeforeRender(t,n,n.index)}),E.Kc(2),E.Rb()}if(2&t){var n=e.$implicit;E.zb(2),E.Mc(" ",n.glueName," ")}}function Zn(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"Line")," ")}function ta(t,e){1&t&&E.Kc(0),2&t&&E.Mc(" ",e.$implicit.lineNames.join(", ")," ")}function ea(t,e){1&t&&(E.Sb(0,"ejs-tooltip",57),E.hc(1,"translate"),E.Kc(2),E.hc(3,"translate"),E.Rb()),2&t&&(E.mc("content",E.ic(1,2,"EST_Tooltip")),E.zb(2),E.Mc(" ",E.ic(3,4,"EST")," "))}function ia(t,e){1&t&&E.Kc(0," N/A ")}function na(t,e){1&t&&(E.Sb(0,"ejs-tooltip",57),E.hc(1,"translate"),E.Kc(2),E.hc(3,"translate"),E.Rb()),2&t&&(E.mc("content",E.ic(1,2,"EFT_Tooltip")),E.zb(2),E.Mc(" ",E.ic(3,4,"EFT")," "))}function aa(t,e){1&t&&E.Kc(0," N/A ")}function oa(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"Option")," ")}function ca(t,e){if(1&t){var i=E.Tb();E.Sb(0,"div",60),E.Sb(1,"div",61),E.Sb(2,"button",63),E.cc("click",function(){E.Bc(i);var t=e.$implicit;return E.gc(2).openSubpackage(t)}),E.Nb(3,"i",64),E.Kc(4),E.Rb(),E.Sb(5,"button",76),E.cc("click",function(){E.Bc(i);var t=e.$implicit;return E.gc(2).openDispatchEVAUV(t)}),E.Nb(6,"i",74),E.Kc(7),E.hc(8,"translate"),E.Rb(),E.Rb(),E.Rb()}2&t&&(E.zb(4),E.Mc(" ","Subpackage"," "),E.zb(3),E.Mc(" ",E.ic(8,2,"Dispatch")," "))}function sa(t,e){if(1&t){var i=E.Tb();E.Sb(0,"ejs-grid",75,72),E.cc("actionBegin",function(t){return E.Bc(i),E.gc().actionBegin(t)})("actionComplete",function(t){return E.Bc(i),E.gc().actionComplete(t)})("toolbarClick",function(t){return E.Bc(i),E.gc().toolbarClick(t)})("created",function(){return E.Bc(i),E.gc().createdDispatchGrid()})("dataBound",function(){return E.Bc(i),E.gc().dataBound()})("rowDataBound",function(t){return E.Bc(i),E.gc().rowDBDispatch(t)})("recordDoubleClick",function(t){return E.Bc(i),E.gc().onDoubleClick(t)}),E.Sb(2,"e-columns"),E.Sb(3,"e-column",48),E.Ic(4,Wn,2,3,"ng-template",null,49,E.Jc),E.Rb(),E.Sb(6,"e-column",50),E.Ic(7,Yn,2,3,"ng-template",null,49,E.Jc),E.Ic(9,Xn,3,1,"ng-template",null,13,E.Jc),E.Rb(),E.Sb(11,"e-column",51),E.Ic(12,Zn,2,3,"ng-template",null,49,E.Jc),E.Ic(14,ta,1,1,"ng-template",null,13,E.Jc),E.Rb(),E.Sb(16,"e-column",52),E.Ic(17,ea,4,6,"ng-template",null,49,E.Jc),E.Ic(19,ia,1,0,"ng-template",null,13,E.Jc),E.Rb(),E.Sb(21,"e-column",53),E.Ic(22,na,4,6,"ng-template",null,49,E.Jc),E.Ic(24,aa,1,0,"ng-template",null,13,E.Jc),E.Rb(),E.Sb(26,"e-column",54),E.Ic(27,oa,2,3,"ng-template",null,49,E.Jc),E.Ic(29,ca,9,4,"ng-template",null,13,E.Jc),E.Rb(),E.Rb(),E.Rb()}if(2&t){var n=E.gc();E.mc("dataSource",n.EVAUVData)("searchSettings",n.searchSettings)("allowExcelExport",!0)}}function ra(t,e){1&t&&E.Kc(0),2&t&&E.Mc(" ","Job Type"," ")}function la(t,e){1&t&&E.Kc(0),2&t&&E.Mc(" ",1==e.$implicit.jobType?"To Do":"Dispatch"," ")}function ua(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"Supplier")," ")}function da(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"Glue")," ")}function ha(t,e){if(1&t){var i=E.Tb();E.Sb(0,"ejs-tooltip",55,56),E.cc("beforeRender",function(t){E.Bc(i);var n=e.$implicit;return E.gc(2).onBeforeRender(t,n,n.index)}),E.Kc(2),E.Rb()}if(2&t){var n=e.$implicit;E.zb(2),E.Mc(" ",n.glueName," ")}}function ga(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"Line")," ")}function ba(t,e){1&t&&E.Kc(0),2&t&&E.Mc(" ",e.$implicit.lineNames.join(", ")," ")}function fa(t,e){1&t&&(E.Sb(0,"ejs-tooltip",57),E.hc(1,"translate"),E.Kc(2),E.hc(3,"translate"),E.Rb()),2&t&&(E.mc("content",E.ic(1,2,"SMT_Tooltip")),E.zb(2),E.Mc(" ",E.ic(3,4,"SMT")," "))}function pa(t,e){if(1&t&&(E.Sb(0,"div"),E.Kc(1),E.hc(2,"date"),E.Rb()),2&t){var i=E.gc().$implicit;E.zb(1),E.Mc(" ",-1===i.glueName.indexOf(" + ")||null===i.startMixingTime||"0001-01-01T00:00:00"===i.startMixingTime?"N/A":E.jc(2,1,i.startMixingTime,"HH:mm")," ")}}function ma(t,e){1&t&&(E.Sb(0,"div"),E.Kc(1," - "),E.Rb())}function va(t,e){if(1&t&&(E.Ic(0,pa,3,4,"div",58),E.Ic(1,ma,2,0,"div",58)),2&t){var i=e.$implicit;E.mc("ngIf",1==i.jobType),E.zb(1),E.mc("ngIf",2==i.jobType)}}function Sa(t,e){1&t&&(E.Sb(0,"ejs-tooltip",57),E.hc(1,"translate"),E.Kc(2),E.hc(3,"translate"),E.Rb()),2&t&&(E.mc("content",E.ic(1,2,"FMT_Tooltip")),E.zb(2),E.Mc(" ",E.ic(3,4,"FMT")," "))}function ya(t,e){if(1&t&&(E.Sb(0,"div"),E.Kc(1),E.hc(2,"date"),E.Rb()),2&t){var i=E.gc().$implicit;E.zb(1),E.Mc(" ",-1===i.glueName.indexOf(" + ")||null===i.finishMixingTime||"0001-01-01T00:00:00"===i.finishMixingTime?"N/A":E.jc(2,1,i.finishMixingTime,"HH:mm")," ")}}function ka(t,e){1&t&&(E.Sb(0,"div"),E.Kc(1," - "),E.Rb())}function Da(t,e){if(1&t&&(E.Ic(0,ya,3,4,"div",58),E.Ic(1,ka,2,0,"div",58)),2&t){var i=e.$implicit;E.mc("ngIf",1==i.jobType),E.zb(1),E.mc("ngIf",2==i.jobType)}}function xa(t,e){1&t&&(E.Sb(0,"ejs-tooltip",57),E.hc(1,"translate"),E.Kc(2),E.hc(3,"translate"),E.Rb()),2&t&&(E.mc("content",E.ic(1,2,"SST_Tooltip")),E.zb(2),E.Mc(" ",E.ic(3,4,"SST")," "))}function Ca(t,e){1&t&&(E.Qb(0),E.Kc(1),E.hc(2,"translate"),E.Pb()),2&t&&(E.zb(1),E.Mc(" ",E.ic(2,1,"Manual")," "))}function wa(t,e){if(1&t&&(E.Qb(0),E.Kc(1),E.hc(2,"date"),E.Pb()),2&t){var i=E.gc(3).$implicit;E.zb(1),E.Mc(" ",E.jc(2,1,i.startStirTime,"HH:mm")," ")}}function Ia(t,e){if(1&t&&E.Ic(0,wa,3,4,"ng-container",92),2&t){E.gc();var i=E.yc(5),n=E.gc().$implicit;E.mc("ngIf",-1!==n.glueName.indexOf(" + ")&&null!==n.startStirTime&&null!==n.finishStirTime&&n.mixedConsumption>=1)("ngIfElse",i)}}function Ta(t,e){1&t&&(E.Qb(0),E.Kc(1," Error "),E.Pb())}function Ra(t,e){if(1&t&&E.Ic(0,Ta,2,0,"ng-container",92),2&t){E.gc();var i=E.yc(7),n=E.gc().$implicit;E.mc("ngIf",-1!==n.glueName.indexOf(" + ")&&null===n.startStirTime&&n.mixedConsumption>=1)("ngIfElse",i)}}function Ma(t,e){1&t&&E.Kc(0," N/A ")}function Ba(t,e){if(1&t&&(E.Sb(0,"div"),E.Ic(1,Ca,3,3,"ng-container",92),E.Ic(2,Ia,1,2,"ng-template",null,93,E.Jc),E.Ic(4,Ra,1,2,"ng-template",null,94,E.Jc),E.Ic(6,Ma,1,0,"ng-template",null,95,E.Jc),E.Rb()),2&t){var i=E.yc(3),n=E.gc().$implicit;E.zb(1),E.mc("ngIf",-1!==n.glueName.indexOf(" + ")&&n.mixedConsumption<1)("ngIfElse",i)}}function Pa(t,e){1&t&&(E.Sb(0,"div"),E.Kc(1," - "),E.Rb())}function Oa(t,e){if(1&t&&(E.Ic(0,Ba,8,2,"div",58),E.Ic(1,Pa,2,0,"div",58)),2&t){var i=e.$implicit;E.mc("ngIf",1==i.jobType),E.zb(1),E.mc("ngIf",2==i.jobType)}}function Aa(t,e){1&t&&(E.Sb(0,"ejs-tooltip",57),E.hc(1,"translate"),E.Kc(2),E.hc(3,"translate"),E.Rb()),2&t&&(E.mc("content",E.ic(1,2,"FST_Tooltip")),E.zb(2),E.Mc(" ",E.ic(3,4,"FST")," "))}function Na(t,e){1&t&&(E.Qb(0),E.Kc(1),E.hc(2,"translate"),E.Pb()),2&t&&(E.zb(1),E.Mc(" ",E.ic(2,1,"Manual")," "))}function Ea(t,e){if(1&t&&(E.Qb(0),E.Kc(1),E.hc(2,"date"),E.Pb()),2&t){var i=E.gc(3).$implicit;E.zb(1),E.Mc(" ",E.jc(2,1,i.finishStirTime,"HH:mm")," ")}}function Fa(t,e){if(1&t&&E.Ic(0,Ea,3,4,"ng-container",92),2&t){E.gc();var i=E.yc(5),n=E.gc().$implicit;E.mc("ngIf",-1!==n.glueName.indexOf(" + ")&&null!==n.startStirTime&&null!==n.finishStirTime&&n.mixedConsumption>=1)("ngIfElse",i)}}function _a(t,e){1&t&&(E.Qb(0),E.Kc(1," Error "),E.Pb())}function La(t,e){if(1&t&&E.Ic(0,_a,2,0,"ng-container",92),2&t){E.gc();var i=E.yc(7),n=E.gc().$implicit;E.mc("ngIf",-1!==n.glueName.indexOf(" + ")&&null===n.startStirTime&&n.mixedConsumption>=1)("ngIfElse",i)}}function Ka(t,e){1&t&&E.Kc(0," N/A ")}function ja(t,e){if(1&t&&(E.Sb(0,"div"),E.Ic(1,Na,3,3,"ng-container",92),E.Ic(2,Fa,1,2,"ng-template",null,93,E.Jc),E.Ic(4,La,1,2,"ng-template",null,94,E.Jc),E.Ic(6,Ka,1,0,"ng-template",null,95,E.Jc),E.Rb()),2&t){var i=E.yc(3),n=E.gc().$implicit;E.zb(1),E.mc("ngIf",-1!==n.glueName.indexOf(" + ")&&n.mixedConsumption<1)("ngIfElse",i)}}function za(t,e){1&t&&(E.Sb(0,"div"),E.Kc(1," - "),E.Rb())}function Ha(t,e){if(1&t&&(E.Ic(0,ja,8,2,"div",58),E.Ic(1,za,2,0,"div",58)),2&t){var i=e.$implicit;E.mc("ngIf",1==i.jobType),E.zb(1),E.mc("ngIf",2==i.jobType)}}function Ua(t,e){1&t&&(E.Sb(0,"ejs-tooltip",57),E.hc(1,"translate"),E.Kc(2),E.hc(3,"translate"),E.Rb()),2&t&&(E.mc("content",E.ic(1,2,"PT_Tooltip")),E.zb(2),E.Mc(" ",E.ic(3,4,"PT")," "))}function Ga(t,e){1&t&&(E.Sb(0,"ejs-tooltip",57),E.hc(1,"translate"),E.Kc(2),E.hc(3,"translate"),E.Rb()),2&t&&(E.mc("content",E.ic(1,2,"SDT_Tooltip")),E.zb(2),E.Mc(" ",E.ic(3,4,"SDT")," "))}function Ja(t,e){1&t&&(E.Sb(0,"div"),E.Kc(1," - "),E.Rb())}function Qa(t,e){if(1&t&&(E.Sb(0,"div"),E.Kc(1),E.hc(2,"date"),E.Rb()),2&t){var i=E.gc().$implicit;E.zb(1),E.Mc(" ",null===i.finishDispatchingTime?"N/A":E.jc(2,1,i.finishDispatchingTime,"HH:mm")," ")}}function $a(t,e){if(1&t&&(E.Ic(0,Ja,2,0,"div",58),E.Ic(1,Qa,3,4,"div",58)),2&t){var i=e.$implicit;E.mc("ngIf",1==i.jobType),E.zb(1),E.mc("ngIf",2==i.jobType)}}function Va(t,e){1&t&&(E.Sb(0,"ejs-tooltip",96),E.Kc(1),E.hc(2,"translate"),E.Rb()),2&t&&(E.zb(1),E.Mc(" ",E.ic(2,1,"Std. Con.")," (kg) "))}function qa(t,e){1&t&&(E.Sb(0,"div"),E.Kc(1," - "),E.Rb())}function Wa(t,e){if(1&t&&(E.Sb(0,"div"),E.Kc(1),E.Rb()),2&t){var i=E.gc().$implicit;E.zb(1),E.Mc(" ",i.standardConsumption," ")}}function Ya(t,e){if(1&t&&(E.Ic(0,qa,2,0,"div",58),E.Ic(1,Wa,2,1,"div",58)),2&t){var i=e.$implicit;E.mc("ngIf",2==i.jobType),E.zb(1),E.mc("ngIf",1==i.jobType)}}function Xa(t,e){1&t&&(E.Sb(0,"ejs-tooltip",97),E.Kc(1),E.hc(2,"translate"),E.Rb()),2&t&&(E.zb(1),E.Mc(" ",E.ic(2,1,"Mixed. Con."),"(kg) "))}function Za(t,e){1&t&&(E.Sb(0,"div"),E.Kc(1," - "),E.Rb())}function to(t,e){if(1&t&&(E.Sb(0,"div"),E.Kc(1),E.Rb()),2&t){var i=E.gc().$implicit;E.zb(1),E.Mc(" ",-1!==i.glueName.indexOf(" + ")?i.mixedConsumption+"":"N/A"," ")}}function eo(t,e){if(1&t&&(E.Ic(0,Za,2,0,"div",58),E.Ic(1,to,2,1,"div",58)),2&t){var i=e.$implicit;E.mc("ngIf",2==i.jobType),E.zb(1),E.mc("ngIf",1==i.jobType)}}function io(t,e){1&t&&(E.Sb(0,"ejs-tooltip",98),E.Kc(1),E.hc(2,"translate"),E.Rb()),2&t&&(E.zb(1),E.Mc(" ",E.ic(2,1,"Delivered. Con."),"(kg) "))}function no(t,e){1&t&&(E.Sb(0,"div"),E.Kc(1," - "),E.Rb())}function ao(t,e){if(1&t&&(E.Sb(0,"div"),E.Kc(1),E.Rb()),2&t){var i=E.gc().$implicit;E.zb(1),E.Mc(" ",i.deliveredAmount," ")}}function oo(t,e){if(1&t&&(E.Ic(0,no,2,0,"div",58),E.Ic(1,ao,2,1,"div",58)),2&t){var i=e.$implicit;E.mc("ngIf",1==i.jobType),E.zb(1),E.mc("ngIf",2==i.jobType)}}function co(t,e){1&t&&(E.Sb(0,"ejs-tooltip",57),E.hc(1,"translate"),E.Kc(2),E.hc(3,"translate"),E.Rb()),2&t&&(E.mc("content",E.ic(1,2,"EST_Tooltip")),E.zb(2),E.Mc(" ",E.ic(3,4,"EST")," "))}function so(t,e){1&t&&(E.Sb(0,"ejs-tooltip",57),E.hc(1,"translate"),E.Kc(2),E.hc(3,"translate"),E.Rb()),2&t&&(E.mc("content",E.ic(1,2,"EFT_Tooltip")),E.zb(2),E.Mc(" ",E.ic(3,4,"EFT")," "))}function ro(t,e){if(1&t){var i=E.Tb();E.Sb(0,"ejs-grid",77,78),E.cc("actionBegin",function(t){return E.Bc(i),E.gc().actionBegin(t)})("actionComplete",function(t){return E.Bc(i),E.gc().actionComplete(t)})("rowDataBound",function(t){return E.Bc(i),E.gc().rowDB(t)})("toolbarClick",function(t){return E.Bc(i),E.gc().toolbarClick(t)})("dataBound",function(){return E.Bc(i),E.gc().dataBoundDone()})("recordDoubleClick",function(t){return E.Bc(i),E.gc().onDoubleClickDone(t)}),E.Sb(2,"e-columns"),E.Sb(3,"e-column",79),E.Ic(4,ra,1,1,"ng-template",null,49,E.Jc),E.Ic(6,la,1,1,"ng-template",null,13,E.Jc),E.Rb(),E.Sb(8,"e-column",48),E.Ic(9,ua,2,3,"ng-template",null,49,E.Jc),E.Rb(),E.Sb(11,"e-column",50),E.Ic(12,da,2,3,"ng-template",null,49,E.Jc),E.Ic(14,ha,3,1,"ng-template",null,13,E.Jc),E.Rb(),E.Sb(16,"e-column",80),E.Ic(17,ga,2,3,"ng-template",null,49,E.Jc),E.Ic(19,ba,1,1,"ng-template",null,13,E.Jc),E.Rb(),E.Sb(21,"e-column",81),E.Ic(22,fa,4,6,"ng-template",null,49,E.Jc),E.Ic(24,va,2,2,"ng-template",null,13,E.Jc),E.Rb(),E.Sb(26,"e-column",82),E.Ic(27,Sa,4,6,"ng-template",null,49,E.Jc),E.Ic(29,Da,2,2,"ng-template",null,13,E.Jc),E.Rb(),E.Sb(31,"e-column",83),E.Ic(32,xa,4,6,"ng-template",null,49,E.Jc),E.Ic(34,Oa,2,2,"ng-template",null,13,E.Jc),E.Rb(),E.Sb(36,"e-column",84),E.Ic(37,Aa,4,6,"ng-template",null,49,E.Jc),E.Ic(39,Ha,2,2,"ng-template",null,13,E.Jc),E.Rb(),E.Sb(41,"e-column",85),E.Ic(42,Ua,4,6,"ng-template",null,49,E.Jc),E.Rb(),E.Sb(44,"e-column",86),E.Ic(45,Ga,4,6,"ng-template",null,49,E.Jc),E.Ic(47,$a,2,2,"ng-template",null,13,E.Jc),E.Rb(),E.Sb(49,"e-column",87),E.Ic(50,Va,3,3,"ng-template",null,49,E.Jc),E.Ic(52,Ya,2,2,"ng-template",null,13,E.Jc),E.Rb(),E.Sb(54,"e-column",88),E.Ic(55,Xa,3,3,"ng-template",null,49,E.Jc),E.Ic(57,eo,2,2,"ng-template",null,13,E.Jc),E.Rb(),E.Sb(59,"e-column",89),E.Ic(60,io,3,3,"ng-template",null,49,E.Jc),E.Ic(62,oo,2,2,"ng-template",null,13,E.Jc),E.Rb(),E.Sb(64,"e-column",90),E.Ic(65,co,4,6,"ng-template",null,49,E.Jc),E.Rb(),E.Sb(67,"e-column",91),E.Ic(68,so,4,6,"ng-template",null,49,E.Jc),E.Rb(),E.Rb(),E.Rb()}if(2&t){var n=E.gc();E.mc("dataSource",n.doneData)("searchSettings",n.searchSettings)("allowExcelExport",!0)}}function lo(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"Glue")," ")}function uo(t,e){if(1&t){var i=E.Tb();E.Sb(0,"ejs-dropdownlist",110,111),E.cc("filtering",function(t){return E.Bc(i),E.gc(2).onFiltering(t)})("select",function(t){return E.Bc(i),E.gc(2).onChangeGlue(t)}),E.hc(2,"translate"),E.Rb()}if(2&t){var n=E.gc(2);E.mc("dataSource",n.Glue)("placeholder",E.ic(2,4,"Select glue"))("fields",n.fieldsBPFC)("allowFiltering",!0)}}function ho(t,e){if(1&t){var i=E.Tb();E.Sb(0,"div",99),E.Sb(1,"h4",100),E.Kc(2,"Addition"),E.Rb(),E.Sb(3,"button",101),E.cc("click",function(){return e.$implicit.dismiss("Cross click")}),E.Sb(4,"span",102),E.Kc(5,"\xd7"),E.Rb(),E.Rb(),E.Rb(),E.Sb(6,"div",103),E.Sb(7,"ejs-grid",104,105),E.cc("actionBegin",function(t){return E.Bc(i),E.gc().actionBeginAddition(t)})("actionComplete",function(t){return E.Bc(i),E.gc().actionComplete(t)})("toolbarClick",function(t){return E.Bc(i),E.gc().toolbarClick(t)})("recordDoubleClick",function(t){return E.Bc(i),E.gc().onDoubleClick(t)}),E.Sb(9,"e-columns"),E.Sb(10,"e-column",106),E.Ic(11,lo,2,3,"ng-template",null,49,E.Jc),E.Ic(13,uo,3,6,"ng-template",null,107,E.Jc),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Sb(15,"div",108),E.Sb(16,"button",109),E.cc("click",function(){return e.$implicit.close("Close click")}),E.Kc(17," Close "),E.Rb(),E.Rb()}if(2&t){var n=E.gc();E.zb(7),E.mc("dataSource",n.dataAddition)("searchSettings",n.searchSettings)("allowExcelExport",!0)("toolbar",n.toolbarAddition)("sortSettings",n.sortSettings)("editSettings",n.editSettings)}}function go(t,e){1&t&&(E.Sb(0,"span",119),E.Kc(1,"Chemical"),E.Rb())}function bo(t,e){if(1&t&&(E.Sb(0,"span",120),E.Kc(1),E.Rb()),2&t){var i=e.$implicit;E.zb(1),E.Lc(i.ingredient_Name)}}function fo(t,e){1&t&&(E.Sb(0,"span",119),E.Kc(1,"Amount"),E.Rb())}function po(t,e){if(1&t&&(E.Sb(0,"span",120),E.Kc(1),E.Rb()),2&t){var i=e.$implicit;E.zb(1),E.Lc(i.amount)}}function mo(t,e){1&t&&(E.Sb(0,"span",119),E.Kc(1,"Time"),E.Rb())}function vo(t,e){if(1&t&&(E.Sb(0,"span",120),E.Kc(1),E.hc(2,"date"),E.Rb()),2&t){var i=e.$implicit;E.zb(1),E.Lc(E.jc(2,1,i.time_Start,"HH:mm:ss"))}}function So(t,e){if(1&t&&(E.Sb(0,"div",99),E.Sb(1,"h3",112),E.Kc(2),E.Rb(),E.Sb(3,"button",101),E.cc("click",function(){return e.$implicit.dismiss("Cross click")}),E.Sb(4,"span",102),E.Kc(5,"\xd7"),E.Rb(),E.Rb(),E.Rb(),E.Sb(6,"div",103),E.Sb(7,"ejs-grid",113,114),E.Sb(9,"e-columns"),E.Sb(10,"e-column",115),E.Ic(11,go,2,0,"ng-template",null,49,E.Jc),E.Ic(13,bo,2,1,"ng-template",null,13,E.Jc),E.Rb(),E.Sb(15,"e-column",116),E.Ic(16,fo,2,0,"ng-template",null,49,E.Jc),E.Ic(18,po,2,1,"ng-template",null,13,E.Jc),E.Rb(),E.Sb(20,"e-column",117),E.Ic(21,mo,2,0,"ng-template",null,49,E.Jc),E.Ic(23,vo,3,4,"ng-template",null,13,E.Jc),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Sb(25,"div",108),E.Sb(26,"button",118),E.cc("click",function(){return e.$implicit.close("Close click")}),E.Kc(27," Close "),E.Rb(),E.Rb()),2&t){var i=E.gc();E.zb(2),E.Nc("Mix ",i.glueMix_name," - Total Amount: ",i.total_amount,"kg"),E.zb(5),E.mc("dataSource",i.dataHistoryMixed)("searchSettings",i.searchSettings)("sortSettings",i.sortSettings)}}function yo(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"Glue")," ")}function ko(t,e){if(1&t){var i=E.Tb();E.Sb(0,"ejs-dropdownlist",124,125),E.cc("filtering",function(t){return E.Bc(i),E.gc(2).onFilteringGlueDispatch(t)})("select",function(t){return E.Bc(i),E.gc(2).onChangeGlueDispatch(t)}),E.hc(2,"translate"),E.Rb()}if(2&t){var n=E.gc(2);E.mc("dataSource",n.glueDispatchList)("value",n.glueNameIDDispatch)("placeholder",E.ic(2,5,"Select glue"))("fields",n.fieldsBPFC)("allowFiltering",!0)}}function Do(t,e){if(1&t){var i=E.Tb();E.Sb(0,"div",99),E.Sb(1,"h4",100),E.Kc(2,"Addition"),E.Rb(),E.Sb(3,"button",101),E.cc("click",function(){return e.$implicit.dismiss("Cross click")}),E.Sb(4,"span",102),E.Kc(5,"\xd7"),E.Rb(),E.Rb(),E.Rb(),E.Sb(6,"div",103),E.Sb(7,"ejs-grid",121,122),E.cc("actionBegin",function(t){return E.Bc(i),E.gc().actionBeginAdditionDispatch(t)}),E.Sb(9,"e-columns"),E.Sb(10,"e-column",123),E.Ic(11,yo,2,3,"ng-template",null,49,E.Jc),E.Ic(13,ko,3,7,"ng-template",null,107,E.Jc),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Sb(15,"div",108),E.Sb(16,"button",109),E.cc("click",function(){return e.$implicit.close("Close click")}),E.Kc(17," Close "),E.Rb(),E.Rb()}if(2&t){var n=E.gc();E.zb(7),E.mc("dataSource",n.dataAdditionDispatch)("searchSettings",n.searchSettings)("allowExcelExport",!0)("toolbar",n.toolbarAdditionDispatch)("editSettings",n.editSettings)}}var xo,Co=((xo=function(){function e(t,n,a,o,c,s,r,l,u,d,h,g){var b=this;i(this,e),this.planService=t,this.buildingService=n,this.bottomFactoryService=a,this.alertify=o,this.modalService=c,this.dataService=s,this.route=r,this.router=l,this.datePipe=u,this.authService=d,this.spinner=h,this.todolistService=g,this.Glue=[],this.dataAddition=[],this.dataAdditionDispatch=[],this.dataHistoryMixed=[],this.fieldsBPFC={text:"name",value:"name"},this.AddGlueNameID=0,this.AddGlueID=0,this.AddEstimatedStartTime=new Date,this.AddEstimatedFinishTime=new Date,this.startWorkingTime=new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDay(),7,0,0),this.finishWorkingTime=new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDay(),16,30,0),this.toolbarAddition=["Add","Cancel"],this.toolbarAdditionDispatch=["Add","Cancel"],this.total_amount=null,this.glueMix_name=null,this.searchSettings={hierarchyMode:"Parent"},this.fieldsBuildings={text:"name",value:"id"},this.subscription=[],this.glueName="",this.todoTotal=0,this.doneTotal=0,this.total=0,this.percentageOfDone=0,this.doneTotalDispatch=0,this.dispatchTotal=0,this.todoDispatchTotal=0,this.delayDispatchTotal=0,this.percentageOfDoneDispatch=0,this.hasShowFullScreen=!0,this.delayTotal=0,this.RUBBER=ii.RUBBER,this.TODO="todo",this.DONE="done",this.DELAY="delay",this.DISPATCH="dispatch",this.DISPATCH_DELAY="dispatchDelay",this.EVA_UV="EVA_UV",this.tabs=[this.TODO,this.DONE,this.DELAY,this.DISPATCH,this.DISPATCH_DELAY,this.EVA_UV],this.current_Date_Time=this.datePipe.transform(new Date,"HH:mm"),this.doneDispatchTotal=0,this.onFilteringBuilding=function(t){var e=new N.h;e=""!==t.text?e.where("name","contains",t.text,!0):e,t.updateData(b.buildings,e)},this.onFiltering=function(t){var e=new N.h;e=""!==t.text?e.where("name","contains",t.text,!0):e},this.onFilteringGlueDispatch=function(t){var e=new N.h;e=""!==t.text?e.where("name","contains",t.text,!0):e};var f=JSON.parse(localStorage.getItem("level"));this.role=f,this.building=JSON.parse(localStorage.getItem("building")),this.buildingID=+localStorage.getItem("buildingID")}return a(e,[{key:"fullscreenchange",value:function(t){}},{key:"ngOnDestroy",value:function(){this.subscription.forEach(function(t){return t.unsubscribe()}),ti.a.state===ei.b.Connected&&ti.a.stop().then().catch(function(t){return console.log(t)})}},{key:"ngAfterViewInit",value:function(){}},{key:"ngOnInit",value:function(){var t=this;this.focusDone=this.TODO,this.isShowTab=this.TODO,this.hasCloseScreen=!1,this.IsAdmin=!1,this.checkRole(),this.onEventHub(),this.gridConfig(),this.subscription.push(this.todolistService.getValue().subscribe(function(e){null!==e&&(t.buildingID=t.building[0].id,t.loadData())})),this.onRouteChange()}},{key:"onEventHub",value:function(){var t=this;ti.a.state===ei.b.Connected&&(ti.a.on("ReloadTodo",function(){t.isShowTab===t.TODO&&(t.loadData(),console.log("Reload Todo",""))}),ti.a.on("ReloadDispatch",function(){t.isShowTab===t.DISPATCH&&(t.loadData(),console.log("Reload dispatch",""))}))}},{key:"onRouteChange",value:function(){var t=this;this.route.data.subscribe(function(e){void 0!==t.route.snapshot.params.glueName&&(t.glueName=t.route.snapshot.params.glueName.includes("%2B")?t.route.snapshot.params.glueName.replace(/\%2B/g,"+"):t.route.snapshot.params.glueName),0===t.buildingID&&(t.glueName="");var i=t.route.snapshot.params.tab;switch(i){case t.TODO:case t.DELAY:case t.DONE:case t.DISPATCH:case t.DISPATCH_DELAY:case t.EVA_UV:t.isShowTab=i,t.focusDone=i,t.loadData()}})}},{key:"getBuilding",value:function(t){var e=this;this.buildingService.getBuildings().subscribe(function(i){return Object(P.a)(e,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.buildings=i.filter(function(t){return 2===t.level}),t();case 1:case"end":return e.stop()}},e,this)}))});var i=+JSON.parse(localStorage.getItem("user")).User.ID;this.authService.getBuildingUserByUserID(i).subscribe(function(i){e.buildings=i.data,t()})}},{key:"cancelRange",value:function(){var t=this,e=this.gridTodo.getSelectedRecords().map(function(t){return{id:t.id,lineNames:t.lineNames}});this.todolistService.cancelRange(e).subscribe(function(e){t.alertify.success("X\xf3a th\xe0nh c\xf4ng! <br> Success!")})}},{key:"cancel",value:function(t){var e=this;this.alertify.confirm("Cancel","B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n h\u1ee7y keo n\xe0y kh\xf4ng? Are you sure you want to get rid of this data?",function(){e.todolistService.cancel({id:t.id,lineNames:t.lineNames}).subscribe(function(t){e.todo(),e.alertify.success("X\xf3a th\xe0nh c\xf4ng! <br> Success!")})})}},{key:"onChangeBuilding",value:function(t){this.buildingID=t.itemData.id,this.buildingName=t.itemData.name;var e=JSON.stringify([t.itemData]);localStorage.setItem("buildingID",t.itemData.id),localStorage.setItem("building",e),localStorage.setItem("isSTF",t.itemData.isSTF),this.isSTF=t.itemData.isSTF,this.building=[t.itemData],this.loadData()}},{key:"onSelectBuildingToDo",value:function(t){this.buildingID=t.itemData.id,this.buildingName=t.itemData.name;var e=JSON.stringify([t.itemData]);localStorage.setItem("buildingID",t.itemData.id),localStorage.setItem("building",e),this.building=[t.itemData],localStorage.setItem("isSTF",t.itemData.isSTF),this.isSTF=t.itemData.isSTF,this.loadData()}},{key:"onSelectBuildingDelay",value:function(t){this.buildingID=t.itemData.id,this.buildingName=t.itemData.name,localStorage.setItem("buildingID",t.itemData.id);var e=JSON.stringify([t.itemData]);localStorage.setItem("building",e),this.building=[t.itemData],this.loadData()}},{key:"onSelectBuildingDone",value:function(t){this.buildingID=t.itemData.id,this.buildingName=t.itemData.name,localStorage.setItem("buildingID",t.itemData.id);var e=JSON.stringify([t.itemData]);localStorage.setItem("building",e),this.building=[t.itemData],this.loadData()}},{key:"loadData",value:function(){if(this.isSTF=JSON.parse(localStorage.getItem("isSTF")),!0===this.isSTF)switch(this.isShowTab){case this.TODO:this.todoSTF();break;case this.DELAY:this.undoneSTF();break;case this.DONE:this.doneSTF();break;case this.DISPATCH_DELAY:this.dispatchListDelaySTF();break;case this.DISPATCH:this.dispatchListSTF();break;case this.EVA_UV:this.EVA_UVList()}else switch(this.isShowTab){case this.TODO:this.todo();break;case this.DELAY:this.delay();break;case this.DONE:this.done();break;case this.DISPATCH_DELAY:this.dispatchListDelay();break;case this.DISPATCH:this.dispatchList();break;case this.EVA_UV:this.EVA_UVList()}}},{key:"isWorkerRole",value:function(){return 4===this.role.id}},{key:"isDispatcherRole",value:function(){return 6===this.role.id}},{key:"isAdminRole",value:function(){return 1===this.role.id}},{key:"isStaffRole",value:function(){return 3===this.role.id}},{key:"isSupervisorRole",value:function(){return 2===this.role.id}},{key:"checkRole",value:function(){var t=this;switch(this.role.id){case 1:case 2:case 3:case 4:this.IsAdmin=!0;var e=+localStorage.getItem("buildingID");this.building=JSON.parse(localStorage.getItem("building")),this.getBuilding(0===e?function(){t.alertify.message("Please select a building!",!0)}:function(){t.buildingID=e,t.isShowTab=t.TODO,t.focusDone=t.TODO,t.loadData(),t.todoAddition(),t.dispatchAddition()});break;case 6:this.building=JSON.parse(localStorage.getItem("building")),this.getBuilding(function(){t.buildingID=t.building[0].id,t.isShowTab=t.DISPATCH,t.focusDone=t.DISPATCH,t.loadData(),t.todoAddition(),t.dispatchAddition()})}}},{key:"EVA_UVList",value:function(){var t=this;this.bottomFactoryService.EVAUVList(this.buildingID).subscribe(function(e){t.EVAUVData=e.data,t.todoTotal=e.todoTotal,t.doneTotal=e.doneTotal,t.total=e.total,t.delayTotal=e.delayTotal,t.percentageOfDone=e.percentageOfDone,t.dispatchTotal=e.dispatchTotal,t.todoDispatchTotal=e.todoDispatchTotal,t.delayDispatchTotal=e.delayDispatchTotal,t.doneDispatchTotal=e.doneDispatchTotal,t.percentageOfDoneDispatch=e.percentageOfDoneDispatch})}},{key:"dispatchList",value:function(){var t=this;this.todolistService.dispatchList(this.buildingID).subscribe(function(e){t.dispatchData=e.data,t.todoTotal=e.todoTotal,t.doneTotal=e.doneTotal,t.total=e.total,t.delayTotal=e.delayTotal,t.percentageOfDone=e.percentageOfDone,t.dispatchTotal=e.dispatchTotal,t.todoDispatchTotal=e.todoDispatchTotal,t.delayDispatchTotal=e.delayDispatchTotal,t.doneDispatchTotal=e.doneDispatchTotal,t.percentageOfDoneDispatch=e.percentageOfDoneDispatch})}},{key:"dispatchListDelay",value:function(){var t=this;this.todolistService.dispatchListDelay(this.buildingID).subscribe(function(e){t.dispatchData=e.data,t.todoTotal=e.todoTotal,t.doneTotal=e.doneTotal,t.total=e.total,t.delayTotal=e.delayTotal,t.percentageOfDone=e.percentageOfDone,t.dispatchTotal=e.dispatchTotal,t.todoDispatchTotal=e.todoDispatchTotal,t.delayDispatchTotal=e.delayDispatchTotal,t.doneDispatchTotal=e.doneDispatchTotal,t.percentageOfDoneDispatch=e.percentageOfDoneDispatch})}},{key:"todo",value:function(){var t=this;this.todolistService.todo(this.buildingID).subscribe(function(e){t.data=e.data,t.todoTotal=e.todoTotal,t.doneTotal=e.doneTotal,t.total=e.total,t.delayTotal=e.delayTotal,t.percentageOfDone=e.percentageOfDone,t.dispatchTotal=e.dispatchTotal,t.todoDispatchTotal=e.todoDispatchTotal,t.delayDispatchTotal=e.delayDispatchTotal,t.doneDispatchTotal=e.doneDispatchTotal,t.percentageOfDoneDispatch=e.percentageOfDoneDispatch})}},{key:"todoAddition",value:function(){var t=this;this.todolistService.todoAddition(this.buildingID).subscribe(function(e){t.Glue=e.data.map(function(t){if(!1===t.abnormalStatus)return{id:t.id,planID:t.planID,name:"".concat(t.glueName," | ").concat(t.lineNames.join(",")),glueID:t.glueID,glueNameID:t.glueNameID,supplier:t.supplier,estimatedStartTime:t.estimatedStartTime,estimatedFinishTime:t.estimatedFinishTime}})})}},{key:"dispatchAddition",value:function(){var t=this;this.todolistService.dispatchAddition(this.buildingID).subscribe(function(e){t.glueDispatchList=e.data.map(function(t){return{id:t.id,planID:t.planID,name:"".concat(t.glueName," | ").concat(t.lineNames.join(",")),glueID:t.glueID,glueNameID:t.glueNameID,supplier:t.supplier,estimatedStartTime:t.estimatedStartTime,estimatedFinishTime:t.estimatedFinishTime}})})}},{key:"delay",value:function(){var t=this;this.todolistService.delay(this.buildingID).subscribe(function(e){t.data=e.data,t.todoTotal=e.todoTotal,t.doneTotal=e.doneTotal,t.delayTotal=e.delayTotal,t.total=e.total,t.percentageOfDone=e.percentageOfDone,t.dispatchTotal=e.dispatchTotal,t.todoDispatchTotal=e.todoDispatchTotal,t.delayDispatchTotal=e.delayDispatchTotal,t.doneDispatchTotal=e.doneDispatchTotal,t.percentageOfDoneDispatch=e.percentageOfDoneDispatch})}},{key:"done",value:function(){var t=this;this.todolistService.done(this.buildingID).subscribe(function(e){t.doneData=e.data,t.todoTotal=e.todoTotal,t.doneTotal=e.doneTotal,t.delayTotal=e.delayTotal,t.total=e.total,t.percentageOfDone=e.percentageOfDone,t.dispatchTotal=e.dispatchTotal,t.todoDispatchTotal=e.todoDispatchTotal,t.doneDispatchTotal=e.doneDispatchTotal,t.delayDispatchTotal=e.delayDispatchTotal,t.percentageOfDoneDispatch=e.percentageOfDoneDispatch})}},{key:"gridConfig",value:function(){this.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},this.sortSettings={},this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"},this.toolbarOptions=["Search"]}},{key:"dataBoundDone",value:function(){this.gridDone.autoFitColumns()}},{key:"dataBound",value:function(){}},{key:"createdDispatchGrid",value:function(){void 0!==this.glueName&&this.gridDispatch.search(this.glueName)}},{key:"createdTodoGrid",value:function(){void 0!==this.glueName&&this.gridTodo.search(this.glueName)}},{key:"cancelBtnGridTodoClick",value:function(t){switch(this.glueName="",this.isShowTab){case this.TODO:case this.DELAY:this.gridTodo.searchSettings.key="";break;case this.DISPATCH:case this.DISPATCH_DELAY:this.gridDispatch.searchSettings.key="";break;case this.DONE:this.gridDone.searchSettings.key=""}}},{key:"createdToolbar",value:function(){}},{key:"createdTodo",value:function(){var e,i=window.location.pathname,n=t(this.tabs);try{for(n.s();!(e=n.n()).done;){var a=e.value;if(i.includes("-2/"+a)){this.focusDone=a,this.isShowTab=a;break}this.focusDone=this.TODO,this.isShowTab=this.TODO}}catch(g){n.e(g)}finally{n.f()}console.log("oninit",this.isShowTab,this.focusDone);var o=this.toolbarTodo.element,c=document.createElement("span");c.className="e-clear-icon",c.id=o.id+"clear",c.onclick=this.cancelBtnGridTodoClick.bind(this),o.querySelector(".e-toolbar-item .e-input-group").appendChild(c);var s=this.toolbarTodo.element.querySelector("#todo"),r=this.toolbarTodo.element.querySelector("#delay"),l=this.toolbarTodo.element.querySelector("#delayDispatchList"),u=this.toolbarTodo.element.querySelector("#dispatch"),d=this.toolbarTodo.element.querySelector("#done"),h=this.toolbarTodo.element.querySelector("#eva_uv");switch(this.isShowTab){case this.TODO:null==s||s.classList.add("todo"),null==r||r.classList.remove("todo"),null==l||l.classList.remove("todo"),null==u||u.classList.remove("todo"),null==d||d.classList.remove("todo"),null==h||h.classList.remove("todo");break;case this.DELAY:null==r||r.classList.add("todo"),null==s||s.classList.remove("todo"),null==s||s.classList.remove("todo"),null==d||d.classList.remove("todo"),null==u||u.classList.remove("todo"),null==h||h.classList.remove("todo");break;case this.DISPATCH:null==u||u.classList.add("todo"),null==s||s.classList.remove("todo"),null==r||r.classList.remove("todo"),null==d||d.classList.remove("todo"),null==l||l.classList.remove("todo"),null==h||h.classList.remove("todo");break;case this.DISPATCH_DELAY:null==l||l.classList.add("todo"),null==s||s.classList.remove("todo"),null==r||r.classList.remove("todo"),null==d||d.classList.remove("todo"),null==u||u.classList.remove("todo"),null==h||h.classList.remove("todo");break;case this.DONE:null==d||d.classList.add("todo"),null==s||s.classList.remove("todo"),null==r||r.classList.remove("todo"),null==u||u.classList.remove("todo"),null==l||l.classList.remove("todo"),null==h||h.classList.remove("todo");break;case this.EVA_UV:null==h||h.classList.add("todo"),null==s||s.classList.remove("todo"),null==r||r.classList.remove("todo"),null==u||u.classList.remove("todo"),null==l||l.classList.remove("todo"),null==d||d.classList.remove("todo")}null!==s&&(s.onclick=function(){null==s||s.classList.add("todo"),null==r||r.classList.remove("todo"),null==l||l.classList.remove("todo"),null==d||d.classList.remove("todo"),null==u||u.classList.remove("todo"),null==h||h.classList.remove("todo")}),null!==r&&(r.onclick=function(){null==r||r.classList.add("todo"),null==s||s.classList.remove("todo"),null==s||s.classList.remove("todo"),null==d||d.classList.remove("todo"),null==u||u.classList.remove("todo"),null==h||h.classList.remove("todo")}),null!==u&&(u.onclick=function(){null==u||u.classList.add("todo"),null==s||s.classList.remove("todo"),null==r||r.classList.remove("todo"),null==d||d.classList.remove("todo"),null==l||l.classList.remove("todo"),null==h||h.classList.remove("todo")}),null!==l&&(l.onclick=function(){null==l||l.classList.add("todo"),null==s||s.classList.remove("todo"),null==r||r.classList.remove("todo"),null==d||d.classList.remove("todo"),null==u||u.classList.remove("todo"),null==h||h.classList.remove("todo")}),null!==d&&(d.onclick=function(){null==d||d.classList.add("todo"),null==s||s.classList.remove("todo"),null==r||r.classList.remove("todo"),null==u||u.classList.remove("todo"),null==l||l.classList.remove("todo"),null==h||h.classList.remove("todo")}),null!==h&&(h.onclick=function(){null==h||h.classList.add("todo"),null==s||s.classList.remove("todo"),null==r||r.classList.remove("todo"),null==l||l.classList.remove("todo"),null==d||d.classList.remove("todo"),null==u||u.classList.remove("todo")})}},{key:"searchDone",value:function(t){this.focusDone===this.DONE?this.gridDone.search(this.glueName):this.focusDone===this.TODO||this.focusDone===this.DELAY?this.gridTodo.search(this.glueName):this.focusDone===this.DISPATCH||this.focusDone===this.DISPATCH_DELAY?this.gridDispatch.search(this.glueName):this.focusDone===this.EVA_UV&&this.gridEVAUV.search(this.glueName)}},{key:"onClickToolbarTop",value:function(t){var e=this,i=t.originalEvent.target.closest("button");switch(this.glueName="",null==i?void 0:i.id){case"excelExport":this.spinner.show(),this.todolistService.exportExcel(this.buildingID).subscribe(function(t){new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});var i=window.URL.createObjectURL(t),n=document.createElement("a");n.href=i;var a=new Date;n.download="".concat(a.getFullYear()).concat(a.getMonth()).concat(a.getDay(),"_DoneList.xlsx"),n.click(),e.spinner.hide()});break;case"excelExport2":this.spinner.show(),this.todolistService.exportExcel2(this.buildingID).subscribe(function(t){new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});var i=window.URL.createObjectURL(t),n=document.createElement("a");n.href=i;var a=new Date;n.download="".concat(a.getFullYear()).concat(a.getMonth()).concat(a.getDay(),"_DoneList(new).xlsx"),n.click(),e.spinner.hide()})}}},{key:"onClickToolbar",value:function(t){var e=this,i=t.originalEvent.target.closest("button");switch(this.glueName="",null==i?void 0:i.id){case"addition":this.openAddition();break;case"done":this.isShowTab=this.DONE,this.focusDone=this.DONE,this.done(),this.router.navigate(["/ec/execution/todolist-2/".concat(this.DONE,"/").concat(this.glueName)]);break;case"todo":this.isShowTab=this.TODO,this.focusDone=this.TODO,this.todo(),this.router.navigate(["/ec/execution/todolist-2/".concat(this.TODO,"/").concat(this.glueName)]);break;case"delay":this.isShowTab=this.DELAY,this.focusDone=this.DELAY,this.delay(),this.router.navigate(["/ec/execution/todolist-2/".concat(this.DELAY,"/").concat(this.glueName)]);break;case"delayDispatchList":this.isShowTab=this.DISPATCH_DELAY,this.focusDone=this.DISPATCH_DELAY,this.dispatchListDelay(),this.router.navigate(["/ec/execution/todolist-2/".concat(this.DISPATCH_DELAY,"/").concat(this.glueName)]);break;case"dispatch":this.isShowTab=this.DISPATCH,this.focusDone=this.DISPATCH,this.dispatchList(),this.router.navigate(["/ec/execution/todolist-2/".concat(this.DISPATCH,"/").concat(this.glueName)]);break;case"eva_uv":this.isShowTab=this.EVA_UV,this.focusDone=this.EVA_UV,this.EVA_UVList(),this.router.navigate(["/ec/execution/todolist-2/".concat(this.EVA_UV,"/").concat(this.glueName)]);break;case"excelExport":this.spinner.show(),this.todolistService.exportExcel(this.buildingID).subscribe(function(t){new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});var i=window.URL.createObjectURL(t),n=document.createElement("a");n.href=i,n.download="doneListReport.xlsx",n.click(),e.spinner.hide()});break;case"excelExport2":this.spinner.show(),this.todolistService.exportExcel2(this.buildingID).subscribe(function(t){new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});var i=window.URL.createObjectURL(t),n=document.createElement("a");n.href=i,n.download="report(new).xlsx",n.click(),e.spinner.hide()})}}},{key:"toolbarClick",value:function(t){switch(t.item.id){case"Done":this.isShowTab=this.DONE,this.done();break;case"Undone":this.isShowTab=this.TODO,this.todo();break;case"Delay":this.isShowTab=this.DELAY,this.todo();break;case"Dispatch":this.isShowTab=this.DISPATCH,this.dispatchList()}}},{key:"actionComplete",value:function(t){var e;"beginEdit"===t.requestType&&(null===(e=this.setFocus)||void 0===e?void 0:e.field)&&t.form.elements.namedItem("quantity").focus()}},{key:"onDoubleClick",value:function(t){this.setFocus=t.column}},{key:"rowDB",value:function(t){!0===t.data.abnormalStatus&&t.row.classList.add("bgcolor")}},{key:"rowDBDispatch",value:function(t){var e=t.data;t.row.classList.add(!0===e.abnormalStatus?"color-code-abnormal":"color-code-"+e.colorCode)}},{key:"rowDBDispatchDelay",value:function(t){var e=t.data;t.row.classList.add(!0===e.abnormalStatus?"color-code-abnormal":"color-code-"+e.colorCode)}},{key:"onDoubleClickDone",value:function(t){"deliveredAmount"===t.column.field&&this.openDispatchModalDoneList(t.rowData),"mixedConsumption"===t.column.field&&this.openMixHistory(t.rowData)}},{key:"openMixHistory",value:function(t){var e=this;this.modalReference=this.modalService.open(this.historyMixed,{size:"lg",backdrop:"static",keyboard:!1}),this.todolistService.MixedHistory(t.mixingInfoID).subscribe(function(i){e.glueMix_name=t.glueName,e.total_amount=t.mixedConsumption,i.status&&(e.dataHistoryMixed=i.result)})}},{key:"actionBegin",value:function(t){"save"===t.requestType&&"edit"===t.action&&(t.data.quantity!==t.previousData.quantity||(t.cancel=!0))}},{key:"onBeforeRender",value:function(t,e,i){var n=this.tooltip.filter(function(t,e){return e===+i})[0];n.content="Loading...",n.dataBind(),this.planService.getBPFCByGlue(e.glueName).subscribe(function(t){n.content=t.join("<br>"),n.dataBind()})}},{key:"goToStir",value:function(t){null!==t.finishMixingTime?this.router.navigate(["/ec/execution/todolist-2/stir/".concat(this.isShowTab,"/").concat(t.mixingInfoID,"/").concat(t.glueName)]):this.alertify.warning("H\xe3y th\u1ef1c hi\u1ec7n b\u01b0\u1edbc tr\u1ed9n keo tr\u01b0\u1edbc!",!0)}},{key:"goToShake",value:function(t){return this.router.navigate(["/ec/execution/todolist-2/shake/".concat(this.isShowTab,"/").concat(t.mixingInfoID)])}},{key:"goToMixing",value:function(t){return["/ec/execution/todolist-2/mixing/".concat(this.isShowTab,"/").concat(t.glueID,"/").concat(t.estimatedStartTime,"/").concat(t.estimatedFinishTime,"/").concat(t.standardConsumption)]}},{key:"openDispatchModal",value:function(t){var e=this;if(null===t.printTime&&t.glueName.includes(" + "))this.alertify.warning("H\xe3y th\u1ef1c hi\u1ec7n b\u01b0\u1edbc in keo tr\u01b0\u1edbc!",!0);else if(0!==t.mixingInfoID||t.glueName.includes(" + ")){var i=this.modalService.open(Ui,{size:"xl",backdrop:"static",keyboard:!1});i.componentInstance.value=t,i.result.then(function(t){},function(t){e.todolistService.setValue(!0)})}else this.alertify.warning("H\xe3y th\u1ef1c hi\u1ec7n b\u01b0\u1edbc in keo tr\u01b0\u1edbc!<br> Please perform glue printing first!",!0)}},{key:"openDispatchModalDoneList",value:function(t){var e=this;if(null===t.printTime&&t.glueName.includes(" + "))this.alertify.warning("H\xe3y th\u1ef1c hi\u1ec7n b\u01b0\u1edbc in keo tr\u01b0\u1edbc!",!0);else if(0!==t.mixingInfoID||t.glueName.includes(" + ")){var i=this.modalService.open(wi,{size:"xl",backdrop:"static",keyboard:!1});i.componentInstance.value=t,i.result.then(function(t){},function(t){e.todolistService.setValue(!0)})}else this.alertify.warning("H\xe3y th\u1ef1c hi\u1ec7n b\u01b0\u1edbc in keo tr\u01b0\u1edbc!<br> Please perform glue printing first!",!0)}},{key:"openPrintModal",value:function(t){var e=this;this.todolistService.findPrintGlue(t.mixingInfoID).subscribe(function(i){if(0===(null==i?void 0:i.id)&&t.glueName.includes(" + "))e.alertify.error("Please mixing this glue first!",!0);else{var n=e.modalService.open(di,{size:"md",backdrop:"static",keyboard:!1});n.componentInstance.data=i,n.componentInstance.value=t,n.result.then(function(t){},function(t){})}})}},{key:"openPrintModalDispatchList",value:function(t){var e=this.modalService.open(Ai,{size:"md",backdrop:"static",keyboard:!1});e.componentInstance.value=t,e.result.then(function(t){},function(t){})}},{key:"lockDispatch",value:function(t){return""}},{key:"openFullscreen",value:function(){var t=this.divRef.nativeElement;t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen(),this.hasCloseScreen=!0,this.hasShowFullScreen=!1}},{key:"closeFullscreen",value:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&window.top.document.msExitFullscreen(),this.hasCloseScreen=!1,this.hasShowFullScreen=!0}},{key:"reloadPage",value:function(){var t=this;this.router.navigateByUrl("/TodolistComponent",{skipLocationChange:!0}).then(function(){t.router.navigate(["/ec/execution/todolist-2/"+t.isShowTab])})}},{key:"onChangeGlue",value:function(t){this.AddGlueNameID=t.itemData.glueNameID,this.AddGlueID=t.itemData.glueID,this.AddEstimatedStartTime=t.itemData.estimatedStartTime,this.AddEstimatedFinishTime=t.itemData.estimatedFinishTime,this.startWorkingTime=new Date(t.itemData.estimatedStartTime),this.finishWorkingTime=new Date(t.itemData.estimatedFinishTime)}},{key:"onChangeGlueDispatch",value:function(t){this.glueNameIDDispatch=t.itemData.glueNameID}},{key:"actionBeginAddition",value:function(t){var e=this;"save"===t.requestType&&this.todolistService.addition(this.AddGlueNameID,this.buildingID,this.AddEstimatedStartTime,this.AddEstimatedFinishTime).subscribe(function(i){i?(e.alertify.success(i.message),e.modalReference.dismiss(),e.loadData()):(e.alertify.error(i.message),t.cancel=!0)})}},{key:"actionBeginAdditionDispatch",value:function(t){var e=this;"save"===t.requestType&&this.todolistService.additionDispatch(this.glueNameIDDispatch).subscribe(function(){e.alertify.success("Success!"),e.modalReference.dismiss(),e.dataAdditionDispatch=[],e.loadData()},function(i){e.alertify.error(i),t.cancel=!0,e.dataAdditionDispatch=[]})}},{key:"openAddition",value:function(){this.modalReference=this.modalService.open(this.addition,{size:"lg",backdrop:"static",keyboard:!1})}},{key:"openAdditionDispatch",value:function(){this.modalReference=this.modalService.open(this.additionDispatch,{size:"lg",backdrop:"static",keyboard:!1})}},{key:"openDispatchEVAUV",value:function(t){var e=this.modalService.open(Ze,{size:"lg",backdrop:"static",keyboard:!1});e.componentInstance.data=t,e.result.then(function(t){},function(t){})}},{key:"openSubpackage",value:function(t){var e=this.modalService.open(je.a,{size:"lg",backdrop:"static",keyboard:!1});e.componentInstance.data=t,e.result.then(function(t){},function(t){})}},{key:"doneSTF",value:function(){var t=this;this.bottomFactoryService.done(this.buildingID).subscribe(function(e){t.doneData=e.data,t.todoTotal=e.todoTotal,t.doneTotal=e.doneTotal,t.delayTotal=e.delayTotal,t.total=e.total,t.percentageOfDone=e.percentageOfDone,t.dispatchTotal=e.dispatchTotal,t.todoDispatchTotal=e.todoDispatchTotal,t.doneDispatchTotal=e.doneDispatchTotal,t.delayDispatchTotal=e.delayDispatchTotal,t.percentageOfDoneDispatch=e.percentageOfDoneDispatch})}},{key:"todoSTF",value:function(){var t=this;this.bottomFactoryService.todo(this.buildingID).subscribe(function(e){t.data=e.data,t.todoTotal=e.todoTotal,t.doneTotal=e.doneTotal,t.total=e.total,t.delayTotal=e.delayTotal,t.percentageOfDone=e.percentageOfDone,t.dispatchTotal=e.dispatchTotal,t.todoDispatchTotal=e.todoDispatchTotal,t.delayDispatchTotal=e.delayDispatchTotal,t.doneDispatchTotal=e.doneDispatchTotal,t.percentageOfDoneDispatch=e.percentageOfDoneDispatch})}},{key:"undoneSTF",value:function(){var t=this;this.bottomFactoryService.delay(this.buildingID).subscribe(function(e){t.data=e.data,t.todoTotal=e.todoTotal,t.doneTotal=e.doneTotal,t.delayTotal=e.delayTotal,t.total=e.total,t.percentageOfDone=e.percentageOfDone,t.dispatchTotal=e.dispatchTotal,t.todoDispatchTotal=e.todoDispatchTotal,t.delayDispatchTotal=e.delayDispatchTotal,t.doneDispatchTotal=e.doneDispatchTotal,t.percentageOfDoneDispatch=e.percentageOfDoneDispatch})}},{key:"dispatchListSTF",value:function(){var t=this;this.bottomFactoryService.dispatchList(this.buildingID).subscribe(function(e){t.dispatchData=e.data,t.todoTotal=e.todoTotal,t.doneTotal=e.doneTotal,t.total=e.total,t.delayTotal=e.delayTotal,t.percentageOfDone=e.percentageOfDone,t.dispatchTotal=e.dispatchTotal,t.todoDispatchTotal=e.todoDispatchTotal,t.delayDispatchTotal=e.delayDispatchTotal,t.doneDispatchTotal=e.doneDispatchTotal,t.percentageOfDoneDispatch=e.percentageOfDoneDispatch})}},{key:"dispatchListDelaySTF",value:function(){var t=this;this.bottomFactoryService.dispatchListDelay(this.buildingID).subscribe(function(e){t.dispatchData=e.data,t.todoTotal=e.todoTotal,t.doneTotal=e.doneTotal,t.total=e.total,t.delayTotal=e.delayTotal,t.percentageOfDone=e.percentageOfDone,t.dispatchTotal=e.dispatchTotal,t.todoDispatchTotal=e.todoDispatchTotal,t.delayDispatchTotal=e.delayDispatchTotal,t.doneDispatchTotal=e.doneDispatchTotal,t.percentageOfDoneDispatch=e.percentageOfDoneDispatch})}}]),e}()).\u0275fac=function(t){return new(t||xo)(E.Mb(kt.a),E.Mb(_.a),E.Mb(ze.a),E.Mb(F.a),E.Mb(h.b),E.Mb(Ct.a),E.Mb(B.a),E.Mb(B.c),E.Mb(s.d),E.Mb(xt.a),E.Mb(l.c),E.Mb(Dt.a))},xo.\u0275cmp=E.Gb({type:xo,selectors:[["app-todolist"]],viewQuery:function(t,e){var i;1&t&&(E.Gc(Gi,!0),E.Gc(Ji,!0),E.Gc(Qi,!0),E.Qc($i,!0),E.Qc(Vi,!0),E.Qc(qi,!0),E.Qc(Wi,!0),E.Qc(Yi,!0),E.Qc(Xi,!0),E.Qc(Zi,!0),E.Qc(tn,!0),E.Qc(en,!0),E.Qc(nn,!0),E.Qc(an,!0),E.Qc(on,!0),E.Qc(cn,!0),E.Qc(sn,!0),E.Qc(rn,!0)),2&t&&(E.xc(i=E.dc())&&(e.historyMixed=i.first),E.xc(i=E.dc())&&(e.addition=i.first),E.xc(i=E.dc())&&(e.additionDispatch=i.first),E.xc(i=E.dc())&&(e.toolbar=i.first),E.xc(i=E.dc())&&(e.toolbarTodo=i.first),E.xc(i=E.dc())&&(e.toolbarDone=i.first),E.xc(i=E.dc())&&(e.toolbarDelay=i.first),E.xc(i=E.dc())&&(e.toolbarDispatch=i.first),E.xc(i=E.dc())&&(e.toolbarDispatchDelay=i.first),E.xc(i=E.dc())&&(e.gridEVAUV=i.first),E.xc(i=E.dc())&&(e.gridDone=i.first),E.xc(i=E.dc())&&(e.gridAdditionDispatch=i.first),E.xc(i=E.dc())&&(e.gridTodo=i.first),E.xc(i=E.dc())&&(e.gridDelay=i.first),E.xc(i=E.dc())&&(e.gridDispatch=i.first),E.xc(i=E.dc())&&(e.gridDispatchDelay=i.first),E.xc(i=E.dc())&&(e.divRef=i.first),E.xc(i=E.dc())&&(e.tooltip=i))},hostBindings:function(t,e){1&t&&E.cc("fullscreenchange",function(t){return e.fullscreenchange(t)})},features:[E.yb([s.d])],decls:60,vars:36,consts:[["type","square-jelly-box","size","medium",3,"fullScreen"],[1,"loading"],[1,"card"],["fullScreen",""],[1,"control-section","e-tbar-section"],[1,"e-sample-resize-container"],[3,"created","clicked"],["toolbar",""],["prefixIcon","fa fa-cut",3,"tooltipText",4,"ngIf"],["id","excelExport","prefixIcon","fa fa-file-excel-o",3,"text"],["id","excelExport2","prefixIcon","fa fa-file-excel-o",3,"text"],["type","Separator"],["prefixIcon","e-copy-icon tb-icons",3,"tooltipText"],["template",""],["prefixIcon","e-bold-icon tb-icons","tooltipText","Bold"],["toolbarTodo",""],["id","todo","prefixIcon","fa fa-tasks",3,"text"],["id","eva_uv","prefixIcon","fa fa-tasks",3,"text",4,"ngIf"],["id","delay","prefixIcon","fa fa-clock",3,"text"],["id","dispatch","prefixIcon","fa fa-check",3,"text"],["id","delayDispatchList","prefixIcon","fa fa-clock",3,"text"],["id","done","prefixIcon","fa fa-check",3,"text"],["align","right"],[1,"card-body","p-0"],["id","gridTodo","showColumnMenu","true","allowSorting","true","allowResizing","true","gridLines","Both","height","600",3,"dataSource","searchSettings","allowExcelExport","actionBegin","actionComplete","rowDataBound","toolbarClick","created","dataBound","recordDoubleClick",4,"ngIf"],["id","gridDispatch","showColumnMenu","true","allowSorting","true","allowResizing","true","gridLines","Both","height","600",3,"dataSource","searchSettings","allowExcelExport","actionBegin","actionComplete","toolbarClick","created","dataBound","rowDataBound","recordDoubleClick",4,"ngIf"],["id","gridEVAUV","showColumnMenu","true","allowSorting","true","allowResizing","true","gridLines","Both","height","600",3,"dataSource","searchSettings","allowExcelExport","actionBegin","actionComplete","toolbarClick","created","dataBound","rowDataBound","recordDoubleClick",4,"ngIf"],["id","gridDone","showColumnMenu","true","allowSorting","true","allowResizing","true","gridLines","Both","height","600",3,"dataSource","searchSettings","allowExcelExport","actionBegin","actionComplete","rowDataBound","toolbarClick","dataBound","recordDoubleClick",4,"ngIf"],["addition",""],["historyMixed",""],["additionDispatch",""],["prefixIcon","fa fa-cut",3,"tooltipText"],["type","button",1,"e-tbar-btn","e-tbtn-txt","e-control","e-btn","e-lib",3,"click"],[1,"e-btn-icon","e-icons","e-icon-left","fas","fa-plus"],[1,"e-tbar-btn-text"],[1,"e-btn-icon","e-icons","e-icon-left","fas","fa-refresh"],["class","e-tbar-btn e-tbtn-txt e-control e-btn e-lib",3,"click",4,"ngIf"],[1,"e-tbar-btn","e-tbtn-txt","e-control","e-btn","e-lib",3,"click"],[1,"e-btn-icon","e-icons","e-icon-left","fa","fa-expand-arrows-alt"],[1,"e-btn-icon","e-icons","e-icon-left","fas","fa-compress-arrows-alt"],["placeholder","Select a building",3,"dataSource","fields","allowFiltering","value","filtering","change","select"],["id","eva_uv","prefixIcon","fa fa-tasks",3,"text"],["aria-disabled","false","title","Search",1,"e-toolbar-item","e-search-wrapper","e-toolbar-right"],["role","search",1,"e-input-group","e-search"],["id","toolbar_searchbar","autocomplete","off","placeholder","Search",1,"e-input",2,"width","178px",3,"ngModel","ngModelChange","change"],["id","toolbar_searchbutton","tabindex","-1","title","Search","aria-label","search",1,"e-input-group-icon","fa","fa-search","e-icons"],["id","gridTodo","showColumnMenu","true","allowSorting","true","allowResizing","true","gridLines","Both","height","600",3,"dataSource","searchSettings","allowExcelExport","actionBegin","actionComplete","rowDataBound","toolbarClick","created","dataBound","recordDoubleClick"],["gridTodo",""],["field","supplier","headerText","Supplier","width","100","textAlign","Center"],["headerTemplate",""],["field","glueName","headerText","Glue","width","170","textAlign","Left"],["field","lines","headerText","Line","width","300","textAlign","Left"],["field","estimatedStartTime","type","date","format","HH:mm","headerText","EST","width","100","textAlign","Center"],["field","estimatedFinishTime","type","date","format","HH:mm","headerText","EFT","width","100","textAlign","Center"],["field","option","headerText","Option","width","220","textAlign","Center"],["position","RightCenter","content","loading...",1,"fix-css",3,"beforeRender"],["tooltip",""],[3,"content"],[4,"ngIf"],["style","text-align: left;",4,"ngIf"],[2,"text-align","left"],[1,"btn-group"],["type","button","class","btn btn-sm btn-success",3,"ngClass","routerLink",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fa","fa-print"],["type","button",1,"btn","btn-sm","btn-success",3,"ngClass","routerLink"],[1,"fa","fa-glass"],["type","button","class","btn btn-sm btn-warning ml-1",3,"ngClass","click",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-warning","ml-1",3,"ngClass","click"],[1,"fa","fa-fan"],["type","button",1,"btn","btn-sm","btn-warning","ml-1",3,"click"],["id","gridDispatch","showColumnMenu","true","allowSorting","true","allowResizing","true","gridLines","Both","height","600",3,"dataSource","searchSettings","allowExcelExport","actionBegin","actionComplete","toolbarClick","created","dataBound","rowDataBound","recordDoubleClick"],["gridDispatch",""],["type","button",1,"btn","btn-sm","btn-info","ml-1",3,"ngClass","click"],[1,"fas","fa-balance-scale"],["id","gridEVAUV","showColumnMenu","true","allowSorting","true","allowResizing","true","gridLines","Both","height","600",3,"dataSource","searchSettings","allowExcelExport","actionBegin","actionComplete","toolbarClick","created","dataBound","rowDataBound","recordDoubleClick"],["type","button",1,"btn","btn-sm","btn-info","ml-1",3,"click"],["id","gridDone","showColumnMenu","true","allowSorting","true","allowResizing","true","gridLines","Both","height","600",3,"dataSource","searchSettings","allowExcelExport","actionBegin","actionComplete","rowDataBound","toolbarClick","dataBound","recordDoubleClick"],["gridDone",""],["field","jobType","headerText","Job Type","width","100","textAlign","Center"],["field","lines","headerText","Line","width","170","textAlign","Left"],["field","startMixingTime","type","date","format","HH:mm","headerText","SMT","width","160","textAlign","Center"],["field","finishMixingTime","type","date","format","HH:mm","headerText","FMT","width","160","textAlign","Center"],["field","startStirTime","type","date","format","HH:mm","headerText","SST","width","160","textAlign","Center"],["field","finishStirTime","type","date","format","HH:mm","headerText","FST","width","160","textAlign","Center"],["field","printTime","type","date","format","HH:mm","headerText","PT","width","160","textAlign","Center"],["field","dispatchTime","type","date","format","HH:mm","headerText","SDT","width","160","textAlign","Center"],["field","standardConsumption","headerText","Std. Con.","width","100","textAlign","Center"],["field","mixedConsumption","headerText","Mixed. Con.","width","100","textAlign","Center"],["field","deliveredAmount","headerText","Delivered. Con.","width","100","textAlign","Center"],["field","estimatedStartTime","type","date","format","HH:mm","headerText","EST","width","160","textAlign","Center"],["field","estimatedFinishTime","type","date","format","HH:mm","headerText","EFT","width","160","textAlign","Center"],[4,"ngIf","ngIfElse"],["second",""],["third",""],["four",""],["content","Standard Consumption"],["content","Mixing Consumption"],["content","Delivered Consumption"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["showColumnMenu","true","allowSorting","true","allowResizing","true","gridLines","Both",3,"dataSource","searchSettings","allowExcelExport","toolbar","sortSettings","editSettings","actionBegin","actionComplete","toolbarClick","recordDoubleClick"],["gridAddition",""],["field","name","headerText","Glue Name","width","290","textAlign","Center"],["editTemplate",""],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["popupHeight","300px","popupWidth","450px",3,"dataSource","placeholder","fields","allowFiltering","filtering","select"],["bpfcDropdownlist",""],[1,"modal-title",2,"color","red"],["showColumnMenu","true","allowSorting","true","allowResizing","true","gridLines","Both",3,"dataSource","searchSettings","sortSettings"],["gridMixedHistory",""],["field","ingredient_Name","headerText","Chemical","width","200","textAlign","Center"],["field","amount","headerText","Amount","width","120","textAlign","Center"],["field","endTime","type","date","headerText","Time","width","120","textAlign","Center"],["type","button",1,"btn","btn-success",3,"click"],[2,"color","red","font-size","20px"],[2,"font-size","20px"],["showColumnMenu","true","allowSorting","true","allowResizing","true","gridLines","Both",3,"dataSource","searchSettings","allowExcelExport","toolbar","editSettings","actionBegin"],["gridAdditionDispatch",""],["field","bpfcName","headerText","Glue Name","width","290","textAlign","Center"],["popupHeight","300px","popupWidth","450px",3,"dataSource","value","placeholder","fields","allowFiltering","filtering","select"],["additionDispatchDropdownlist",""]],template:function(t,e){1&t&&(E.Sb(0,"ngx-spinner",0),E.Sb(1,"p",1),E.Kc(2,"Loading data..."),E.Rb(),E.Rb(),E.Sb(3,"div",2,3),E.Sb(5,"div",4),E.Sb(6,"div",5),E.Sb(7,"ejs-toolbar",6,7),E.cc("created",function(){return e.createdToolbar()})("clicked",function(t){return e.onClickToolbarTop(t)}),E.Sb(9,"e-items"),E.Ic(10,un,4,3,"e-item",8),E.Nb(11,"e-item",9),E.hc(12,"translate"),E.Nb(13,"e-item",10),E.hc(14,"translate"),E.Nb(15,"e-item",11),E.Sb(16,"e-item",12),E.hc(17,"translate"),E.Ic(18,dn,5,3,"ng-template",null,13,E.Jc),E.Rb(),E.Sb(20,"e-item"),E.Ic(21,bn,2,2,"ng-template",null,13,E.Jc),E.Rb(),E.Nb(23,"e-item",11),E.Sb(24,"e-item",14),E.Ic(25,fn,1,4,"ng-template",null,13,E.Jc),E.Rb(),E.Rb(),E.Rb(),E.Sb(27,"ejs-toolbar",6,15),E.cc("created",function(){return e.createdTodo()})("clicked",function(t){return e.onClickToolbar(t)}),E.Sb(29,"e-items"),E.Nb(30,"e-item",16),E.hc(31,"translate"),E.Ic(32,pn,1,1,"e-item",17),E.Nb(33,"e-item",18),E.hc(34,"translate"),E.Nb(35,"e-item",11),E.Nb(36,"e-item",19),E.hc(37,"translate"),E.Nb(38,"e-item",20),E.hc(39,"translate"),E.Nb(40,"e-item",11),E.Nb(41,"e-item",21),E.hc(42,"translate"),E.Sb(43,"e-item",22),E.Ic(44,mn,4,1,"ng-template",null,13,E.Jc),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Sb(46,"div",23),E.Ic(47,Kn,31,3,"ejs-grid",24),E.Rb(),E.Sb(48,"div",23),E.Ic(49,qn,27,3,"ejs-grid",25),E.Rb(),E.Sb(50,"div",23),E.Ic(51,sa,31,3,"ejs-grid",26),E.Rb(),E.Sb(52,"div",23),E.Ic(53,ro,70,3,"ejs-grid",27),E.Rb(),E.Rb(),E.Ic(54,ho,18,6,"ng-template",null,28,E.Jc),E.Ic(56,So,28,5,"ng-template",null,29,E.Jc),E.Ic(58,Do,18,5,"ng-template",null,30,E.Jc),E.Rb()),2&t&&(E.mc("fullScreen",!1),E.zb(10),E.mc("ngIf",e.isShowTab===e.TODO),E.zb(1),E.nc("text",E.ic(12,20,"Report")),E.zb(2),E.oc("text","",E.ic(14,22,"Report")," 2"),E.zb(3),E.nc("tooltipText",E.ic(17,24,"Refresh Todolist")),E.zb(14),E.pc("text"," ",E.ic(31,26,"Todo")," (",e.todoTotal,")"),E.zb(2),E.mc("ngIf",e.isSTF),E.zb(1),E.pc("text"," ",E.ic(34,28,"UNDONE")," (",e.delayTotal,")"),E.zb(3),E.pc("text","",E.ic(37,30,"Dispatch")," (",e.todoDispatchTotal,")"),E.zb(2),E.pc("text"," ",E.ic(39,32,"Delay")," (",e.delayDispatchTotal,")"),E.zb(3),E.pc("text"," ",E.ic(42,34,"Done")," (",e.doneTotal,")"),E.zb(6),E.mc("ngIf",e.isShowTab==e.TODO||e.isShowTab==e.DELAY),E.zb(2),E.mc("ngIf",e.isShowTab==e.DISPATCH||e.isShowTab==e.DISPATCH_DELAY),E.zb(2),E.mc("ngIf",e.isShowTab==e.EVA_UV),E.zb(2),E.mc("ngIf",e.isShowTab==e.DONE))},directives:[l.a,w.c,w.b,s.n,w.a,d.c,r.b,r.g,r.j,x.j,b.d,I.d,I.b,x.e,x.b,b.c,I.c,I.a,x.d,x.a,k.b,s.l,B.d],pipes:[S.c,s.d],styles:[".e-icons[_ngcontent-%COMP%]   .e-columnmenu[_ngcontent-%COMP%]{color:#fff}.e-tooltip-wrap[_ngcontent-%COMP%]   .e-tip-content[_ngcontent-%COMP%]{color:#fff;font-size:16px;font-weight:700}.e-headercelldiv[_ngcontent-%COMP%]{font-size:12px!important}.e-grid[_ngcontent-%COMP%]   .e-headercell[_ngcontent-%COMP%]   ejs-tooltip[_ngcontent-%COMP%]{font-weight:700!important}.cursor-pointer[_ngcontent-%COMP%]{pointer-events:none!important}.delay[_ngcontent-%COMP%], .dispatch[_ngcontent-%COMP%], .dispatch-delay[_ngcontent-%COMP%], .done[_ngcontent-%COMP%], .todo[_ngcontent-%COMP%]{background:#545b62!important;box-shadow:none!important;color:#f8f9fa!important}.delay[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], .dispatch-delay[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], .dispatch[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], .done[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], .todo[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#f8f9fa!important}#gridDone[_ngcontent-%COMP%] > .e-grid[_ngcontent-%COMP%]   .e-altrow[_ngcontent-%COMP%], #gridTodo[_ngcontent-%COMP%] > .e-grid[_ngcontent-%COMP%]   .e-altrow[_ngcontent-%COMP%]{background-color:#d6d8db!important}.color-code-0[_ngcontent-%COMP%]{background-color:#ddebf7}.color-code-1[_ngcontent-%COMP%]{background-color:#fff2cc}.color-code-2[_ngcontent-%COMP%]{background-color:#e2efda}.color-code-3[_ngcontent-%COMP%]{background-color:#c9c9c9}.color-code-4[_ngcontent-%COMP%]{background-color:#fce4d6}.color-code-5[_ngcontent-%COMP%], .color-code-6[_ngcontent-%COMP%]{background-color:#ffb6c1}.bgcolor[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .color-code-abnormal[_ngcontent-%COMP%]{background-color:#a5a549}"]}),xo),wo=o("KLU1");new v.e({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")});var Io=function(){function t(e){i(this,t),this.http=e,this.baseUrl=ft.a.apiUrlEC}return a(t,[{key:"hasLock",value:function(t,e,i){return this.http.get("".concat(this.baseUrl,"Abnormal/HasLock/").concat(t,"/").concat(e,"/").concat(i))}},{key:"getBatchByIngredientID",value:function(t){return this.http.get("".concat(this.baseUrl,"Abnormal/GetBatchByIngredientID/").concat(t))}},{key:"getAll",value:function(){return this.http.get(this.baseUrl+"Abnormal/GetAll",{})}},{key:"create",value:function(t){return this.http.post(this.baseUrl+"Abnormal/Create",t)}},{key:"createRange",value:function(t){return this.http.post(this.baseUrl+"Abnormal/CreateRange",t)}},{key:"update",value:function(t){return this.http.put(this.baseUrl+"Abnormal/Update",t)}},{key:"delete",value:function(t){return this.http.delete(this.baseUrl+"Abnormal/Delete/"+t)}},{key:"getBuildingByIngredientAndBatch",value:function(t,e){return this.http.get("".concat(this.baseUrl,"Abnormal/GetBuildingByIngredientAndBatch/").concat(t,"/").concat(e))}}]),t}();Io.\u0275fac=function(t){return new(t||Io)(E.Zb(v.b))},Io.\u0275prov=E.Ib({token:Io,factory:Io.\u0275fac,providedIn:"root"});var To=["fullScreen"],Ro=["tooltip"],Mo=["scanQRCode"],Bo=["deliveredGrid"],Po=["scanText"],Oo=["ddlelement"],Ao=["grid"];function No(t,e){if(1&t){var i=E.Tb();E.Sb(0,"ejs-dropdownlist",16,17),E.cc("ngModelChange",function(t){return E.Bc(i),E.gc(3).buildingID=t})("filtering",function(t){return E.Bc(i),E.gc(3).onFilteringBuilding(t)})("change",function(t){return E.Bc(i),E.gc(3).onChangeBuilding(t)}),E.Rb()}if(2&t){var n=E.gc(3);E.mc("dataSource",n.buildings)("fields",n.fieldsBuildings)("allowFiltering",!0)("ngModel",n.buildingID)}}function Eo(t,e){if(1&t){var i=E.Tb();E.Sb(0,"button",18),E.cc("click",function(){return E.Bc(i),E.gc(3).openFullscreen()}),E.Nb(1,"i",19),E.Kc(2," Fullscreen"),E.Rb()}}function Fo(t,e){if(1&t){var i=E.Tb();E.Sb(0,"button",20),E.cc("click",function(){return E.Bc(i),E.gc(3).closeFullscreen()}),E.Nb(1,"i",21),E.Kc(2," Close Fullscreen"),E.Rb()}}function _o(t,e){if(1&t&&(E.Sb(0,"div",9),E.Sb(1,"h4"),E.Kc(2),E.hc(3,"translate"),E.Rb(),E.Sb(4,"div",10),E.Ic(5,No,2,4,"ejs-dropdownlist",11),E.Sb(6,"button",12),E.Kc(7),E.hc(8,"translate"),E.Rb(),E.Sb(9,"button",13),E.Kc(10),E.hc(11,"translate"),E.Rb(),E.Ic(12,Eo,3,0,"button",14),E.Ic(13,Fo,3,0,"button",15),E.Rb(),E.Rb()),2&t){var i=E.gc(2);E.zb(2),E.Lc(E.ic(3,6,"TODOLIST")),E.zb(3),E.mc("ngIf",i.IsAdmin),E.zb(2),E.Lc(E.ic(8,8,"DELIVERED_TOTAL_COUNT_LABEL")),E.zb(3),E.Lc(E.ic(11,10,"ACTUAL_NOTE_LABEL")),E.zb(2),E.mc("ngIf",!i.hasFullScreen),E.zb(1),E.mc("ngIf",i.hasFullScreen)}}function Lo(t,e){1&t&&(E.Sb(0,"div",29),E.Sb(1,"button",30),E.Kc(2,"\xd7"),E.Rb(),E.Sb(3,"h5"),E.Nb(4,"i",31),E.Kc(5," C\u1ea3nh b\xe1o! - Warning!"),E.Rb(),E.Kc(6," D\u1eef li\u1ec7u k\u1ebf ho\u1ea1ch l\xe0m vi\u1ec7c ch\u01b0a \u0111\u01b0\u1ee3c s\u1eafp x\u1ebfp cho ng\xe0y h\xf4m nay! "),E.Nb(7,"br"),E.Kc(8," The work plan is empty! "),E.Rb())}function Ko(t,e){if(1&t&&(E.Sb(0,"th",33),E.Kc(1),E.hc(2,"translate"),E.Rb()),2&t){var i=E.gc().$implicit,n=E.gc(3);E.Ab("rowspan",i.rowspanValue)("colspan",i.colspanValue),E.zb(1),E.Mc(" ",E.ic(2,3,n.labelLang(i.field)),"")}}function jo(t,e){if(1&t&&(E.Sb(0,"th",33),E.Kc(1),E.hc(2,"translate"),E.Rb()),2&t){var i=E.gc().$implicit,n=E.gc(3);E.Ab("colspan",i.colspanValue),E.zb(1),E.Mc(" ",E.ic(2,2,n.labelLang(i.field)),"")}}function zo(t,e){if(1&t&&(E.Qb(0),E.Ic(1,Ko,3,5,"th",32),E.Ic(2,jo,3,4,"th",32),E.Pb()),2&t){var i=e.$implicit;E.zb(1),E.mc("ngIf",i.hasRowspan),E.zb(1),E.mc("ngIf",!i.hasRowspan)}}function Ho(t,e){if(1&t&&(E.Qb(0),E.Sb(1,"th",34),E.Kc(2),E.Rb(),E.Pb()),2&t){var i=e.$implicit;E.zb(2),E.Mc(" ",i.field,"")}}function Uo(t,e){if(1&t&&E.Nb(0,"input",51),2&t){var i=E.gc().$implicit;E.mc("value",0==i.value||"0kg"===i.value?0:i.value+"kg")}}function Go(t,e){if(1&t){var i=E.Tb();E.Sb(0,"input",52),E.cc("blur",function(){E.Bc(i);var t=E.gc().$implicit;return E.gc(4).blurTd(t)})("keypress",function(t){E.Bc(i);var e=E.gc().$implicit;return E.gc(4).dispatchGlue(t,e)})("ngModelChange",function(t){return E.Bc(i),E.gc().$implicit.value=t}),E.Rb()}if(2&t){var n=E.gc().$implicit;E.mc("ngModel",n.value)("value",n.value)}}function Jo(t,e){if(1&t){var i=E.Tb();E.Sb(0,"td",48),E.cc("click",function(){E.Bc(i);var t=e.$implicit;return E.gc(4).editDomain(t)}),E.Ic(1,Uo,1,1,"input",49),E.Ic(2,Go,1,2,"input",50),E.Rb()}if(2&t){var n=e.$implicit;E.zb(1),E.mc("ngIf",!n.editable),E.zb(1),E.mc("ngIf",n.editable)}}function Qo(t,e){if(1&t&&(E.Sb(0,"span"),E.Kc(1),E.Rb()),2&t){var i=E.gc().$implicit;E.zb(1),E.Nc(" ",i.delivered,"kg(",i.count,") ")}}function $o(t,e){1&t&&(E.Sb(0,"span"),E.Kc(1," 0 "),E.Rb())}function Vo(t,e){if(1&t){var i=E.Tb();E.Sb(0,"td",53),E.cc("dblclick",function(){E.Bc(i);var t=e.$implicit,n=E.gc(4),a=E.yc(6);return n.showModal(a,t)}),E.Sb(1,"ejs-tooltip",54,55),E.Ic(3,Qo,2,2,"span",56),E.Ic(4,$o,2,0,"span",56),E.Rb(),E.Rb()}if(2&t){var n=e.$implicit,a=E.gc(4);E.zb(1),E.mc("content",a.onBeforeRenderRow2(n)),E.zb(2),E.mc("ngIf",n.count>0),E.zb(1),E.mc("ngIf",0===n.count)}}function qo(t,e){if(1&t){var i=E.Tb();E.Qb(0),E.Sb(1,"tr"),E.Sb(2,"td",35),E.Kc(3),E.Rb(),E.Sb(4,"td",35),E.Sb(5,"ejs-tooltip",36,37),E.cc("beforeRender",function(t){E.Bc(i);var n=e.$implicit,a=e.index;return E.gc(3).onBeforeRender(t,n.row1,a)}),E.Kc(7),E.Rb(),E.Rb(),E.Ic(8,Jo,3,2,"td",38),E.Sb(9,"td",39),E.Kc(10),E.Rb(),E.Sb(11,"td",35),E.Kc(12),E.Rb(),E.Sb(13,"td",40),E.Sb(14,"button",41),E.cc("click",function(){E.Bc(i);var t=e.$implicit;return E.gc(3).mixingSection(t.row1)}),E.Nb(15,"i",42),E.Kc(16),E.hc(17,"translate"),E.Rb(),E.Sb(18,"button",43),E.cc("click",function(){E.Bc(i);var t=e.$implicit;return E.gc(3).stirGlue(t.row1)}),E.Nb(19,"i",44),E.Kc(20),E.hc(21,"translate"),E.Rb(),E.Sb(22,"button",45),E.cc("click",function(){E.Bc(i);var t=e.$implicit;return E.gc(3).pushHistory(t.row1)}),E.Kc(23),E.hc(24,"translate"),E.Rb(),E.Rb(),E.Rb(),E.Sb(25,"tr",46),E.Ic(26,Vo,5,3,"td",47),E.Rb(),E.Pb()}if(2&t){var n=e.$implicit;E.zb(3),E.Mc("",n.row1.supplier.supplier," "),E.zb(4),E.Mc(" ",n.row1.glueName.glueName," "),E.zb(1),E.mc("ngForOf",n.row1.cellsCenter),E.zb(2),E.Mc(" ",n.row1.actual.real,""),E.zb(2),E.Lc(n.row1.count.count),E.zb(4),E.Mc(" ",E.ic(17,9,"MIXING")," "),E.zb(4),E.Mc(" ",E.ic(21,11,"STIR"),""),E.zb(3),E.Mc(" ",E.ic(24,13,"HISTORY"),""),E.zb(3),E.mc("ngForOf",n.row2.cellsCenter)}}function Wo(t,e){if(1&t&&(E.Sb(0,"div",22),E.Sb(1,"div",23),E.Sb(2,"div",24),E.Ic(3,Lo,9,0,"div",25),E.Sb(4,"div"),E.Sb(5,"table",26),E.Sb(6,"thead",27),E.Sb(7,"tr"),E.Ic(8,zo,3,2,"ng-container",28),E.Rb(),E.Sb(9,"tr"),E.Ic(10,Ho,3,1,"ng-container",28),E.Rb(),E.Rb(),E.Sb(11,"tbody"),E.Ic(12,qo,27,15,"ng-container",28),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Rb()),2&t){var i=E.gc(2);E.zb(3),E.mc("ngIf",i.hasWarning),E.zb(2),E.Ab("height",i.screenHeight),E.zb(3),E.mc("ngForOf",i.lineColumns),E.zb(2),E.mc("ngForOf",i.modelNameList),E.zb(2),E.mc("ngForOf",i.rowParents)}}function Yo(t,e){if(1&t&&(E.Sb(0,"div",5,6),E.Ic(2,_o,14,12,"div",7),E.Ic(3,Wo,13,5,"div",8),E.Rb()),2&t){var i=E.gc();E.zb(2),E.mc("ngIf",i.existGlue),E.zb(1),E.mc("ngIf",i.existGlue)}}function Xo(t,e){1&t&&E.Nb(0,"img",90)}function Zo(t,e){if(1&t){var i=E.Tb();E.Sb(0,"input",91),E.cc("ngModelChange",function(t){return E.Bc(i),E.gc().$implicit.scanCode=t})("ngModelChange",function(t){E.Bc(i);var e=E.gc().$implicit;return E.gc(2).onNgModelChangeScanQRCode(t,e)}),E.Rb()}if(2&t){var n=E.gc().$implicit,a=E.gc(2);E.Bb(n.info),E.mc("autofocus",n.scanStatus)("name",n.code)("ngModel",n.scanCode)("ngClass",a.lockClass(n))}}function tc(t,e){if(1&t){var i=E.Tb();E.Sb(0,"input",92),E.cc("ngModelChange",function(t){return E.Bc(i),E.gc().$implicit.scanCode=t})("ngModelChange",function(t){E.Bc(i);var e=E.gc().$implicit;return E.gc(2).onNgModelChangeScanQRCode(t,e)}),E.Rb()}if(2&t){var n=E.gc().$implicit,a=E.gc(2);E.Bb(n.info),E.mc("ngModel",n.scanCode)("name",n.code)("ngClass",a.lockClass(n))}}function ec(t,e){if(1&t){var i=E.Tb();E.Sb(0,"input",93),E.cc("keyup",function(t){E.Bc(i);var e=E.gc().$implicit;return E.gc(2).onKeyupExpected(e,t)}),E.Rb()}if(2&t){var n=E.gc().$implicit;E.Bb(n.info),E.Eb("lock","A"!==n.position),E.mc("value",n.expected)("autofocus",n.focusExpected)}}function ic(t,e){if(1&t){var i=E.Tb();E.Sb(0,"input",94),E.cc("keyup",function(t){E.Bc(i);var e=E.gc().$implicit;return E.gc(2).onKeyupExpected(e,t)}),E.Rb()}if(2&t){var n=E.gc().$implicit;E.Bb(n.info),E.mc("value",n.expected)}}function nc(t,e){if(1&t){var i=E.Tb();E.Sb(0,"input",95),E.cc("click",function(t){E.Bc(i);var e=E.gc().$implicit;return E.gc(2).onDblClicked(e,t)})("keyup",function(t){E.Bc(i);var e=E.gc().$implicit;return E.gc(2).onKeyupReal(e,t)}),E.Rb()}if(2&t){var n=E.gc().$implicit,a=E.gc(2);E.Bb(a.realClass(n)),E.Eb("lock","A"===n.position),E.mc("value",n.real)("id",n.position)("autofocus",n.focusReal)}}function ac(t,e){if(1&t){var i=E.Tb();E.Sb(0,"input",96),E.cc("click",function(t){E.Bc(i);var e=E.gc().$implicit;return E.gc(2).onDblClicked(e,t)})("keyup",function(t){E.Bc(i);var e=E.gc().$implicit;return E.gc(2).onKeyupReal(e,t)}),E.Rb()}if(2&t){var n=E.gc().$implicit,a=E.gc(2);E.Bb(a.realClass(n)),E.Eb("lock","A"===n.position),E.mc("value",n.real)("id",n.position)}}function oc(t,e){if(1&t&&(E.Qb(0),E.Sb(1,"div",74),E.Sb(2,"div",75),E.Sb(3,"div",22),E.Sb(4,"div",76),E.Sb(5,"div",77),E.Ic(6,Xo,1,0,"img",78),E.Rb(),E.Rb(),E.Sb(7,"div",79),E.Ic(8,Zo,1,6,"input",80),E.Ic(9,tc,1,5,"ng-template",null,81,E.Jc),E.Rb(),E.Rb(),E.Rb(),E.Sb(11,"div",82),E.Nb(12,"input",83),E.Rb(),E.Sb(13,"div",65),E.Sb(14,"div",22),E.Sb(15,"div",84),E.Ic(16,ec,1,6,"input",85),E.Ic(17,ic,1,3,"ng-template",null,86,E.Jc),E.Rb(),E.Sb(19,"div",87),E.Ic(20,nc,1,7,"input",88),E.Ic(21,ac,1,6,"ng-template",null,89,E.Jc),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Pb()),2&t){var i=e.$implicit,n=E.yc(10),a=E.yc(18),o=E.yc(22),c=E.gc(2);E.zb(6),E.mc("ngIf",c.showArrow(i)),E.zb(2),E.mc("ngIf",i.scanStatus)("ngIfElse",n),E.zb(4),E.Bb(i.info),E.Eb("lock",!0),E.mc("value",i.name+" ( "+i.percentage+"% )"),E.zb(4),E.mc("ngIf",i.focusExpected)("ngIfElse",a),E.zb(4),E.mc("ngIf",i.focusReal)("ngIfElse",o)}}function cc(t,e){1&t&&(E.Sb(0,"p",97),E.Kc(1),E.hc(2,"translate"),E.Rb()),2&t&&(E.zb(1),E.Lc(E.ic(2,1,"NOTE")))}function sc(t,e){if(1&t){var i=E.Tb();E.Sb(0,"div",57),E.Sb(1,"div",58),E.Sb(2,"div",22),E.Sb(3,"div",23),E.Sb(4,"h2",59),E.Kc(5),E.hc(6,"translate"),E.Rb(),E.Rb(),E.Rb(),E.Sb(7,"div",22),E.Sb(8,"div",23),E.Sb(9,"div",22),E.Sb(10,"div",60),E.Sb(11,"div",22),E.Sb(12,"div",61),E.Sb(13,"label",62),E.Kc(14),E.hc(15,"translate"),E.Rb(),E.Rb(),E.Sb(16,"div",63),E.Sb(17,"label",62),E.Kc(18),E.hc(19,"translate"),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Sb(20,"div",64),E.Sb(21,"label",62),E.Kc(22),E.hc(23,"translate"),E.Rb(),E.Rb(),E.Sb(24,"div",65),E.Sb(25,"div",22),E.Sb(26,"div",66),E.Sb(27,"label",62),E.Kc(28),E.hc(29,"translate"),E.Rb(),E.Rb(),E.Sb(30,"div",67),E.Sb(31,"label",62),E.Kc(32),E.hc(33,"translate"),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Ic(34,oc,23,12,"ng-container",28),E.Sb(35,"div",68),E.Sb(36,"button",69),E.cc("click",function(){return E.Bc(i),E.gc().back()}),E.Nb(37,"i",70),E.Kc(38),E.hc(39,"translate"),E.Rb(),E.Sb(40,"button",71),E.cc("click",function(){return E.Bc(i),E.gc().Finish()}),E.Nb(41,"i",72),E.Kc(42),E.hc(43,"translate"),E.Rb(),E.Rb(),E.Ic(44,cc,3,3,"p",73),E.Rb(),E.Rb(),E.Rb(),E.Rb()}if(2&t){var n=E.gc();E.zb(5),E.Nc(" ",E.ic(6,14,"GLUE_NAME"),": ",n.makeGlue.name," "),E.zb(9),E.Lc(E.ic(15,16,"STEP")),E.zb(4),E.Lc(E.ic(19,18,"SCAN_QRCODE")),E.zb(4),E.Lc(E.ic(23,20,"INGREDIENT_NAME")),E.zb(6),E.Nc("",E.ic(29,22,"EXPECTED")," (",n.unit,") "),E.zb(4),E.Nc("",E.ic(33,24,"ACTUAL")," (",n.unit,")"),E.zb(2),E.mc("ngForOf",n.ingredients),E.zb(4),E.Mc(" ",E.ic(39,26,"BACK"),""),E.zb(2),E.mc("disabled",n.disabled),E.zb(2),E.Mc(" ",E.ic(43,28,"FINISHED"),""),E.zb(2),E.mc("ngIf",!n.disabled)}}function rc(t,e){if(1&t){var i=E.Tb();E.Sb(0,"div",98),E.Sb(1,"h4",99),E.Nb(2,"i",100),E.Kc(3," Delivered Detail "),E.Rb(),E.Sb(4,"button",101),E.cc("click",function(){return e.$implicit.dismiss("Cross click")}),E.Sb(5,"span",102),E.Kc(6,"\xd7"),E.Rb(),E.Rb(),E.Rb(),E.Sb(7,"div",103),E.Sb(8,"div",22),E.Sb(9,"div",23),E.Sb(10,"ejs-grid",104,105),E.cc("toolbarClick",function(t){return E.Bc(i),E.gc().toolbarClick(t)})("actionBegin",function(t){return E.Bc(i),E.gc().actionBegin(t)}),E.Sb(12,"e-columns"),E.Nb(13,"e-column",106),E.Nb(14,"e-column",107),E.Nb(15,"e-column",108),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Sb(16,"div",109),E.Sb(17,"button",110),E.cc("click",function(){return e.$implicit.close("Close click")}),E.Kc(18,"Close"),E.Rb(),E.Rb()}if(2&t){var n=E.gc();E.zb(10),E.mc("dataSource",n.deliveredData)("allowSorting",!0)("filterSettings",n.filterSettings)("editSettings",n.editSettings)("toolbar",n.toolbarOptions)("toolbar",n.toolbarOptions)}}var lc,uc=((lc=function(){function e(t,n,a,o,c,s,r,l,u,d,h,g){var b=this;i(this,e),this.planService=t,this.settingService=n,this.buildingService=a,this.modalService=o,this.ingredientService=c,this.makeGlueService=s,this.abnormalService=r,this.authService=l,this.alertify=u,this.router=d,this.cdr=h,this.spinner=g,this.IsAdmin=!1,this.displayTextMethod={visibility:!1},this.show=!1,this.makeGlue={id:0,name:"",code:"",ingredients:[]},this.existGlue=!1,this.data=[],this.disabled=!0,this.cancel=!1,this.hasFullScreen=!1,this.volumeA=0,this.min=0,this.max=0,this.fieldsBuildings={text:"name",value:"id"},this.subject=new O.a,this.subscription=[],this.onFilteringBuilding=function(t){var e=new N.h;e=""!==t.text?e.where("name","contains",t.text,!0):e,t.updateData(b.buildings,e)}}return a(e,[{key:"enter",value:function(t){this.disabled||this.Finish()}},{key:"keyup",value:function(t){this.summary()}},{key:"fullScreen",value:function(t){null!==document.fullscreenElement?(this.screenHeight=screen.height-100,this.hasFullScreen=!0):(this.screenHeight=window.innerHeight-200,this.hasFullScreen=!1)}},{key:"ngOnInit",value:function(){var t=this,e=JSON.parse(localStorage.getItem("building")),i=JSON.parse(localStorage.getItem("level"));this.role=i,this.building=e,this.cdr.detach(),setInterval(function(){t.cdr.detectChanges()},300),this.gridConfig(),this.showQRCode=!1,this.disabled=!0,this.qrCode="",this.existGlue=!0,this.hasWarning=!1,this.checkQRCode(),this.checkRole(),ti.a.state===ei.b.Connected&&ti.a.on("summaryRecieve",function(e){"ok"===e&&t.summary()})}},{key:"gridConfig",value:function(){this.toolbarOptions=["Edit","Delete","Search","ExcelExport"],this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"},this.filterSettings={type:"Excel"}}},{key:"getScalingSetting",value:function(){var t=this;this.settingService.getMachineByBuilding(this.buildingID).subscribe(function(e){t.scalingSetting=e.map(function(t){return t.machineID})})}},{key:"ngAfterViewInit",value:function(){this.screenHeight=window.innerHeight,$("input.mixing").tooltip({placement:"right",trigger:"focus"})}},{key:"onChangeBuilding",value:function(t){this.buildingID=t.itemData.id,this.buildingName=t.itemData.name,localStorage.setItem("buildingID",t.itemData.id),this.getScalingSetting(),this.summary()}},{key:"actionBegin",value:function(t){var e=this;"delete"===t.requestType&&this.planService.deleteDelivered(t.data[0].id).subscribe(function(t){t&&(e.modalReference.close(),e.summary())}),"save"===t.requestType&&"edit"===t.action&&this.planService.editDelivered(t.data.id,t.data.qty).subscribe(function(t){t&&(e.modalReference.close(),e.summary())})}},{key:"showModal",value:function(t,e){this.modalReference=this.modalService.open(t,{size:"lg"}),this.deliveredData=e.deliveredInfos.map(function(t){return{id:t.id,glueName:t.glueName,qty:t.qty,createdDate:new Date(t.createdDate)}})}},{key:"labelLang",value:function(t){return"Chemical"===t?"GLUE":"GlueID"===t?"ID":"Supplier"===t?"SUPPLIER_LABEL":"TotalConsumption"===t?"TOTAL_COMSUMPTION":"Standard"===t?"STANDARD":"Real"===t?"ACTUAL_TODOLIST":"Count"===t?"COUNT":t}},{key:"stirGlue",value:function(t){return this.ingredientService.changeIngredient(t.glueName.glueName),this.router.navigate(["/ec/execution/todolist/stir/"+t.glueName.glueName])}},{key:"summary",value:function(){var t=this;this.spinner.show(),this.planService.summary(this.buildingID).subscribe(function(e){t.lineColumns=e.header,t.data=e.data,t.rowParents=e.rowParents,t.modelNameList=e.modelNameList,t.spinner.hide()})}},{key:"hasRowspan",value:function(t){return["Chemical","Real","GlueID","Standard","Supplier","Count","TotalConsumption","Delivered"].includes(this.lineColumns[t+1].field)}},{key:"hasArray",value:function(t){return t instanceof Array}},{key:"hasLock",value:function(t,e,i){var n=this,a=e;return this.IsAdmin&&(a=this.buildingName),new Promise(function(e,o){n.abnormalService.hasLock(t,a,i).subscribe(function(t){e(t)},function(t){o(!1)})})}},{key:"checkIncoming",value:function(t,e,i){var n=this,a=e;return this.IsAdmin&&(a=this.buildingName),new Promise(function(e,o){n.ingredientService.checkIncoming(t,i,a).subscribe(function(t){e(t)},function(t){o(!1)})})}},{key:"checkRole",value:function(){if([1,2].includes(this.role.id)){this.IsAdmin=!0,this.getBuilding();var t=+localStorage.getItem("buildingID");0===t?this.alertify.message("Please select a building!",!0):(this.buildingID=t,this.getScalingSetting(),this.summary())}else this.buildingID=this.building.id,this.getScalingSetting(),this.summary()}},{key:"getBuilding",value:function(){var t=this;this.buildingService.getBuildings().subscribe(function(e){return Object(P.a)(t,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.buildings=e.filter(function(t){return 2===t.level});case 1:case"end":return t.stop()}},t,this)}))})}},{key:"checkUnit",value:function(t){}},{key:"findIngredientRealByPosition",value:function(e){var i,n=0,a=t(this.ingredients);try{for(a.s();!(i=a.n()).done;){var o=i.value;if(o.position===e){"k"===o.unit&&"A"===o.position||"k"===o.unit&&o.expected.includes("k")?n=o.real:o.expected.includes("g")&&(n=o.real/1e3);break}}}catch(c){a.e(c)}finally{a.f()}return n}},{key:"findIngredientBatchByPosition",value:function(e){var i,n="",a=t(this.ingredients);try{for(a.s();!(i=a.n()).done;){var o=i.value;if(o.position===e){n=o.batch;break}}}catch(c){a.e(c)}finally{a.f()}return n}},{key:"Finish",value:function(){var t=this;if(this.IsAdmin)this.alertify.warning('Only the workers are able to press "Finished" button!<br> Ch\u1ec9 c\xf3 c\xf4ng nh\xe2n m\u1edbi \u0111\u01b0\u1ee3c nh\u1ea5n "Ho\xe0n Th\xe0nh!"',!0);else{var e=new Date,i=this.building.id;this.endTime=new Date,this.guidances={id:0,glueID:this.glueID,glueName:this.makeGlue.name,chemicalA:this.findIngredientRealByPosition("A"),chemicalB:this.findIngredientRealByPosition("B"),chemicalC:this.findIngredientRealByPosition("C"),chemicalD:this.findIngredientRealByPosition("D"),chemicalE:this.findIngredientRealByPosition("E"),batchA:this.findIngredientBatchByPosition("A"),batchB:this.findIngredientBatchByPosition("B"),batchC:this.findIngredientBatchByPosition("C"),batchD:this.findIngredientBatchByPosition("D"),batchE:this.findIngredientBatchByPosition("E"),createdTime:e,mixBy:JSON.parse(localStorage.getItem("user")).User.ID,buildingID:i,startTime:this.startTime,endTime:this.endTime},this.onSignalr(),this.guidances&&this.makeGlueService.Guidance(this.guidances).subscribe(function(e){t.alertify.success("The Glue has been finished successfully"),t.showQRCode=!0,t.code=e.code,t.back(),t.summary()})}}},{key:"gotoStir",value:function(){return this.router.navigate(["/ec/execution/todolist/stir/"+this.makeGlue.name])}},{key:"getGlueWithIngredientByGlueID",value:function(t){var e=this;this.makeGlueService.getGlueWithIngredientByGlueID(t).subscribe(function(t){e.show=!0,e.existGlue=!1,e.makeGlue=t,e.ingredients=t.ingredients.map(function(t){return{id:t.id,scanStatus:"A"===t.position,code:t.code,scanCode:"",materialNO:t.materialNO,name:t.name,percentage:t.percentage,position:t.position,allow:t.allow,expected:0,real:0,focusReal:!1,focusExpected:!1,valid:!1,info:"",batch:"",unit:""}})})}},{key:"signal",value:function(){var t=this;ti.a.state===ei.b.Connected&&ti.a.on("Welcom",function(e,i,n){if(t.scalingSetting.includes(+e)&&n===t.scalingKG)switch(t.volume=parseFloat(i),t.unit=n,t.position){case"A":t.volumeA=t.volume;break;case"B":"k"===n?(t.volumeB=t.volume,t.changeActualByPosition("A",t.volumeB,n),t.checkValidPosition(t.ingredientsTamp,t.volumeB)):(t.changeActualByPosition("A",t.volumeB,n),t.checkValidPosition(t.ingredientsTamp,t.volumeB));break;case"C":t.volumeC=t.volume,t.changeActualByPosition("B",t.volumeC,n),t.checkValidPosition(t.ingredientsTamp,t.volumeC);break;case"D":t.volumeD=t.volume,t.changeActualByPosition("C",t.volumeD,n),t.checkValidPosition(t.ingredientsTamp,t.volumeD);break;case"E":t.volumeE=t.volume,t.changeActualByPosition("D",t.volumeE,n),t.checkValidPosition(t.ingredientsTamp,t.volumeE);break;case"H":t.volumeH=t.volume,t.changeActualByPosition("E",t.volumeH,n),t.checkValidPosition(t.ingredientsTamp,t.volumeH)}})}},{key:"scanQRCode",value:function(){return this.ingredientService.scanQRCode(this.qrCode).toPromise()}},{key:"setBatch",value:function(t,e){for(var i in this.ingredients)if(this.ingredients[i].id===t.id){this.ingredients[i].batch=e;break}}},{key:"checkQRCode",value:function(){var t=this;this.subscription.push(this.subject.pipe(Object(A.a)(500)).subscribe(function(e){return Object(P.a)(t,void 0,void 0,regeneratorRuntime.mark(function t(){var i,n,a,o,c,s,r,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.QRCode,n=e.ingredient,this.ingredientsTamp=n,this.position=n.position,a=i.split("-")||[],o=i.match(n.materialNO),c=i.match(/(\d+)-(\w+)-/g),s=i.replace(c[0],""),null!==o){t.next=5;break}return t.abrupt("return",(this.alertify.warning("M\xe3 QR kh\xf4ng h\u1ee3p l\u1ec7!<br>The QR Code invalid!"),this.qrCode="",void this.errorScan()));case 5:if(null===o){t.next=34;break}if(t.prev=6,s===o[0]){t.next=9;break}return t.abrupt("return",(this.alertify.warning('M\xe3 QR kh\xf4ng h\u1ee3p l\u1ec7! <br>Please you should look for the chemical name "'.concat(n.name,'"')),this.qrCode="",void this.errorScan()));case 9:if(this.qrCode=o[0],this.qrCode===n.materialNO){t.next=11;break}return t.abrupt("return",(this.alertify.warning('M\xe3 QR kh\xf4ng h\u1ee3p l\u1ec7! <br>Please you should look for the chemical name "'.concat(n.name,'"')),this.qrCode="",void this.errorScan()));case 11:return t.t0=!0,t.next=14,this.hasLock(n.name,this.building.name,a[1]);case 14:if(t.t1=t.sent,t.t0!==t.t1){t.next=17;break}return t.abrupt("return",(this.alertify.error("H\xf3a ch\u1ea5t n\xe0y \u0111\xe3 b\u1ecb kh\xf3a! <br>This chemical has been locked!"),this.qrCode="",void this.errorScan()));case 17:this.signal(),r=n.code,l=this.findIngredientCode(r),t.t2=(this.setBatch(l,a[1]),l&&(this.changeInfo("success-scan",l.code),0===l.expected&&"A"===l.position?(this.changeFocusStatus(l.code,!1,!0),this.changeScanStatus(l.code,!1)):(this.changeScanStatus(l.code,!1),this.changeFocusStatus(r,!1,!1))),this.position),t.next="B"===t.t2?22:"C"===t.t2?24:"D"===t.t2?26:"E"===t.t2?28:29;break;case 22:return this.changeScanStatusByPosition("C",!0),t.abrupt("break",29);case 24:return this.changeScanStatusByPosition("C",!1),this.changeScanStatusByPosition("D",!0),t.abrupt("break",29);case 26:return this.changeScanStatusByPosition("E",!0),t.abrupt("break",29);case 28:this.changeScanStatusByPosition("H",!0);case 29:t.next=34;break;case 31:t.prev=31,t.t3=t.catch(6),this.errorScan(),this.alertify.error("M\xe3 QR kh\xf4ng h\u1ee3p l\u1ec7!<br>Wrong Chemical!"),this.qrCode="";case 34:case"end":return t.stop()}},t,this,[[6,31]])}))}))}},{key:"onNgModelChangeScanQRCode",value:function(t,e){return Object(P.a)(this,void 0,void 0,regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:this.subject.next({QRCode:t,ingredient:e});case 1:case"end":return i.stop()}},i,this)}))}},{key:"onNgModelChangeScanQRCode2",value:function(t,e){var i;return Object(P.a)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var a,o,c,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(this.ingredientsTamp=e,this.position=e.position,a=t.split("-")||[],8!==(null===(i=a[2])||void 0===i?void 0:i.length)){n.next=33;break}return n.prev=3,this.qrCode=a[2],n.next=7,this.scanQRCode();case 7:if(o=n.sent,this.qrCode===e.materialNO){n.next=10;break}return n.abrupt("return",(this.alertify.warning('Please you should look for the chemical name "'.concat(e.name,'"')),this.qrCode="",void this.errorScan()));case 10:return n.t0=!0,n.next=13,this.hasLock(e.name,this.building.name,a[1]);case 13:if(n.t1=n.sent,n.t0!==n.t1){n.next=16;break}return n.abrupt("return",(this.alertify.error("This chemical has been locked!"),this.qrCode="",void this.errorScan()));case 16:this.signal(),c=o.code,s=this.findIngredientCode(c),n.t2=(this.setBatch(s,a[1]),s&&(this.changeInfo("success-scan",s.code),0===s.expected&&"A"===s.position?(this.changeFocusStatus(s.code,!1,!0),this.changeScanStatus(s.code,!1)):(this.changeScanStatus(s.code,!1),this.changeFocusStatus(c,!1,!1))),this.position),n.next="B"===n.t2?21:"C"===n.t2?23:"D"===n.t2?25:"E"===n.t2?27:28;break;case 21:return this.changeScanStatusByPosition("C",!0),n.abrupt("break",28);case 23:return this.changeScanStatusByPosition("C",!1),this.changeScanStatusByPosition("D",!0),n.abrupt("break",28);case 25:return this.changeScanStatusByPosition("E",!0),n.abrupt("break",28);case 27:this.changeScanStatusByPosition("H",!0);case 28:n.next=33;break;case 30:n.prev=30,n.t3=n.catch(3),this.errorScan(),this.alertify.error("Wrong Chemical!"),this.qrCode="";case 33:case"end":return n.stop()}},n,this,[[3,30]])}))}},{key:"errorScan",value:function(){for(var t in this.ingredients)this.ingredients[t].scanStatus&&this.changeInfo("error-scan",this.ingredients[t].code)}},{key:"showArrow",value:function(t){return"A"===t.position&&!0===t.scanStatus||"A"===t.position&&!1===t.scanStatus&&!0===t.focusExpected||"A"!==t.position&&!0===t.scanStatus}},{key:"mixingSection",value:function(t){this.glueName=t.glueName.glueName,this.glueID=t.glueID,this.glue=t,this.scanStatus=!0,this.startTime=new Date,this.scalingKG="k",this.getGlueWithIngredientByGlueID(this.glueID)}},{key:"back",value:function(){this.existGlue=!0,this.show=!1,this.showQRCode=!1,this.disabled=!0,this.glue=[],this.qrCode="",this.offSignalr(),this.scalingKG="k",this.ingredientsTamp=[],this.ingredients=[]}},{key:"calculatorIngredient",value:function(t,e){var i;return null!==(i=t*e/100*1e3)&&void 0!==i?i:0}},{key:"onKeyupExpected",value:function(t,e){if(13===e.keyCode&&"A"===t.position){switch(this.changeExpected("A",e.target.value),t.position){case"A":this.changeScanStatusByPosition("B",!0);break;case"B":this.changeScanStatusByPosition("C",!0);break;case"C":this.changeScanStatusByPosition("D",!0);break;case"D":this.changeScanStatusByPosition("E",!0)}this.resetFocusExpectedAndActual()}}},{key:"changeExpectedRange",value:function(t,e){var i,n;if(["A","B","C","D","E"].includes(e)){var a=parseFloat(t),o=this.calculatorIngredient(a,null===(i=this.findIngredient(e))||void 0===i?void 0:i.percentage);"B"===e&&(this.B=o),"C"===e&&(this.C=o),"D"===e&&(this.D=o);var c=this.calculatorIngredient(o/1e3,null===(n=this.findIngredient(e))||void 0===n?void 0:n.allow),s=o-c,r=o+c,l=this.toFixedIfNecessary(s/1e3,3),u=this.toFixedIfNecessary(r/1e3,3),d=u>3?"".concat(l,"kg - ").concat(u,"kg"):" ".concat(this.toFixedIfNecessary(s,1),"g - ").concat(this.toFixedIfNecessary(r,1),"g ");if(0===c){var h=this.toFixedIfNecessary(o/1e3,3),g=h>3?h+"kg":" ".concat(this.toFixedIfNecessary(1e3*h,1),"g");this.changeExpected(e,g)}else this.changeExpected(e,d)}}},{key:"checkValidPosition",value:function(t,e){var i,n,a,o,c=parseFloat(e);if(0===t.allow){var s=t.expected.replace(/[0-9|.]+/g,"").trim();"k"===(s="A"===t.position?"k":s)?(i=parseFloat(t.expected),n=parseFloat(t.expected)):(a=parseFloat(t.expected),o=parseFloat(t.expected),i=parseFloat(t.expected)/1e3,n=parseFloat(t.expected)/1e3)}else{var r=t.expected.split("-");"k"===r[0].replace(/[0-9|.]+/g,"").trim()?(i=parseFloat(r[0]),n=parseFloat(r[1])):(a=parseFloat(r[0]),o=parseFloat(r[1]),i=parseFloat(r[0])/1e3,n=parseFloat(r[1])/1e3)}if("A"===t.position){for(var l=0,u=["B","C","D","E"];l<u.length;l++){var d=u[l];this.changeExpectedRange(e,d)}this.changeScanStatusFocus("A",!1),this.changeScanStatusFocus("B",!0),this.changeFocusStatus(t.code,!1,!1),1===this.ingredients.length&&(this.disabled=!1)}"B"===t.position&&(n>3?(this.scalingKG="k",c<=n&&c>=i?(this.changeScanStatusFocus("B",!1),this.changeScanStatusFocus("C",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),2===this.ingredients.length&&(this.disabled=!1)):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0))):(this.scalingKG="g",c<=o&&c>=a?(this.changeScanStatusFocus("B",!1),this.changeScanStatusFocus("C",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),2===this.ingredients.length&&(this.disabled=!1)):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0)))),"C"===t.position&&(n>3?(this.scalingKG="k",c<=n&&c>=i?(this.changeScanStatusFocus("C",!1),this.changeScanStatusFocus("D",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),3===this.ingredients.length&&(this.disabled=!1)):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0))):(this.scalingKG="g",c<=o&&c>=a?(this.changeScanStatusFocus("C",!1),this.changeScanStatusFocus("D",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),3===this.ingredients.length&&(this.disabled=!1)):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0)))),"D"===t.position&&(n>3?(this.scalingKG="k",c<=n&&c>=i?(this.changeScanStatusFocus("D",!1),this.changeScanStatusFocus("E",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),this.ingredients.length>=4&&(this.disabled=!1)):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0))):(this.scalingKG="g",c<=o&&c>=a?(this.changeScanStatusFocus("D",!1),this.changeScanStatusFocus("E",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),this.ingredients.length>=4&&(this.disabled=!1)):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0)))),"E"===t.position&&(n>3?(this.scalingKG="k",c<=n&&c>=i?(this.changeScanStatusFocus("D",!1),this.changeScanStatusFocus("E",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),this.ingredients.length>=4&&(this.disabled=!1)):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0))):(this.scalingKG="g",c<=o&&c>=a?(this.changeScanStatusFocus("D",!1),this.changeScanStatusFocus("E",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),this.ingredients.length>=4&&(this.disabled=!1)):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0)))),this.changeReal(t.code,e)}},{key:"onDblClicked",value:function(t,e){var i=this;""!==this.ingredients.filter(function(e){return e.position===t.position})[0].scanCode?(this.ingredients.forEach(function(t,e,n){i.ingredients[e].scanStatus=!1}),t.focusReal=!0,this.offSignalr()):this.alertify.warning("H\xe3y qu\xe9t m\xe3 QR tr\u01b0\u1edbc!!!",!0)}},{key:"checkValidPositionForRealEvent",value:function(t,e){var i,n,a,o,c=parseFloat(e.target.value);if(0===t.allow){if("k"===t.expected.replace(/[0-9|.]+/g,"").trim()){for(var s in i=parseFloat(t.expected),n=parseFloat(t.expected),this.ingredients)if(this.ingredients[s].id===t.id){this.ingredients[s].valid=c!==n,this.ingredients[s].real=c;break}}else for(var r in a=parseFloat(t.expected),o=parseFloat(t.expected),i=parseFloat(t.expected)/1e3,n=parseFloat(t.expected)/1e3,this.ingredients)if(this.ingredients[r].id===t.id){this.ingredients[r].valid=c<=a||c>=o,this.ingredients[r].real=c;break}}else{var l=t.expected.split("-");if("k"===l[0].replace(/[0-9|.]+/g,"").trim()){for(var u in i=parseFloat(l[0]),n=parseFloat(l[1]),this.ingredients)if(this.ingredients[u].id===t.id){this.ingredients[u].valid=c!==n,this.ingredients[u].real=c;break}}else for(var d in a=parseFloat(l[0]),o=parseFloat(l[1]),i=parseFloat(l[0])/1e3,n=parseFloat(l[1])/1e3,this.ingredients)if(this.ingredients[d].id===t.id){this.ingredients[d].valid=c<=a||c>=o,this.ingredients[d].real=c;break}}if("A"===t.position){for(var h=0,g=["B","C","D","E"];h<g.length;h++){var b=g[h];this.changeExpectedRange(e,b)}this.changeScanStatusFocus("A",!1),this.changeScanStatusFocus("B",!0),this.changeFocusStatus(t.code,!1,!1),1===this.ingredients.length?this.disabled=!1:this.onSignalr()}"B"===t.position&&(n>3?(this.scalingKG="k",c<=n&&c>=i?(this.changeScanStatusFocus("B",!1),this.changeScanStatusFocus("C",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),2===this.ingredients.length?this.disabled=!1:this.onSignalr()):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0))):(this.scalingKG="g",c<=o&&c>=a?(this.changeScanStatusFocus("B",!1),this.changeScanStatusFocus("C",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),2===this.ingredients.length?this.disabled=!1:this.onSignalr()):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0)))),"C"===t.position&&(n>3?(this.scalingKG="k",c<=n&&c>=i?(this.changeScanStatusFocus("C",!1),this.changeScanStatusFocus("D",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),3===this.ingredients.length?this.disabled=!1:this.onSignalr()):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0))):(this.scalingKG="g",c<=o&&c>=a?(this.changeScanStatusFocus("C",!1),this.changeScanStatusFocus("D",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),3===this.ingredients.length?this.disabled=!1:this.onSignalr()):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0)))),"D"===t.position&&(n>3?(this.scalingKG="k",c<=n&&c>=i?(this.changeScanStatusFocus("D",!1),this.changeScanStatusFocus("E",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),this.ingredients.length>=4?this.disabled=!1:this.onSignalr()):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0))):(this.scalingKG="g",c<=o&&c>=a?(this.changeScanStatusFocus("D",!1),this.changeScanStatusFocus("E",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),this.ingredients.length>=4?this.disabled=!1:this.onSignalr()):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0)))),"E"===t.position&&(n>3?(this.scalingKG="k",c<=n&&c>=i?(this.changeScanStatusFocus("D",!1),this.changeScanStatusFocus("E",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),this.ingredients.length>=4?this.disabled=!1:this.onSignalr()):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0))):(this.scalingKG="g",c<=o&&c>=a?(this.changeScanStatusFocus("D",!1),this.changeScanStatusFocus("E",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),this.ingredients.length>=4?this.disabled=!1:this.onSignalr()):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0))))}},{key:"onSignalr",value:function(){ti.a.on("Welcom")}},{key:"onKeyupReal",value:function(t,e){13===e.keyCode&&this.checkValidPositionForRealEvent(t,e)}},{key:"UpdateConsumption",value:function(t,e,i){this.ingredientService.UpdateConsumption(t,e,i).subscribe(function(){})}},{key:"UpdateConsumptionWithBuilding",value:function(t){this.ingredientService.UpdateConsumptionOfBuilding(t).subscribe(function(){})}},{key:"lockClass",value:function(t){return!0===t.scanCode?"":"lock"}},{key:"realClass",value:function(t){return t.info+(!0===t.valid?" warning-focus":"")}},{key:"changeScanStatusFocus",value:function(t,e){for(var i in this.ingredients)if(this.ingredients[i].position===t){this.ingredients[i].scanStatus=e;break}}},{key:"changeValidStatus",value:function(t,e){for(var i in this.ingredients)if(this.ingredients[i].code===t){this.ingredients[i].valid=e;break}}},{key:"findIngredient",value:function(e){var i,n=t(this.ingredients);try{for(n.s();!(i=n.n()).done;){var a=i.value;if(a.position===e)return a}}catch(o){n.e(o)}finally{n.f()}}},{key:"findIngredientCode",value:function(e){var i,n=t(this.ingredients);try{for(n.s();!(i=n.n()).done;){var a=i.value;if(a.code===e)return a}}catch(o){n.e(o)}finally{n.f()}}},{key:"findIngredientPositon",value:function(e){var i,n=t(this.ingredients);try{for(n.s();!(i=n.n()).done;){var a=i.value;if(a.position===e)return a}}catch(o){n.e(o)}finally{n.f()}}},{key:"toFixedIfNecessary",value:function(t,e){return+parseFloat(t).toFixed(e)}},{key:"scanChemicalA",value:function(){for(var t in this.ingredients)if("A"===this.ingredients[t].code){this.ingredients[t].scanStatus=!0;break}}},{key:"changeInfo",value:function(t,e){for(var i in this.ingredients)if(this.ingredients[i].code===e){this.ingredients[i].info=t;break}}},{key:"changeScanStatus",value:function(t,e){for(var i in this.ingredients)if(this.ingredients[i].code===t){this.ingredients[i].scanStatus=e;break}}},{key:"changeScanStatusByPosition",value:function(t,e){for(var i in this.position=t,this.ingredients)if(this.ingredients[i].position===t){this.ingredients[i].scanStatus=e;break}}},{key:"resetFocusExpectedAndActual",value:function(){var t;for(t=0;t<this.ingredients.length;t++)this.ingredients[t].focusReal=!1,this.ingredients[t].focusExpected=!1}},{key:"changeActualByPosition",value:function(t,e,i){for(var n in this.ingredients)if(this.ingredients[n].position===t){this.ingredients[n].real=e,this.ingredients[n].unit="A"===t?"k":i;break}}},{key:"changeFocusStatus",value:function(t,e,i){for(var n in this.ingredients)if(this.ingredients[n].code===t){this.ingredients[n].focusReal=e,this.ingredients[n].focusExpected=i;break}}},{key:"allowCaculator",value:function(t,e){return 0===t.allow?e:t.allow/100*e}},{key:"changeExpected",value:function(t,e){for(var i in this.ingredients)if(this.ingredients[i].position===t){this.ingredients[i].expected=e;break}}},{key:"offSignalr",value:function(){ti.a.off("Welcom")}},{key:"changeScanStatusByLength",value:function(t,e){switch(t){case 2:this.offSignalr();break;case 3:"B"===e.position?(this.changeScanStatusByPosition("B",!1),this.changeScanStatusByPosition("C",!0),this.offSignalr()):(this.changeScanStatusByPosition("B",!1),this.changeScanStatusByPosition("C",!1),this.offSignalr());break;case 4:"B"===e.position?(this.changeScanStatusByPosition("B",!1),this.changeScanStatusByPosition("C",!0),this.offSignalr()):"C"===e.position?(this.changeScanStatusByPosition("C",!1),this.changeScanStatusByPosition("D",!0),this.offSignalr()):(this.changeScanStatusByPosition("C",!1),this.changeScanStatusByPosition("D",!1),this.offSignalr());break;case 5:"B"===e.position?(this.changeScanStatusByPosition("B",!1),this.changeScanStatusByPosition("C",!0),this.offSignalr()):"C"===e.position?(this.changeScanStatusByPosition("C",!1),this.changeScanStatusByPosition("D",!0),this.offSignalr()):"D"===e.position?(this.changeScanStatusByPosition("D",!1),this.changeScanStatusByPosition("E",!0),this.offSignalr()):(this.changeScanStatusByPosition("D",!1),this.changeScanStatusByPosition("E",!1),this.offSignalr())}}},{key:"setActualByExpectedRange",value:function(t){var e,i,n=this.ingredients[t];if(n.allow>0){var a=this.ingredients[t].expected.split("-"),o=parseFloat(a[0]),c=parseFloat(a[1]),s=this.ingredients[t].real;if(s>=o&&s<=c){var r=null!==(e=this.ingredients.length)&&void 0!==e?e:0;this.changeScanStatusByLength(r,n)}}else if(this.ingredients[t].real===+this.ingredients[t].expected){var l=null!==(i=this.ingredients.length)&&void 0!==i?i:0;this.changeScanStatusByLength(l,n)}}},{key:"changeReal",value:function(t,e){for(var i in this.ingredients)if(this.ingredients[i].code===t){"A"!==this.ingredients[i].position&&this.setActualByExpectedRange(i),this.ingredients[i].real=this.toFixedIfNecessary(e,3);break}}},{key:"pushHistory",value:function(t){this.router.navigate(["/ec/execution/todolist/history/"+t.glueName.glueName])}},{key:"blurTd",value:function(t){t.editable=!1,this.summary()}},{key:"editDomain",value:function(t){!1!==t.status?0===t.maxReal?this.alertify.warning("Keo ".concat(t.glueName," ch\u01b0a tr\u1ed9n. Vui l\xf2ng h\xe3y tr\u1ed9n keo tr\u01b0\u1edbc khi giao!<br>\n       This glue ").concat(t.glueName," hasn't mixed yet.\n      "),!0):t.editable=!t.editable:this.alertify.warning('<ul style="list-style: decimal; color:red">\n            <li> Chuy\u1ec1n '.concat(t.line," v\xe0 ").concat(t.modelName," kh\xf4ng s\u1eed d\u1ee5ng keo ").concat(t.glueName,'!</li>\n            <li>B\u1edfi v\xec trong "K\u1ebf Ho\u1ea1ch L\xe0m Vi\u1ec7c" kh\xf4ng c\xf3 g\xe1n keo ').concat(t.glueName," cho chuy\u1ec1n ").concat(t.line," v\xe0 ").concat(t.modelName,'.</li>\n            <li> N\u1ebfu "K\u1ebf Ho\u1ea1ch L\xe0m Vi\u1ec7c" c\xf3 s\u1ef1 thay \u0111\u1ed5i th\xec vui l\xf2ng c\u1eadp nh\u1eadt l\u1ea1i.</li>\n          </ul>\n      '),!0)}},{key:"dispatchGlue",value:function(t,e){var i=this;if("Enter"===t.key){if(""===t.target.value)return;var n=parseFloat(t.target.value||0)||0;if(0===n)return void this.alertify.warning("Ch\u1ec9 nh\u1eadp s\u1ed1 v\xe0 ph\u1ea3i l\u1edbn h\u01a1n 0.<br>\n        Please enter numeric values \u200b\u200bonly or the value must be greater than 0.\n        ",!0);var a=this.toFixedIfNecessary(e.maxReal-e.deliveredTotal,3);if(0===a)return void this.alertify.warning("\n        Keo ".concat(e.glueName," \u0111\xe3 giao h\u1ebft ").concat(e.deliveredTotal,"kg r\u1ed3i!!!\n        "),!0);if(n>a)return void this.alertify.warning("\n        Keo ".concat(e.glueName," \u0111\xe3 giao ").concat(e.deliveredTotal,"kg c\xf2n l\u1ea1i ").concat(a,"kg. <br>\n        Nh\u1eadp gi\xe1 tr\u1ecb nh\u1ecf h\u01a1n ho\u1eb7c b\u1eb1ng ").concat(a,"kg!!!\n        "),!0);var o={glueID:e.glueID,glueName:e.glueName,buildingID:e.lineID,qty:n+"",createdBy:Number(JSON.parse(localStorage.getItem("user")).User.ID)};this.planService.dispatchGlue(o).subscribe(function(t){t&&(i.alertify.success("Successfully!"),i.summary())})}}},{key:"onBeforeRender",value:function(t,e,i){var n=this.tooltip.filter(function(t,e){return e===i})[0];n.content="Loading...",n.dataBind(),this.planService.getBPFCByGlue(e.glueName.glueName).subscribe(function(t){n.content=t.join("<br>"),n.dataBind()})}},{key:"onBeforeRenderRow2",value:function(t){return t.deliveredInfos.length>0?t.deliveredInfos.map(function(t){return t.qty+"(kg)"}).join(" , "):"loading..."}},{key:"toolbarClick",value:function(t){switch(t.item.text){case"Excel Export":this.deliveredGrid.excelExport()}}},{key:"openFullscreen",value:function(){var t=this.divRef.nativeElement;t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen(),this.screenHeight=window.innerHeight,this.hasFullScreen=!0}},{key:"closeFullscreen",value:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&window.top.document.msExitFullscreen(),this.hasFullScreen=!1,this.screenHeight=window.innerHeight-403}}]),e}()).\u0275fac=function(t){return new(t||lc)(E.Mb(kt.a),E.Mb(wo.a),E.Mb(_.a),E.Mb(h.b),E.Mb(L.a),E.Mb(ai.a),E.Mb(Io),E.Mb(xt.a),E.Mb(F.a),E.Mb(B.c),E.Mb(E.h),E.Mb(l.c))},lc.\u0275cmp=E.Gb({type:lc,selectors:[["app-summary"]],viewQuery:function(t,e){var i;1&t&&(E.Qc(To,!0),E.Qc(Ro,!0),E.Qc(Mo,!0),E.Qc(Bo,!0),E.Qc(Po,!0),E.Qc(Oo,!0),E.Qc(Ao,!0),E.Qc(Ro,!0)),2&t&&(E.xc(i=E.dc())&&(e.divRef=i.first),E.xc(i=E.dc())&&(e.control=i.first),E.xc(i=E.dc())&&(e.scanQRCodeElement=i.first),E.xc(i=E.dc())&&(e.deliveredGrid=i.first),E.xc(i=E.dc())&&(e.scanText=i.first),E.xc(i=E.dc())&&(e.dropDownListObject1=i.first),E.xc(i=E.dc())&&(e.grid=i.first),E.xc(i=E.dc())&&(e.tooltip=i))},hostBindings:function(t,e){1&t&&E.cc("keyup.alt.enter",function(t){return e.enter(t)},!1,E.Ac)("keyup.esc",function(t){return e.keyup(t)},!1,E.Ac)("fullscreenchange",function(t){return e.fullScreen(t)},!1,E.zc)},decls:7,vars:3,consts:[["type","square-jelly-box","size","medium",3,"fullScreen"],[1,"loading"],["class","card","style","overflow: auto;",4,"ngIf"],["class","card my-height",4,"ngIf"],["deliveredModal",""],[1,"card",2,"overflow","auto"],["fullScreen",""],["class","card-header d-flex p-1",4,"ngIf"],["class","row",4,"ngIf"],[1,"card-header","d-flex","p-1"],[1,"d-inline-flex","ml-auto"],["placeholder","Select a building",3,"dataSource","fields","allowFiltering","ngModel","ngModelChange","filtering","change",4,"ngIf"],[1,"btn","btn-xs","p-2","mx-1","my-bg-warning"],[1,"btn","btn-xs","p-2","mr-1","my-bg-primary"],["class","btn btn-xs p-2 mr-1 bg-secondary",3,"click",4,"ngIf"],["class","btn btn-xs p-2 mr-1 bg-info",3,"click",4,"ngIf"],["placeholder","Select a building",3,"dataSource","fields","allowFiltering","ngModel","ngModelChange","filtering","change"],["modelNameDropdownlist",""],[1,"btn","btn-xs","p-2","mr-1","bg-secondary",3,"click"],[1,"fa","fa-expand-arrows-alt"],[1,"btn","btn-xs","p-2","mr-1","bg-info",3,"click"],[1,"fa","fa-times"],[1,"row"],[1,"col-md-12"],[1,"card-body",2,"padding","0"],["class","alert alert-danger alert-dismissible",4,"ngIf"],["id","todolist",1,"table","table-bordered","table-responsive"],[1,"thead-dark"],[4,"ngFor","ngForOf"],[1,"alert","alert-danger","alert-dismissible"],["type","button","data-dismiss","alert","aria-hidden","true",1,"close"],[1,"icon","fas","fa-ban"],["scope","col","class","my-align my-sticky text-center",4,"ngIf"],["scope","col",1,"my-align","my-sticky","text-center"],["scope","col",1,"text-center","my-sticky-top"],["rowspan","2",1,"text-center",2,"vertical-align","middle"],["position","RightCenter","content","loading...",1,"fix-css",3,"beforeRender"],["tooltip",""],["class","table-primary my-align",3,"click",4,"ngFor","ngForOf"],["rowspan","2",1,"text-center",2,"vertical-align","middle","width","150px"],["rowspan","2",1,"my-align"],["type","button",1,"btn","btn-success","btn-sm",2,"width","90px",3,"click"],[1,"fa","fa-glass"],["type","button",1,"btn","btn-warning","btn-sm","my-2",2,"width","90px",3,"click"],[1,"fa","fa-fan"],["type","button",1,"btn","btn-sm","btn-info",2,"width","90px",3,"click"],[1,"table-warning"],["class","my-align",3,"dblclick",4,"ngFor","ngForOf"],[1,"table-primary","my-align",3,"click"],["type","text","class","form-control my-align summaryhide real",3,"value",4,"ngIf"],["type","text","autofocustext","","style","pointer-events: initial","class","form-control my-align summary real",3,"ngModel","value","blur","keypress","ngModelChange",4,"ngIf"],["type","text",1,"form-control","my-align","summaryhide","real",3,"value"],["type","text","autofocustext","",1,"form-control","my-align","summary","real",2,"pointer-events","initial",3,"ngModel","value","blur","keypress","ngModelChange"],[1,"my-align",3,"dblclick"],["position","RightCenter",1,"fix-css",3,"content"],["tooltipRow2",""],[4,"ngIf"],[1,"card","my-height"],[1,"card-body","my-vertical"],[1,"text-center","text-danger"],[1,"col-md-4","col-xl-4","text-center"],[1,"col-md-2"],["for","",1,"font-weight-bold"],[1,"col-md-10"],[1,"col-md-2","col-xl-2","text-center"],[1,"col-md-6"],[1,"col-md-8","text-center"],[1,"col-md-4","text-center"],[1,"text-center","mb-1"],["type","button",1,"btn","btn-primary","rounded-pill",3,"click"],[1,"fa","fa-arrow-circle-left"],["type","button",1,"btn","btn-success","rounded-pill","ml-2",3,"disabled","click"],[1,"fas","fa-save"],["class","text-center my-2 text-danger",4,"ngIf"],[1,"row","mb-1"],[1,"col-md-4","col-xl-4"],[1,"col-xl-2"],[1,"align-middle"],["src","../../../../assets/img/gif/arrow.gif","alt","",4,"ngIf"],[1,"col-xl-10"],["class","form-control form-control-lg rounded-pill","autoselect","","type","text",3,"autofocus","name","ngModel","class","ngClass","ngModelChange",4,"ngIf","ngIfElse"],["scanBlock",""],[1,"form-group","col-md-2","col-xl-2"],["type","text",1,"form-control","form-control-lg","rounded-pill","lock",3,"value"],[1,"col-md-8"],["class","form-control form-control-lg rounded-pill","type","text",3,"lock","value","autofocus","class","keyup",4,"ngIf","ngIfElse"],["expectedBlock",""],[1,"col-md-4"],["class","form-control form-control-lg rounded-pill mixing","data-toggle","tooltip","title","tooltip on second input!","type","text",3,"lock","value","id","class","autofocus","click","keyup",4,"ngIf","ngIfElse"],["realElse",""],["src","../../../../assets/img/gif/arrow.gif","alt",""],["autoselect","","type","text",1,"form-control","form-control-lg","rounded-pill",3,"autofocus","name","ngModel","ngClass","ngModelChange"],["type","text",1,"form-control","form-control-lg","rounded-pill",3,"ngModel","name","ngClass","ngModelChange"],["type","text",1,"form-control","form-control-lg","rounded-pill",3,"value","autofocus","keyup"],["type","text",1,"form-control","form-control-lg","rounded-pill","lock",3,"value","keyup"],["data-toggle","tooltip","title","tooltip on second input!","type","text",1,"form-control","form-control-lg","rounded-pill","mixing",3,"value","id","autofocus","click","keyup"],["data-toggle","tooltip","title","tooltip on second input!","type","text",1,"form-control","form-control-lg","rounded-pill","mixing",3,"value","id","click","keyup"],[1,"text-center","my-2","text-danger"],[1,"modal-header"],[1,"modal-title"],[1,"fas","fa-plus"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["rowHeight","38","height","300","allowFiltering","true","showColumnMenu","true",3,"dataSource","allowSorting","filterSettings","editSettings","toolbar","toolbarClick","actionBegin"],["deliveredGrid",""],["field","glueName","isPrimaryKey","true","textAlign","Center","headerText","Glue","width","100"],["field","qty","textAlign","Center","headerText","Qty","width","80"],["field","createdDate","isPrimaryKey","true","textAlign","Center","type","dateTime","format","d MMM, yyyy hh:mm:ss a","headerText","Delivered Date","width","150"],[1,"modal-footer"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(t,e){1&t&&(E.Sb(0,"ngx-spinner",0),E.Sb(1,"p",1),E.Kc(2,"Loading data..."),E.Rb(),E.Rb(),E.Ic(3,Yo,4,2,"div",2),E.Ic(4,sc,45,30,"div",3),E.Ic(5,rc,19,6,"ng-template",null,4,E.Jc)),2&t&&(E.mc("fullScreen",!1),E.zb(3),E.mc("ngIf",e.existGlue),E.zb(1),E.mc("ngIf",e.show))},directives:[l.a,s.n,d.c,r.g,r.j,s.m,k.b,r.b,oi.a,s.l,x.j,b.d,I.d,I.b,x.e,x.b,b.c,I.c,I.a,x.d,x.a],pipes:[S.c],styles:[".my-align[_ngcontent-%COMP%]{vertical-align:middle!important;text-align:center!important;font-weight:700}.fix-css[_ngcontent-%COMP%]{font-weight:700!important;font-size:16px!important;font-family:Source Sans Pro,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol!important}.real[_ngcontent-%COMP%]{background-color:#b8daff!important}input.error-scan[_ngcontent-%COMP%]{background-color:#dc3545}input.error-scan[_ngcontent-%COMP%], input.success-scan[_ngcontent-%COMP%]{width:100%;padding:12px 20px;box-sizing:border-box;border:none;color:#fff}input.success-scan[_ngcontent-%COMP%]{background-color:#3cbc8d;font-weight:700}.lock[_ngcontent-%COMP%]{pointer-events:none}input.warning-focus[_ngcontent-%COMP%]{-webkit-animation:warning-frames .5s infinite;animation:warning-frames .5s infinite;color:#000}input[_ngcontent-%COMP%]{text-align:center}@-webkit-keyframes warning-frames{0%{background-color:#fade40}to{background-color:#e7f70c}}@keyframes warning-frames{0%{background-color:#fade40}to{background-color:#e7f70c}}input.summary[_ngcontent-%COMP%], input.summaryhide[_ngcontent-%COMP%]{border:none!important;padding:0!important}input.summary[_ngcontent-%COMP%]:focus{border-bottom:3px solid #dc3545!important;border-radius:0}.my-sticky[_ngcontent-%COMP%]{top:0;height:40px}.my-sticky[_ngcontent-%COMP%], .my-sticky-glue[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;z-index:997;background-color:#fff}.my-sticky-glue[_ngcontent-%COMP%]{left:72px}.my-sticky-top[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;top:45px;z-index:998;vertical-align:middle}.my-cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}@media only screen and (max-height:1024px){.my-height[_ngcontent-%COMP%]{min-height:868px;position:relative};}@media only screen and (max-height:978px){.my-height[_ngcontent-%COMP%]{min-height:788px;position:relative};}@media only screen and (min-height:1101px){.my-height[_ngcontent-%COMP%]{min-height:945px;position:relative};}@media only screen and (min-height:768px){.my-height[_ngcontent-%COMP%]{min-height:612px;position:relative};}@media only screen and (min-height:625px){.my-height[_ngcontent-%COMP%]{min-height:470px;position:relative};}@media only screen and (min-height:694px){.my-height[_ngcontent-%COMP%]{min-height:539px;position:relative};}@media only screen and (min-height:781px){.my-height[_ngcontent-%COMP%]{min-height:625px;position:relative};}.my-vertical[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;width:100%;transform:translate(-50%,-50%)}.my-bg-success[_ngcontent-%COMP%]{background-color:#c3e6cb}.my-bg-warning[_ngcontent-%COMP%]{background-color:#ffeeba}.my-bg-primary[_ngcontent-%COMP%]{background-color:#b8daff}#todolist[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{width:calc(100% - 17px)}#todolist[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{overflow-y:auto;overflow-x:hidden}#todolist[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], #todolist[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:700}#todolist[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[rowspan][_ngcontent-%COMP%]:nth-child(2), #todolist[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[rowspan][_ngcontent-%COMP%]:nth-child(2){position:-webkit-sticky;position:sticky;left:80px}#todolist[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[rowspan][_ngcontent-%COMP%]:first-child, #todolist[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[rowspan][_ngcontent-%COMP%]:first-child{position:-webkit-sticky;position:sticky;left:0;width:80px}"],changeDetection:0}),lc),dc=o("h9f+"),hc=["barcode"],gc=["grid"];function bc(t,e){if(1&t&&E.Nb(0,"ejs-qrcodegenerator",18,19),2&t){var i=e.$implicit,n=E.gc();E.mc("displayText",n.displayTextMethod)("value",i.code)}}function fc(t,e){1&t&&E.Kc(0),2&t&&E.Mc(" ",e.$implicit.realTotal," kg ")}function pc(t,e){if(1&t&&(E.Kc(0),E.hc(1,"date")),2&t){var i=e.$implicit;E.Mc(" ","0001-01-01T00:00:00"===i.expiredTime?"N/A":E.jc(1,1,i.expiredTime,"dd/MM/yyyy HH:mm")," ")}}var mc,vc,Sc=((vc=function(){function e(t,n,a,o,c,s){i(this,e),this.route=t,this.alertify=n,this.datePipe=a,this.buildingUserService=o,this.makeGlueService=c,this.spinner=s,this.toolbarOptions=["ExcelExport","Search","Print QR Code"],this.pageSettings={pageCount:20,pageSizes:!0,pageSize:5},this.displayTextMethod={visibility:!1}}return a(e,[{key:"ngOnInit",value:function(){var t=JSON.parse(localStorage.getItem("building"));this.building=t,this.filterSettings={type:"Excel"},this.onRouteChange()}},{key:"onRouteChange",value:function(){var t=this;this.route.data.subscribe(function(e){t.glueID=t.route.snapshot.params.glueID,t.getUsers()})}},{key:"configurePrint",value:function(t){var e=window.open("","_blank","left=0,top=0,width=1000,height=900,toolbar=0,scrollbars=0,status=0");e.document.write('\n    <html>\n      <head>\n      </head>\n      <style>\n        * {\n          box-sizing: border-box;\n          -moz-box-sizing: border-box;\n        }\n\n        .content {\n          page-break-after: always;\n          clear: both;\n        }\n\n        .content .qrcode {\n          float:left;\n          width: 100px;\n          margin-top: 10px;\n          padding: 0;\n          margin-left: 0px;\n        }\n\n        .content .info {\n          float:left;\n          list-style: none;\n          width: 200px;\n        }\n        .content .info ul {\n          float:left;\n          list-style: none;\n          padding: 0px;\n          margin: 0px;\n          margin-top: 20px;\n          font-weight: bold;\n          word-wrap: break-word;\n        }\n\n        @page {\n          size: 2.65 1.20 in;\n          page-break-after: always;\n          margin: 0;\n        }\n        @media print {\n          html, body {\n            width: 90mm; // Chi co nhan millimeter\n          }\n        }\n      </style>\n      <body onload="window.print(); window.close()">\n        '.concat(t,"\n      </body>\n    </html>\n    ")),e.document.close()}},{key:"printData",value:function(){var e=this,i=this.grid.getSelectedRecords();if(i.length>0){var n,a="",o=t(i);try{var c=function(){var t=n.value,i=void 0;e.barcode.forEach(function(e){e.value===t.code&&(i=e.element)});var o="0001-01-01T00:00:00"===t.expiredTime?"N/A":e.datePipe.transform(new Date(t.expiredTime),"yyyyMMdd HH:mm");a+="\n       <div class='content'>\n        <div class='qrcode'>\n         ".concat(i.innerHTML,"\n         </div>\n          <div class='info'>\n          <ul>\n              <li class='subInfo'>Name: ").concat(t.glue,"</li>\n              <li class='subInfo'>QR Code: ").concat(t.code,"</li>\n              <li class='subInfo'>Batch: ").concat(t.batchA,"</li>\n              <li class='subInfo'>MFG: ").concat(e.datePipe.transform(new Date(t.createdTime),"yyyyMMdd HH:mm"),"</li>\n              <li class='subInfo'>EXP: ").concat(o,"</li>\n          </ul>\n         </div>\n      </div>\n      ")};for(o.s();!(n=o.n()).done;)c()}catch(s){o.e(s)}finally{o.f()}this.configurePrint(a)}else this.alertify.warning("Please select some glue first!",!0)}},{key:"getUsers",value:function(){var t=this;this.spinner.show(),this.buildingUserService.getAllUsers(1,1e3).subscribe(function(e){var i=e.result.map(function(t){return{ID:t.ID,Username:t.Username,Email:t.Email}});t.users=i,t.getMixingInfoByGlueID(t.glueID)})}},{key:"username",value:function(t){var e;return null===(e=this.users.find(function(e){return e.ID===t}))||void 0===e?void 0:e.Username}},{key:"getMixingInfoByGlueID",value:function(t){var e=this;this.makeGlueService.getMixingInfoByGlueID(t,this.building.id).subscribe(function(t){e.data=t.map(function(t){return{code:t.code,createdTime:new Date(t.createdTime),expiredTime:t.expiredTime,glue:t.glue.name,mixBy:e.username(t.mixBy),realTotal:+parseFloat(t.realTotal).toFixed(3),batchA:t.batchA}}),e.spinner.hide()})}},{key:"count",value:function(t){return Number(t)+1}},{key:"toolbarClick",value:function(t){switch(t.item.text){case"Excel Export":this.grid.excelExport();break;case"Print QR Code":this.printData()}}},{key:"formatDate",value:function(t){var e=new Date(t);return e.toLocaleDateString()+" "+e.toLocaleTimeString()}}]),e}()).\u0275fac=function(t){return new(t||vc)(E.Mb(B.a),E.Mb(F.a),E.Mb(s.d),E.Mb(dc.a),E.Mb(ai.a),E.Mb(l.c))},vc.\u0275cmp=E.Gb({type:vc,selectors:[["app-glue-history"]],viewQuery:function(t,e){var i;1&t&&(E.Qc(hc,!0),E.Qc(gc,!0),E.Qc(hc,!0)),2&t&&(E.xc(i=E.dc())&&(e.qrCode=i.first),E.xc(i=E.dc())&&(e.grid=i.first),E.xc(i=E.dc())&&(e.barcode=i))},features:[E.yb([s.d])],decls:26,vars:7,consts:[["type","square-jelly-box","size","medium",3,"fullScreen"],[1,"loading"],[1,"row"],[1,"col-md-12"],[1,"card"],["height","450px","gridLines","Both","allowFiltering","true","showColumnMenu","true",3,"toolbar","dataSource","allowSorting","filterSettings","allowExcelExport","toolbarClick"],["grid",""],["type","checkbox","isPrimaryKey","true","width","60"],["field","code","headerText","QR Code","width","200","textAlign","Center"],["template",""],["field","glue","headerText","Glue Name","width","200","textAlign","Center"],["field","batchA","headerText","Batch","width","100","textAlign","Center"],["field","realTotal","headerText","Real Total","width","100","textAlign","Center"],["field","mixBy","headerText","Mix By","width","100","textAlign","Center"],["field","expiredTime","headerText","Expired Time","type","date","format","dd/MM/yyyy HH:mm","width","200","textAlign","Center"],["field","createdTime","headerText","Created Time","type","date","format","dd/MM/yyyy HH:mm","width","200","textAlign","Center"],[1,"card-footer"],[1,"float-right"],["width","100px","height","130px","mode","SVG",2,"display","block",3,"displayText","value"],["barcode",""]],template:function(t,e){1&t&&(E.Sb(0,"ngx-spinner",0),E.Sb(1,"p",1),E.Kc(2,"Loading data..."),E.Rb(),E.Rb(),E.Sb(3,"div",2),E.Sb(4,"div",3),E.Sb(5,"div",4),E.Sb(6,"ejs-grid",5,6),E.cc("toolbarClick",function(t){return e.toolbarClick(t)}),E.Sb(8,"e-columns"),E.Nb(9,"e-column",7),E.Sb(10,"e-column",8),E.Ic(11,bc,2,2,"ng-template",null,9,E.Jc),E.Rb(),E.Nb(13,"e-column",10),E.Nb(14,"e-column",11),E.Sb(15,"e-column",12),E.Ic(16,fc,1,1,"ng-template",null,9,E.Jc),E.Rb(),E.Nb(18,"e-column",13),E.Sb(19,"e-column",14),E.Ic(20,pc,2,4,"ng-template",null,9,E.Jc),E.Rb(),E.Nb(22,"e-column",15),E.Rb(),E.Rb(),E.Rb(),E.Sb(23,"div",16),E.Sb(24,"p",17),E.Kc(25),E.Rb(),E.Rb(),E.Rb(),E.Rb()),2&t&&(E.mc("fullScreen",!1),E.zb(6),E.mc("toolbar",e.toolbarOptions)("dataSource",e.data)("allowSorting",!0)("filterSettings",e.filterSettings)("allowExcelExport",!0),E.zb(19),E.Mc("",null==e.data?null:e.data.length," items"))},directives:[l.a,x.j,b.d,I.d,I.b,x.e,x.b,b.c,I.c,I.a,x.d,x.a,g.e],pipes:[s.d],styles:[""]}),vc),yc=((mc=function(){function t(e){i(this,t),this.http=e,this.baseUrl=ft.a.apiUrlEC,this.ModalNameSource=new bt.a(0),this.currentModalName=this.ModalNameSource.asObservable()}return a(t,[{key:"getAllshake",value:function(){return this.http.get(this.baseUrl+"shake/GetAll",{})}},{key:"getShakesByMixingInfoID",value:function(t){return this.http.get(this.baseUrl+"shake/GetShakesByMixingInfoID/"+t,{})}},{key:"create",value:function(t){return this.http.post(this.baseUrl+"shake/Create",t)}},{key:"update",value:function(t){return this.http.put(this.baseUrl+"shake/Update",t)}},{key:"delete",value:function(t){return this.http.delete(this.baseUrl+"shake/Delete/"+t)}},{key:"generateShakes",value:function(t){return this.http.get(this.baseUrl+"shake/GenerateShakes/"+t,{})}}]),t}()).\u0275fac=function(t){return new(t||mc)(E.Zb(v.b))},mc.\u0275prov=E.Ib({token:mc,factory:mc.\u0275fac,providedIn:"root"}),mc);function kc(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"Glue Type")," ")}function Dc(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"Standard Cycle")," ")}function xc(t,e){if(1&t&&E.Kc(0),2&t){var i=e.$implicit;E.Mc(" ",0===i.standardCycle?"N/A":i.standardCycle," ")}}function Cc(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"Actual Cycle")," ")}function wc(t,e){if(1&t&&E.Kc(0),2&t){var i=e.$implicit;E.Mc(" ",0===i.actualCycle?"N/A":i.actualCycle," ")}}function Ic(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"Start Time")," ")}function Tc(t,e){if(1&t&&(E.Kc(0),E.hc(1,"date")),2&t){var i=e.$implicit;E.Mc(" ",null===i.startTime?"N/A":E.jc(1,1,i.startTime,"HH:mm")," ")}}function Rc(t,e){1&t&&(E.Kc(0),E.hc(1,"date")),2&t&&E.Mc(" ",E.jc(1,1,e.$implicit.startTime,"HH:mm")," ")}function Mc(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"End Time")," ")}function Bc(t,e){if(1&t&&(E.Kc(0),E.hc(1,"date")),2&t){var i=e.$implicit;E.Mc(" ",null===i.endTime?"N/A":E.jc(1,1,i.endTime,"HH:mm")," ")}}function Pc(t,e){1&t&&(E.Kc(0),E.hc(1,"date")),2&t&&E.Mc(" ",E.jc(1,1,e.$implicit.endTime,"HH:mm")," ")}function Oc(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"Status")," ")}function Ac(t,e){1&t&&E.Kc(0),2&t&&E.Mc(" ",!0===e.$implicit.status?"pass":"Failed"," ")}var Nc,Ec=((Nc=function(){function t(e,n,a,o){i(this,t),this.alertify=e,this.shakeService=n,this.route=a,this.router=o,this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"},this.option="Default"}return a(t,[{key:"ngOnInit",value:function(){this.onRouteChange()}},{key:"onRouteChange",value:function(){var t=this;this.route.data.subscribe(function(e){void 0!==t.route.snapshot.params.glueName&&(t.glueName=t.route.snapshot.params.glueName.includes("%2B")?t.route.snapshot.params.glueName.replace(/\%2B/g,"+"):t.route.snapshot.params.glueName),t.tab=t.route.snapshot.params.tab,t.mixingInfoID=t.route.snapshot.params.mixingInfoID,t.getShakesByMixingInfoID()})}},{key:"finish",value:function(){}},{key:"actionBegin",value:function(t){}},{key:"getShakesByMixingInfoID",value:function(){var t=this;this.shakeService.getShakesByMixingInfoID(this.mixingInfoID).subscribe(function(e){e.status?t.shakesData=e.data||[]:t.alertify.error(e.message)},function(e){t.alertify.error("L\u1ed7i m\u1ea1ng ho\u1eb7c m\xe1y ch\u1ee7 \u0111\xe3 b\u1ecb t\u1eaft!")})}},{key:"back",value:function(){this.router.navigate(["/ec/execution/todolist-2/"+this.tab])}}]),t}()).\u0275fac=function(t){return new(t||Nc)(E.Mb(F.a),E.Mb(yc),E.Mb(B.a),E.Mb(B.c))},Nc.\u0275cmp=E.Gb({type:Nc,selectors:[["app-shake"]],decls:52,vars:12,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row","pt-2"],[1,"col-md-12"],["allowResizing","true","gridLines","Both",3,"dataSource","editSettings","actionBegin"],["grid",""],["field","chemicalType","headerText","Chemical Type","width","100","textAlign","Center"],["headerTemplate",""],["field","standardCycle","headerText","Standard Cycle","width","200","textAlign","Center"],["template",""],["field","actualCycle","headerText","Actual Cycle","width","200","textAlign","Center"],["field","startTime","headerText","Start Time","width","100","textAlign","Center"],["editTemplate",""],["field","endTime","headerText","End Time","width","100","textAlign","Center"],["field","status","headerText","Status","width","200","textAlign","Center"],[1,"text-center","my-1"],["type","button",1,"btn","btn-primary","rounded-pill",3,"click"],[1,"fa","fa-arrow-circle-left"],["type","button",1,"btn","btn-success","rounded-pill","ml-2",3,"click"],[1,"fas","fa-save"]],template:function(t,e){1&t&&(E.Sb(0,"div",0),E.Sb(1,"div",1),E.Sb(2,"h4"),E.Kc(3),E.hc(4,"translate"),E.Rb(),E.Rb(),E.Sb(5,"div",2),E.Sb(6,"div",3),E.Sb(7,"div",4),E.Sb(8,"ejs-grid",5,6),E.cc("actionBegin",function(t){return e.actionBegin(t)}),E.Sb(10,"e-columns"),E.Sb(11,"e-column",7),E.Ic(12,kc,2,3,"ng-template",null,8,E.Jc),E.Rb(),E.Sb(14,"e-column",9),E.Ic(15,Dc,2,3,"ng-template",null,8,E.Jc),E.Ic(17,xc,1,1,"ng-template",null,10,E.Jc),E.Rb(),E.Sb(19,"e-column",11),E.Ic(20,Cc,2,3,"ng-template",null,8,E.Jc),E.Ic(22,wc,1,1,"ng-template",null,10,E.Jc),E.Rb(),E.Sb(24,"e-column",12),E.Ic(25,Ic,2,3,"ng-template",null,8,E.Jc),E.Ic(27,Tc,2,4,"ng-template",null,10,E.Jc),E.Ic(29,Rc,2,4,"ng-template",null,13,E.Jc),E.Rb(),E.Sb(31,"e-column",14),E.Ic(32,Mc,2,3,"ng-template",null,8,E.Jc),E.Ic(34,Bc,2,4,"ng-template",null,10,E.Jc),E.Ic(36,Pc,2,4,"ng-template",null,13,E.Jc),E.Rb(),E.Sb(38,"e-column",15),E.Ic(39,Oc,2,3,"ng-template",null,8,E.Jc),E.Ic(41,Ac,1,1,"ng-template",null,13,E.Jc),E.Rb(),E.Rb(),E.Rb(),E.Sb(43,"div",16),E.Sb(44,"button",17),E.cc("click",function(){return e.back()}),E.Nb(45,"i",18),E.Kc(46),E.hc(47,"translate"),E.Rb(),E.Sb(48,"button",19),E.cc("click",function(){return e.finish()}),E.Nb(49,"i",20),E.Kc(50),E.hc(51,"translate"),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Rb()),2&t&&(E.zb(3),E.Nc(" ",E.ic(4,6,"Shake")," ",e.glueName," "),E.zb(5),E.mc("dataSource",e.shakesData)("editSettings",e.editSettings),E.zb(38),E.Mc(" ",E.ic(47,8,"BACK")," "),E.zb(4),E.Mc(" ",E.ic(51,10,"FINISHED")," "))},directives:[x.j,b.d,I.d,I.b,x.e,x.b,b.c,I.c,I.a,x.d,x.a],pipes:[S.c,s.d],styles:[""]}),Nc);new v.e({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")});var Fc,_c=((Fc=function(){function t(e){i(this,t),this.http=e,this.baseUrl=ft.a.apiUrlEC}return a(t,[{key:"getStirInfo",value:function(t){return this.http.get("".concat(this.baseUrl,"Stir/GetStirInfo/").concat(t))}},{key:"getRPM",value:function(t){return this.http.get("".concat(this.baseUrl,"Stir/GetRPM/").concat(t))}},{key:"getRPMByMachineCode",value:function(t,e,i){return this.http.get("".concat(this.baseUrl,"Stir/GetRPMByMachineCode/").concat(t,"/").concat(e,"/").concat(i))}},{key:"getStirByMixingInfoID",value:function(t){return this.http.get("".concat(this.baseUrl,"Stir/getStirByMixingInfoID/").concat(t))}},{key:"create",value:function(t){return this.http.post(this.baseUrl+"Stir/Create",t)}},{key:"update",value:function(t){return this.http.put(this.baseUrl+"Stir/Update",t)}},{key:"scanMachine",value:function(t,e){return this.http.get("".concat(this.baseUrl,"Stir/scanMachine/").concat(t,"/").concat(e),{})}},{key:"updateStartScanTime",value:function(t){return this.http.put("".concat(this.baseUrl,"Stir/UpdateStartScanTime/").concat(t),{})}}]),t}()).\u0275fac=function(t){return new(t||Fc)(E.Zb(v.b))},Fc.\u0275prov=E.Ib({token:Fc,factory:Fc.\u0275fac,providedIn:"root"}),Fc),Lc=["grid"];function Kc(t,e){if(1&t&&(E.Sb(0,"div",20),E.Sb(1,"b",19),E.Kc(2),E.hc(3,"translate"),E.Rb(),E.Kc(4),E.hc(5,"date"),E.Rb()),2&t){var i=E.gc();E.zb(2),E.Mc("",E.ic(3,2,"Start Scan Time"),": "),E.zb(2),E.Mc(" ",E.jc(5,4,i.startScanTime,"HH:mm:ss")," ")}}function jc(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"SEQ_LABEL")," ")}function zc(t,e){if(1&t&&(E.Sb(0,"span",19),E.Kc(1),E.hc(2,"translate"),E.Rb()),2&t){var i=e.$implicit,n=E.gc();E.zb(1),E.Nc(" ",E.ic(2,2,"SEQ_LABEL")," ",n.NO(i.index),"")}}function Hc(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"Glue Type")," ")}function Uc(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"Standard Duration")," ")}function Gc(t,e){1&t&&E.Kc(0),2&t&&E.Mc("",e.$implicit.standardDuration," s")}function Jc(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"Actual Duration")," ")}function Qc(t,e){1&t&&E.Kc(0),2&t&&E.Mc("",e.$implicit.actualDuration," s")}function $c(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"START_TIME_LABEL")," ")}function Vc(t,e){if(1&t&&(E.Kc(0),E.hc(1,"date")),2&t){var i=e.$implicit;E.Mc(" ","0001-01-01T00:00:00"!==i.startTime?E.jc(1,1,i.startTime,"hh:mm:ss"):"#N/A","")}}function qc(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"END_TIME_LABEL")," ")}function Wc(t,e){if(1&t&&(E.Kc(0),E.hc(1,"date")),2&t){var i=e.$implicit;E.Mc(" ","0001-01-01T00:00:00"!==i.endTime?E.jc(1,1,i.endTime,"hh:mm:ss"):"#N/A","")}}function Yc(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"STATUS_LABEL_STIR")," ")}function Xc(t,e){if(1&t&&(E.Sb(0,"span"),E.Kc(1),E.Rb()),2&t){var i=e.$implicit;E.Bb(!0===i.status?"badge badge-success":"badge badge-danger"),E.zb(1),E.Lc(!0===i.status?"Pass":"fail")}}function Zc(t,e){1&t&&(E.Kc(0),E.hc(1,"translate")),2&t&&E.Mc(" ",E.ic(1,1,"OPTION")," ")}function ts(t,e){if(1&t){var i=E.Tb();E.Sb(0,"div",36),E.Sb(1,"button",37),E.cc("click",function(){E.Bc(i);var t=E.gc().$implicit;return E.gc().confirmData(t)}),E.Nb(2,"i",38),E.Kc(3," Confirm"),E.Rb(),E.Rb()}if(2&t){var n=E.gc().$implicit,a=E.gc();E.zb(1),E.mc("disabled",n.mixingStatus===a.NA||n.mixingStatus===a.NOT_STIRRED_YET)}}function es(t,e){if(1&t&&E.Ic(0,ts,4,1,"div",35),2&t){var i=e.$implicit;E.mc("ngIf",!1===i.status&&0===i.actualDuration)}}function is(t,e){1&t&&(E.Qb(0),E.Sb(1,"button",55),E.Kc(2),E.hc(3,"translate"),E.Rb(),E.Pb()),2&t&&(E.zb(2),E.Mc("",E.ic(3,1,"Ok"),"k"))}function ns(t,e){1&t&&(E.Sb(0,"button",56),E.Kc(1),E.hc(2,"translate"),E.Rb()),2&t&&(E.zb(1),E.Lc(E.ic(2,1,"Invalid")))}function as(t,e){if(1&t){var i=E.Tb();E.Sb(0,"button",57),E.cc("click",function(){return E.Bc(i),E.gc(2).updateStir()}),E.Kc(1),E.hc(2,"translate"),E.Rb()}2&t&&(E.zb(1),E.Lc(E.ic(2,1,"Confirm")))}function os(t,e){if(1&t){var i=E.Tb();E.Sb(0,"div",39),E.Sb(1,"h4",40),E.Nb(2,"i",41),E.Kc(3),E.hc(4,"translate"),E.Rb(),E.Sb(5,"button",42),E.cc("click",function(){return e.$implicit.dismiss("Cross click")}),E.Sb(6,"span",43),E.Kc(7,"\xd7"),E.Rb(),E.Rb(),E.Rb(),E.Sb(8,"div",44),E.Sb(9,"div",6),E.Sb(10,"div",45),E.Sb(11,"label"),E.Kc(12,"AVG RPM: "),E.Rb(),E.Rb(),E.Sb(13,"div",46),E.Nb(14,"input",47),E.Rb(),E.Rb(),E.Sb(15,"div",6),E.Sb(16,"div",45),E.Sb(17,"label"),E.Kc(18),E.hc(19,"translate"),E.Rb(),E.Rb(),E.Sb(20,"div",46),E.Sb(21,"input",48),E.cc("valueChange",function(t){return E.Bc(i),E.gc().totalMinutes=t}),E.Rb(),E.Rb(),E.Rb(),E.Sb(22,"div",6),E.Sb(23,"div",45),E.Sb(24,"label"),E.Kc(25),E.hc(26,"translate"),E.Rb(),E.Rb(),E.Sb(27,"div",46),E.Ic(28,is,4,3,"ng-container",49),E.Ic(29,ns,3,3,"ng-template",null,50,E.Jc),E.Rb(),E.Rb(),E.Sb(31,"div",6),E.Sb(32,"div",51),E.Ic(33,as,3,3,"button",52),E.Rb(),E.Rb(),E.Rb(),E.Sb(34,"div",53),E.Sb(35,"button",54),E.cc("click",function(){return e.$implicit.close("Close click")}),E.Kc(36,"Close"),E.Rb(),E.Rb()}if(2&t){var n=E.yc(30),a=E.gc();E.zb(3),E.Mc(" ",E.ic(4,8,"Stiring Information Details")," "),E.zb(11),E.mc("value",a.rpm),E.zb(4),E.Mc("",E.ic(19,10,"Minutes"),": "),E.zb(3),E.mc("value",a.totalMinutes),E.zb(4),E.Mc("",E.ic(26,12,"Status"),": "),E.zb(3),E.mc("ngIf",a.status)("ngIfElse",n),E.zb(5),E.mc("ngIf",0===a.stir.rpm)}}var cs,ss,rs=((ss=function(){function t(e,n,a,o,c,s,r,l,u,d){i(this,t),this.route=e,this.modalService=n,this.alertify=a,this.datePipe=o,this.ingredientService=c,this.settingService=s,this.stirService=r,this.router=l,this.todolistService=u,this.translate=d,this.ADMIN=1,this.SUPERVISOR=2,this.STIRRED=1,this.NOT_STIRRED_YET=0,this.NA=2,this.filterSettings={type:"Excel"},this.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},this.toolbarOptions=["ExcelExport","Search"],this.value="",this.dateValue="",this.Envalue="",this.interval=1,this.customFormat="HH:mm:ss a",this.ingredients=[],this.timeStir=0,this.settingData=[],this.rpm=0,this.minutes=0,this.totalMinutes=0,this.stirData=[],this.standardRPM=0,this.duration=0,this.startScanTime=null,this.subject=new O.a,this.subscription=[]}return a(t,[{key:"ngOnDestroy",value:function(){this.subscription.forEach(function(t){return t.unsubscribe()})}},{key:"ngOnInit",value:function(){this.building=JSON.parse(localStorage.getItem("building")),this.role=JSON.parse(localStorage.getItem("level")),this.startStiringTime=new Date,this.getAllSetting(),this.onRouteChange(),this.checkQRCode()}},{key:"checkQRCode",value:function(){var t=this;this.subscription.push(this.subject.pipe(Object(A.a)(500)).subscribe(function(e){return Object(P.a)(t,void 0,void 0,regeneratorRuntime.mark(function t(){var i,n,a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.stirData.every(function(t){return t.actualDuration>0}),i=e.QRCode,t.next=5,this.scanQrCode(i);case 5:if(n=t.sent,this.qrCode=i,a={id:0,glueName:this.glueName,settingID:n.id,mixingInfoID:this.mixingInfoID,startScanTime:new Date,startStiringTime:new Date},0!==this.stirData.length){t.next=13;break}return t.next=11,this.create(a);case 11:t.next=15;break;case 13:return t.next=15,this.updateStartScanTime(this.mixingInfoID);case 15:return t.next=17,this.getStirByMixingInfoID(this.mixingInfoID);case 17:o=t.sent,this.stirData=o,this.getStandardRPMAndDuration(),t.next=24;break;case 21:t.prev=21,t.t0=t.catch(0),this.alertify.error("QR Code invalid!",!0);case 24:case"end":return t.stop()}},t,this,[[0,21]])}))}))}},{key:"onRouteChange",value:function(){var t=this;this.route.data.subscribe(function(e){t.glueName=t.route.snapshot.params.glueName,t.mixingInfoID=t.route.snapshot.params.mixingInfoID,t.tab=t.route.snapshot.params.tab,t.loadData()})}},{key:"toolbarClick",value:function(t){switch(t.item.text){case"ExcelExport":this.grid.excelExport()}}},{key:"onChange",value:function(t,e,i){this.settingID=t.target.checked?+t.target.value:null;var n="0001-01-01T00:00:00",a=new Date,o=new Date;for(var c in this.startStiringTime=new Date,o.setMinutes(a.getMinutes()+3),this.glues)if(this.glues[c].id===e.id){if(0==+t.target.value){this.glues[c].startTime=n,this.glues[c].endTime=n,this.glues[c].settingID=t.target.checked?0:null;break}this.glues[c].startTime=t.target.checked?a:n,this.glues[c].endTime=t.target.checked?o:n,this.glues[c].settingID=this.settingID;break}this.grid.refresh()}},{key:"getStirInfo",value:function(t){return this.stirService.getStirInfo(t).toPromise()}},{key:"getRPM",value:function(t){return this.stirService.getRPM(t).toPromise()}},{key:"getRPMByMachineCode",value:function(t,e,i){return this.stirService.getRPMByMachineCode(t,e,i).toPromise()}},{key:"loadStir",value:function(){return Object(P.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getStirInfo(this.glueName);case 3:e=t.sent.map(function(t){return{id:t.id,stirID:t.stirID,glueName:t.glueName,qty:t.qty,createdTime:t.createdTime,mixingStatus:t.mixingStatus,startTime:t.startTime,endTime:t.endTime,settingID:t.settingID,status:t.status,totalMinutes:t.totalMinutes,rpm:t.rpm,setting:t.setting,glueType:t.glueType,machineType:t.machineType}}),this.glues=e,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),this.alertify.error(t.t0+"");case 10:case"end":return t.stop()}},t,this,[[0,7]])}))}},{key:"loadRPM",value:function(t){return Object(P.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getRPM(t);case 3:if(0!==(i=e.sent).rpm){e.next=6;break}return e.abrupt("return",(this.alertify.warning("Kh\xf4ng t\xecm th\u1ea5y rpm trong kho\u1ea3n th\u1eddi gian n\xe0y!",!0),void this.modalReference.close()));case 6:this.stir.stirID>0&&this.stir.rpm>0?(this.rpm=this.stir.rpm,this.minutes=this.stir.totalMinutes,this.totalMinutes=this.stir.totalMinutes):(this.rpm=i.rpm,this.minutes=i.minutes,this.totalMinutes=i.totalMinutes),this.status=this.rpm>=this.stir.setting.minRPM&&this.rpm<=this.stir.setting.maxRPM,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),this.alertify.error(e.t0+"");case 12:case"end":return e.stop()}},e,this,[[0,9]])}))}},{key:"loadRPMByMachineCode",value:function(t,e,i){return Object(P.a)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.getRPMByMachineCode(t,e,i);case 3:if(0!==(a=n.sent).rpm){n.next=6;break}return n.abrupt("return",(this.alertify.warning("Can not find the RPM at this moment!!! <br> Kh\xf4ng t\xecm th\u1ea5y RPM trong kho\u1ea3n th\u1eddi gian n\xe0y!",!0),void this.modalReference.close()));case 6:this.rpm=a.rpm,this.minutes=a.minutes,this.totalMinutes=a.totalMinutes,n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),this.alertify.error(n.t0+"");case 12:case"end":return n.stop()}},n,this,[[0,9]])}))}},{key:"stirGlue",value:function(t){var e=this,i=new Date,n=new Date;this.startStiringTime=new Date,n.setMinutes(i.getMinutes()+3),this.finishStiringTime=new Date;var a=this.settingData.filter(function(e){return e.glueTypeID===t.glueType.id})[0],o={id:0,rpm:0,totalMinutes:0,status:!1,glueName:t.glueName,settingID:null==a?void 0:a.id,mixingInfoID:t.id,startTime:this.datePipe.transform(i,"yyyy-MM-dd HH:mm:ss"),endTime:this.datePipe.transform(n,"yyyy-MM-dd HH:mm:ss"),startStiringTime:this.startStiringTime,finishStiringTime:this.finishStiringTime};this.settingService.AddStir(o).subscribe(function(i){e.todolistService.updateStartStirTimeByMixingInfoID(t.id).subscribe(function(){e.alertify.success("Success"),e.loadStir()},function(t){})})}},{key:"confirm",value:function(t){var e=this;this.todolistService.updateFinishStirTimeByMixingInfoID(t.id).subscribe(function(){e.alertify.success("Success"),e.loadStir()},function(t){})}},{key:"saveStir",value:function(t){var e=this;if(null!==t.settingID||!1!==t.x){var i=new Date,n=new Date;this.startStiringTime=new Date,n.setMinutes(i.getMinutes()+3),this.finishStiringTime=new Date;var a={id:0,rpm:0,totalMinutes:0,status:this.status,glueName:t.glueName,settingID:0===t.settingID?null:t.settingID,mixingInfoID:t.id,startTime:this.datePipe.transform(i,"yyyy-MM-dd HH:mm:ss"),endTime:this.datePipe.transform(n,"yyyy-MM-dd HH:mm:ss"),startStiringTime:this.startStiringTime,finishStiringTime:this.finishStiringTime};this.settingService.AddStir(a).subscribe(function(t){e.alertify.success("Success"),e.loadStir()})}else this.alertify.warning("Please select glue type radio button first!!!<br> H\xe3y ch\u1ecdn lo\u1ea1i keo tr\u01b0\u1edbc!!!",!0)}},{key:"dataBound",value:function(){}},{key:"updateStir",value:function(){var t=this;this.settingService.updateStir({id:this.stir.stirID,rpm:this.rpm,totalMinutes:this.totalMinutes,status:this.status,glueName:this.stir.glueName,settingID:this.stir.settingID,mixingInfoID:this.stir.mixingInfoID,startTime:this.stir.startTime,endTime:this.stir.endTime}).subscribe(function(e){t.alertify.success("Success"),t.modalReference.close(),t.loadStir()})}},{key:"getAllSetting",value:function(){var t=this,e=this.building.id;[this.ADMIN,this.SUPERVISOR].includes(this.role.id)&&(e=8);var i={building:null,buildingID:8,id:0,machineCode:"",machineType:"X",maxRPM:350,minRPM:250,name:null};this.settingService.getSettingByBuilding(e).subscribe(function(e){t.settingData=e,t.settingData.push(i)})}},{key:"NO",value:function(t){return(this.grid.pageSettings.currentPage-1)*this.grid.pageSettings.pageSize+Number(t)+1}},{key:"showModal",value:function(t,e){return Object(P.a)(this,void 0,void 0,regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return this.stir=e,this.modalReference=this.modalService.open(t,{size:"lg"}),i.next=4,this.loadRPM(e.stirID);case 4:case"end":return i.stop()}},i,this)}))}},{key:"onNgModelChangeScanQRCode",value:function(t){return Object(P.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.subject.next({QRCode:t,ingredient:null});case 1:case"end":return e.stop()}},e,this)}))}},{key:"onNgModelChangeScanQRCode2",value:function(t){return Object(P.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var i,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(3!==t.length){e.next=26;break}return e.prev=1,this.stirData.every(function(t){return t.actualDuration>0}),e.next=5,this.scanQrCode(t);case 5:if(i=e.sent,this.qrCode=t,n={id:0,glueName:this.glueName,settingID:i.id,mixingInfoID:this.mixingInfoID,startScanTime:new Date,startStiringTime:new Date},0!==this.stirData.length){e.next=13;break}return e.next=11,this.create(n);case 11:e.next=15;break;case 13:return e.next=15,this.updateStartScanTime(this.mixingInfoID);case 15:return e.next=17,this.getStirByMixingInfoID(this.mixingInfoID);case 17:a=e.sent,this.stirData=a,this.getStandardRPMAndDuration(),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(1),this.alertify.error("QR Code invalid!",!0);case 24:e.next=27;break;case 26:this.alertify.warning("The QR Code is incorrect format <br> M\xe3 QR sai \u0111\u1ecbnh d\u1ea1ng c\u1ee7a h\u1ec7 th\u1ed1ng!",!0);case 27:case"end":return e.stop()}},e,this,[[1,21]])}))}},{key:"confirmData",value:function(t){return Object(P.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var i,n,a,o,c,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("0001-01-01T00:00:00"===t.startScanTime){e.next=20;break}if(i=(new Date).getTime(),n=t.standardDuration>0?t.standardDuration:60*t.glueType.minutes,a=new Date(t.startScanTime),!(i<a.setSeconds(a.getSeconds()+n))){e.next=4;break}return e.abrupt("return",void this.alertify.error("The glue is stiring! <br> M\xe1y \u0111ang khu\u1ea5y keo b\u1ea1n \u01a1i!",!0));case 4:return e.prev=4,o={id:t.id,glueName:t.glueName,settingID:t.settingID,mixingInfoID:this.mixingInfoID,glueType:t.glueType,startScanTime:new Date,finishStiringTime:new Date},e.next=8,this.update(o);case 8:return c=e.sent,e.next=11,this.getStirByMixingInfoID(this.mixingInfoID);case 11:s=e.sent,this.stirData=s,this.getStandardRPMAndDuration(),!0===c.status&&this.goToTodolist(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),this.alertify.error(e.t0.toString());case 18:e.next=21;break;case 20:this.alertify.error("Please scan the machine QR Code first! <br> H\xe3y qu\xe9t m\xe3 QR c\u1ee7a m\xe1y tr\u01b0\u1edbc!",!0);case 21:case"end":return e.stop()}},e,this,[[4,15]])}))}},{key:"loadData",value:function(){return Object(P.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getStirByMixingInfoID(this.mixingInfoID);case 3:e=t.sent,this.stirData=e,this.getStandardRPMAndDuration(),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}},t,this,[[0,7]])}))}},{key:"getStandardRPMAndDuration",value:function(){if(this.stirData.length>0){this.standardRPM=this.stirData[0].glueType.rpm,this.duration=this.stirData[0].glueType.minutes;var t=this.stirData.filter(function(t){return 0===t.actualDuration})[0];void 0!==t&&(this.startScanTime="0001-01-01T00:00:00"===(null==t?void 0:t.startScanTime)?null:null==t?void 0:t.startScanTime,console.log("start scan time",this.startScanTime))}else this.standardRPM=0,this.duration=0}},{key:"updateStartScanTime",value:function(t){return this.stirService.updateStartScanTime(t).toPromise()}},{key:"scanQrCode",value:function(t){return this.stirService.scanMachine(3===this.building.level?this.building.parentID:this.building.id,t).toPromise()}},{key:"create",value:function(t){return this.stirService.create(t).toPromise()}},{key:"update",value:function(t){return this.stirService.update(t).toPromise()}},{key:"getStirByMixingInfoID",value:function(t){return this.stirService.getStirByMixingInfoID(t).toPromise()}},{key:"goToTodolist",value:function(){return this.router.navigate(["/ec/execution/todolist-2/".concat(this.tab,"/").concat(this.glueName)])}}]),t}()).\u0275fac=function(t){return new(t||ss)(E.Mb(B.a),E.Mb(h.b),E.Mb(F.a),E.Mb(s.d),E.Mb(L.a),E.Mb(wo.a),E.Mb(_c),E.Mb(B.c),E.Mb(Dt.a),E.Mb(S.d))},ss.\u0275cmp=E.Gb({type:ss,selectors:[["app-stir"]],viewQuery:function(t,e){var i;1&t&&E.Qc(Lc,!0),2&t&&E.xc(i=E.dc())&&(e.grid=i.first)},features:[E.yb([s.d])],decls:82,vars:33,consts:[[1,"card"],[1,"card-header"],[1,"card-tools"],["type","button","data-card-widget","collapse",1,"btn","btn-sm","btn-primary",3,"click"],[1,"fas","fa-reply"],[1,"card-body","p-0","my-3"],[1,"row"],[1,"col-md-12"],[1,"w3-container","w3-card-4","w3-text-black"],[1,"w3-center"],[1,"w3-row","w3-section"],[1,"w3-col",2,"width","100px"],["src","../../../../assets/img/gif/1981.gif","height","40px","width","80%","alt",""],[1,"w3-rest"],["name","qrcode","autofocusSearch","","type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"card-body","p-0"],[1,"text-center","text-danger"],[1,"d-inline-flex","mb-3"],[1,"p-2","mx-1"],[1,"font-weight-bold"],[1,"p-2","mr-1"],["class","p-2 mr-1",4,"ngIf"],["gridLines","Both","allowFiltering","true","allowPaging","true","allowResizing","true","showColumnMenu","true",3,"dataSource","allowSorting","allowExcelExport","filterSettings","pageSettings","toolbar","rowHeight","dataBound","toolbarClick"],["grid",""],["field","Seq.","textAlign","Center","headerText","Seq.","width","60"],["headerTemplate",""],["template",""],["field","glueType.title","textAlign","Center","headerText","Glue Type","width","100"],["field","standardDuration","textAlign","Center","headerText","DUR","width","130"],["field","actualDuration","textAlign","Center","headerText","Qty","width","130"],["field","startTime","textAlign","Center","type","dateTime","format","hh:mm:ss","headerText","Start Time","width","100"],["field","endTime","textAlign","Center","type","dateTime","format","hh:mm:ss","headerText","End Time","width","100"],["field","status","textAlign","Center","headerText","Status","width","110"],["field","option","textAlign","Center","headerText","Option","width","100"],["infoModal",""],["class","btn-group",4,"ngIf"],[1,"btn-group"],["type","button",1,"btn","btn-xs","btn-primary",3,"disabled","click"],[1,"fa","fa-check"],[1,"modal-header"],[1,"modal-title"],[1,"fas","fa-plus"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-md-3","mt-2"],[1,"col-md-8","mt-2"],["type","text","name","","disabled","","id","",1,"form-control","form-control-sm",3,"value"],["type","text","disabled","",1,"form-control","form-control-sm",3,"value","valueChange"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"col-md-12","mt-4","text-center"],["style","margin: 3px;","type","button","class","btn btn-success",3,"click",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-info","btn-sm",2,"margin","3px"],["type","button",1,"btn","btn-danger","btn-sm",2,"margin","3px"],["type","button",1,"btn","btn-success",2,"margin","3px",3,"click"]],template:function(t,e){1&t&&(E.Sb(0,"div",0),E.Sb(1,"div",1),E.Sb(2,"h3"),E.Kc(3),E.hc(4,"translate"),E.hc(5,"translate"),E.Rb(),E.Sb(6,"div",2),E.Sb(7,"button",3),E.cc("click",function(){return e.goToTodolist()}),E.Nb(8,"i",4),E.Kc(9),E.hc(10,"translate"),E.Rb(),E.Rb(),E.Rb(),E.Sb(11,"div",5),E.Sb(12,"div",6),E.Sb(13,"div",7),E.Sb(14,"form",8),E.Sb(15,"h2",9),E.Kc(16,"Scan QR Code"),E.Rb(),E.Sb(17,"div",10),E.Sb(18,"div",11),E.Nb(19,"img",12),E.Rb(),E.Sb(20,"div",13),E.Sb(21,"input",14),E.cc("ngModelChange",function(t){return e.onNgModelChangeScanQRCode(t)}),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Sb(22,"div",15),E.Sb(23,"h3",16),E.Kc(24),E.hc(25,"translate"),E.Rb(),E.Sb(26,"div",17),E.Sb(27,"div",18),E.Sb(28,"b",19),E.Kc(29),E.hc(30,"translate"),E.Rb(),E.Kc(31),E.Rb(),E.Sb(32,"div",20),E.Sb(33,"b",19),E.Kc(34),E.hc(35,"translate"),E.Rb(),E.Kc(36),E.hc(37,"translate"),E.Rb(),E.Ic(38,Kc,6,7,"div",21),E.Rb(),E.Sb(39,"ejs-grid",22,23),E.cc("dataBound",function(){return e.dataBound()})("toolbarClick",function(t){return e.toolbarClick(t)}),E.Sb(41,"e-columns"),E.Sb(42,"e-column",24),E.Ic(43,jc,2,3,"ng-template",null,25,E.Jc),E.Ic(45,zc,3,4,"ng-template",null,26,E.Jc),E.Rb(),E.Sb(47,"e-column",27),E.Ic(48,Hc,2,3,"ng-template",null,25,E.Jc),E.Rb(),E.Sb(50,"e-column",28),E.Ic(51,Uc,2,3,"ng-template",null,25,E.Jc),E.Ic(53,Gc,1,1,"ng-template",null,26,E.Jc),E.Rb(),E.Sb(55,"e-column",29),E.Ic(56,Jc,2,3,"ng-template",null,25,E.Jc),E.Ic(58,Qc,1,1,"ng-template",null,26,E.Jc),E.Rb(),E.Sb(60,"e-column",30),E.Ic(61,$c,2,3,"ng-template",null,25,E.Jc),E.Ic(63,Vc,2,4,"ng-template",null,26,E.Jc),E.Rb(),E.Sb(65,"e-column",31),E.Ic(66,qc,2,3,"ng-template",null,25,E.Jc),E.Ic(68,Wc,2,4,"ng-template",null,26,E.Jc),E.Rb(),E.Sb(70,"e-column",32),E.Ic(71,Yc,2,3,"ng-template",null,25,E.Jc),E.Ic(73,Xc,2,3,"ng-template",null,26,E.Jc),E.Rb(),E.Sb(75,"e-column",33),E.Ic(76,Zc,2,3,"ng-template",null,25,E.Jc),E.Ic(78,es,1,1,"ng-template",null,26,E.Jc),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Ic(80,os,37,14,"ng-template",null,34,E.Jc)),2&t&&(E.zb(3),E.Nc("",E.ic(4,19,"EXECUTION")," - ",E.ic(5,21,"STIR"),""),E.zb(6),E.Mc(" ",E.ic(10,23,"BACK")," "),E.zb(12),E.mc("ngModel",e.qrCode),E.zb(3),E.Nc("",E.ic(25,25,"GLUE_NAME"),": ",e.glueName,""),E.zb(5),E.Mc("",E.ic(30,27,"Standard RPM"),":"),E.zb(2),E.Mc(" ",e.standardRPM,""),E.zb(3),E.Mc("",E.ic(35,29,"Duration"),":"),E.zb(2),E.Nc(" ",e.duration," ",E.ic(37,31,"minutes"),""),E.zb(2),E.mc("ngIf",null!==e.startScanTime),E.zb(1),E.mc("dataSource",e.stirData)("allowSorting",!0)("allowExcelExport",!0)("filterSettings",e.filterSettings)("pageSettings",e.pageSettings)("toolbar",e.toolbarOptions)("rowHeight",60))},directives:[r.p,r.h,r.i,r.b,K,r.g,r.j,s.n,x.j,b.d,I.d,I.b,x.e,x.b,b.c,I.c,I.a,x.d,x.a],pipes:[S.c,s.d],styles:[""],encapsulation:2}),ss),ls=((cs=function(){function t(){var e=this;i(this,t),this.connectionUrl=ft.a.scalingHubLocal,this.counter=0,this.connect=function(){e.startConnection()},this.close=function(){return Object(P.a)(e,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.hubConnection.stop();case 3:console.log("Mixing service stoped hub"),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log("Mixing service Cant not stop hub",t.t0);case 9:case"end":return t.stop()}},t,this,[[0,6]])}))},this.startConnection=function(){return Object(P.a)(e,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.numberOfAttempts=this.numberOfAttempts+1,this.hubConnection=(new ei.a).configureLogging(ei.c.Error).withUrl(this.connectionUrl).build(),this.setSignalrClientMethods(),t.prev=1,t.next=4,this.hubConnection.start();case 4:console.log("MixingService connected hub"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),alert("Kh\xf4ng th\u1ec3 k\u1ebft n\u1ed1i t\u1edbi c\xe2n! Vui l\xf2ng li\xean h\u1ec7 administrator!");case 10:case"end":return t.stop()}},t,this,[[1,7]])}))},this.counter++,console.log(this.counter),this.numberOfAttempts=0,this.receiveAmount=new bt.a(null)}return a(t,[{key:"ngOnDestroy",value:function(){console.log("Mixing Service destroy"),this.numberOfAttempts=0}},{key:"offWeighingScale",value:function(){this.hubConnection.off("Welcom")}},{key:"setSignalrClientMethods",value:function(){var t=this;this.hubConnection.onreconnected(function(){console.log("Mixing service Restarted signalr!")}),this.hubConnection.on("Welcom",function(e,i,n){t.receiveAmount.next({weighingScaleID:e,amount:i,unit:n})}),this.hubConnection.on("UserConnected",function(t){console.log("Mixing service",t)}),this.hubConnection.on("UserDisconnected",function(t){console.log("Mixing service UserDisconnected",t)})}}]),t}()).\u0275fac=function(t){return new(t||cs)},cs.\u0275prov=E.Ib({token:cs,factory:cs.\u0275fac,providedIn:"root"}),cs);function us(t,e){1&t&&E.Nb(0,"img",48)}function ds(t,e){if(1&t){var i=E.Tb();E.Sb(0,"input",49),E.cc("ngModelChange",function(t){return E.Bc(i),E.gc().$implicit.scanCode=t})("ngModelChange",function(t){E.Bc(i);var e=E.gc().$implicit;return E.gc().onNgModelChangeScanQRCode(t,e)}),E.Rb()}if(2&t){var n=E.gc().$implicit,a=E.gc();E.Bb(n.info),E.mc("autofocus",n.scanStatus)("name",n.code)("ngModel",n.scanCode)("ngClass",a.lockClass(n))}}function hs(t,e){if(1&t){var i=E.Tb();E.Sb(0,"input",50),E.cc("ngModelChange",function(t){return E.Bc(i),E.gc().$implicit.scanCode=t})("ngModelChange",function(t){E.Bc(i);var e=E.gc().$implicit;return E.gc().onNgModelChangeScanQRCode(t,e)}),E.Rb()}if(2&t){var n=E.gc().$implicit,a=E.gc();E.Bb(n.info),E.mc("ngModel",n.scanCode)("name",n.code)("ngClass",a.lockClass(n))}}function gs(t,e){if(1&t){var i=E.Tb();E.Sb(0,"input",51),E.cc("keyup",function(t){E.Bc(i);var e=E.gc().$implicit;return E.gc().onKeyupExpected(e,t)}),E.Rb()}if(2&t){var n=E.gc().$implicit;E.Bb(n.info),E.Eb("lock","A"!==n.position),E.mc("value",n.expected)("autofocus",n.focusExpected)}}function bs(t,e){if(1&t){var i=E.Tb();E.Sb(0,"input",52),E.cc("keyup",function(t){E.Bc(i);var e=E.gc().$implicit;return E.gc().onKeyupExpected(e,t)}),E.Rb()}if(2&t){var n=E.gc().$implicit;E.Bb(n.info),E.mc("value",n.expected)}}function fs(t,e){if(1&t){var i=E.Tb();E.Sb(0,"input",53),E.cc("blur",function(){E.Bc(i);var t=E.gc().$implicit;return E.gc().onBlur(t)})("click",function(t){E.Bc(i);var e=E.gc().$implicit;return E.gc().onDblClicked(e,t)})("keyup",function(t){E.Bc(i);var e=E.gc().$implicit;return E.gc().onKeyupReal(e,t)}),E.Rb()}if(2&t){var n=E.gc().$implicit,a=E.gc();E.Bb(a.realClass(n)),E.Eb("lock",n.position),E.mc("value",n.real)("id",n.position)("autofocus",n.focusReal)}}function ps(t,e){if(1&t){var i=E.Tb();E.Sb(0,"input",54),E.cc("blur",function(){E.Bc(i);var t=E.gc().$implicit;return E.gc().onBlur(t)})("click",function(t){E.Bc(i);var e=E.gc().$implicit;return E.gc().onDblClicked(e,t)})("keyup",function(t){E.Bc(i);var e=E.gc().$implicit;return E.gc().onKeyupReal(e,t)}),E.Rb()}if(2&t){var n=E.gc().$implicit,a=E.gc();E.Bb(a.realClass(n)),E.Eb("lock",n.position),E.mc("value",n.real)("id",n.position)}}function ms(t,e){if(1&t&&(E.Qb(0),E.Sb(1,"div",32),E.Sb(2,"div",33),E.Sb(3,"div",13),E.Sb(4,"div",34),E.Sb(5,"div",35),E.Ic(6,us,1,0,"img",36),E.Rb(),E.Rb(),E.Sb(7,"div",37),E.Ic(8,ds,1,6,"input",38),E.Ic(9,hs,1,5,"ng-template",null,39,E.Jc),E.Rb(),E.Rb(),E.Rb(),E.Sb(11,"div",40),E.Nb(12,"input",41),E.Rb(),E.Sb(13,"div",22),E.Sb(14,"div",13),E.Sb(15,"div",42),E.Ic(16,gs,1,6,"input",43),E.Ic(17,bs,1,3,"ng-template",null,44,E.Jc),E.Rb(),E.Sb(19,"div",45),E.Ic(20,fs,1,7,"input",46),E.Ic(21,ps,1,6,"ng-template",null,47,E.Jc),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Pb()),2&t){var i=e.$implicit,n=E.yc(10),a=E.yc(18),o=E.yc(22),c=E.gc();E.zb(6),E.mc("ngIf",c.showArrow(i)),E.zb(2),E.mc("ngIf",i.scanStatus)("ngIfElse",n),E.zb(4),E.Bb(i.info),E.Eb("lock",!0),E.mc("value",i.name+" ( "+i.percentage+"% )"),E.zb(4),E.mc("ngIf",i.focusExpected)("ngIfElse",a),E.zb(4),E.mc("ngIf",i.focusReal)("ngIfElse",o)}}function vs(t,e){1&t&&(E.Sb(0,"p",55),E.Kc(1),E.hc(2,"translate"),E.Rb()),2&t&&(E.zb(1),E.Lc(E.ic(2,1,"NOTE")))}var Ss,ys,ks,Ds=(new ei.a).withUrl("http://localhost:5001/scalingHub").withAutomaticReconnect([1e3,3e3,5e3,1e4,3e4]).build(),xs=((Ss=function(){function e(t,n,a,o,c,s,r,l,u){i(this,e),this.route=t,this.alertify=n,this.ingredientService=a,this.makeGlueService=o,this.abnormalService=c,this.mixingService=s,this.router=r,this.settingService=l,this.todolistService=u,this.disabled=!0,this.unit="k",this.subject=new O.a,this.subscription=[],this.scaleStatus=!0,this.BUIDLING_ID=0,console.log("========Collapse========")}return a(e,[{key:"ngOnDestroy",value:function(){this.subscription.forEach(function(t){return t.unsubscribe()}),this.offSignalr(),this.mixingService.numberOfAttempts=5,this.mixingService.close().then(function(t){console.log("Mixing service stopped connection")}).catch(function(t){console.log("Mixing service can not stopped connection",t)}),Ds.stop().then(function(t){console.log("stopped connection")}).catch(function(t){})}},{key:"ngOnInit",value:function(){this.mixingService.connect(),this.checkQRCode(),this.checkedSmallScale=!1;var t=JSON.parse(localStorage.getItem("building"));this.BUIDLING_ID=Number(JSON.parse(localStorage.getItem("buildingID")));var e=JSON.parse(localStorage.getItem("level"));this.role=e,this.building=t,this.buildingID=this.BUIDLING_ID,this.scalingKG="k",this.startTime=new Date,this.getScalingSetting(),this.onRouteChange()}},{key:"start",value:function(){var t=this;Ds.start().then(function(){Ds.on("UserConnected",function(t){console.log("CONNECTION_WEIGHING_SCALE_HUB UserConnected",t)}),Ds.on("UserDisconnected",function(t){console.log("CONNECTION_WEIGHING_SCALE_HUB UserDisconnected",t)}),console.log("Signalr CONNECTION_WEIGHING_SCALE_HUB connected")}).catch(function(e){setTimeout(function(){return t.start()},5e3)})}},{key:"onChangeScale",value:function(t){this.checkedSmallScale=!0,this.unit="g",this.scalingKG="g"}},{key:"checkQRCode",value:function(){var t=this;this.subscription.push(this.subject.pipe(Object(A.a)(500)).subscribe(function(e){return Object(P.a)(t,void 0,void 0,regeneratorRuntime.mark(function t(){var i,n,a,o,c,s,r,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.QRCode,n=e.ingredient,this.ingredientsTamp=n,this.position=n.position,a=i.split("-")||[],o=i.match(n.materialNO),c=i.match(/(\d+)-(\w+)-/g),s=i.replace(c[0],""),null!==o){t.next=5;break}return t.abrupt("return",(this.alertify.warning("M\xe3 QR kh\xf4ng h\u1ee3p l\u1ec7!<br>The QR Code invalid!"),this.qrCode="",void this.errorScan()));case 5:if(null===o){t.next=37;break}if(t.prev=6,s===o[0]){t.next=9;break}return t.abrupt("return",(this.alertify.warning('M\xe3 QR kh\xf4ng h\u1ee3p l\u1ec7!<br>Please you should look for the chemical name "'.concat(n.name,'"')),this.qrCode="",void this.errorScan()));case 9:if(this.qrCode=o[0],this.qrCode===n.materialNO){t.next=11;break}return t.abrupt("return",(this.alertify.warning('M\xe3 QR kh\xf4ng h\u1ee3p l\u1ec7!<br>Please you should look for the chemical name "'.concat(n.name,'"')),this.qrCode="",void this.errorScan()));case 11:return"A"===n.position&&(this.stdcon="g"===this.scalingKG?1e3*this.stdcon:this.stdcon,this.changeExpected("A",this.stdcon),this.checkedSmallScale=!0,this.startTime=new Date),t.t0=!0,t.next=15,this.hasLock(n.name,this.building.name,a[1]);case 15:if(t.t1=t.sent,t.t0!==t.t1){t.next=18;break}return t.abrupt("return",(this.alertify.error("H\xf3a ch\u1ea5t n\xe0y \u0111\xe3 b\u1ecb kh\xf3a!<br>This chemical has been locked!"),this.qrCode="",void this.errorScan()));case 18:this.signal(),r=n.code,l=this.findIngredientCode(r),t.t2=(this.setBatch(l,a[1]),l&&(this.changeInfo("success-scan",l.code),0===l.expected&&"A"===l.position?(this.changeFocusStatus(l.code,!1,!0),this.changeScanStatus(l.code,!1)):(this.changeScanStatus(l.code,!1),this.changeFocusStatus(r,!1,!1))),this.position),t.next="A"===t.t2?23:"B"===t.t2?25:"C"===t.t2?27:"D"===t.t2?29:"E"===t.t2?31:32;break;case 23:return this.changeScanStatusByPosition("A",!1),this.changeScanStatusByPosition("B",!0),t.abrupt("break",32);case 25:return this.changeScanStatusByPosition("B",!1),this.changeScanStatusByPosition("C",!0),t.abrupt("break",32);case 27:return this.changeScanStatusByPosition("C",!1),this.mixingService.connect(),this.changeScanStatusByPosition("D",!0),t.abrupt("break",32);case 29:return this.changeScanStatusByPosition("D",!1),this.mixingService.connect(),this.changeScanStatusByPosition("E",!0),t.abrupt("break",32);case 31:this.mixingService.connect(),this.changeScanStatusByPosition("H",!0);case 32:t.next=37;break;case 34:t.prev=34,t.t3=t.catch(6),console.log("tag",t.t3),this.errorScan(),this.alertify.error("M\xe3 QR kh\xf4ng h\u1ee3p l\u1ec7!<br>Wrong Chemical!"),this.qrCode="";case 37:case"end":return t.stop()}},t,this,[[6,34]])}))}))}},{key:"onRouteChange",value:function(){var t=this;this.route.data.subscribe(function(e){t.glueID=t.route.snapshot.params.glueID,t.estimatedStartTime=t.route.snapshot.params.estimatedStartTime,t.estimatedFinishTime=t.route.snapshot.params.estimatedFinishTime,t.tab=t.route.snapshot.params.tab,t.stdcon=+t.route.snapshot.params.stdcon,t.getGlueWithIngredientByGlueID()})}},{key:"getGlueWithIngredientByGlueID",value:function(){var t=this;this.makeGlueService.getGlueWithIngredientByGlueID(this.glueID).subscribe(function(e){t.ingredients=e.ingredients.map(function(t){return{id:t.id,scanStatus:"A"===t.position,code:t.code,scanCode:"",materialNO:t.materialNO,name:t.name,percentage:t.percentage,position:t.position,allow:t.allow,expected:0,real:0,focusReal:!1,focusExpected:!1,valid:!1,info:"",batch:"",unit:"",time_start:new Date}}),t.glueName=e.name,t.getMixingDetail()})}},{key:"onNgModelChangeScanQRCode",value:function(t,e){return Object(P.a)(this,void 0,void 0,regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:this.subject.next({QRCode:t,ingredient:e});case 1:case"end":return i.stop()}},i,this)}))}},{key:"scanQRCode",value:function(){return this.ingredientService.scanQRCode(this.qrCode).toPromise()}},{key:"findIngredientCode",value:function(e){var i,n=t(this.ingredients);try{for(n.s();!(i=n.n()).done;){var a=i.value;if(a.code===e)return a}}catch(o){n.e(o)}finally{n.f()}}},{key:"setBatch",value:function(t,e){for(var i in this.ingredients)if(this.ingredients[i].id===t.id){this.ingredients[i].batch=e;break}}},{key:"changeScanStatus",value:function(t,e){for(var i in this.ingredients)if(this.ingredients[i].code===t){this.ingredients[i].scanStatus=e;break}}},{key:"changeFocusStatus",value:function(t,e,i){for(var n in this.ingredients)if(this.ingredients[n].code===t){this.ingredients[n].focusReal=e,this.ingredients[n].focusExpected=i;break}}},{key:"changeValidStatus",value:function(t,e){for(var i in this.ingredients)if(this.ingredients[i].code===t){this.ingredients[i].valid=e;break}}},{key:"changeScanStatusByPosition",value:function(t,e){for(var i in this.position=t,this.ingredients)if(this.ingredients[i].position===t){this.ingredients[i].scanStatus=e;break}}},{key:"errorScan",value:function(){for(var t in this.ingredients)this.ingredients[t].scanStatus&&this.changeInfo("error-scan",this.ingredients[t].code)}},{key:"changeInfo",value:function(t,e){for(var i in this.ingredients)if(this.ingredients[i].code===e){this.ingredients[i].info=t;break}}},{key:"changeScanStatusFocus",value:function(t,e){for(var i in this.ingredients)if(this.ingredients[i].position===t){this.ingredients[i].scanStatus=e;break}}},{key:"findIngredient",value:function(e){var i,n=t(this.ingredients);try{for(n.s();!(i=n.n()).done;){var a=i.value;if(a.position===e)return a}}catch(o){n.e(o)}finally{n.f()}}},{key:"calculatorIngredient",value:function(t,e){var i;return null!==(i=t*e/100*1e3)&&void 0!==i?i:0}},{key:"toFixedIfNecessary",value:function(t,e){return+parseFloat(t).toFixed(e)}},{key:"changeExpectedRange",value:function(t,e){var i,n;if(["A","B","C","D","E"].includes(e)){var a=parseFloat(t),o=this.calculatorIngredient(a,null===(i=this.findIngredient(e))||void 0===i?void 0:i.percentage);if("B"===e&&(this.B=o),"C"===e&&(this.C=o),"D"===e&&(this.D=o),"A"===e)return;var c=this.calculatorIngredient(o/1e3,null===(n=this.findIngredient(e))||void 0===n?void 0:n.allow),s=o-c,r=o+c,l=this.toFixedIfNecessary(s/1e3,3),u=this.toFixedIfNecessary(r/1e3,3),d=u>3?"".concat(l,"kg - ").concat(u,"kg"):" ".concat(this.toFixedIfNecessary(s,1),"g - ").concat(this.toFixedIfNecessary(r,1),"g ");if(0===c){var h=this.toFixedIfNecessary(o/1e3,3),g=h>3?h+"kg":" ".concat(this.toFixedIfNecessary(1e3*h,1),"g");this.changeExpected(e,g)}else this.changeExpected(e,d)}}},{key:"changeExpected",value:function(t,e){for(var i in this.ingredients)if(this.ingredients[i].position===t){this.ingredients[i].expected=e;break}}},{key:"changeActualByPosition",value:function(t,e,i){for(var n in this.ingredients)if(this.ingredients[n].position===t){this.ingredients[n].real=e,this.ingredients[n].unit=i,this.ingredients[n].time_start=new Date;break}}},{key:"onBlur",value:function(t){for(var e in this.ingredients)this.ingredients[e].focusReal=this.ingredients[e].position===t.position;this.signal()}},{key:"checkValidPosition",value:function(t,e){var i,n,a,o,c="A"===t.position&&"g"===this.scalingKG?parseFloat(e)/1e3:parseFloat(e);if(0===t.allow)"g"!==("A"===t.position?this.stdcon:t.expected.replace(/[0-9|.]+/g,"").trim())?(i=parseFloat(t.expected),n=parseFloat(t.expected)):(a=parseFloat(t.expected),o=parseFloat(t.expected),i=parseFloat(t.expected)/1e3,n=parseFloat(t.expected)/1e3);else{var s=t.expected.split("-");"g"!==s[0].replace(/[0-9|.]+/g,"").trim()?(i=parseFloat(s[0]),n=parseFloat(s[1])):(a=parseFloat(s[0]),o=parseFloat(s[1]),i=parseFloat(s[0])/1e3,n=parseFloat(s[1])/1e3)}if("A"===t.position){for(var r=0,l=["A","B","C","D","E"];r<l.length;r++){var u=l[r];this.changeExpectedRange(c,u)}this.changeScanStatusFocus("A",!1),this.changeScanStatusFocus("B",!0),this.changeFocusStatus(t.code,!1,!1),1===this.ingredients.length&&(this.disabled=!1)}"B"===t.position&&(n>3?(this.scalingKG="k",c<=n&&c>=i?(this.changeScanStatusFocus("B",!1),this.changeScanStatusFocus("C",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),2===this.ingredients.length&&(this.disabled=!1)):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0))):(this.scalingKG="g",c<=o+5&&c>=a?(this.changeScanStatusFocus("B",!1),this.changeScanStatusFocus("C",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),2===this.ingredients.length&&(this.disabled=!1)):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0)))),"C"===t.position&&(n>3?(this.scalingKG="k",c<=n&&c>=i?(this.changeScanStatusFocus("C",!1),this.changeScanStatusFocus("D",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),3===this.ingredients.length&&(this.disabled=!1)):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0))):(this.scalingKG="g",c<=o+5&&c>=a?(this.changeScanStatusFocus("C",!1),this.changeScanStatusFocus("D",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),3===this.ingredients.length&&(this.disabled=!1)):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0)))),"D"===t.position&&(n>3?(this.scalingKG="k",c<=n&&c>=i?(this.changeScanStatusFocus("D",!1),this.changeScanStatusFocus("E",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),this.ingredients.length>=4&&(this.disabled=!1)):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0))):(this.scalingKG="g",c<=o+5&&c>=a?(this.changeScanStatusFocus("D",!1),this.changeScanStatusFocus("E",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),this.ingredients.length>=4&&(this.disabled=!1)):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0)))),"E"===t.position&&(n>3?(this.scalingKG="k",c<=n&&c>=i?(this.changeScanStatusFocus("D",!1),this.changeScanStatusFocus("E",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),this.ingredients.length>=4&&(this.disabled=!1)):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0))):(this.scalingKG="g",c<=o+5&&c>=a?(this.changeScanStatusFocus("D",!1),this.changeScanStatusFocus("E",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),this.ingredients.length>=4&&(this.disabled=!1)):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0)))),this.changeReal(t.code,+e)}},{key:"offSignalr",value:function(){Ds.off("Welcom"),this.mixingService.offWeighingScale()}},{key:"onSignalr",value:function(){}},{key:"changeScanStatusByLength",value:function(t,e){switch(t){case 2:this.offSignalr();break;case 3:"B"===e.position?(this.changeScanStatusByPosition("B",!1),this.changeScanStatusByPosition("C",!0),this.offSignalr()):(this.changeScanStatusByPosition("B",!1),this.changeScanStatusByPosition("C",!1),this.offSignalr());break;case 4:"B"===e.position?(this.changeScanStatusByPosition("B",!1),this.changeScanStatusByPosition("C",!0),this.offSignalr()):"C"===e.position?(this.changeScanStatusByPosition("C",!1),this.changeScanStatusByPosition("D",!0),this.offSignalr()):(this.changeScanStatusByPosition("C",!1),this.changeScanStatusByPosition("D",!1),this.offSignalr());break;case 5:"B"===e.position?(this.changeScanStatusByPosition("B",!1),this.changeScanStatusByPosition("C",!0),this.offSignalr()):"C"===e.position?(this.changeScanStatusByPosition("C",!1),this.changeScanStatusByPosition("D",!0),this.offSignalr()):"D"===e.position?(this.changeScanStatusByPosition("D",!1),this.changeScanStatusByPosition("E",!0),this.offSignalr()):(this.changeScanStatusByPosition("D",!1),this.changeScanStatusByPosition("E",!1),this.offSignalr())}}},{key:"setActualByExpectedRange",value:function(t){var e,i,n=this.ingredients[t];if(n.allow>0){var a=this.ingredients[t].expected.split("-"),o=parseFloat(a[0]),c=parseFloat(a[1]),s=this.ingredients[t].real;if(s>=o&&s<=c){var r=null!==(e=this.ingredients.length)&&void 0!==e?e:0;this.changeScanStatusByLength(r,n)}}else if(this.ingredients[t].real===+this.ingredients[t].expected){var l=null!==(i=this.ingredients.length)&&void 0!==i?i:0;this.changeScanStatusByLength(l,n)}}},{key:"changeReal",value:function(t,e){for(var i in this.ingredients)if(this.ingredients[i].code===t){this.ingredients[i].real=this.toFixedIfNecessary(e,3);break}}},{key:"startScalingHub",value:function(){var t=this;Ds.start().then(function(){Ds.on("Scaling Hub UserConnected",function(e){console.log("Scaling Hub UserConnected",e),t.signal()}),Ds.on("Scaling Hub User Disconnected",function(t){console.log("Scaling Hub User Disconnected",t)}),console.log("Scaling Hub Signalr connected")}).catch(function(e){setTimeout(function(){return t.startScalingHub()},5e3)})}},{key:"signal",value:function(){var t=this;this.mixingService.receiveAmount.subscribe(function(e){var i=e.unit,n=e.weighingScaleID,a=e.amount;if(i===t.scalingKG)switch(t.volume=parseFloat(a),t.unit=i,console.log("Unit",i,a,n),t.position){case"A":t.volumeA=t.volume;break;case"B":t.volumeB=t.volume,t.changeActualByPosition("A",t.volumeB,i),t.checkValidPosition(t.ingredientsTamp,t.volumeB);break;case"C":t.volumeC=t.volume,t.changeActualByPosition("B",t.volumeC,i),t.checkValidPosition(t.ingredientsTamp,t.volumeC);break;case"D":t.volumeD=t.volume,t.changeActualByPosition("C",t.volumeD,i),t.checkValidPosition(t.ingredientsTamp,t.volumeD);break;case"E":t.volumeE=t.volume,t.changeActualByPosition("D",t.volumeE,i),t.checkValidPosition(t.ingredientsTamp,t.volumeE);break;case"H":t.volumeH=t.volume,t.changeActualByPosition("E",t.volumeH,i),t.checkValidPosition(t.ingredientsTamp,t.volumeH)}})}},{key:"showArrow",value:function(t){return"A"===t.position&&!0===t.scanStatus||"A"===t.position&&!1===t.scanStatus&&!0===t.focusExpected||"A"!==t.position&&!0===t.scanStatus}},{key:"checkValidPositionForRealEvent",value:function(t,e){var i,n,a,o,c=parseFloat(e.target.value),s=c;if(0===t.allow)"g"!==(null!=t.expected.toString().match(/^[0-9.]+[kg]+\s\+\s[0-9.]+[kg]+|(^[0-9.]+[kg]+)/g)?t.expected.replace(/[0-9|.]+/g,"").trim():"k")?(i=parseFloat(t.expected),n=parseFloat(t.expected)):(a=parseFloat(t.expected),o=parseFloat(t.expected),i=parseFloat(t.expected)/1e3,n=parseFloat(t.expected)/1e3);else{var r=t.expected.split("-");"g"!==r[0].replace(/[0-9|.]+/g,"").trim()?(i=parseFloat(r[0]),n=parseFloat(r[1])):(a=parseFloat(r[0]),o=parseFloat(r[1]),i=parseFloat(r[0])/1e3,n=parseFloat(r[1])/1e3)}if("A"===t.position){for(var l=0,u=["A","B","C","D","E"];l<u.length;l++){var d=u[l];t.real="A"===d?s:t.real,this.changeExpectedRange(t.real,d)}this.changeScanStatusFocus("A",!1),this.changeScanStatusFocus("B",!0),this.changeFocusStatus(t.code,!1,!1),1===this.ingredients.length&&(this.disabled=!1)}"B"===t.position&&(n>3?(this.scalingKG="k",s<=n&&s>=i?(this.changeScanStatusFocus("B",!1),this.changeScanStatusFocus("C",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),2===this.ingredients.length&&(this.disabled=!1)):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0))):(this.scalingKG="g",s<=o&&s>=a?(this.changeScanStatusFocus("B",!1),this.changeScanStatusFocus("C",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),2===this.ingredients.length&&(this.disabled=!1)):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0)))),"C"===t.position&&(n>3?(this.scalingKG="k",s<=n&&s>=i?(this.changeScanStatusFocus("C",!1),this.changeScanStatusFocus("D",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),3===this.ingredients.length&&(this.disabled=!1)):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0))):(this.scalingKG="g",s<=o&&s>=a?(this.changeScanStatusFocus("C",!1),this.changeScanStatusFocus("D",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),3===this.ingredients.length&&(this.disabled=!1)):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0)))),"D"===t.position&&(n>3?(this.scalingKG="k",s<=n&&s>=i?(this.changeScanStatusFocus("D",!1),this.changeScanStatusFocus("E",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),this.ingredients.length>=4&&(this.disabled=!1)):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0))):(this.scalingKG="g",s<=o&&s>=a?(this.changeScanStatusFocus("D",!1),this.changeScanStatusFocus("E",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),this.ingredients.length>=4&&(this.disabled=!1)):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0)))),"E"===t.position&&(n>3?(this.scalingKG="k",s<=n&&s>=i?(this.changeScanStatusFocus("D",!1),this.changeScanStatusFocus("E",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),this.ingredients.length>=4&&(this.disabled=!1)):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0))):(this.scalingKG="g",s<=o&&s>=a?(this.changeScanStatusFocus("D",!1),this.changeScanStatusFocus("E",!0),this.changeValidStatus(t.code,!1),this.changeFocusStatus(t.code,!1,!1),this.ingredients.length>=4&&(this.disabled=!1)):(this.disabled=!0,this.changeFocusStatus(t.code,!1,!1),this.changeValidStatus(t.code,!0)))),this.changeReal(t.code,c)}},{key:"realClass",value:function(t){return t.info+(!0===t.valid?" warning-focus":"")}},{key:"lockClass",value:function(t){return!0===t.scanCode?"":"lock"}},{key:"onKeyupReal",value:function(t,e){13===e.keyCode&&this.checkValidPositionForRealEvent(t,e)}},{key:"onDblClicked",value:function(t,e){var i=this;""!==this.ingredients.filter(function(e){return e.position===t.position})[0].scanCode?(this.ingredients.forEach(function(t,e,n){i.ingredients[e].scanStatus=!1}),t.focusReal=!0,this.offSignalr()):this.alertify.warning("H\xe3y qu\xe9t m\xe3 QR tr\u01b0\u1edbc!!!",!0)}},{key:"onKeyupExpected",value:function(t,e){if(13===e.keyCode&&"A"===t.position){switch(this.changeExpected("A",e.target.value),t.position){case"A":this.changeScanStatusByPosition("B",!0);break;case"B":this.changeScanStatusByPosition("C",!0);break;case"C":this.changeScanStatusByPosition("D",!0);break;case"D":this.changeScanStatusByPosition("E",!0)}this.resetFocusExpectedAndActual()}}},{key:"resetFocusExpectedAndActual",value:function(){var t;for(t=0;t<this.ingredients.length;t++)this.ingredients[t].focusReal=!1,this.ingredients[t].focusExpected=!1}},{key:"back",value:function(){this.router.navigate(["/ec/execution/todolist-2/"+this.tab])}},{key:"getScalingSetting",value:function(){var t=this;this.buildingID=this.BUIDLING_ID,this.settingService.getMachineByBuilding(this.buildingID).subscribe(function(e){t.scalingSetting=e.map(function(t){return t.machineID})})}},{key:"getMixingDetail",value:function(){var t=this;this.todolistService.getMixingDetail(this.glueName).subscribe(function(e){t.detail=e})}},{key:"reloadPage",value:function(){window.location.reload()}},{key:"hasLock",value:function(t,e,i){var n=this,a=e;return this.IsAdmin&&(a=this.buildingName),new Promise(function(e,o){n.abnormalService.hasLock(t,a,i).subscribe(function(t){e(t)},function(t){o(!1)})})}},{key:"Finish",value:function(){var t=this;if(this.IsAdmin)this.alertify.warning('Only the workers are able to press "Finished" button!<br> Ch\u1ec9 c\xf3 c\xf4ng nh\xe2n m\u1edbi \u0111\u01b0\u1ee3c nh\u1ea5n "Ho\xe0n Th\xe0nh!"',!0);else{this.endTime=new Date;var e=this.ingredients.map(function(t){return{amount:"g"===t.unit?t.real/1e3:t.real,ingredientID:t.id,batch:t.batch,mixingInfoID:0,position:t.position,time_start:t.time_start}}),i={glueID:this.glueID,glueName:this.glueName,buildingID:this.BUIDLING_ID,mixBy:JSON.parse(localStorage.getItem("user")).User.ID,estimatedStartTime:this.estimatedStartTime,estimatedFinishTime:this.estimatedFinishTime,startTime:this.startTime.toISOString(),endTime:this.endTime.toISOString(),details:e};i&&this.makeGlueService.add(i).subscribe(function(e){t.todolistService.setValue(!1),t.back(),t.alertify.success("The Glue has been finished successfully")})}}},{key:"convertDate",value:function(t){var e=6e4*t.getTimezoneOffset();return new Date(Date.now()-e).toISOString().slice(0,-1)}}]),e}()).\u0275fac=function(t){return new(t||Ss)(E.Mb(B.a),E.Mb(F.a),E.Mb(L.a),E.Mb(ai.a),E.Mb(ni.a),E.Mb(ls),E.Mb(B.c),E.Mb(hi),E.Mb(fi))},Ss.\u0275cmp=E.Gb({type:Ss,selectors:[["app-mixing"]],features:[E.yb([ls,oi.a])],decls:63,vars:46,consts:[[1,"row","mb-2"],[1,"col-md-12","mt-4","text-center"],[1,"pretty","p-svg","p-curve",2,"font-size","30px"],["value","small","type","checkbox","name","scale",3,"change"],[1,"state","p-success"],["viewBox","0 0 20 20",1,"svg","svg-icon"],["d","M7.629,14.566c0.125,0.125,0.291,0.188,0.456,0.188c0.164,0,0.329-0.062,0.456-0.188l8.219-8.221c0.252-0.252,0.252-0.659,0-0.911c-0.252-0.252-0.659-0.252-0.911,0l-7.764,7.763L4.152,9.267c-0.252-0.251-0.66-0.251-0.911,0c-0.252,0.252-0.252,0.66,0,0.911L7.629,14.566z",2,"stroke","white","fill","white"],[1,"card","my-height"],[1,"card-header"],[1,"card-tools"],["type","button",1,"btn","btn-sm","btn-primary",3,"click"],[1,"fas","fa-refresh"],[1,"card-body"],[1,"row"],[1,"col-md-12"],[1,"text-center","text-danger","font-weight-bold"],[1,"col-md-2","col-xl-2","text-center"],[1,"col-md-2"],["for","",1,"font-weight-bold","text-black"],[1,"col-md-10"],["for","",1,"font-weight-bold"],[1,"col-md-5","col-xl-5","text-center"],[1,"col-md-5"],[1,"col-md-8","text-center"],[1,"col-md-4","text-center"],[4,"ngFor","ngForOf"],[1,"text-center","mb-1"],["type","button",1,"btn","btn-primary","rounded-pill",3,"click"],[1,"fa","fa-arrow-circle-left"],["type","button",1,"btn","btn-success","rounded-pill","ml-2",3,"disabled","click"],[1,"fas","fa-save"],["class","text-center my-2 text-danger",4,"ngIf"],[1,"row","mb-1"],[1,"col-md-2","col-xl-2"],[1,"col-xl-2"],[1,"align-middle"],["src","../../../../assets/img/gif/arrow.gif","alt","",4,"ngIf"],[1,"col-xl-10"],["class","form-control form-control-lg rounded-pill","autoselect","","type","text",3,"autofocus","name","ngModel","class","ngClass","ngModelChange",4,"ngIf","ngIfElse"],["scanBlock",""],[1,"form-group","col-md-5","col-xl-5"],["type","text",1,"form-control","form-control-lg","rounded-pill","lock",3,"value"],[1,"col-md-8"],["class","form-control form-control-lg rounded-pill","type","text",3,"lock","value","autofocus","class","keyup",4,"ngIf","ngIfElse"],["expectedBlock",""],[1,"col-md-4"],["class","form-control form-control-lg rounded-pill mixing","data-toggle","tooltip","title","tooltip on second input!","autocomplete","off","type","text",3,"lock","value","id","class","autofocus","blur","click","keyup",4,"ngIf","ngIfElse"],["realElse",""],["src","../../../../assets/img/gif/arrow.gif","alt",""],["autoselect","","type","text",1,"form-control","form-control-lg","rounded-pill",3,"autofocus","name","ngModel","ngClass","ngModelChange"],["type","text",1,"form-control","form-control-lg","rounded-pill",3,"ngModel","name","ngClass","ngModelChange"],["type","text",1,"form-control","form-control-lg","rounded-pill",3,"value","autofocus","keyup"],["type","text",1,"form-control","form-control-lg","rounded-pill","lock",3,"value","keyup"],["data-toggle","tooltip","title","tooltip on second input!","autocomplete","off","type","text",1,"form-control","form-control-lg","rounded-pill","mixing",3,"value","id","autofocus","blur","click","keyup"],["data-toggle","tooltip","title","tooltip on second input!","autocomplete","off","type","text",1,"form-control","form-control-lg","rounded-pill","mixing",3,"value","id","blur","click","keyup"],[1,"text-center","my-2","text-danger"]],template:function(t,e){1&t&&(E.Sb(0,"div",0),E.Sb(1,"div",1),E.Sb(2,"div",2),E.Sb(3,"input",3),E.cc("change",function(t){return e.onChangeScale(t)}),E.Rb(),E.Sb(4,"div",4),E.fc(),E.Sb(5,"svg",5),E.Nb(6,"path",6),E.Rb(),E.ec(),E.Sb(7,"label"),E.Kc(8),E.hc(9,"translate"),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Sb(10,"div",7),E.Sb(11,"div",8),E.Sb(12,"div",9),E.Sb(13,"button",10),E.cc("click",function(){return e.reloadPage()}),E.Nb(14,"i",11),E.Kc(15),E.hc(16,"translate"),E.Rb(),E.Rb(),E.Rb(),E.Sb(17,"div",12),E.Sb(18,"div",13),E.Sb(19,"div",14),E.Sb(20,"h2",15),E.Kc(21),E.hc(22,"translate"),E.hc(23,"translate"),E.hc(24,"translate"),E.Rb(),E.Rb(),E.Rb(),E.Sb(25,"div",13),E.Sb(26,"div",14),E.Sb(27,"div",13),E.Sb(28,"div",16),E.Sb(29,"div",13),E.Sb(30,"div",17),E.Sb(31,"label",18),E.Kc(32),E.hc(33,"translate"),E.Rb(),E.Rb(),E.Sb(34,"div",19),E.Sb(35,"label",20),E.Kc(36),E.hc(37,"translate"),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Sb(38,"div",21),E.Sb(39,"label",20),E.Kc(40),E.hc(41,"translate"),E.Rb(),E.Rb(),E.Sb(42,"div",22),E.Sb(43,"div",13),E.Sb(44,"div",23),E.Sb(45,"label",20),E.Kc(46),E.hc(47,"translate"),E.Rb(),E.Rb(),E.Sb(48,"div",24),E.Sb(49,"label",20),E.Kc(50),E.hc(51,"translate"),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Ic(52,ms,23,12,"ng-container",25),E.Sb(53,"div",26),E.Sb(54,"button",27),E.cc("click",function(){return e.back()}),E.Nb(55,"i",28),E.Kc(56),E.hc(57,"translate"),E.Rb(),E.Sb(58,"button",29),E.cc("click",function(){return e.Finish()}),E.Nb(59,"i",30),E.Kc(60),E.hc(61,"translate"),E.Rb(),E.Rb(),E.Ic(62,vs,3,3,"p",31),E.Rb(),E.Rb(),E.Rb(),E.Rb()),2&t&&(E.zb(2),E.Eb("lock",e.checkedSmallScale),E.zb(6),E.Lc(E.ic(9,22,"Small Scale")),E.zb(7),E.Mc(" ",E.ic(16,24,"Refresh")," "),E.zb(6),E.Pc(" ",E.ic(22,26,"GLUE_NAME"),": ",e.glueName," | ",E.ic(23,28,"Mixed. Con."),": ",null==e.detail?null:e.detail.mixedConsumption," | ",E.ic(24,30,"Delivered. Con."),": ",null==e.detail?null:e.detail.deliveryConsumption," "),E.zb(11),E.Lc(E.ic(33,32,"STEP")),E.zb(4),E.Lc(E.ic(37,34,"SCAN_QRCODE")),E.zb(4),E.Lc(E.ic(41,36,"INGREDIENT_NAME")),E.zb(6),E.Nc("",E.ic(47,38,"Std. Con.")," (","k"==e.unit?"kg":"g",") "),E.zb(4),E.Nc("",E.ic(51,40,"ACTUAL")," (","k"==e.unit?"kg":"g",")"),E.zb(2),E.mc("ngForOf",e.ingredients),E.zb(4),E.Mc(" ",E.ic(57,42,"BACK"),""),E.zb(2),E.mc("disabled",e.disabled),E.zb(2),E.Mc(" ",E.ic(61,44,"FINISHED"),""),E.zb(2),E.mc("ngIf",!e.disabled))},directives:[s.m,s.n,r.b,oi.a,r.g,r.j,s.l],pipes:[S.c],styles:[".my-align[_ngcontent-%COMP%]{vertical-align:middle!important;text-align:center!important;font-weight:700}.fix-css[_ngcontent-%COMP%]{font-weight:700!important;font-family:Source Sans Pro,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol!important}.real[_ngcontent-%COMP%]{background-color:#b8daff!important}input.error-scan[_ngcontent-%COMP%]{background-color:#dc3545}input.error-scan[_ngcontent-%COMP%], input.success-scan[_ngcontent-%COMP%]{width:100%;padding:12px 20px;box-sizing:border-box;border:none;border:none!important;color:#fff!important}input.success-scan[_ngcontent-%COMP%]{background-color:#3cbc8d;font-weight:700}.lock[_ngcontent-%COMP%]{pointer-events:none}input.warning-focus[_ngcontent-%COMP%]{-webkit-animation:warning-frames .5s infinite;animation:warning-frames .5s infinite;color:#000!important}input[_ngcontent-%COMP%]{text-align:center;font-size:50px!important;font-weight:700!important;height:calc(4.875rem + 2px)!important;border:1px solid #635e5e!important;color:#000!important}@-webkit-keyframes warning-frames{0%{background-color:#fade40}to{background-color:#e7f70c}}@keyframes warning-frames{0%{background-color:#fade40}to{background-color:#e7f70c}}input.summary[_ngcontent-%COMP%], input.summaryhide[_ngcontent-%COMP%]{border:none!important;padding:0!important}input.summary[_ngcontent-%COMP%]:focus{border-bottom:3px solid #dc3545!important;border-radius:0}.my-sticky[_ngcontent-%COMP%]{top:0;height:40px}.my-sticky[_ngcontent-%COMP%], .my-sticky-glue[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;z-index:997;background-color:#fff}.my-sticky-glue[_ngcontent-%COMP%]{left:72px}.my-sticky-top[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;top:45px;z-index:998;vertical-align:middle}.my-cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}@media only screen and (max-height:1024px){.my-height[_ngcontent-%COMP%]{min-height:868px;position:relative};}@media only screen and (max-height:978px){.my-height[_ngcontent-%COMP%]{min-height:788px;position:relative};}@media only screen and (min-height:1101px){.my-height[_ngcontent-%COMP%]{min-height:945px;position:relative};}@media only screen and (min-height:768px){.my-height[_ngcontent-%COMP%]{min-height:612px;position:relative};}@media only screen and (min-height:625px){.my-height[_ngcontent-%COMP%]{min-height:470px;position:relative};}@media only screen and (min-height:694px){.my-height[_ngcontent-%COMP%]{min-height:539px;position:relative};}@media only screen and (min-height:781px){.my-height[_ngcontent-%COMP%]{min-height:625px;position:relative};}.my-vertical[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;width:100%;transform:translate(-50%,-50%)}.my-bg-success[_ngcontent-%COMP%]{background-color:#c3e6cb}.my-bg-warning[_ngcontent-%COMP%]{background-color:#ffeeba}.my-bg-primary[_ngcontent-%COMP%]{background-color:#b8daff}"]}),Ss),Cs=[{path:"",children:[{path:"todolist",data:{title:"todolist",breadcrumb:"Todolist"},children:[{path:"",component:uc},{path:"stir",component:rs,data:{title:"Stir",breadcrumb:"Stir"}},{path:"stir/:glueName",component:rs,data:{title:"Stir",breadcrumb:"Stir"}},{path:"history/:glueID",component:Sc,data:{title:"History",breadcrumb:"History"}}]},{path:"todolist-2",data:{title:"todolist-2",breadcrumb:"To Do List 2"},children:[{path:"",component:Co},{path:":tab",component:Co},{path:":tab/:glueName",component:Co},{path:";tab=:tab;glueName=:glueName",component:Co},{path:"stir",component:rs,data:{title:"Stir",breadcrumb:"Stir"}},{path:"stir/:tab/:mixingInfoID/:glueName",component:rs,data:{title:"Stir",breadcrumb:"Stir"}},{path:"mixing",component:xs,data:{title:"Mixing",breadcrumb:"Mixing"}},{path:"mixing/:tab/:glueID/:estimatedStartTime/:estimatedFinishTime/:stdcon",component:xs,data:{title:"Mixing",breadcrumb:"Mixing"}},{path:"shake",component:Ec,data:{title:"Shake",breadcrumb:"Shake"}},{path:"shake/:tab/:mixingInfoID",component:Ec,data:{title:"Shake",breadcrumb:"Shake"}},{path:"dispatch",component:Ui,data:{title:"dispatch",breadcrumb:"Dispatch"}},{path:"dispatch/:mixingInfoID",component:Ui,data:{title:"dispatch",breadcrumb:"Dispatch"}}]},{path:"workplan",component:De,data:{title:"Workplan",breadcrumb:"Work Plan"}},{path:"output-quantity",component:Ke,data:{title:"Output Quantity",breadcrumb:"Output Quantity"}},{path:"incoming",component:gt,data:{title:"Stock",breadcrumb:"Stock"}}]}],ws=((ks=function t(){i(this,t)}).\u0275mod=E.Kb({type:ks}),ks.\u0275inj=E.Jb({factory:function(t){return new(t||ks)},imports:[[B.f.forChild(Cs)],B.f]}),ks);function Is(t){return new y.a(t,"./assets/i18n/",".json")}var Ts=localStorage.getItem("lang");Object(C.bb)(o("2PVe"),o("GFvd"),o("GFWS"),o("0zpJ"),o("LRxf")),Object(C.bb)(o("2PVe"),o("oP7I"),o("Joj5"),o("3JeS"),o("LRxf")),ys="vi"===Ts?Ts:"en";var Rs,Ms=((Rs=function t(){i(this,t),"vi"===Ts?(ys="vi",setTimeout(function(){C.p.load(o("+7Wi")),Object(C.nb)("vi")})):(ys="en",setTimeout(function(){C.p.load(o("oyrQ")),Object(C.nb)("en")}))}).\u0275mod=E.Kb({type:Rs}),Rs.\u0275inj=E.Jb({factory:function(t){return new(t||Rs)},providers:[s.d],imports:[[M.b,f.c,s.b,r.c,ws,r.m,l.b,u.a,d.d,h.c,b.b,b.a,b.e,g.a,g.d,g.c,f.j,m.a,p.b,I.h,x.i,f.h,k.c,R.b,D.a,p.d,T.a,w.d,f.f,d.f,S.b.forChild({loader:{provide:S.a,useFactory:Is,deps:[v.b]},defaultLanguage:ys})]]}),Rs)}}])}();